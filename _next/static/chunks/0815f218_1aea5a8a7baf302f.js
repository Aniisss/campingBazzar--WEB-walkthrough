"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7873],{25794:function(t,e,n){let r,o,a,l,s,c,d,u;n.d(e,{$U:function(){return yV},CG:function(){return yH},Fq:function(){return lN},HD:function(){return yG},JR:function(){return yX},Ju:function(){return yW},PC:function(){return yq},PD:function(){return yO},Pl:function(){return yQ},Px:function(){return yZ},SI:function(){return y1},Tx:function(){return yU},UJ:function(){return yD},YK:function(){return yJ},Z$:function(){return gj},bM:function(){return y0},dS:function(){return gC},fC:function(){return gM},fZ:function(){return y_},hK:function(){return yK},ni:function(){return yY},se:function(){return y2},vS:function(){return yj},wh:function(){return y4},z9:function(){return yz},zv:function(){return yN}});let h=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"},{value:65506,name:"app2"}];var p=t=>{let e,n;if(65496!==t.getUint16(0))return;let r=t.byteLength,o=2;for(;o<r&&255===t.getUint8(o);){e=t.getUint16(o);let r=h.find(n=>n.value===e&&(!n.subvalue||n.subvalue===t.getUint16(o+2+2)));if(r){let{name:e}=r;n||(n={}),n[e]||(n[e]={offset:o,size:t.getUint16(o+2)})}if(65498===e)break;o+=2+t.getUint16(o+2)}return n},g=(t,e)=>{if(65505!==t.getUint16(e))return;let n=t.getUint16(e+2);if(e+=4,1165519206!==t.getUint32(e))return;e+=6;let r=t.getUint16(e);if(18761!==r&&19789!==r)return;let o=18761===r;if(e+=2,42!==t.getUint16(e,o))return;e+=t.getUint32(e+2,o);let a=r=>{let a=[],l=e,s=Math.min(t.byteLength,e+n-16);for(;l<s;l+=12){let e=l;t.getUint16(e,o)===r&&a.push(e)}return a};return{read:e=>{let n=a(e);if(n.length)return t.getUint16(n[0]+8,o)},write:(e,n)=>{let r=a(e);return!!r.length&&(r.forEach(e=>t.setUint16(e+8,n,o)),!0)}}},m=(t,e,n)=>{if(!t)return;let r=new DataView(t),o=p(r);if(!o||!o.exif)return;let a=g(r,o.exif.offset);if(a)return void 0===n?a.read(e):a.write(e,n)};let f="__pqina_webapi__";var $=t=>window[f]?window[f][t]:window[t],y=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n]},x=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((r,o)=>{let{dataFormat:a="readAsArrayBuffer"}=n,l=new($("FileReader"));l.onload=()=>r(l.result),l.onerror=()=>o(l.error),l.onprogress=e,l[a](t)})},b=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,t.size],n=arguments.length>2?arguments[2]:void 0;return await x(t.slice(...e),n)};let v=null;var w=()=>(null===v&&(v=void 0!==window.document),v);let S=null;var k=()=>new Promise(t=>{if(null===S){let e=w()?new Image:{};e.onload=()=>{S=1===e.naturalWidth,e=void 0,t(S)},e.src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";return}return t(S)}),C=t=>t.getContext("2d").getImageData(0,0,t.width,t.height),M=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=document.createElement(t),o=Object.getOwnPropertyDescriptors(r.__proto__);for(let t in e)"style"===t?r.style.cssText=e[t]:o[t]&&o[t].set||/textContent|innerHTML/.test(t)||"function"==typeof e[t]?r[t]=e[t]:r.setAttribute(t,e[t]);return n.forEach(t=>r.appendChild(t)),r};let T={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var P=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return -1===n&&(n=1),T[n](t,e)},R=t=>{t.width=1,t.height=1;let e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},A=t=>"data"in t,E=t=>w()?RegExp(t).test(window.navigator.userAgent):void 0;let I=null;var L=()=>(null===I&&(I=E(/Android/)),I),F=(t,e)=>{let n=M("canvas",{width:t.width,height:t.height});return n.getContext("2d",e).drawImage(t,0,0),n},B=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=await k(),[r,o]=n||e<5?[t.width,t.height]:[t.height,t.width],a=M("canvas",{width:r,height:o}),l=a.getContext("2d",{willReadFrequently:!0});if(A(t)&&!n&&e>1){let e=M("canvas",{width:t.width,height:t.height});e.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),t=e}if(!n&&e>1&&l.transform.apply(l,P(t.width,t.height,e)),A(t)){if(l.putImageData(t,0,0),L())return F(a)}else l.drawImage(t,0,0);return t instanceof HTMLCanvasElement&&R(t),a},D=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1===e?t:await k()?t:C(await B(t,e))},O=t=>"object"==typeof t;let z=t=>t instanceof HTMLElement?t:O(t)?_(t):t,_=t=>{let e;return Array.isArray(t)?(e=[],t.forEach((t,n)=>{e[n]=z(t)})):(e={},null!==t&&Object.keys(t).forEach(n=>{let r=t[n];e[n]=z(r)})),e};var N=t=>"string"==typeof t,W=t=>"function"==typeof t,j=(t,e)=>{let{width:n,height:r,canvasMemoryLimit:o,contextOptions:a}=e,l=n||t.naturalWidth,s=r||t.naturalHeight;l||s||(l=300,s=150);let c=l*s;if(o&&c>o){let t=Math.sqrt(o)/Math.sqrt(c);l=Math.floor(l*t),s=Math.floor(s*t)}let d=M("canvas");return d.width=l,d.height=s,d.getContext("2d",a).drawImage(t,0,0,l,s),d},H=(t,e)=>new Promise((n,r)=>{let o=()=>n(j(t,e));t.complete&&t.width?o():(t.onload=o,t.onerror=()=>r(Error("Failed to load image")))}),V=async(t,e)=>{let n=M("img",{src:URL.createObjectURL(t)}),r=await H(n,e);return URL.revokeObjectURL(n.src),r},U=()=>"createImageBitmap"in window,G=()=>"OffscreenCanvas"in window,X=t=>/svg/.test(t.type),Z=()=>Math.random().toString(36).substring(2,9),Y=t=>new Blob(["(","function"==typeof t?t.toString():t,")()"],{type:"application/javascript"});let q=t=>"function () {self.onmessage = function (message) {(".concat(t.toString(),").apply(null, message.data.content.concat([function (err, response) {\n    response = response || {};\n    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];\n    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);\n}]))}}"),K=new Map;var J=(t,e,n)=>new Promise((r,o)=>{let a=t.toString(),l=K.get(a);if(!l){let e=q(t),n=URL.createObjectURL(Y(e)),r=new Map,o=new Worker(n);l={url:n,worker:o,messages:r,terminationTimeout:void 0,terminate:()=>{clearTimeout(l.terminationTimeout),l.worker.terminate(),URL.revokeObjectURL(n),K.delete(a)}},o.onmessage=function(t){let{id:e,content:n,error:o}=t.data;if(clearTimeout(l.terminationTimeout),l.terminationTimeout=setTimeout(()=>{r.size>0||l.terminate()},500),!r.has(e))return;let a=r.get(e);r.delete(e),null!=o?a.reject(o):a.resolve(n)},K.set(a,l)}let s=Z();l.messages.set(s,{resolve:r,reject:o}),l.worker.postMessage({id:s,content:e},n)});let Q=null;var tt=()=>(null===Q&&(Q=E(/Firefox/)),Q);let te=async(t,e)=>{let n=await V(t,{canvasMemoryLimit:e,contextOptions:{willReadFrequently:!0}}),r=C(n);return R(n),r};var ti=async(t,e)=>{let n;if(L()&&!tt())return await te(t,e);if(U()&&!X(t)&&G())try{n=await J((t,e,n)=>{createImageBitmap(t).then(t=>{let r=t.width,o=t.height,a=r*o;if(e&&a>e){let t=Math.sqrt(e)/Math.sqrt(a);r=Math.floor(r*t),o=Math.floor(o*t)}let l=new OffscreenCanvas(r,o),s=l.getContext("2d",{willReadFrequently:!0});s.drawImage(t,0,0,r,o);let c=s.getImageData(0,0,l.width,l.height);n(null,c)}).catch(t=>{n(t)})},[t,e])}catch(t){}return n&&n.width?n:await te(t,e)},tn=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new Promise((r,o)=>{try{t.toBlob(t=>{if(!t)return o(Error("Failed to create blob"));r(t)},e,n)}catch(t){o(t)}})},tr=async(t,e,n)=>{let r=await B(t),o=await tn(r,e,n);return R(r),o},to=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,t.size];return e?new Blob([e,t.slice(...n)],{type:t.type}):t};let ta={matroska:"mkv"};var tl=t=>{let e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){let[,e=""]=t.split("/x-");return ta[e]}return e},ts=t=>t.substring(0,t.lastIndexOf("."))||t,tc=t=>t.split(".").pop();let td=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var tu=t=>td.test(t)?"image/"+(/jfif|jif|jpe|jpg/.test(t)?"jpeg":"svg"===t?"svg+xml":t):"",th=t=>t&&tu(tc(t).toLowerCase()),tp=(t,e)=>{let n=th(t);if(n===e)return t;let r=tl(e)||n;return"".concat(ts(t),".").concat(r)},tg=(t,e,n)=>{let r=new Date().getTime(),o=t.type.length&&!/null|text/.test(t.type),a=o?t.type:n,l=tp(e,a);try{return new($("File"))([t],l,{lastModified:r,type:o?t.type:a})}catch(n){let e=o?t.slice():t.slice(0,t.size,a);return e.lastModified=r,e.name=l,e}},tm=(t,e)=>t/e,tf=t=>t;let t$=Math.PI,ty=Math.PI/2,tx=ty/2;var tb=t=>{let e=Math.abs(t)%Math.PI;return e>tx&&e<Math.PI-tx};let tv={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:tw,Right:tS,Bottom:tk,Left:tC,TopLeft:tM,TopRight:tT,BottomRight:tP,BottomLeft:tR}=tv;var tA={[tw]:[.5,0],[tS]:[1,.5],[tk]:[.5,1],[tC]:[0,.5],[tM]:[0,0],[tT]:[1,0],[tP]:[1,1],[tR]:[0,1]},tE=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return parseFloat(t.toFixed(e))};let tI=(t,e,n)=>n+(t-n)*e,tL=t=>({x:t.x+.5*t.width,y:t.y+.5*t.height,rx:.5*t.width,ry:.5*t.height}),tF=()=>tB(0,0),tB=(t,e)=>({x:t,y:e}),tD=t=>tB(t.width,t.height),tO=t=>tB(t.x,t.y),tz=t=>tB(t.pageX,t.pageY),t_=t=>tB(t.offsetX,t.offsetY),tN=t=>tB(t.x,t.y),tW=(t,e,n)=>(t.x=e,t.y=n,t),tj=t=>(t.x=-t.x,t.y=-t.y,t),tH=t=>{let e=t.x;return t.x=-t.y,t.y=e,t},tV=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tF(),r=Math.cos(e),o=Math.sin(e),a=t.x-n.x,l=t.y-n.y;return t.x=n.x+r*a-o*l,t.y=n.y+o*a+r*l,t},tU=t=>Math.sqrt(t.x*t.x+t.y*t.y),tG=t=>{let e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?tF():(t.x/=e,t.y/=e,t)},tX=t=>Math.atan2(t.y,t.x),tZ=(t,e)=>Math.atan2(e.y-t.y,e.x-t.x),tY=(t,e)=>t.x===e.x&&t.y===e.y,tq=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),tK=(t,e)=>t.x>=0&&t.y>=0&&t.x<=e.width&&t.y<=e.height,tJ=(t,e)=>(t.x+=e.x,t.y+=e.y,t),tQ=(t,e)=>(t.x-=e.x,t.y-=e.y,t),t1=(t,e)=>(t.x/=e,t.y/=e,t),t0=(t,e)=>(t.x*=e,t.y*=e,t),t2=(t,e)=>t.x*e.x+t.y*e.y,t4=(t,e)=>t.x*e.y-t.y*e.x,t5=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tF(),n=t.x-e.x,r=t.y-e.y;return n*n+r*r},t3=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tF();return Math.sqrt(t5(t,e))},t6=(t,e,n)=>(t.x=tI(t.x,e,n.x),t.y=tI(t.y,e,n.y),t),t8=t=>{let e=0,n=0;return t.forEach(t=>{e+=t.x,n+=t.y}),tB(e/t.length,n/t.length)},t7=(t,e,n,r,o)=>(t.forEach(t=>{t.x=e?r-(t.x-r):t.x,t.y=n?o-(t.y-o):t.y}),t),t9=(t,e,n,r)=>{let o=Math.sin(e),a=Math.cos(e);return t.forEach(t=>{t.x-=n,t.y-=r;let e=t.x*a-t.y*o,l=t.x*o+t.y*a;t.x=n+e,t.y=r+l}),t},et=(t,e)=>({width:t,height:e}),ee=t=>et(t.width,t.height),ei=t=>et(t.width,t.height),en=t=>et(t.width,t.height),er=t=>et(t[0],t[1]),eo=t=>et(t.naturalWidth,t.naturalHeight),ea=t=>/img/i.test(t.nodeName)?eo(t):ei(t),el=(t,e)=>et(t,e),es=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tf;return n(t.width)===n(e.width)&&n(t.height)===n(e.height)},ec=(t,e)=>(t.width*=e,t.height*=e,t),ed=t=>tB(.5*t.width,.5*t.height),eu=(t,e)=>{let n=Math.abs(e),r=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),a=r*t.width+o*t.height,l=o*t.width+r*t.height;return t.width=a,t.height=l,t},eh=(t,e)=>{let n=t.width,r=t.height;return tb(e)&&(t.width=r,t.height=n),t},ep=(t,e)=>t.width>=e.width&&t.height>=e.height,eg=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),em=t=>Math.sqrt(t.width*t.width+t.height*t.height),ef=(t,e)=>el(Math.min(t.width,e.width),Math.min(t.height,e.height)),e$=(t,e)=>({start:t,end:e}),ey=t=>e$(tN(t.start),tN(t.end)),ex=(t,e)=>{if(0===e)return t;let n=t0(tG(tB(t.start.x-t.end.x,t.start.y-t.end.y)),e);return t.start.x+=n.x,t.start.y+=n.y,t.end.x-=n.x,t.end.y-=n.y,t},eb=(t,e)=>{if(0===e)return t;let n=t0(tG(tB(t.start.x-t.end.x,t.start.y-t.end.y)),e);return t.end.x+=n.x,t.end.y+=n.y,t},ev=(t,e)=>{let{start:n,end:r}=t;if(0===e)return[tB(n.x,n.y),tB(n.x,n.y),tB(r.x,r.y),tB(r.x,r.y)];let o=Math.atan2(r.y-n.y,r.x-n.x),a=Math.sin(o)*e,l=Math.cos(o)*e;return[tB(a+n.x,-l+n.y),tB(-a+n.x,l+n.y),tB(-a+r.x,l+r.y),tB(a+r.x,-l+r.y)]},ew=[tB(-1,-1),tB(-1,1),tB(1,1),tB(1,-1)],eS=(t,e,n,r)=>({x:t,y:e,width:n,height:r}),ek=t=>eS(t.x,t.y,t.width,t.height),eC=()=>eS(0,0,0,0),eM=(t,e)=>eS(0,0,t,e),eT=t=>eS(0,0,t.width,t.height),eP=t=>eS(t[3],t[0],t[1]-t[3],t[2]-t[0]),eR=t=>eS(t.x||0,t.y||0,t.width||0,t.height||0),eA=t=>{let e=t[0].x,n=t[0].x,r=t[0].y,o=t[0].y;return t.forEach(t=>{e=Math.min(e,t.x),n=Math.max(n,t.x),r=Math.min(r,t.y),o=Math.max(o,t.y)}),eS(e,r,n-e,o-r)},eE=t=>eL(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),eI=(t,e)=>eS(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),eL=(t,e,n,r)=>eS(t,e,n,r),eF=t=>tB(t.x+.5*t.width,t.y+.5*t.height),eB=(t,e)=>(t.x+=e.x,t.y+=e.y,t),eD=(t,e,n)=>(n=n||eF(t),t.x=e*(t.x-n.x)+n.x,t.y=e*(t.y-n.y)+n.y,t.width=e*t.width,t.height=e*t.height,t),eO=(t,e,n,r)=>{let o=(r.x-t.x)/t.width,a=(r.y-t.y)/t.height,l=Math.max(e.width,t.width),s=Math.max(e.height,t.height);return l=Math.min(n.width,l),s=Math.min(n.height,s),t.x=r.x-o*l,t.y=r.y-a*s,t.width=l,t.height=s,t},ez=(t,e)=>{let[n,r]=tA[e],o=n*t.width,a=r*t.height;return tB(t.x+o,t.y+a)},e_=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),eN=(t,e)=>(t.x/=e,t.y/=e,t.width/=e,t.height/=e,t),eW=(t,e)=>(t.x-=e.x,t.y-=e.y,t.width-=e.width,t.height-=e.height,t),ej=(t,e)=>(t.x+=e.x,t.y+=e.y,t.width+=e.width,t.height+=e.height,t),eH=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tf;return n(t.x)===n(e.x)&&n(t.y)===n(e.y)&&n(t.width)===n(e.width)&&n(t.height)===n(e.height)},eV=t=>tm(t.width,t.height),eU=(t,e,n,r,o)=>(t.x=e,t.y=n,t.width=r,t.height=o,t),eG=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),eX=(t,e,n)=>(n||(n=eF(t)),e0(t).map(t=>tV(t,e,n))),eZ=(t,e)=>eS(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),eY=(t,e)=>!(e.x<t.x)&&!(e.y<t.y)&&!(e.x>t.x+t.width)&&!(e.y>t.y+t.height),eq=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tF();if(0===t.width||0===t.height)return eC();let r=eV(t);e||(e=r);let o=t.width,a=t.height;return e>r?o=a*e:a=o/e,eS(n.x+(t.width-o)*.5,n.y+(t.height-a)*.5,o,a)},eK=(t,e,n)=>{let[r,o,a,l]=e1(t),s={...t};if(r<e.y&&(t.height=t.height-(e.y-r),t.y=e.y),o>e.x+e.width&&(t.width=e.x+e.width-t.x),a>e.y+e.height&&(t.height=e.y+e.height-t.y),l<e.x&&(t.width=t.width-(e.x-l),t.x=e.x),n){let e=Math.min(1,s.width/t.width,s.height/t.height);return e_(s,e)}return t},eJ=(t,e)=>{let[n,r,o,a]=e1(t);return n<e.y&&(t.y=Math.max(e.y,t.y)),r>e.width&&(t.x=e.width-t.width),o>e.height&&(t.y=e.height-t.height),a<e.x&&(t.x=Math.max(e.x,t.x)),t},eQ=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eV(t),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tF();if(0===t.width||0===t.height)return eC();let r=t.width,o=r/e;return o>t.height&&(r=(o=t.height)*e),eS(n.x+(t.width-r)*.5,n.y+(t.height-o)*.5,r,o)},e1=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],e0=t=>[tB(t.x,t.y),tB(t.x+t.width,t.y),tB(t.x+t.width,t.y+t.height),tB(t.x,t.y+t.height)],e2=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},e4=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eF(t);return e0(t).map((t,r)=>{let o=ew[r];return tB(tI(t.x,1+o.x*e.x,n.x),tI(t.y,1+o.y*e.y,n.y))})},e5=t=>(t.x=0,t.y=0,t),e3=t=>{let e,n,r;let o=t[0];t=tY(o,t[t.length-1])?t:[...t,o];let a=o.x,l=o.y,s=0,c=0,d=0,u=0,h=t.length;for(;c<h;c++)e=t[c],n=t[c+1>h-1?0:c+1],s+=r=(e.y-l)*(n.x-a)-(n.y-l)*(e.x-a),d+=(e.x+n.x-2*a)*r,u+=(e.y+n.y-2*l)*r;return tB(a+d/(r=3*s),l+u/r)},e6=(t,e)=>e8(t.start,t.end,e.start,e.end),e8=(t,e,n,r)=>{let o=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y);if(0===o)return;let a=((r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x))/o,l=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/o;if(!(a<0)&&!(a>1)&&!(l<0)&&!(l>1))return tB(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))},e7=function(t,e){let{ignoreIdenticalLines:n=!1,breakOnIntersection:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.length,a=[];for(let l=0;l<o-1;l++){if(n&&(tY(t.start,e[l])||tY(t.start,e[l+1])||tY(t.end,e[l])||tY(t.end,e[l+1])))continue;let o=e8(t.start,t.end,e[l],e[l+1]);if(o){if(r)return[o];a.push(o)}}return a.length?a:void 0},e9=(t,e)=>{let n=0,r=0,o=!1,a=e.length;for(n=0,r=a-1;n<a;r=n++)e[n].y>t.y!=e[r].y>t.y&&t.x<(e[r].x-e[n].x)*(t.y-e[n].y)/(e[r].y-e[n].y)+e[n].x&&(o=!o);return o},it=(t,e)=>!!(t.find(t=>e9(t,e))||e.find(e=>e9(e,t))),ie=t=>{let e=[];for(let n=0;n<t.length;n++){let r=n+1;r===t.length&&(r=0),e.push(e$(tN(t[n]),tN(t[r])))}return e},ii=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ie(t).map(t=>ex(t,e))},ir=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:12,s=[];for(let r=0;r<l;r++)s.push(tB(t.x+e*Math.cos(2*Math.PI*r/l),t.y+n*Math.sin(2*Math.PI*r/l)));return(o||a)&&t7(s,o,a,t.x,t.y),r&&t9(s,r,t.x,t.y),s},io=(t,e,n,r)=>{let o=tB(t.x-n.x,t.y-n.y),a=tB(r.x-n.x,r.y-n.y),l=t2(a,a),s=t2(o,a)/l;s=(s=s<0?0:s)>1?1:s;let c=tB(a.x*s+n.x-t.x,a.y*s+n.y-t.y);return t2(c,c)<=e*e},ia=(t,e,n)=>{let r=n.length;for(let o=0;o<r-1;o++)if(io(t,e,n[o],n[o+1]))return!0;return!1},il=(t,e,n)=>!!(e9(t,n)||ia(t,e,n))||io(t,e,n[0],n[n.length-1]),is=(t,e,n,r,o,a)=>il(t,e,ir(tB(n.x,n.y),n.rx,n.ry,r,o,a,12)),ic=(t,e,n,r,o)=>il(t,e,eX(n,r,o||eF(n)));var id=(t,e)=>{let n=eT(t),r=eF(n);return e5(eA(eX(n,e,r)))},iu=(t,e)=>t instanceof HTMLElement&&(!e||RegExp("^".concat(e,"$"),"i").test(t.nodeName)),ih=t=>t instanceof File,ip=async(t,e,n)=>tg(await tn(t,e,n),"canvas"),ig=t=>t.split("/").pop().split(/\?|\#/).shift();let im=w()&&Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);void 0!==e&&t.append(e)},i$=w()&&M("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});var iy=t=>(im(i$,t),i$.parentNode||document.body.append(i$),clearTimeout(r),r=setTimeout(()=>{i$.remove()},500),t);let ix=null;var ib=()=>(null===ix&&(ix=w()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),ix),iv=t=>new Promise((e,n)=>{let r=!1;!t.parentNode&&ib()&&(r=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",iy(t));let o=()=>{let n=t.naturalWidth,o=t.naturalHeight;n&&o&&(r&&t.remove(),clearInterval(a),e({width:n,height:o}))};t.onerror=t=>{clearInterval(a),n(t)};let a=setInterval(o,1);o()}),iw=t=>new Promise((e,n)=>{let r=()=>{e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return r();t.onloadedmetadata=r,t.onerror=()=>n(t.error)}),iS=t=>/^image/.test(t.type),ik=t=>new Promise(e=>{let n=N(t)?t:URL.createObjectURL(t),r=()=>{let t=new Image;t.src=n,e(t)};if(t instanceof Blob&&iS(t))return r();let o=document.createElement("video");o.preload="metadata",o.onloadedmetadata=()=>e(o),o.onerror=r,o.src=n}),iC=t=>"VIDEO"===t.nodeName,iM=async t=>{let e,n;e=t.src?t:await ik(t);try{n=iC(e)?await iw(e):await iv(e)}finally{ih(t)&&URL.revokeObjectURL(e.src)}return n};let iT=t=>new Promise((e,n)=>{if(t.complete)return e(t);t.onload=()=>e(t),t.onerror=()=>n(Error("Failed to load image"))});var iP=async t=>{let e=await iM(t),n=await iT(t),r=M("canvas",e);return r.getContext("2d",{willReadFrequently:!0}).drawImage(n,0,0),tg(await tn(r),ig(n.src))},iR=t=>/^data:/.test(t),iA=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return new($("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e})},iE=async function(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-uri",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;r(iA(0));let o=await fetch(t);r(iA(.33));let a=await o.blob();iS(a)||(e="image/".concat(t.includes(",/9j/")?"jpeg":"png")),r(iA(.66));let l=tg(a,n,e);return r(iA(1)),l},iI=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t=>t;return t.getAllResponseHeaders().indexOf(e)>=0?n(t.getResponseHeader(e)):void 0},iL=t=>{if(!t)return null;let e=t.split(/filename=|filename\*=.+''/).splice(1).map(t=>t.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(t=>t.length);return e.length?decodeURI(e[e.length-1]):null};class iF extends Error{constructor(t,e,n){super(t),this.name="EditorError",this.code=e,this.metadata=n}}var iB=(t,e)=>{let{headers:n={},credentials:r}=e||{};Object.entries(n).forEach(e=>{let[n,r]=e;return t.setRequestHeader(n,r)}),r&&(t.withCredentials="omit"!==r)},iD=(t,e,n)=>new Promise((r,o)=>{let a=()=>o(new iF("Error fetching image","URL_REQUEST",l)),l=new XMLHttpRequest;l.onprogress=e,l.onerror=a,l.onload=()=>{if(!l.response||l.status>=300||l.status<200)return a();let e=iI(l,"Content-Type"),n=iI(l,"Content-Disposition",iL)||ig(t);r(tg(l.response,n,e||th(n)))};let{willRequest:s}=n;Promise.resolve(s&&s(t,{resourceType:"image"})).then(e=>{if(!1===e)return o("Image load rejected");l.open("GET",t,!0),iB(l,e),l.responseType="blob",l.send()}).catch(console.error)}),iO=(t,e,n)=>iR(t)?iE(t,void 0,e):iD(t,e,n),iz=t=>t instanceof Blob&&!(t instanceof File),i_=t=>"close"in t,iN=async(t,e,n)=>{if(ih(t)||iz(t))return t;if(N(t))return await iO(t,e,n);if(iu(t,"canvas"))return await ip(t);if(iu(t,"img"))return await iP(t);if(A(t)||i_(t))return await ip(await B(t));throw new iF("Invalid image source","invalid-image-source")};let iW=null;var ij=()=>(null===iW&&(iW=w()&&/^mac/i.test(navigator.platform)),iW);let iH=null;var iV=()=>(null===iH&&(iH=w()&&(E(/iPhone|iPad|iPod/)||ij()&&navigator.maxTouchPoints>=1)),iH),iU=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return await k()||iV()||e<5?t:el(t.height,t.width)},iG=t=>/jpeg/.test(t.type),iX=t=>"object"==typeof t&&t.constructor==Object,iZ=t=>iX(t)?JSON.stringify(t):t,iY=(t,e,n)=>new Promise((r,o)=>{let{token:a={},beforeSend:l=y,onprogress:s=y}=n;a.cancel=()=>c.abort();let c=new XMLHttpRequest;c.upload.onprogress=s,c.onload=()=>c.status>=200&&c.status<300?r(c):o(c),c.onerror=()=>o(c),c.ontimeout=()=>o(c),c.open("POST",encodeURI(t)),l(c),c.send(e instanceof FormData?e:e.reduce((t,e)=>(t.append(...e.map(iZ)),t),new FormData))}),iq=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return 0===e||(t.translate(n.x,n.y),t.rotate(e),t.translate(-n.x,-n.y)),t},iK=(t,e,n)=>(t.translate(e,n),t),iJ=(t,e,n)=>(t.scale(e,n),t),iQ=async function(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{flipX:r,flipY:o,rotation:a,crop:l}=n,s=ei(t),c=r||o,d=!!a,u=l&&(l.x||l.y||l.width||l.height),h=u&&eH(l,eT(s)),p=u&&!h;if(!c&&!d&&!p)return t;let g=M("canvas",{width:t.width,height:t.height});if(g.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),c){let t=M("canvas",{width:g.width,height:g.height}).getContext("2d",{willReadFrequently:!0});iJ(t,r?-1:1,o?-1:1),t.drawImage(g,r?-g.width:0,o?-g.height:0),t.restore(),R(g),g=t.canvas}if(d){let t=eg(en(eA(eX(eR(g),a))),Math.floor),e=M("canvas",{width:l.width,height:l.height}).getContext("2d",{willReadFrequently:!0});iK(e,-l.x,-l.y),iq(e,a,ed(t)),e.drawImage(g,(t.width-g.width)*.5,(t.height-g.height)*.5),e.restore(),R(g),g=e.canvas}else if(p)return e=g.getContext("2d",{willReadFrequently:!0}).getImageData(l.x,l.y,l.width,l.height),R(g),e;return e=g.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,g.width,g.height),R(g),e},i1=(t,e)=>{let{imageData:n,width:r,height:o}=t,a=n.width,l=n.height,s=Math.round(r),c=Math.round(o),d=n.data,u=new Uint8ClampedArray(s*c*4),h=a/s,p=l/c,g=Math.ceil(.5*h),m=Math.ceil(.5*p);for(let t=0;t<c;t++)for(let e=0;e<s;e++){let n=(e+t*s)*4,r=0,o=0,l=0,c=0,f=0,$=0,y=0,x=(t+.5)*p;for(let n=Math.floor(t*p);n<(t+1)*p;n++){let t=Math.abs(x-(n+.5))/m,s=(e+.5)*h,u=t*t;for(let t=Math.floor(e*h);t<(e+1)*h;t++){let e=Math.abs(s-(t+.5))/g,h=Math.sqrt(u+e*e);if(h<-1||h>1||(r=2*h*h*h-3*h*h+1)<=0)continue;let p=d[(e=4*(t+n*a))+3];y+=r*p,l+=r,p<255&&(r=r*p/250),c+=r*d[e],f+=r*d[e+1],$+=r*d[e+2],o+=r}}u[n]=c/o,u[n+1]=f/o,u[n+2]=$/o,u[n+3]=y/l}e(null,{data:u,width:s,height:c})},i0=t=>{let e;if(t instanceof ImageData)return t;try{e=new ImageData(t.width,t.height)}catch(n){e=M("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},i2=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,{width:r,height:o,fit:a,upscale:l}=e;if(!r&&!o)return t;let s=r,c=o;if(r?o||(c=r):s=o,"force"!==a){let e=s/t.width,n=c/t.height,r=1;if("cover"===a?r=Math.max(e,n):"contain"===a&&(r=Math.min(e,n)),r>1&&!1===l)return t;s=Math.round(t.width*r),c=Math.round(t.height*r)}return(s=Math.max(s,1),c=Math.max(c,1),t.width===s&&t.height===c)?t:n?n(t,s,c):i0(t=await J(i1,[{imageData:t,width:s,height:c}],[t.data.buffer]))},i4=(t,e)=>{let{imageData:n,matrix:r}=t;if(!r)return e(null,n);let o=new Uint8ClampedArray(n.width*n.height*4),a=n.data,l=a.length,s=r[0],c=r[1],d=r[2],u=r[3],h=r[4],p=r[5],g=r[6],m=r[7],f=r[8],$=r[9],y=r[10],x=r[11],b=r[12],v=r[13],w=r[14],S=r[15],k=r[16],C=r[17],M=r[18],T=r[19],P=0,R=0,A=0,E=0,I=0,L=0,F=0,B=0,D=0,O=0,z=0,_=0;for(;P<l;P+=4)R=a[P]/255,L=R*s+(A=a[P+1]/255)*c+(E=a[P+2]/255)*d+(I=a[P+3]/255)*u+h,F=R*p+A*g+E*m+I*f+$,B=R*y+A*x+E*b+I*v+w,O=Math.max(0,L*(D=R*S+A*k+E*C+I*M+T))+(1-D),z=Math.max(0,F*D)+(1-D),_=Math.max(0,B*D)+(1-D),o[P]=255*Math.max(0,Math.min(1,O)),o[P+1]=255*Math.max(0,Math.min(1,z)),o[P+2]=255*Math.max(0,Math.min(1,_)),o[P+3]=255*I;e(null,{data:o,width:n.width,height:n.height})},i5=(t,e)=>{let{imageData:n,matrix:r}=t;if(!r)return e(null,n);let o=r.reduce((t,e)=>t+e);o=o<=0?1:o;let a=n.width,l=n.height,s=n.data,c=0,d=0,u=0,h=Math.round(Math.sqrt(r.length)),p=Math.floor(h/2),g=0,m=0,f=0,$=0,y=0,x=0,b=0,v=0,w=0,S=0,k=new Uint8ClampedArray(a*l*4);for(u=0;u<l;u++)for(d=0;d<a;d++){for(x=0,g=0,m=0,f=0,$=0;x<h;x++)for(y=0;y<h;y++)b=u+x-p,v=d+y-p,b<0&&(b=l-1),b>=l&&(b=0),v<0&&(v=a-1),v>=a&&(v=0),w=(b*a+v)*4,S=r[x*h+y],g+=s[w]*S,m+=s[w+1]*S,f+=s[w+2]*S,$+=s[w+3]*S;k[c]=g/o,k[c+1]=m/o,k[c+2]=f/o,k[c+3]=$/o,c+=4}e(null,{data:k,width:a,height:l})},i3=(t,e)=>{let n,r,o,a,l,s,c,d,u,h,p,{imageData:g,strength:m}=t;if(!m)return e(null,g);let f=new Uint8ClampedArray(g.width*g.height*4),$=g.width,y=g.height,x=g.data,b=(t,e)=>Math.sqrt((n=t-S)*n+(r=e-k)*r),v=0,w=0,S=.5*$,k=.5*y,C=b(0,0),M=(t,e,n,r)=>{s=e[t]/255,c=e[t+1]/255,d=e[t+2]/255,u=e[t+3]/255,p=(h=1-r)*u+r,n[t]=(h*u*s+r*o)/p*255,n[t+1]=(h*u*c+r*a)/p*255,n[t+2]=(h*u*d+r*l)/p*255,n[t+3]=255*p};for(m>0?(o=0,a=0,l=0):(m=Math.abs(m),o=1,a=1,l=1),w=0;w<y;w++)for(v=0;v<$;v++)M((v+w*$)*4,x,f,b(v,w)*m/C);e(null,{data:f,width:g.width,height:g.height})},i6=(t,e)=>{let n,r,o;let{imageData:a,level:l,monochrome:s=!1}=t;if(!l)return e(null,a);let c=new Uint8ClampedArray(a.width*a.height*4),d=a.data,u=d.length,h=0,p=()=>(-1+2*Math.random())*255*l,g=s?()=>{let t=p();return[t,t,t]}:()=>[p(),p(),p()];for(;h<u;h+=4)[n,r,o]=g(),c[h]=d[h]+n,c[h+1]=d[h+1]+r,c[h+2]=d[h+2]+o,c[h+3]=d[h+3];e(null,{data:c,width:a.width,height:a.height})},i8=(t,e)=>{let n,r,o;let{imageData:a,level:l}=t;if(!l)return e(null,a);let s=new Uint8ClampedArray(a.width*a.height*4),c=a.data,d=c.length,u=0;for(;u<d;u+=4)n=c[u]/255,r=c[u+1]/255,o=c[u+2]/255,s[u]=255*Math.pow(n,l),s[u+1]=255*Math.pow(r,l),s[u+2]=255*Math.pow(o,l),s[u+3]=c[u+3];e(null,{data:s,width:a.width,height:a.height})},i7=t=>{let e;let n=t.length,r=n>=20?6:n>=16?5:3;for(let o=0;o<n;o++)if(1===(e=t[o])&&o%r!=0||0!==e&&1!==e)return!1;return!0},i9=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{colorMatrix:n,convolutionMatrix:r,gamma:o,noise:a,vignette:l}=e,s=[];if(r&&s.push([i5,{matrix:r.clarity}]),o>0&&s.push([i8,{level:1/o}]),n&&!i7(n)&&s.push([i4,{matrix:n}]),(a>0||a<0)&&s.push([i6,{level:a}]),(l>0||l<0)&&s.push([i3,{strength:l}]),!s.length)return t;let c=(t,e)=>"(err, imageData) => {\n            (".concat(t[e][0].toString(),")(Object.assign({ imageData: imageData }, filterInstructions[").concat(e,"]), \n                ").concat(t[e+1]?c(t,e+1):"done",")\n        }"),d="function (options, done) {\n        const filterInstructions = options.filterInstructions;\n        const imageData = options.imageData;\n        (".concat(c(s,0),")(null, imageData)\n    }");return i0(t=await J(d,[{imageData:t,filterInstructions:s.map(t=>t[1])}],[t.data.buffer]))},nt=t=>"number"==typeof t,ne=t=>N(t)&&null!==t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g),ni=(t,e)=>t.hasOwnProperty(e),nn=t=>Array.isArray(t),nr=()=>iV()||ij(),no=()=>/^win/i.test(navigator.platform);let na=64,nl=102,ns=112,nc=!1;var nd=(t,e)=>(!nc&&w()&&(no()&&(nl=103),nr()&&(na=63.5,nl=110,ns=123),nc=!0),"<svg".concat(e?' aria-label="'.concat(e,'"'):"",' width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="').concat(na,'" y="').concat(nl,'" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="').concat(ns,'px">').concat(t,"</text></svg>")),nu=t=>"data:image/svg+xml,".concat(t.replace("<","%3C").replace(">","%3E")),nh=t=>t instanceof Blob,np=(t,e)=>"".concat(t/e*100,"%"),ng=t=>"rgba(".concat(Math.round(255*t[0]),", ").concat(Math.round(255*t[1]),", ").concat(Math.round(255*t[2]),", ").concat(nt(t[3])?t[3]:1,")"),nm=t=>Object.values(t).join("_"),nf=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(e=>{setTimeout(e,t)})};let n$=t=>!new Uint32Array(t.getImageData(0,0,t.canvas.width,t.canvas.height).data.buffer).some(t=>0!==t),ny=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=M("canvas",{width:80,height:80}).getContext("2d");return await nf(e),n.drawImage(t,0,0,80,80),!n$(n)||!(e<=256)||await ny(t,e+16)},nx=new Map;var nb=function(t){let{safariCacheKey:e="*"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,r)=>{let o=new Image;o.onerror=()=>r(Error("Failed to load SVG")),o.onload=()=>{if(!ib()||!t.includes("@font-face")||nx.has(e))return n(o);ny(o).then(()=>{nx.set(e,!0),n(o)})},o.src="data:image/svg+xml,"+t})},nv=t=>new Promise((e,n)=>{let r=new FileReader;r.onerror=()=>n(r.error),r.onload=()=>e(r.result),r.readAsDataURL(t)}),nw=()=>{let t=[];return{sub:(e,n)=>(t.push({event:e,callback:n}),()=>t=t.filter(t=>t.event!==e||t.callback!==n)),pub:(e,n)=>{t.filter(t=>t.event===e).forEach(t=>t.callback(n))}}};let nS=function(){let{fontSize:t=16,lineHeight:e=20}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return .5*Math.max(0,t-e)},nk=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split("\n").length},nC=function(t){let{color:e=[0,0,0],fontSize:n=16,fontFamily:r="sans-serif",fontVariant:o="normal",fontWeight:a="normal",fontStyle:l="normal",textAlign:s="left",letterSpacing:c="normal",lineHeight:d=20}=t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"font-size:".concat(n*u,"px;font-style:").concat(l,";font-weight:").concat(a,";font-family:").concat(r,";font-variant:").concat(o,";line-height:").concat(d*u,"px;text-align:").concat(s,";letter-spacing:").concat(nt(c)?c+"px":"normal",";color:").concat(ng(e),";")},nM=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{width:r,height:o,disableNewline:a}=e,l=!r,s=!1===a?nk(t):void 0,c=nS(e)*n;return"max-width:none;min-width:auto;width:".concat(l?"auto":"".concat(r*n,"px"),";height:").concat(o?"".concat(o*n,"px"):"auto",";margin-top:0;margin-bottom:0;padding-top:").concat(c,"px;word-break:").concat(l?"normal":"break-word",";word-wrap:normal;white-space:").concat(l&&!s?"nowrap":"pre-line",";")},nT=new Map,nP=t=>{let e=[];for(let n of Array.from(t.childNodes))n.nodeType===Node.TEXT_NODE?e.push(nE(n)):e.push(...nP(n));return e},nR="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",nA=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,{width:n=0,height:r="auto",fontSize:o,fontFamily:a,lineHeight:l,fontWeight:s,fontStyle:c,fontVariant:d,letterSpacing:u}=e,h=nm({text:t,fontFamily:a,fontWeight:s,fontStyle:c,fontVariant:d,fontSize:o,lineHeight:l,letterSpacing:u,width:n,height:r}),p=nT.get(h);if(p)return p;let g=1;o>1e3&&tt()&&(g=o/1e3,o=1e3,l*=g);let m=iy(M("pre",{contenteditable:"true",spellcheck:"false",style:"".concat(nR).concat(nC({fontFamily:a,fontWeight:s,fontStyle:c,fontVariant:d,fontSize:o,letterSpacing:u,lineHeight:l}),";").concat(nM(t,e),'"'),innerHTML:t})),f=m.getBoundingClientRect();return p={signature:nP(m).flat().map(t=>t.text).join("_;_"),textSize:eg(ei(f),t=>Math.ceil(t*g))},nT.set(h,p),m.remove(),p},nE=t=>{let e=t.nodeValue;if(!e)return[];let n=e.length,r=document.createRange();r.selectNodeContents(t);let o=[];for(let a=0;a<n;a++){r.setStart(t,0),r.setEnd(t,a+1);let n=r.getClientRects().length-1,l=e.charAt(a);o[n]?o[n]+=l:o.push(l)}let a=r.getClientRects();return o.map((t,e)=>({rect:a[e],text:t}))},nI=new Map,nL=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,{width:n=0,height:r=0}=e;if(n&&r)return el(n,r);let{fontSize:o=16,fontFamily:a,lineHeight:l=20,fontWeight:s,fontStyle:c,fontVariant:d,letterSpacing:u}=e,h=nm({text:t,fontFamily:a,fontWeight:s,fontStyle:c,fontVariant:d,fontSize:o,letterSpacing:u,lineHeight:l,width:n}),p=nI.get(h);if(p)return p;let g=1;return o>1e3&&tt()&&(g=o/1e3,o=1e3,l/=g),p=eg(p=ei(iy(M("pre",{contenteditable:"true",spellcheck:"false",style:"".concat(nR).concat(nC({...e,fontSize:o,lineHeight:l}),";").concat(nM(t,e),'"'),innerHTML:t})).getBoundingClientRect()),t=>t*g),n&&(p.width=n),nI.set(h,p),p},nF=t=>t.pathname.split("/").slice(0,-1).join("/"),nB=(t,e)=>{let n,r;let{sub:o,pub:a}=nw();return Promise.resolve(e&&e(t,{resourceType:"stylesheet"})).then(e=>{if(!1===e)return a("error",r="requestPrevented");let{headers:o,credentials:l}=e||{};fetch(t,{headers:o,credentials:l}).then(t=>t.text()).then(t=>{a("load",n=t)}).catch(t=>{a("error",r=t)})}),{sub:(t,e)=>"load"===t&&n?e(n):"error"===t&&r?e(r):void o(t,e)}},nD=new Map,nO=(t,e)=>new Promise((n,r)=>{let o=nD.get(t);void 0===o&&(o=nB(t,e),nD.set(t,o)),o.sub("load",n),o.sub("error",r)}),nz=async(t,e,n)=>{let r;try{r=await nO(t,e)}catch(t){return[]}let o={innerHTML:r,id:Z()};n&&(o.nonce=n);let a=M("style",o);document.head.append(a);let l=Array.from(document.styleSheets).find(t=>t.ownerNode.id===a.id);return a.remove(),Array.from(l.cssRules)},n_=new Map,nN=t=>t.filter(t=>t instanceof CSSFontFaceRule),nW=t=>t.filter(t=>t instanceof CSSImportRule),nj=async(t,e,n)=>{let r;if(n_.has(t.href))return n_.get(t.href);try{for(let o of(r=Array.from(t.cssRules),nW(r))){let t=o.href;if(n_.has(t)){let e=n_.get(t);r=[...r,...e];continue}let a=await nz(t,e,n);n_.set(t,a),r=[...r,...a]}}catch(a){let o=t.href;r=await nz(o,e,n),n_.set(o,r)}return nN(r)},nH=(t,e)=>t.style.getPropertyValue(e),nV=(t,e)=>!!t.style&&nH(t,"font-family").replace(/^"|"$/g,"")==e,nU=(t,e)=>{let n=[];for(let r of t)nV(r,e)&&n.push(r);return n},nG=async(t,e)=>{let n=Array.from(document.styleSheets).map(n=>nj(n,t,e)),r=await Promise.all(n),o=[];return r.forEach(t=>o.push(...t)),o},nX=async(t,e,n)=>{let r=nU(await nG(e,n),t);return r.length?r.map(t=>{let e=t.parentStyleSheet.href&&new URL(t.parentStyleSheet.href),n=e?e.origin+nF(e)+"/":"",r=t.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],o=Array.from(t.style).filter(t=>"src"!=t).reduce((e,n)=>e+=n+":"+nH(t,n)+";","");return[/^http/.test(r)?r:n+r,o]}):[]},nZ=new Map,nY=new Map,nq=t=>!t||/woff2/.test(t)?"woff2":/woff/.test(t)?"woff":/ttf|truetype/.test(t)?"truetype":/otf|opentype/.test(t)?"opentype":/svg/.test(t)?"svg":"woff2",nK=async(t,e,n)=>{if(nZ.get(t))return;let r=nY.get(t);if(!r){let o=await nX(t,e,n);if(!o.length){nZ.set(t,!0);return}let a=[];for(let[t,e]of o){let n=await fetch(t).then(t=>t.blob()),r=nq(n.type),o=await nv(n);a.push("@font-face { src:url(".concat(o,") format('").concat(r,"');").concat(e,";font-display:block; }"))}r=a.join(""),nY.set(t,r)}return r};var nJ=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if(!t.length)return;let{color:n,imageWidth:r=300,imageHeight:o=150,paddingTop:a=0,paddingRight:l=32,paddingBottom:s=0,paddingLeft:c=32,fontFamily:d,fontSize:u,pixelRatio:h=1,willRequest:p,outline:g,blur:m,styleNonce:f}=e,$=1,y="";u>1e3&&tt()&&($=u/1e3,y="transform-origin:0 0;transform:scale(".concat($,")"));let x=h/$,b=(r+c+l)*h,v=(o+s+a)*h,w=await nK(d,p,f),S="";w&&(S="<style".concat(f?' nonce="'.concat(f,'"'):"",">").concat(w,"</style>"));let k=t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g,"\xa0").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),C=a*x,M=l*x,T=s*x,P=c*x,R="top:".concat(C,"px;right:").concat(M,"px;bottom:").concat(T,"px;left:").concat(P,"px"),A=n,E="",I="";if(g||m){let t=ng(n);g&&(A=[0,0,0,0],E="-webkit-text-stroke: ".concat(2*g*x,"px ").concat(t)),m&&(ib()?I="filter:blur(".concat(m*x*.4,"px)"):(A=[0,0,0,0],I="text-shadow: 0 0 ".concat(m*x,"px ").concat(t)))}let L=nC({...e,color:A,fontSize:u},x),F=nM(t,e,x);return nb('<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(b,'" height="').concat(v,'" viewBox="0 0 ').concat(b," ").concat(v,'"><foreignObject x="0" y="0" width="').concat(b,'" height="').concat(v,'"><div xmlns="http://www.w3.org/1999/xhtml">').concat(S,'<pre contenteditable="true" spellcheck="false" style="position:absolute;').concat(R,";").concat(L,";").concat(F,";").concat(y,";").concat(E,";").concat(I,'">').concat(k,"</pre></div></foreignObject></svg>"),{safariCacheKey:d})};let nQ=(t,e)=>JSON.stringify(t)===JSON.stringify(e),n1=t=>_({...t}),n0=function(t){let e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=eV(t),a=r.width||r.rx,l=r.height||r.ry;if(a&&l)return ee(r);if(a||l){let t=Math.min(e=parseFloat(a||Number.MAX_SAFE_INTEGER),n=parseFloat(l||Number.MAX_SAFE_INTEGER));N(a)||N(l)?(e="".concat(t,"%"),n="".concat(t*o,"%")):(e=t,n=t)}else e="".concat(10,"%"),n="".concat(10*o,"%");return{[(r.width?"width":r.rx?"rx":void 0)||"width"]:e,[(r.width?"height":r.rx?"ry":void 0)||"height"]:n}},n2=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{width:void 0,height:void 0,...e,aspectRatio:1,backgroundImage:nu(nd(t))}},n4=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{backgroundColor:[0,0,0,0],...re(e)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...e,backgroundImage:N(t)?t:nh(t)?URL.createObjectURL(t):t}},n5=(t,e)=>{let n;if(N(t)||nh(t)){let r={...n0(e),backgroundSize:"contain"};n=ne(t)?n2(t,r):n4(t,r)}else if(t.src){let r=n0(e,t.shape||t),o={...t.shape,...r};if(t.width&&t.height&&!ni(o,"aspectRatio")){let t=r7(r,"width",e),n=r7(r,"height",e);o.aspectRatio=tm(t,n)}o.backgroundSize||t.shape||t.width&&t.height||(o.backgroundSize="contain"),n=ne(t.src)?n2(t.src,o):n4(t.src,o)}else t.shape&&(n=n1(t.shape));return ni(n,"backgroundImage")&&(ni(n,"backgroundColor")||(n.backgroundColor=[0,0,0,0]),ni(n,"disableStyle")||(n.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),e?r3(n,e):n},n3=t=>tB(t.x1,t.y1),n6=t=>tB(t.x2,t.y2),n8=t=>ni(t,"text"),n7=t=>n8(t)&&!(rg(t)||ni(t,"width")),n9=t=>n8(t)&&(rg(t)||ni(t,"width")),rt=t=>!n8(t)&&rm(t),re=t=>ni(t,"rx"),ri=t=>ni(t,"x1"),rn=t=>ni(t,"points"),rr=t=>n8(t)&&!t.text.length,ro=t=>n8(t)&&t.isEditing,ra=t=>!ni(t,"opacity")||t.opacity>0,rl=t=>t.isSelected,rs=t=>t.isEditing,rc=t=>t._isDraft,rd=t=>ni(t,"width")&&ni(t,"height"),ru=t=>nt(t.strokeWidth)&&t.strokeWidth>0,rh=t=>{let e=ni(t,"right"),n=ni(t,"bottom");return e||n},rp=t=>ni(t,"backgroundImage")||ni(t,"text"),rg=t=>(ni(t,"x")||ni(t,"left"))&&ni(t,"right")||(ni(t,"y")||ni(t,"top"))&&ni(t,"bottom"),rm=t=>rd(t)||rg(t),rf=(t,e)=>{let n=t[e];return!!n&&(3===n.length||n[3]>0)},r$=t=>t.strokeWidth&&rf(t,"strokeColor"),ry=t=>(t.isSelected=!0,t),rx=t=>(t._isDraft=!0,t),rb=t=>(t._isDraft=!1,t),rv=(t,e)=>!0!==t.disableStyle&&(!nn(t.disableStyle)||!e||!t.disableStyle.includes(e)),rw=t=>!0!==t.disableAcceptSnap,rS=t=>!0!==t.disableSelect,rk=t=>!0!==t.disableRemove,rC=t=>!0!==t.disableDuplicate&&rL(t),rM=t=>!0!==t.disableReorder,rT=t=>!(t.disableFlip||rc(t)||rh(t))&&rp(t),rP=(t,e)=>!!n8(t)&&!0!==t.disableInput&&(W(t.disableInput)?t.disableInput(null!=e?e:t.text):e||!0),rR=(t,e)=>!0!==t.disableTextLayout&&(!nn(t.disableTextLayout)||!e||!t.disableTextLayout.includes(e)),rA=t=>rE(t)&&t.points.length>3,rE=t=>!!rn(t)&&void 0!==t.disableAddPoints&&!0!==t.disableAddPoints,rI=t=>!0!==t.disableManipulate&&!rc(t)&&!rh(t),rL=t=>rI(t)&&!0!==t.disableMove,rF=t=>rI(t)&&rL(t)&&!0!==t.disableResize&&(rd(t)||n9(t)||re(t)||ri(t)||rn(t)&&ni(t,"pathClose")),rB=t=>rI(t)&&!0!==t.disableRotate&&(rd(t)||ni(t,"text")||re(t)),rD=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),rO=t=>(delete t.rotation,t),rz=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),r_=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),rN=t=>{let e=t.text;e=(e=e.replace(/&(#[0-9]+|[a-z]+);/gi,(t,e)=>"___".concat(e,"___"))).replace(/&/,"&amp;"),t.text=e.replace(/___(#[0-9]+|[a-z]+)___/gi,(t,e)=>"&".concat(e,";"))},rW=t=>{rN(t);let e=t.text;e=(e=e.replace(/</g,"&gt;")).replace(/>/g,"&lt;"),t.text=e},rj=t=>{if(t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],t.format="html"===t.format?"html":"text",t.textShadow){let[e,n,r,o]=t.textShadow;t.textShadowX=e,t.textShadowY=n,t.textShadowBlur=r,t.textShadowColor=o,delete t.textShadow}if(t.textOutline){let[e,n]=t.textOutline;t.textOutlineWidth=e,t.textOutlineColor=n,delete t.textOutline}return"html"===t.format?rN(t):rW(t),n7(t)?rH(t):rV(t)},rH=t=>(!1!==t.disableNewline&&(delete t.textAlign,t.text=t.text.replace(/\n/g," ")),rD(t)),rV=t=>(t.textAlign=t.textAlign||"left",t),rU=t=>(t.cornerRadius=t.cornerRadius||0,t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],r_(t)),rG=t=>(t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],r_(t)),rX=t=>(rz(t),rO(t),ni(t,"pathClose")||(t.disableResize=!0,ni(t,"disableMove")||(t.disableMove=!0)),rD(t)),rZ=t=>(rz(t),t.lineStart=t.lineStart||void 0,t.lineEnd=t.lineEnd||void 0,rO(t),rD(t)),rY=t=>{N(t.id)||(t.id=Z()),ni(t,"rotation")||(t.rotation=0),ni(t,"opacity")||(t.opacity=1),ni(t,"disableErase")||(t.disableErase=!0)},rq=t=>(rY(t),n8(t)?rj(t):rt(t)?rU(t):rn(t)?rX(t):ri(t)?rZ(t):re(t)&&rG(t),t),rK=t=>n8(t)?"text":rt(t)?"rectangle":rn(t)?"path":ri(t)?"line":re(t)?"ellipse":void 0,rJ=(t,e)=>parseFloat(t)/100*e,rQ=RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),r1=RegExp(/^y|top|bottom|^height|ry/,"i"),r0=(t,e,n)=>{let{width:r,height:o}=n;if(Array.isArray(e))return e.map(e=>(O(e)&&r5(e,{width:r,height:o}),N(e)&&(e=r0(t,e,{width:r,height:o})),e));if("string"!=typeof e||!e.endsWith("%"))return e;let a=parseFloat(e)/100;return rQ.test(t)?tE(r*a,6):r1.test(t)?tE(o*a,6):e},r2=(t,e)=>Math.round(parseFloat(t)/100*e),r4=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],r5=(t,e)=>{Object.entries(t).map(n=>{let[r,o]=n;t[r]=r0(r,o,e)}),t.text&&r4.filter(e=>N(t[e])).forEach(e=>{t[e]=r2(t[e],t.fontSize)})},r3=(t,e)=>(r5(t,e),or(t,e),t),r6=(t,e)=>{let n;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?n=e.width:/^y|height|ry/.test(t)&&(n=e.height),n},r8=(t,e,n,r)=>{if(!N(t[e]))return t[e]=n,t;let o=r6(e,r);return t[e]=void 0===o?n:np(n,o),t},r7=(t,e,n)=>Array.isArray(t[e])?t[e].map(t=>Object.entries(t).reduce((t,e)=>{let[r,o]=e;return t[r]=N(o)?rJ(o,r6(r,n)):o,t},{})):N(t[e])?rJ(t[e],r6(e,n)):t[e],r9=(t,e,n)=>e.reduce((e,r)=>{let o=r7(t,r,n);return e[r]=o,e},{}),ot=(t,e,n)=>(Object.keys(e).forEach(r=>r8(t,r,e[r],n)),t),oe=t=>{let e=eC(),n=t.strokeWidth||0;if(rt(t))e.x=t.x-.5*n,e.y=t.y-.5*n,e.width=t.width+n,e.height=t.height+n;else if(ri(t)){let{x1:r,y1:o,x2:a,y2:l}=t,s=Math.abs(Math.min(r,a)),c=Math.abs(Math.max(r,a));e.x=s+.5*n,e.y=c+.5*n,e.width=c-s+n,e.height=Math.abs(Math.min(o,l))-Math.abs(Math.min(o,l))+n}else re(t)&&(e.x=t.x-t.rx+.5*n,e.y=t.y-t.ry+.5*n,e.width=2*t.rx+n,e.height=2*t.ry+n);return e&&ni(t,"rotation")&&eX(e,t.rotation),e1(e)},oi=(t,e)=>{let n=t.filter(t=>t.x<0||t.y<0||t.x1<0||t.y1<0).reduce((t,e)=>{let[n,r,o,a]=oe(e);return t.top=Math.min(n,t.top),t.left=Math.min(a,t.left),t.bottom=Math.max(o,t.bottom),t.right=Math.max(r,t.right),t},{top:0,right:0,bottom:0,left:0});return n.right>0&&(n.right-=e.width),n.bottom>0&&(n.bottom-=e.height),n},on=(t,e,n)=>{let r=n1(t);r3(r,e);let o=n(r);return Array.isArray(o)?o:[o]},or=(t,e)=>{if(ni(t,"left")&&(t.x=t.left),ni(t,"right")&&!N(t.right)){let n=e.width-t.right;ni(t,"left")?(t.x=t.left,t.width=Math.max(0,n-t.left)):ni(t,"width")&&(t.x=n-t.width)}if(ni(t,"top")&&(t.y=t.top),ni(t,"bottom")&&!N(t.bottom)){let n=e.height-t.bottom;ni(t,"top")?(t.y=t.top,t.height=Math.max(0,n-t.top)):ni(t,"height")&&(t.y=n-t.height)}return t},oo=(t,e)=>(rn(t)&&t.points.filter(t=>nt(t.x)).forEach(t=>{t.x*=e,t.y*=e}),ri(t)&&nt(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),nt(t.x)&&nt(t.y)&&(t.x*=e,t.y*=e),nt(t.width)&&nt(t.height)&&(t.width*=e,t.height*=e),nt(t.rx)&&nt(t.ry)&&(t.rx*=e,t.ry*=e),ru(t)&&(t.strokeWidth*=e),n8(t)&&(t._scale=e,nt(t.fontSize)&&(t.fontSize*=e),nt(t.lineHeight)&&(t.lineHeight*=e),nt(t.width)&&!nt(t.height)&&(t.width*=e)),ni(t,"cornerRadius")&&nt(t.cornerRadius)&&(t.cornerRadius*=e),t),oa=t=>{if(rt(t))return tB(t.x+.5*t.width,t.y+.5*t.height);if(re(t))return tB(t.x,t.y);if(t.text){if(n9(t)){let e=t.height||nL(t.text,t).height;return tB(t.x+.5*t.width,t.y+.5*e)}let e=nL(t.text,t);return tB(t.x+.5*e.width,t.y+.5*e.height)}return rn(t)?t8(t.points):ri(t)?t8([n3(t),n6(t)]):void 0};var ol=(t,e,n,r,o,a)=>(r<2*a&&(a=r/2),o<2*a&&(a=o/2),t.beginPath(),t.moveTo(e+a,n),t.arcTo(e+r,n,e+r,n+o,a),t.arcTo(e+r,n+o,e,n+o,a),t.arcTo(e,n+o,e,n,a),t.arcTo(e,n,e+r,n,a),t.closePath(),t),os=t=>/canvas/i.test(t.nodeName),oc=t=>new URL(t,location.href).origin!==location.origin,od=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new Promise((n,r)=>{let o=t,a=!1,l=()=>{!a&&(a=!0,W(e)&&Promise.resolve().then(()=>e(el(o.naturalWidth,o.naturalHeight))))};if(o.src||(o=new Image,N(t)&&oc(t)&&(o.crossOrigin="anonymous"),o.src=N(t)?t:URL.createObjectURL(t)),o.complete)return l(),n(o);W(e)&&iv(o).then(l).catch(r),o.onload=()=>{l(),n(o)},o.onerror=()=>r(Error("Failed to load image"))})};let ou=new Map([]),oh=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,r)=>{let{onMetadata:o=y,onLoad:a=n,onError:l=r,onComplete:s=y}=e,c=ou.get(t);if(c||(c={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:nw()},ou.set(t,c)),c.bus.sub("meta",o),c.bus.sub("load",a),c.bus.sub("error",l),c.bus.sub("complete",s),os(t)){let e=t.cloneNode();c.complete=!0,c.image=e,c.size=ea(t)}if(c.complete){c.bus.pub("meta",{size:c.size}),c.error?c.bus.pub("error",c.error):c.bus.pub("load",c.image),c.bus.pub("complete"),c.bus=nw();return}c.loading||(c.loading=!0,od(t,t=>{c.size=t,c.bus.pub("meta",{size:t})}).then(t=>{c.image=t,c.bus.pub("load",t)}).catch(t=>{c.error=t,c.bus.pub("error",t)}).finally(()=>{c.complete=!0,c.loading=!1,c.bus.pub("complete"),c.bus=nw()}))})},op=(t,e,n,r)=>t.drawImage(e,n.x,n.x,n.width,n.height,r.x,r.y,r.width,r.height);var og=async function(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:op,a=arguments.length>5?arguments[5]:void 0;t.save(),t.clip(),await o(t,e,n,r,a),t.restore()};let om=(t,e,n,r,o)=>{let a=ek(t);if(r){let t=e2(eA(r),tE);return t.x*=n.width,t.width*=n.width,t.y*=n.height,t.height*=n.height,{srcRect:t,destRect:a}}let l=eL(0,0,n.width,n.height);if("contain"===e){let e=eQ(t,eV(l));a.width=e.width,a.height=e.height,o?(a.x+=o.x,a.y+=o.y):(a.x+=e.x,a.y+=e.y)}else if("cover"===e){let t=eq(a,l.width/l.height);a.width=t.width,a.height=t.height,o?(a.x+=o.x,a.y+=o.y):(a.x+=t.x,a.y+=t.y)}else e?(a.width=e.width,a.height=e.height,o&&(a.x+=o.x,a.y+=o.y)):o&&(a.width=n.width,a.height=n.height,a.x+=o.x,a.y+=o.y);return{srcRect:l,destRect:a}},of=(t,e)=>(e.cornerRadius>0?ol(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),o$=(t,e)=>(e.backgroundColor&&t.fill(),t),oy=(t,e)=>(e.strokeWidth&&t.stroke(),t);var ox=async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{drawImage:r}=n;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?ng(e.strokeColor):"none",t.fillStyle=e.backgroundColor?ng(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let n;if(n=os(e.backgroundImage)?e.backgroundImage:await oh(e.backgroundImage),of(t,e),o$(t,e),"repeat"===e.backgroundRepeat){let o=e.backgroundPosition||{x:0,y:0},{srcRect:a,destRect:l}=om(e,e.backgroundSize||ea(n),ea(n),e.backgroundCorners,{x:0,y:0}),s=document.createElement("canvas");s.width=l.width,s.height=l.height;let c=s.getContext("2d",{willReadFrequently:!1,desynchronized:!0});await r(c,n,a,{...l,x:0,y:0});let d=t.createPattern(s,"repeat");t.fillStyle=d,t.save(),t.beginPath(),t.rect(e.x+o.x,e.y+o.y,e.width-o.x,e.height-o.y),t.clip(),t.translate(l.x+o.x,l.y+o.y),t.fill(),R(s),t.restore()}else{let{srcRect:o,destRect:a}=om(e,e.backgroundSize,ea(n),e.backgroundCorners,e.backgroundPosition);await og(t,n,o,a,r,{feather:e.feather})}return t.beginPath(),of(t,e),oy(t,e),[]}return of(t,e),o$(t,e),oy(t,e),[]},ob=async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(async(r,o)=>{let{drawImage:a}=n;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?ng(e.strokeColor):"none",t.fillStyle=e.backgroundColor?ng(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let n;try{n=await oh(e.backgroundImage)}catch(t){o(t)}let{srcRect:l,destRect:s}=om(eL(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),e.backgroundSize,ea(n),e.backgroundCorners,e.backgroundPosition);await og(t,n,l,s,a),e.strokeWidth&&t.stroke(),r([])}else e.strokeWidth&&t.stroke(),r([])})},ov=async(t,e,n)=>{let r=e.width&&e.height?ei(e):nL(e.text,e),o={x:e.x,y:e.y,width:r.width,height:r.height};if(ox(t,{...e,...o,options:n}),!e.text.length)return[];let{textOutlineWidth:a=0,textShadowX:l=0,textShadowY:s=0,textShadowBlur:c=0,textShadowColor:d,outline:u,blur:h,...p}=e,g=!!e.height;if(g&&(t.rect(o.x,o.y,o.width,o.height),t.save(),t.clip()),l||s||c){t.save(),t.translate(l,s);let r={...o};g||(r.height+=32+c),await ow(t,r,e,{...n,paddingLeft:32+c,paddingRight:32+c,paddingTop:c,paddingBottom:c+(g?-1*s:e.fontSize),shapeExtendedProps:{color:d,blur:c}}),t.restore()}if(a){let r={...o};g||(r.height+=32+a),await ow(t,r,e,{...n,paddingLeft:32+a,paddingRight:32+a,paddingTop:a,paddingBottom:a+g?0:e.fontSize,shapeExtendedProps:{color:e.textOutlineColor,outline:a}})}return g&&t.restore(),await ow(t,o,p,{...n,paddingLeft:32,paddingRight:32,paddingTop:0,paddingBottom:g?0:e.fontSize}),[]};let ow=async(t,e,n,r)=>{let{willRequest:o,shapeExtendedProps:a,paddingLeft:l,paddingRight:s,paddingTop:c,paddingBottom:d,styleNonce:u}=r,h=await nJ(n.text,{...n,...a,...e,paddingLeft:l,paddingRight:s,paddingTop:c,paddingBottom:d,imageWidth:e.width,imageHeight:e.height,willRequest:o,styleNonce:u});t.drawImage(h,n.x-l,n.y-c,h.width,h.height)};var oS=async(t,e)=>new Promise(async n=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?ng(e.strokeColor):"none",t.globalAlpha=e.opacity,e.bitmap&&(t.lineCap=e.strokeCap,t.lineJoin=e.strokeJoin,t.setLineDash(e.strokeDash||[]));let r=n3(e),o=n6(e);t.moveTo(r.x,r.y),t.lineTo(o.x,o.y),e.strokeWidth&&t.stroke(),n([])}),ok=async(t,e)=>new Promise((n,r)=>{if(e.bitmap&&1===e.points.length){ob(t,{x:e.points[0].x,y:e.points[0].y,rx:.5*e.strokeWidth,ry:.5*e.strokeWidth,backgroundColor:e.strokeColor}).then(()=>n([]));return}t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?ng(e.strokeColor):"none",t.fillStyle=e.backgroundColor?ng(e.backgroundColor):"none",t.globalAlpha=e.opacity;let{points:o}=e;e.bitmap&&(t.lineCap=e.strokeCap,t.lineJoin=e.strokeJoin,t.setLineDash(e.strokeDash||[])),e.pathClose&&t.beginPath(),t.moveTo(o[0].x,o[0].y);let a=o.length;for(let e=1;e<a;e++)t.lineTo(o[e].x,o[e].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),n([])}),oC=(t,e,n,r)=>((e||n)&&(t.translate(r.x,r.y),t.scale(e?-1:1,n?-1:1),t.translate(-r.x,-r.y)),t);let oM=async(t,e,n)=>{let r;t.globalCompositeOperation="subtract"===e.drawMode?"destination-out":"source-over";let o=oa(e);if(iq(t,e.rotation,o),oC(t,e.flipX,e.flipY,o),rt(e)?r=ox:re(e)?r=ob:ri(e)?r=oS:rn(e)?r=ok:n8(e)&&(r=ov),r){let o=await r(t,e,n);return o.length?[e,...await oT(t,o,n)]:[]}return[]};var oT=async(t,e,n)=>{let r=[];for(let o of e)t.save(),t.beginPath(),r=[...r,...await oM(t,o,n)],t.restore();return r},oP=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{shapes:n=[],contextBounds:r=t,transform:o=y,drawImage:a,willRequest:l,styleNonce:s,canvasMemoryLimit:c,computeShape:d=tf,preprocessShape:u=tf}=e;if(!n.length)return t;let h=M("canvas");h.width=r.width,h.height=r.height;let p=h.getContext("2d",{willReadFrequently:!0});p.putImageData(t,r.x||0,r.y||0);let g=n.map(n1).map(d).map(u).flat();o(p),await oT(p,g,{drawImage:a,canvasMemoryLimit:c,willRequest:l,styleNonce:s});let m=p.getImageData(0,0,h.width,h.height);return R(h),m},oR=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{backgroundColor:n,backgroundImage:r}=e,o=!(!n||n&&0===n[3]);if(!r&&!o)return t;let a=M("canvas");a.width=t.width,a.height=t.height;let l=a.getContext("2d",{willReadFrequently:!0});if(l.putImageData(t,0,0),l.globalCompositeOperation="destination-over",o&&(l.fillStyle=ng(n),l.fillRect(0,0,a.width,a.height)),r){let e;e=os(r)?r:await oh(r);let{srcRect:n,destRect:o}=om({x:0,y:0,width:t.width,height:t.height},"cover",{width:e.width,height:e.height});l.drawImage(e,n.x,n.y,n.width,n.height,o.x,o.y,o.width,o.height)}let s=l.getImageData(0,0,a.width,a.height);return R(a),s},oA=(t,e)=>{let n=Array(20);return n[0]=t[0]*e[0]+t[1]*e[5]+t[2]*e[10]+t[3]*e[15],n[1]=t[0]*e[1]+t[1]*e[6]+t[2]*e[11]+t[3]*e[16],n[2]=t[0]*e[2]+t[1]*e[7]+t[2]*e[12]+t[3]*e[17],n[3]=t[0]*e[3]+t[1]*e[8]+t[2]*e[13]+t[3]*e[18],n[4]=t[0]*e[4]+t[1]*e[9]+t[2]*e[14]+t[3]*e[19]+t[4],n[5]=t[5]*e[0]+t[6]*e[5]+t[7]*e[10]+t[8]*e[15],n[6]=t[5]*e[1]+t[6]*e[6]+t[7]*e[11]+t[8]*e[16],n[7]=t[5]*e[2]+t[6]*e[7]+t[7]*e[12]+t[8]*e[17],n[8]=t[5]*e[3]+t[6]*e[8]+t[7]*e[13]+t[8]*e[18],n[9]=t[5]*e[4]+t[6]*e[9]+t[7]*e[14]+t[8]*e[19]+t[9],n[10]=t[10]*e[0]+t[11]*e[5]+t[12]*e[10]+t[13]*e[15],n[11]=t[10]*e[1]+t[11]*e[6]+t[12]*e[11]+t[13]*e[16],n[12]=t[10]*e[2]+t[11]*e[7]+t[12]*e[12]+t[13]*e[17],n[13]=t[10]*e[3]+t[11]*e[8]+t[12]*e[13]+t[13]*e[18],n[14]=t[10]*e[4]+t[11]*e[9]+t[12]*e[14]+t[13]*e[19]+t[14],n[15]=t[15]*e[0]+t[16]*e[5]+t[17]*e[10]+t[18]*e[15],n[16]=t[15]*e[1]+t[16]*e[6]+t[17]*e[11]+t[18]*e[16],n[17]=t[15]*e[2]+t[16]*e[7]+t[17]*e[12]+t[18]*e[17],n[18]=t[15]*e[3]+t[16]*e[8]+t[17]*e[13]+t[18]*e[18],n[19]=t[15]*e[4]+t[16]*e[9]+t[17]*e[14]+t[18]*e[19]+t[19],n},oE=t=>t.length?t.reduce((t,e)=>oA([...t],e),t.shift()):[],oI=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(t*e)/e},oL=(t,e)=>{let n=t.width*t.height,r=e.reduce((t,e)=>(e.width>t.width&&e.height>t.height&&(t.width=e.width,t.height=e.height),t),{width:0,height:0});return oI(Math.max(.5,.5+(1-r.width*r.height/n)/2),5)};function oF(){}let oB=t=>t;function oD(t,e){for(let n in e)t[n]=e[n];return t}function oO(t){return t()}function oz(){return Object.create(null)}function o_(t){t.forEach(oO)}function oN(t){return"function"==typeof t}function oW(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function oj(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(null==t)return oF;let o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function oH(t){let e;return oj(t,t=>e=t)(),e}function oV(t,e,n){t.$$.on_destroy.push(oj(e,n))}function oU(t,e,n,r){if(t){let o=oG(t,e,n,r);return t[0](o)}}function oG(t,e,n,r){return t[1]&&r?oD(n.ctx.slice(),t[1](r(e))):n.ctx}function oX(t,e,n,r){if(t[2]&&r){let o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){let t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}function oZ(t,e,n,r,o,a){if(o){let l=oG(e,n,r,a);t.p(l,o)}}function oY(t){if(t.ctx.length>32){let e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return -1}function oq(t){let e={};for(let n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function oK(t,e){let n={};for(let r in e=new Set(e),t)e.has(r)||"$"===r[0]||(n[r]=t[r]);return n}function oJ(t,e,n){return t.set(n),e}function oQ(t){return t&&oN(t.destroy)?t.destroy:oF}let o1=()=>window.performance.now(),o0=t=>requestAnimationFrame(t),o2=new Set;function o4(t){o2.forEach(e=>{e.c(t)||(o2.delete(e),e.f())}),0!==o2.size&&o0(o4)}function o5(t){let e;return 0===o2.size&&o0(o4),{promise:new Promise(n=>{o2.add(e={c:t,f:n})}),abort(){o2.delete(e)}}}function o3(t,e){t.appendChild(e)}function o6(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function o8(t,e,n){t.insertBefore(e,n||null)}function o7(t){t.parentNode.removeChild(t)}function o9(t){return document.createElement(t)}function at(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ae(t){return document.createTextNode(t)}function ai(){return ae(" ")}function an(){return ae("")}function ar(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function ao(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function aa(t,e){let n=Object.getOwnPropertyDescriptors(t.__proto__);for(let r in e)null==e[r]?t.removeAttribute(r):"style"===r?t.style.cssText=e[r]:"__value"===r?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:ao(t,r,e[r])}function al(t,e){Object.keys(e).forEach(n=>{var r;r=e[n],n in t?t[n]="boolean"==typeof t[n]&&""===r||r:ao(t,n,r)})}function as(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ac(t,e){t.value=null==e?"":e}function ad(t,e){let{bubbles:n=!1,cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}class au{c(t){this.h(t)}m(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.is_svg?this.e=at(e.nodeName):this.e=o9(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)o8(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(o7)}constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}}let ah=new Map,ap=0;function ag(t,e,n,r,o,a,l){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=16.666/r,d="{\n";for(let t=0;t<=1;t+=c){let r=e+(n-e)*a(t);d+=100*t+"%{".concat(l(r,1-r),"}\n")}let u=d+"100% {".concat(l(n,1-n),"}\n}"),h="__svelte_".concat(function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u),"_").concat(s),p=o6(t),{stylesheet:g,rules:m}=ah.get(p)||function(t,e){let n={stylesheet:function(t){var e;let n=o9("style");return o3((e=o6(t)).head||e,n),n.sheet,n.sheet}(e),rules:{}};return ah.set(t,n),n}(p,t);m[h]||(m[h]=!0,g.insertRule("@keyframes ".concat(h," ").concat(u),g.cssRules.length));let f=t.style.animation||"";return t.style.animation="".concat(f?"".concat(f,", "):"").concat(h," ").concat(r,"ms linear ").concat(o,"ms 1 both"),ap+=1,h}function am(){if(!o)throw Error("Function called outside component initialization");return o}function af(t){am().$$.on_mount.push(t)}function a$(t){am().$$.after_update.push(t)}function ay(t){am().$$.on_destroy.push(t)}function ax(){let t=am();return function(e,n){let{cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.$$.callbacks[e];if(o){let a=ad(e,n,{cancelable:r});return o.slice().forEach(e=>{e.call(t,a)}),!a.defaultPrevented}return!0}}function ab(t,e){return am().$$.context.set(t,e),e}function av(t){return am().$$.context.get(t)}function aw(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t.call(this,e))}let aS=[],ak=[],aC=[],aM=[],aT=Promise.resolve(),aP=!1;function aR(){aP||(aP=!0,aT.then(aF))}function aA(t){aC.push(t)}function aE(t){aM.push(t)}let aI=new Set,aL=0;function aF(){let t=o;do{for(;aL<aS.length;){let t=aS[aL];aL++,o=t,function(t){if(null!==t.fragment){t.update(),o_(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(aA)}}(t.$$)}for(o=null,aS.length=0,aL=0;ak.length;)ak.pop()();for(let t=0;t<aC.length;t+=1){let e=aC[t];aI.has(e)||(aI.add(e),e())}aC.length=0}while(aS.length);for(;aM.length;)aM.pop()();aP=!1,aI.clear(),o=t}function aB(t,e,n){t.dispatchEvent(ad("".concat(e?"intro":"outro").concat(n)))}let aD=new Set;function aO(){l={r:0,c:[],p:l}}function az(){l.r||o_(l.c),l=l.p}function a_(t,e){t&&t.i&&(aD.delete(t),t.i(e))}function aN(t,e,n,r){t&&t.o?aD.has(t)||(aD.add(t),l.c.push(()=>{aD.delete(t),r&&(n&&t.d(1),r())}),t.o(e)):r&&r()}let aW={duration:0};function aj(t,e,n,r){let o=e(t,n),s=r?0:1,c=null,d=null,u=null;function h(){u&&function(t,e){let n=(t.style.animation||"").split(", "),r=n.filter(e?t=>0>t.indexOf(e):t=>-1===t.indexOf("__svelte")),o=n.length-r.length;!o||(t.style.animation=r.join(", "),(ap-=o)||o0(()=>{ap||(ah.forEach(t=>{let{ownerNode:e}=t.stylesheet;e&&o7(e)}),ah.clear())}))}(t,u)}function p(t,e){let n=t.b-s;return e*=Math.abs(n),{a:s,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(e){let{delay:n=0,duration:r=300,easing:a=oB,tick:g=oF,css:m}=o||aW,f={start:o1()+n,b:e};e||(f.group=l,l.r+=1),c||d?d=f:(m&&(h(),u=ag(t,s,e,r,n,a,m)),e&&g(0,1),c=p(f,r),aA(()=>aB(t,e,"start")),o5(e=>{if(d&&e>d.start&&(c=p(d,r),d=null,aB(t,c.b,"start"),m&&(h(),u=ag(t,s,c.b,c.duration,0,a,o.css))),c){if(e>=c.end)g(s=c.b,1-s),aB(t,c.b,"end"),d||(c.b?h():--c.group.r||o_(c.group.c)),c=null;else if(e>=c.start){let t=e-c.start;g(s=c.a+c.d*a(t/c.duration),1-s)}}return!!(c||d)}))}return{run(t){oN(o)?(a||(a=Promise.resolve()).then(()=>{a=null}),a).then(()=>{o=o(),g(t)}):g(t)},end(){h(),c=d=null}}}let aH=window;function aV(t,e){t.d(1),e.delete(t.key)}function aU(t,e){aN(t,1,1,()=>{e.delete(t.key)})}function aG(t,e,n,r,o,a,l,s,c,d,u,h){let p=t.length,g=a.length,m=p,f={};for(;m--;)f[t[m].key]=m;let $=[],y=new Map,x=new Map;for(m=g;m--;){let t=h(o,a,m),s=n(t),c=l.get(s);c?r&&c.p(t,e):(c=d(s,t)).c(),y.set(s,$[m]=c),s in f&&x.set(s,Math.abs(m-f[s]))}let b=new Set,v=new Set;function w(t){a_(t,1),t.m(s,u),l.set(t.key,t),u=t.first,g--}for(;p&&g;){let e=$[g-1],n=t[p-1],r=e.key,o=n.key;e===n?(u=e.first,p--,g--):y.has(o)?!l.has(r)||b.has(r)?w(e):v.has(o)?p--:x.get(r)>x.get(o)?(v.add(r),w(e)):(b.add(o),p--):(c(n,l),p--)}for(;p--;){let e=t[p];y.has(e.key)||c(e,l)}for(;g;)w($[g-1]);return $}function aX(t,e){let n={},r={},o={$$scope:1},a=t.length;for(;a--;){let l=t[a],s=e[a];if(s){for(let t in l)t in s||(r[t]=1);for(let t in s)o[t]||(n[t]=s[t],o[t]=1);t[a]=s}else for(let t in l)o[t]=1}for(let t in r)t in n||(n[t]=void 0);return n}function aZ(t){return"object"==typeof t&&null!==t?t:{}}function aY(t,e,n){let r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function aq(t){t&&t.c()}function aK(t,e,n,r){let{fragment:o,after_update:a}=t.$$;o&&o.m(e,n),r||aA(()=>{let e=t.$$.on_mount.map(oO).filter(oN);t.$$.on_destroy?t.$$.on_destroy.push(...e):o_(e),t.$$.on_mount=[]}),a.forEach(aA)}function aJ(t,e){let n=t.$$;null!==n.fragment&&(o_(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function aQ(t,e,n,r,a,l,s){let c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],d=o;o=t;let u=t.$$={fragment:null,ctx:[],props:l,update:oF,not_equal:a,bound:oz(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:oz(),dirty:c,skip_bound:!1,root:e.target||d.$$.root};s&&s(u.root);let h=!1;if(u.ctx=n?n(t,e.props||{},function(e,n){for(var r=arguments.length,o=Array(r>2?r-2:0),l=2;l<r;l++)o[l-2]=arguments[l];let s=o.length?o[0]:n;return u.ctx&&a(u.ctx[e],u.ctx[e]=s)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](s),h)&&(-1===t.$$.dirty[0]&&(aS.push(t),aR(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31),n}):[],u.update(),h=!0,o_(u.before_update),u.fragment=!!r&&r(u.ctx),e.target){if(e.hydrate){let t=Array.from(e.target.childNodes);u.fragment&&u.fragment.l(t),t.forEach(o7)}else u.fragment&&u.fragment.c();e.intro&&a_(t.$$.fragment),aK(t,e.target,e.anchor,e.customElement),aF()}o=d}class a1{$destroy(){aJ(this,1),this.$destroy=oF}$on(t,e){if(!oN(e))return oF;let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{let t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&0!==Object.keys(t).length&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let a0=[];function a2(t,e){return{subscribe:a4(t,e).subscribe}}function a4(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oF,r=new Set;function o(n){if(oW(t,n)&&(t=n,e)){let e=!a0.length;for(let e of r)e[1](),a0.push(e,t);if(e){for(let t=0;t<a0.length;t+=2)a0[t][0](a0[t+1]);a0.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(a){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oF,s=[a,l];return r.add(s),1===r.size&&(e=n(o)||oF),a(t),()=>{r.delete(s),0===r.size&&(e(),e=null)}}}}function a5(t,e,n){let r=!Array.isArray(t),o=r?[t]:t,a=e.length<2;return a2(n,t=>{let n=!1,l=[],s=0,c=oF,d=()=>{if(s)return;c();let n=e(r?l[0]:l,t);a?t(n):c=oN(n)?n:oF},u=o.map((t,e)=>oj(t,t=>{l[e]=t,s&=~(1<<e),n&&d()},()=>{s|=1<<e}));return n=!0,d(),function(){o_(u),c()}})}var a3=t=>t.reduce((t,e)=>Object.assign(t,e),{});let a6=t=>({updateValue:t}),a8=t=>({defaultValue:t}),a7=t=>({store:t}),a9=t=>({store:(e,n)=>a5(...t(n))}),lt=t=>({store:(e,n)=>{let r;let[o,a,l=()=>!1]=t(n),s=!0;return a5(o,(t,e)=>{a(t,t=>{!s&&l(r,t)||(r=t,s=!1,e(t))})})}}),le=t=>({store:(e,n)=>{let[r,o={},a]=t(n),l=[],s={},c=t=>r(t,s),d=t=>{(l.length||t.length)&&(l=t,u())},u=()=>{let t=l.map(c);a&&t.sort(a),l=[...t],p(t)};Object.entries(o).map(t=>{let[e,n]=t;return n.subscribe(t=>{s[e]=t,t&&u()})});let{subscribe:h,set:p}=a4(e||[]);return{set:d,update:t=>d(t(l)),subscribe:h}}}),li=(t,e,n)=>{let r;let{store:o=t=>a4(t),defaultValue:a=y,updateValue:l}=n,s=o(a(),e,t),{subscribe:c,update:d=y}=s,u=t=>{let e=!0;r&&r(),r=c(n=>{if(e)return e=!1;t(n),r(),r=void 0})},h=l?l(t):tf;return s.set=t=>d(e=>h(t,e,u)),s.defaultValue=a,s};var ln=t=>{let e={},n={};return t.forEach(t=>{let[r,...o]=t,a=a3(o),l=e[r]=li(n,e,a);Object.defineProperty(n,r,{get:()=>oH(l),set:l.set})}),{stores:e,accessors:n}},lr=[["src",a7(()=>{let t;let{subscribe:e,set:n}=a4(),r=e=>{t!==e&&n(t=e)};return{set:r,subscribe:e,update:e=>r(e(t))}})],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",a8(()=>"pixelated")],["images",a8(()=>[])],["shapePreprocessor"],["willRequestResource"],["willRequest"],["csp"]],lo=t=>t.charAt(0).toUpperCase()+t.slice(1),la=(t,e)=>{Object.keys(e).forEach(n=>{let r=W(e[n])?{value:e[n],writable:!1}:e[n];Object.defineProperty(t,n,r)})};let ll=(t,e)=>{let n,r,o,a,l,s,c,d,u;let h=e.length;for(n=0;n<h;n++)if(r=e[n],o=e[n+1>h-1?0:n+1],a=r.x-t.x,l=r.y-t.y,s=o.x-t.x,c=o.y-t.y,d=a-s,u=l-c,d*l-u*a<-.00001)return!1;return!0};var ls=(t,e)=>{let n=ie(e),r=tF();e0(t).forEach(t=>{tJ(t,r),ll(t,e)||n.forEach(e=>{let n=Math.atan2(e.start.y-e.end.y,e.start.x-e.end.x),o=tB(t.x+1e4*Math.sin(Math.PI-n),t.y+1e4*Math.cos(Math.PI-n)),a=ex(ey(e),1e4),l=e6(e$(t,o),a);l&&tJ(r,tQ(tN(l),t))})});let o=ek(t);return tJ(o,r),!!e0(o).every(t=>ll(t,e))&&(eG(t,o),!0)},lc=(t,e)=>{let n=e0(t),r=ii(e,5),o=eF(t),a=[];n.forEach(t=>{let e=eb(e$(tN(o),tN(t)),1e6),n=!1;r.map(ey).forEach(t=>{let r=e6(e,t);r&&!n&&(a.push(r),n=!0)})});let l=eA(t3(a[0],a[2])<t3(a[1],a[3])?[a[0],a[2]]:[a[1],a[3]]);return l.width<t.width&&(eG(t,l),!0)},ld=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=eT(t),o=eF(r),a=e4(r,n,o).map(t=>tV(t,e,o)),l=eA(a);return a.map(t=>tQ(t,l))},lu=function(t){let e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eV(t);if(0!==r){let a;let l=Math.atan2(1,o),s=Math.sign(r)*r,c=s%Math.PI,d=s%ty;a=c>tx&&c<ty+tx?d>tx?s:ty-d:d>tx?ty-d:s;let u=Math.min(Math.abs(t.height/Math.sin(l+a)),Math.abs(t.width/Math.cos(l-a)));n=(e=Math.cos(l)*u)/o}else(n=(e=t.width)/o)>t.height&&(e=(n=t.height)*o);return el(e,n)},lh=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tF(),o=arguments.length>4?arguments[4]:void 0;if(nt(n)&&0!==n||r.x||r.y){let o=eV(t),a=ld(e,n,r),l=lu(e,n,o);if(!(t.width<l.width&&t.height<l.height)){let e=.5*t.width-.5*l.width,n=.5*t.height-.5*l.height;t.width>l.width&&(t.width=l.width,t.x+=e),t.height>l.height&&(t.height=l.height,t.y+=n)}ls(t,a),lc(t,a)&&ls(t,a)}else{let n=eV(t);t.width=Math.min(t.width,e.width),t.height=Math.min(t.height,e.height),t.x=Math.max(t.x,0),t.x+t.width>e.width&&(t.x-=t.x+t.width-e.width),t.y=Math.max(t.y,0),t.y+t.height>e.height&&(t.y-=t.y+t.height-e.height);let r=eF(t),a=eQ(t,n);a.width=Math.max(o.width,a.width),a.height=Math.max(o.height,a.height),a.x=r.x-.5*a.width,a.y=r.y-.5*a.height,eG(t,a)}},lp=(t,e,n,r,o,a,l,s)=>{let c=ee(l),d=ee(s),u=tE(Math.max(e.width/d.width,e.height/d.height)),h=tE(Math.min(e.width/c.width,e.height/c.height)),p=ek(e);if(h<1||u>1){let n=eF(t),r=eF(e),o=h<1?h:u,a=(r.x+n.x)/2,l=(r.y+n.y)/2,s=p.width/o,c=p.height/o;eU(p,a-.5*s,l-.5*c,s,c)}return a&&lh(p,n,r,o,c),{crop:p}},lg=(t,e,n)=>{let r=eT(t),o=eF(r),a=eF(e5(eA(eX(r,n,o)))),l=tq(tJ(o,tQ(tV(eF(e),-n,a),a)),tE);return eL(l.x-.5*e.width,l.y-.5*e.height,e.width,e.height)},lm=(t,e,n)=>Math.max(e,Math.min(t,n)),lf=(t,e,n,r,o,a,l,s,c,d)=>{let u=ee(c),h=ee(d);l&&(h.width=Math.min(d.width,o.width),h.height=Math.min(d.height,o.height));let p=!1,g=(e,n)=>{let c=lg(o,r,e),d=eT(o),m=eF(d),f=e4(d,a,m),$=tQ(tN(m),e3(f)),y=tV(eF(c),n,m),x=tQ(tN(m),y);f.forEach(t=>tV(t,n,m));let b=eA(f),v=tJ(tQ(tQ(e3(f),x),b),$),w=eL(v.x-.5*c.width,v.y-.5*c.height,c.width,c.height);s&&eD(w,s.width/w.width),l&&lc(w,ld(o,n,a));let S=tE(Math.min(w.width/u.width,w.height/u.height),8),k=tE(Math.max(w.width/h.width,w.height/h.height),8);return(S<1||k>1)&&tE(Math.abs(n-e))===tE(Math.PI/2)&&!p?(p=!0,g(t,t+Math.sign(n-e)*Math.PI)):{rotation:n,crop:e2(w,t=>tE(t,8))}},m=Math.sign(e)*Math.round(Math.abs(e)/ty)*ty;return g(t,lm(e,m+n[0],m+n[1]))};let l$=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume","minDuration","maxDuration","currentTime"],ly=t=>{if(nn(t))return t.map(ly);if(iz(t)||ih(t));else if(O(t))return{...t};return t},lx=t=>t.map(t=>Object.entries(t).reduce((t,e)=>{let[n,r]=e;return n.startsWith("_")||(t[n]=r),t},{}));var lb=t=>{if(t){if(/:/.test(t)){let[e,n]=t.split(":");return e/n}return parseFloat(t)}};let lv=(t,e)=>t===e;var lw=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lv;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0},lS=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 4===t.length?t:[...t,e]};let lk=(t,e,n)=>{let r=tq(eF(t),t=>tE(t,8)),o=eT(e),a=eF(o),l=tq(ed(eA(eX(o,n,a))),t=>tE(t,8)),s=Math.abs(l.x-r.x),c=Math.abs(l.y-r.y);return s<1&&c<1},lC=(t,e,n)=>es(eg(lu(e,n,eV(t)),Math.round),eg(ee(t),Math.round)),lM=(t,e,n,r,o)=>{if(!o)return[-1/0,1/0];let a=Math.max(n.width/r.width,n.height/r.height),l=el(r.width*a,r.height*a),s=em(l);if(s<Math.min(t.width,t.height))return[-1/0,1/0];let c=e?t.height:t.width,d=e?t.width:t.height,u=Math.acos(l.height/s),h=u-Math.acos(d/s),p=Math.asin(c/s)-u;if(Number.isNaN(h)&&Number.isNaN(p))return[-1/0,1/0];let g=Number.isNaN(h)?p:Number.isNaN(p)?h:Math.min(h,p);return[-g,g]},lT=(t,e,n,r,o,a)=>{let l=ee(r),s=ee(o);return a?[l,eg(lu(t,e,n),Math.round)]:[l,s]},lP=(t,e)=>{let{context:n,props:r}=e;return t._isFormatted||((t=rq(t))._isFormatted=!0,Object.assign(t,r)),!t._isDraft&&rg(t)&&(!t._context||!eH(n,t._context))&&(or(t,n),t._context={...n}),t},lR=(t,e)=>(t._isFormatted||(t.disableMove=!0,t.disableSelect=!0,t.disableResize=!0,t.disableRotate=!0),lP(t,e));var lA=[["file"],["size"],["loadState"],["processState"],["aspectRatio",a9(t=>{let{size:e}=t;return[e,t=>t?eV(t):void 0]})],["perspectiveX",a8(()=>0)],["perspectiveY",a8(()=>0)],["perspective",a9(t=>{let{perspectiveX:e,perspectiveY:n}=t;return[[e,n],t=>{let[e,n]=t;return{x:e,y:n}}]})],["rotation",a8(()=>0),a6(t=>(e,n,r)=>{if(e===n)return e;let{loadState:o,size:a,rotationRange:l,cropMinSize:s,cropMaxSize:c,crop:d,perspective:u,cropLimitToImage:h,cropOrigin:p}=t;if(!d||!o||!o.beforeComplete)return e;let g=h&&lC(d,a,n),m=h&&lk(d,a,n),f=lf(n,e,l,d,a,u,h,p,s,c);if(g&&m){let t=lu(a,e,eV(f.crop));f.crop.x+=.5*f.crop.width,f.crop.y+=.5*f.crop.height,f.crop.x-=.5*t.width,f.crop.y-=.5*t.height,f.crop.width=t.width,f.crop.height=t.height}return r(()=>{t.crop=e2(f.crop,t=>tE(t,8))}),f.rotation})],["flipX",a8(()=>!1)],["flipY",a8(()=>!1)],["flip",a9(t=>{let{flipX:e,flipY:n}=t;return[[e,n],t=>{let[e,n]=t;return{x:e,y:n}}]})],["isRotatedSideways",lt(t=>{let{rotation:e}=t;return[[e],(t,e)=>{let[n]=t;return e(tb(n))},(t,e)=>t!==e]})],["crop",a6(t=>function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,{loadState:r,size:o,cropMinSize:a,cropMaxSize:l,cropLimitToImage:s,cropAspectRatio:c,rotation:d,perspective:u}=t;if(!e&&!n||!r||!r.beforeComplete)return e;e||(e=eT(lu(o,d,c||eV(o))));let h=e2(lp(n,e,o,d,u,s,a,l).crop,t=>tE(t,8));return eH(n,h)?n:h})],["cropAspectRatio",a6(t=>(e,n)=>{let{loadState:r,crop:o,size:a,rotation:l,cropLimitToImage:s}=t,c=lb(e);if(!c)return;if(!o||!r||!r.beforeComplete)return c;let d=n?Math.abs(e-n):1;if(lk(o,a,l)&&s&&d>=.1){let n=eh(ee(a),l);t.crop=e2(eQ(eT(n),e),tE)}else{let e={width:o.height*c,height:o.height},n=(o.width-e.width)*.5,r=(o.height-e.height)*.5;t.crop=e2(eL(o.x+n,o.y+r,e.width,e.height),tE)}return c})],["cropOrigin"],["cropMinSize",a8(()=>({width:1,height:1}))],["cropMaxSize",a8(()=>({width:32768,height:32768}))],["cropLimitToImage",a8(()=>!0),a6(t=>(e,n,r)=>{let{crop:o}=t;return o&&!n&&e&&r(()=>t.crop=ek(t.crop)),e})],["cropSize",lt(t=>{let{crop:e}=t;return[[e],(t,e)=>{let[n]=t;n&&e(el(n.width,n.height))},(t,e)=>es(t,e)]})],["cropRectAspectRatio",a9(t=>{let{cropSize:e}=t;return[[e],(t,e)=>{let[n]=t;n&&e(tE(eV(n),5))}]})],["cropRange",lt(t=>{let{size:e,rotation:n,cropRectAspectRatio:r,cropMinSize:o,cropMaxSize:a,cropLimitToImage:l}=t;return[[e,n,r,o,a,l],(t,e)=>{let[n,r,o,a,l,s]=t;n&&e(lT(n,r,o,a,l,s))},(t,e)=>lw(t,e)]})],["rotationRange",lt(t=>{let{size:e,isRotatedSideways:n,cropMinSize:r,cropSize:o,cropLimitToImage:a}=t;return[[e,n,r,o,a],(t,e)=>{let[n,r,o,a,l]=t;n&&a&&e(lM(n,r,o,a,l))},(t,e)=>lw(t,e)]})],["backgroundColor",a6(()=>t=>lS(t))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["currentTime"],["minDuration",a8(()=>1/24)],["maxDuration",a8(()=>1/0)],["volume",a8(()=>1)],["trim"],["redaction",le(t=>{let{size:e}=t;return[lP,{context:e}]})],["manipulation",le(t=>{let{size:e}=t;return[lP,{context:e}]})],["annotation",le(t=>{let{size:e}=t;return[lP,{context:e}]})],["decoration",le(t=>{let{crop:e}=t;return[lP,{context:e}]})],["selection",le(t=>{let{size:e}=t;return[lR,{context:e}]})],["frame",a6(()=>t=>{if(!t)return;let e={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return N(t)?e.frameStyle=t:Object.assign(e,t),e})],["metadata"],["state",a7((t,e,n)=>{let r=l$.map(t=>e[t]),o=!1,a=a4({}),{subscribe:l}=a5([...r,a],(t,e)=>{if(o)return;let n=l$.reduce((e,n,r)=>(e[n]=ly(t[r]),e),{});n.crop&&e2(n.crop,Math.round),n.manipulation=n.manipulation&&lx(n.manipulation),n.redaction=n.redaction&&lx(n.redaction),n.annotation=n.annotation&&lx(n.annotation),n.decoration=n.decoration&&lx(n.decoration),n.selection=n.selection&&lx(n.selection),e(n)}),s=t=>{t&&(o=!0,n.cropOrigin=void 0,l$.filter(e=>ni(t,e)).forEach(e=>{let r=t[e];n[e]=null===r?void 0:ly(r)}),o=!1,a.set({}))};return{set:s,update:t=>s(t(null)),subscribe:l}})]],lE=async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,{ontaskstart:o,ontaskprogress:a,ontaskend:l,token:s}=r,c=!1,d={cancel:y};for(let[r,u]of(s.cancel=()=>{c=!0,d.cancel()},e.entries())){if(c)return;let[e,s]=u;o(r,s);try{t=await e(t,{...n,taskCancelToken:d},t=>a(r,s,t))}catch(t){throw c=!0,t}l(r,s)}return t},lI=function(){let{minSize:t={width:1,height:1},minDuration:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stores:n,accessors:r}=ln(lA),{pub:o,sub:a}=nw(),l=(t,e)=>{let n=()=>r[t]||{},a=e=>{r[t]={...n(),...e,timeStamp:Date.now()}},l=()=>n().error,s=t=>{l()||(a({error:t}),o("".concat(e,"error"),{...n()}))};return{start(){o("".concat(e,"start"))},onabort(){a({abort:!0}),o("".concat(e,"abort"),{...n()})},ontaskstart(t,r){l()||(a({index:t,task:r,taskProgress:void 0,taskLengthComputable:void 0}),o("".concat(e,"taskstart"),{...n()}))},ontaskprogress(t,r,s){l()||(a({index:t,task:r,taskProgress:s.loaded/s.total,taskLengthComputable:s.lengthComputable}),o("".concat(e,"taskprogress"),{...n()}),o("".concat(e,"progress"),{...n()}))},ontaskend(t,r){l()||(a({index:t,task:r}),o("".concat(e,"taskend"),{...n()}))},ontaskerror(t){s(t)},error(t){s(t)},beforeComplete(t){l()||(a({beforeComplete:!0}),o("before".concat(e),t))},complete(t){l()||(a({complete:!0}),o(e,t))}}};return la(r,{read:function(n,o){let{reader:a}=o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!a)return;Object.assign(r,{file:void 0,size:void 0,loadState:void 0});let c={cancel:y},d=!1,u=l("loadState","load"),h={token:c,...u},p={src:n,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(async()=>{try{if(u.start(),d)return u.onabort();let n=await lE(p,a,s,h);if(d)return u.onabort();let{size:o,duration:l,dest:c}=n||{};if(!o||!o.width||!o.height)throw new iF("Image size missing","IMAGE_SIZE_MISSING",n);if(l>0&&l<e)throw new iF("Video too short","VIDEO_TOO_SHORT",{...n,minDuration:e});if(o.width<t.width||o.height<t.height)throw new iF("Image too small","IMAGE_TOO_SMALL",{...n,minWidth:t.width,minHeight:t.height});Object.assign(r,{file:c,size:o,duration:l}),u.beforeComplete(n),u.complete(n)}catch(t){u.error(t)}finally{c=void 0}}),()=>{d=!0,c&&c.cancel(),u.onabort()}},write:(t,e)=>{if(!r.loadState.complete)return;r.processState=void 0;let n=l("processState","process"),o={src:r.file,imageState:r.state,dest:void 0};if(W(t)&&(t=t(r.file,r.state)),!t){n.start(),n.complete(o);return}let a={cancel:y},s=!1,c={token:a,...n};return Promise.resolve().then(async()=>{try{if(n.start(),s)return n.onabort();let r=await lE(o,t,e,c);if(s)return n.onabort();n.complete(r)}catch(t){n.error(t)}finally{a=void 0}}),()=>{s=!0,a&&a.cancel()}},on:a}),{accessors:r,stores:n}};let lL=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],lF=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],lB=lA.map(t=>{let[e]=t;return e}).filter(t=>!lF.includes(t)),lD=t=>"image".concat(lo(t)),lO=t=>N(t)||nh(t)||iu(t),lz=t=>ni(t,"crop");var l_=()=>{let t,e;let{stores:n,accessors:r}=ln(lr),{sub:o,pub:a}=nw(),l=t=>e=>a(t,e),s=()=>r.images?r.images[0]:{},c={},d={};lB.forEach(t=>{Object.defineProperty(r,lD(t),{get:()=>{let e=s();if(e)return e.accessors[t]},set:e=>{c[lD(t)]=e,d[lD(t)]=e;let n=s();n&&(n.accessors[t]=e)}})});let u=()=>r.images&&r.images[0],h=n.src.subscribe(t=>{if(!t)return r.images=[];r.imageReader&&(r.images.length&&(c={}),g(t))}),p=n.imageReader.subscribe(t=>{t&&!r.images.length&&r.src&&g(r.src)}),g=t=>{Promise.resolve().then(()=>f(t,c)).catch(()=>{})},m=(t,e)=>{if(lz(e)){r.imageState=e;return}if(!e.imageCrop){let n;let r=t.accessors.size,o=e.imageRotation||0,a=eT(eu(ee(r),o));a.width=tE(Math.abs(a.width),6),a.height=tE(Math.abs(a.height),6);let l=e.imageCropAspectRatio||(e.imageCropLimitToImage?eV(r):eV(a));e.imageCropLimitToImage?n=eQ(a,l):((n=eq(a,l)).x=(r.width-n.width)/2,n.y=(r.height-n.height)/2),e.imageCrop=n}if(t.accessors.duration&&!e.imageTrim&&e.imageMaxDuration){let{duration:n}=t.accessors;e.imageTrim=[[0,Math.min(e.imageMaxDuration/n,1)]]}let n=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];n.filter(t=>ni(e,t)).forEach(t=>{r[t]=e[t],delete e[t]}),Object.assign(r,Object.keys(e).filter(t=>!n.includes(t)).reduce((t,n)=>(t[n]=e[n],t),{}))},f=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((o,a)=>{let s=u(),h=!(!1===n.cropLimitToImage||!1===n.imageCropLimitToImage||!1===d.imageCropLmitedToImage),p=n.cropMinSize||n.imageCropMinSize||d.imageCropMinSize,g=h?p:s&&s.accessors.cropMinSize,f=n.minDuration||n.imageMinDuration;s&&$(),s=lI({minSize:g,minDuration:f}),lL.map(t=>s.accessors.on(t,l(t)));let y=()=>{c={},x.forEach(t=>t())},x=[];x.push(s.accessors.on("loaderror",t=>{y(),a(t)})),x.push(s.accessors.on("loadabort",()=>{y(),a({name:"AbortError"})})),x.push(s.accessors.on("load",e=>{t=void 0,y(),o(e)})),x.push(s.accessors.on("beforeload",()=>m(s,n))),r.images=[s],n.imageReader&&(r.imageReader=n.imageReader),n.imageWriter&&(r.imageWriter=n.imageWriter),t=s.accessors.read(e,{reader:r.imageReader},{willRequest:r.willRequest})})},$=()=>{let e=u();e&&(t&&t(),e.accessors.loadState=void 0,r.images=[])};return Object.defineProperty(r,"stores",{get:()=>n}),la(r,{on:o,loadImage:f,abortLoadImage:()=>{t&&t(),r.images=[]},editImage:(t,e)=>new Promise((n,o)=>{f(t,e).then(()=>{let{images:t}=r,e=t[0],a=()=>{l(),s()},l=e.accessors.on("processerror",t=>{a(),o(t)}),s=e.accessors.on("process",t=>{a(),n(t)})}).catch(o)}),removeImage:$,processImage:(t,n)=>new Promise((o,a)=>{try{let l=[],s=()=>{e=void 0,l.forEach(t=>t())};(async()=>{if(lO(t))try{await f(t,n)}catch(t){a(t)}else t&&(lz(t)?r.imageState=t:Object.assign(r,t));let c=u();if(!c)return a("no image");l.push(c.accessors.on("processerror",t=>{s(),a(t)})),l.push(c.accessors.on("processabort",()=>{s(),a({name:"AbortError"})})),l.push(c.accessors.on("process",t=>{s(),o(t)})),e=c.accessors.write(r.imageWriter,{redactionRenderStyle:r.imageRedactionRendering,shapePreprocessor:r.shapePreprocessor||tf,imageScrambler:r.imageScrambler,willRequest:r.willRequest,csp:r.csp||{},willRequestResource:r.willRequestResource})})()}catch(t){a(t)}}),abortProcessImage:()=>{let t=u();t&&(e&&e(),t.accessors.processState=void 0)},destroy:()=>{h&&h(),p&&p()}}),r};let lN=(t,e)=>{let{processImage:n}=l_();return n(t,e)};var lW=()=>ib()?iV()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,lj=(t,e)=>Object.keys(t).filter(t=>!e.includes(t)).reduce((e,n)=>(e[n]=t[n],e),{}),lH=t=>new Promise(e=>{if(t.duration===1/0){t.ontimeupdate=()=>{t.ontimeupdate=void 0,e(t)},t.currentTime=Number.MAX_SAFE_INTEGER;return}e(t)}),lV=t=>new Promise((e,n)=>{let r=()=>{lH(t).then(()=>{e(t.duration)})};if(t.readyState>=1)return r();t.onloadedmetadata=r,t.onerror=()=>n(t.error)}),lU=async t=>lq(new DataView(await lG(t)));let lG=t=>new Promise(e=>{let n=new FileReader;n.onload=()=>e(n.result),n.readAsArrayBuffer(t)}),lX=(t,e,n)=>{let r=!1,o=-1;for(let a=e;a<n;a++)if(r||1953653099!==t.getUint32(a)||(r=!0,a+=4),r&&64==t.getUint8(a)){o=a;break}if(o<0)return 0;let a=t.getUint32(o-28),l=t.getUint32(o-20),s=t.getUint32(o-32),c=t.getUint32(o-16);return 65536===a&&4294901760===l?90:4294901760===s&&4294901760===c?180:4294901760===a&&65536===l?270:0},lZ=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength,r=[],o=e+n;for(;e<o;){let n=t.getUint32(e);if(n<0)break;let o=t.getUint32(e+4);if(r.push({type:o,size:n,offset:e,bodyOffset:e+8,bodySize:n-8}),n<8)break;e+=n}return r},lY=t=>{let e=lZ(t).find(t=>1836019574===t.type);if(!e)return 0;let n=lZ(t,e.bodyOffset,e.bodySize);n.filter(t=>1953653099===t.type).forEach(e=>{n.push(...lZ(t,e.bodyOffset,e.bodySize))});let r=[1836476516,1953196132];for(let{type:e,bodyOffset:o}of n.filter(t=>r.includes(t.type))){let n=t.getUint8(o),r=o+4;r+=(1836476516===e?32:36)+(1===n?12:0);let a=t.getInt32(r),l=t.getInt32(r+4);if(0===a&&l>0)return 90;if(a<0&&0===l)return 180;if(0===a&&l<0)return 270}return 0},lq=function(t){let e,{limit:n=1024}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=4,1718909296!==t.getUint32(e))return 0;e+=4;let r=t.getUint32(e);return 1836069938===r?lX(t,e,n):1903435808===r?lY(t):0};var lK=t=>{iV()&&(t.load(),t.play().catch(()=>{}),t.pause())},lJ=t=>new Promise((e,n)=>{(tt()?lU(t):Promise.resolve(0)).then(r=>{let o=document.createElement("video");o.onerror=()=>n(o.error),o.playsInline=!0,o.preload="auto",o.onseeked=()=>{o.onseeked=void 0,e(o)},o.onloadeddata=()=>{o.onloadeddata=void 0,o.dataset.rotation=r?"".concat(r):"0",lH(o).then(e),o.currentTime=0},o.src=URL.createObjectURL(t),lK(o)})}),lQ=(t,e)=>new Promise(n=>{if(t.currentTime===e)return n(t);let r=t.onseeked;t.onseeked=()=>{t.onseeked=r,n(t)},t.currentTime=lm(e,0,t.duration)}),l1=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((n,r)=>{lJ(t).then(t=>{lQ(t,e).then(t=>{let e=M("canvas");iw(t).then(r=>{let{width:o,height:a}=r;e.width=o,e.height=a;let l=e.getContext("2d",{willReadFrequently:!0}),s=()=>{l.drawImage(t,0,0,e.width,e.height);let r=l.getImageData(0,0,e.width,e.height);R(e),URL.revokeObjectURL(t.src),n(r)};ib()?setTimeout(s,16):s()})})})})},l0=t=>/video/.test(t.type);let l2=function(){let{imageDataResizer:t,canvasMemoryLimit:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async(n,r,o,a,l)=>{o.width=Math.max(o.width,1),o.height=Math.max(o.height,1),a.width=Math.max(a.width,1),a.height=Math.max(a.height,1);let{dest:s}=await lN(r,{imageReader:sw(),imageWriter:sk({format:"canvas",targetSize:{...a,upscale:!0},imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:o}),{feather:c=0}=l||{};if(c>0){let t=M("canvas");t.width=s.width,t.height=s.height;let e=t.getContext("2d",{willReadFrequently:!0}),n=1/c,r=0;for(r=0;r<c;r++){let t=r*n;e.strokeStyle="rgba(0,0,0,".concat(t*t,")"),e.strokeRect(r+.5,r+.5,s.width-2*r-1,s.height-2*r-1)}e.fillStyle="#000",e.fillRect(r,r,s.width+.5-2*r,s.height+.5-2*r);let o=s.getContext("2d");o.globalCompositeOperation="destination-in",o.drawImage(t,0,0),R(t)}n.drawImage(s,a.x,a.y,a.width,a.height),R(s)}},l4=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e},n=arguments.length>2?arguments[2]:void 0;return async(r,o,a)=>{a(iA(0,!1));let l=!1,s=await t(...e(r,o,t=>{l=!0,a(t)}));return n&&n(r,s),l||a(iA(1,!1)),r}},l5=function(){let{willRequest:t,srcProp:e="src",destProp:n="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(iN,(n,r,o)=>[n[e],o,{...r,willRequest:t}],(t,e)=>t[n]=e),"any-to-file"]},l3=function(){let{srcProp:t="dest",destProp:e="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(async t=>{if(/octet-stream/.test(t.type)){console.warn('Pintura: File has unknown mime type "'.concat(t.type,'", make sure your server sets the correct Content-Type header.'));let e="image",n=await ik(t);/video/i.test(n.nodeName)&&(e="video");let r={type:e+"/unknown"};return ih(t)?new File([t],t.name,{...r,lastModified:t.lastModified}):new Blob([t],r)}return t},e=>[e[t]],(t,n)=>t[e]=n),"any-to-file"]},l6=function(){let{srcProp:t="src",destProp:e="size"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(iM,e=>[e[t]],(t,n)=>t[e]=n),"read-image-size"]},l8=async t=>{let e=await ik(t);if(iC(e))return await lV(e)},l7=function(){let{srcProp:t="src",destProp:e="duration"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(l8,e=>[e[t]],(t,n)=>t[e]=n),"read-media-duration"]},l9=function(){let{srcSize:t="size",srcOrientation:e="orientation",destSize:n="size"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(iU,n=>[n[t],n[e]],(t,e)=>t[n]=e),"image-size-match-orientation"]},st=function(){let{srcProp:t="src",destProp:e="head"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4((t,e)=>iG(t)?b(t,e):void 0,e=>[e[t],[0,262144],onprogress],(t,n)=>t[e]=n),"read-image-head"]},se=function(){let{srcProp:t="head",destProp:e="orientation"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(m,e=>[e[t],274],function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t[e]=n}),"read-exif-orientation-tag"]},si=function(){let{srcProp:t="head"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(m,e=>[e[t],274,1]),"clear-exif-orientation-tag"]},sn=function(){let{srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:n="imageState",destImageSize:r="size",destScalar:o="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4((t,e)=>[Math.min(e.width/t.width,e.height/t.height),ei(e)],r=>[r[t],r[e],r[n]],(t,e)=>{let[n,a]=e;t[o]=n,t[r]=a}),"calculate-canvas-scalar"]},sr=function(){let{srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:n,srcImageState:r="imageState"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4((t,e,n)=>l0(t)?l1(t,n.currentTime):ti(t,e),e=>[e[t],n,e[r]],(t,n)=>t[e]=n),"blob-to-image-data"]},so=function(){let{srcImageData:t="imageData",srcOrientation:e="orientation"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(D,n=>[n[t],n[e]],(t,e)=>t.imageData=e),"image-data-match-orientation"]},sa=function(){let{srcImageData:t="imageData",srcImageState:e="imageState"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(oR,n=>[n[t],{backgroundColor:n[e].backgroundColor,backgroundImage:n[e].backgroundImage}],(t,e)=>t.imageData=e),"image-data-fill"]},sl=function(){let{srcImageData:t="imageData",srcImageState:e="imageState",destScalar:n="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(iQ,r=>{let o=r[n],{crop:a}=r[e];return a&&1!==o&&(a=eD(ek(a),o,tF())),[r[t],{crop:a,rotation:r[e].rotation,flipX:r[e].flipX,flipY:r[e].flipY}]},(t,e)=>t.imageData=e),"image-data-crop"]},ss=t=>!!(t.targetSize&&t.targetSize.width||t.targetSize&&t.targetSize.height),sc=t=>{let{targetSize:e={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:n,srcProp:r="imageData",srcImageState:o="imageState",destImageScaledSize:a="imageScaledSize"}=t;return[l4(i2,t=>{let a=Math.min(e.width||Number.MAX_SAFE_INTEGER,t[o].targetSize&&t[o].targetSize.width||Number.MAX_SAFE_INTEGER),l=Math.min(e.height||Number.MAX_SAFE_INTEGER,t[o].targetSize&&t[o].targetSize.height||Number.MAX_SAFE_INTEGER);return[t[r],{width:a,height:l,fit:e.fit||"contain",upscale:!!ss(t[o])||e.upscale||!1},n]},(t,e)=>{es(t.imageData,e)||(t[a]=ei(e)),t.imageData=e}),"image-data-resize"]},sd=function(){let{srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(i9,n=>{let{colorMatrix:r}=n[e],o=r&&Object.keys(r).map(t=>r[t]).filter(Boolean);return[n[t],{colorMatrix:o&&oE(o),convolutionMatrix:n[e].convolutionMatrix,gamma:n[e].gamma,noise:n[e].noise,vignette:n[e].vignette}]},(t,e)=>t[n]=e),"image-data-filter"]},su=function(){let{srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destScalar:r="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(async(t,e,n,r,o,a)=>{let l;if(!e||!r.length)return t;try{let o={dataSizeScalar:oL(t,r)};n&&n[3]>0&&(o.backgroundColor=[...n]),l=await e(t,o)}catch(t){}let s=M("canvas");s.width=t.width,s.height=t.height;let c=s.getContext("2d",{willReadFrequently:!0});if(c.putImageData(t,0,0),"auto"===a){let e=Math.sqrt(t.width*t.height);c.filter="blur(".concat(Math.round(e/100),"px)")}let d=new Path2D;r.forEach(t=>{let e=eL(t.x,t.y,t.width,t.height);e_(e,o);let n=eX(ek(e),t.rotation),r=new Path2D;n.forEach((t,e)=>{if(0===e)return r.moveTo(t.x,t.y);r.lineTo(t.x,t.y)}),d.addPath(r)}),c.clip(d,"nonzero"),c.imageSmoothingEnabled=!1,c.drawImage(l,0,0,s.width,s.height),R(l);let u=c.getImageData(0,0,s.width,s.height);return R(s),u},(n,o)=>{let{imageScrambler:a,redactionRenderStyle:l}=o;return[n[t],a,n[e].backgroundColor,n[e].redaction,n[r],l]},(t,e)=>t[n]=e),"image-data-redact"]},sh=function(){let{srcImageData:t="imageData",srcSize:e="size",srcImageState:n="imageState",srcShapes:r="annotation",destImageData:o="imageData",destImageScaledSize:a="imageScaledSize",destScalar:l="scalar",imageDataResizer:s,canvasMemoryLimit:c,shapeFilter:d=tf,shapeClip:u=!0,destImageContext:h="imageContext"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(oP,(o,p)=>{let{shapePreprocessor:g,willRequestResource:m,csp:f,willRequest:$}=p,y=o[n][r].filter(d);if(!y.length)return[o[t]];let x=o[l],{crop:b}=o[n],v=o[e],w=x,S=o[a];S&&(w=Math.min(S.width/b.width,S.height/b.height));let k={width:v.width/x,height:v.height/x};return[o[t],{shapes:y,computeShape:t=>t=oo(t=lj(t=r3(t,k),["left","right","top","bottom"]),w),transform:t=>{let r=o[e],{rotation:l=0,flipX:s,flipY:c,cropLimitToImage:d}=o[n],{crop:p=eT(r)}=o[n],g=o[a],m=1;m=g?w:x;let f={width:r.width/x*m,height:r.height/x*m},$=id(f,l),y={width:$.width,height:$.height},b=.5*f.width-.5*y.width,v=.5*f.height-.5*y.height,S=ed(f);t.translate(-b,-v),t.translate(-p.x*m,-p.y*m),t.translate(S.x,S.y),t.rotate(l),t.translate(-S.x,-S.y);let k=o[h]||{x:0,y:0};t.translate(k.x,k.y),t.scale(s?-1:1,c?-1:1),t.translate(s?-f.width*x:0,c?-f.height*x:0),d&&u&&(t.rect(0,0,f.width,f.height),t.clip())},drawImage:l2({imageDataResizer:s,canvasMemoryLimit:c}),preprocessShape:t=>g(t,{isPreview:!1,...o[n]}),canvasMemoryLimit:c,willRequest:$||m,styleNonce:f.styleNonce}]},(t,e)=>t[o]=e),"image-data-annotate"]},sp=function(){let{srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destImageScaledSize:r="imageScaledSize",imageDataResizer:o,canvasMemoryLimit:a,destScalar:l="scalar",shapeFilter:s=tf,destImageContext:c="imageContext"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(oP,(n,d)=>{let{shapePreprocessor:u,willRequestResource:h,willRequest:p,csp:g}=d,m=n[e].decoration.filter(s);if(!m.length)return[n[t]];let f=n[l],{crop:$}=n[e],y=n[r];return y&&(f=Math.min(y.width/$.width,y.height/$.height)),[n[t],{shapes:m,drawImage:l2({imageDataResizer:o,canvasMemoryLimit:a}),computeShape:t=>t=oo(t=lj(t=r3(t,$),["left","right","top","bottom"]),f),preprocessShape:t=>u(t,{isPreview:!1,...n[e]}),canvasMemoryLimit:a,willRequest:p||h,styleNonce:g.styleNonce,transform:t=>{let e=n[c]||{x:0,y:0};t.translate(e.x,e.y)}}]},(t,e)=>t[n]=e),"image-data-decorate"]},sg=function(){let{srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destImageScaledSize:r="imageScaledSize",imageDataResizer:o,canvasMemoryLimit:a,destScalar:l="scalar",destImageContext:s="imageContext"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4((t,e)=>new Promise(n=>{if(!e)return n([t]);oP(t,e).then(t=>{n([t,e.contextBounds])})}),(n,s)=>{let{shapePreprocessor:c,willRequestResource:d,willRequest:u,csp:h}=s,p=n[e].frame;if(!p)return[n[t]];let g=n[l],{crop:m}=n[e];m&&1!==g&&(m=eD(ek(m),g,tF()));let f={...m},$=oi(on(p,f,c),f);f.x=Math.abs($.left),f.y=Math.abs($.top),f.width+=Math.abs($.left)+Math.abs($.right),f.height+=Math.abs($.top)+Math.abs($.bottom);let y=n[r];return e_(f,y?Math.min(y.width/m.width,y.height/m.height):1),f.x=Math.floor(f.x),f.y=Math.floor(f.y),f.width=Math.floor(f.width),f.height=Math.floor(f.height),[n[t],{shapes:[p],contextBounds:f,computeShape:e=>r3(e,n[t]),transform:t=>{t.translate(f.x,f.y)},drawImage:l2({imageDataResizer:o,canvasMemoryLimit:a}),preprocessShape:t=>c(t,{isPreview:!1,...n[e]}),canvasMemoryLimit:a,willRequest:u||d,styleNonce:h.styleNonce}]},(t,e)=>{let[r,o]=e;t[s]=o,t[n]=r}),"image-data-frame"]},sm=function(){let{mimeType:t,quality:e,srcImageData:n="imageData",srcFile:r="src",destBlob:o="blob"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(tr,o=>[o[n],t||th(o[r].name)||o[r].type,e],(t,e)=>t[o]=e),"image-data-to-blob"]},sf=function(){let{srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:n="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(B,n=>[n[t],n[e]],(t,e)=>t[n]=e),"image-data-to-canvas"]},s$=async(t,e)=>{if(!iG(t)||!e)return t;let n=p(new DataView(e));if(!n||!n.exif)return t;let r=["exif","mpf","xmp"].reduce((t,e)=>n[e]?Math.max(t,n[e].offset+n[e].size):t,0),o=e.slice(0,r+2),a=p(new DataView(await b(t,[0,262144])));return to(t,o,[a.app2?a.app2.offset+a.app2.size+2:a.jfif.offset+a.jfif.size+2])},sy=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"blob",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"head",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"blob";return[l4(s$,n=>[n[t],n[e]],(t,e)=>t[n]=e),"blob-write-image-head"]},sx=function(){let{renameFile:t,srcBlob:e="blob",srcFile:n="src",destFile:r="dest",defaultFilename:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[l4(tg,r=>[r[e],t?t(r[n]):r[n].name||"".concat(o,".").concat(tl(r[e].type))],(t,e)=>t[r]=e),"blob-to-file"]},sb=t=>{let{url:e="./",dataset:n=t=>[["dest",t.dest,t.dest.name],["imageState",t.imageState]],destStore:r="store",credentials:o,headers:a={}}=t;return[l4(async(t,n)=>await iY(e,t,{onprogress:n,beforeSend:t=>iB(t,{headers:a,credentials:o})}),(t,e,r)=>[n(t),r],(t,e)=>t[r]=e),"store"]},sv=t=>[l4(e=>(t&&t.length&&Object.keys(e).forEach(n=>{t.includes(n)||delete e[n]}),e)),"prop-filter"],sw=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{orientImage:e=!0,outputProps:n=["src","dest","size","duration"],preprocessImageFile:r,request:o={}}=t;return[l5({willRequest:()=>o}),l3(),r&&[l4(r,(t,e,n)=>[t.dest,e,n],(t,e)=>t.dest=e),"preprocess-image-file"],l6({srcProp:"dest"}),l7({srcProp:"dest"}),e&&st({srcProp:"dest"}),e&&se(),e&&l9(),sv(n)].filter(Boolean)},sS=t=>t&&(N(t)?sb({url:t}):W(t)?[t,"store"]:sb(t)),sk=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{canvasMemoryLimit:o=lW(),orientImage:a=!0,copyImageHead:l=!0,mimeType:s,quality:c,renameFile:d,targetSize:u,imageDataResizer:h,store:p,format:g="file",outputProps:m=["src","dest","imageState","store"],preprocessImageSource:f,preprocessImageState:$,postprocessImageData:y,postprocessImageBlob:x,testSrcSupport:b=!1}={...t,...r};if(!b||iS(e))return"blob"===g&&(g="file"),[f&&[l4(f,(t,e,n)=>[t.src,e,n,t.imageState],(t,e)=>t.src=e),"preprocess-image-source"],(a||l)&&st(),a&&se(),l6(),$&&[l4($,(t,e,n,r)=>[t.imageState,e,n,{size:t.size,orientation:t.orientation}],(t,e)=>t.imageState=e),"preprocess-image-state"],sr({canvasMemoryLimit:o}),a&&l9(),a&&so(),sn(),su(),sl(),sc({imageDataResizer:h,targetSize:u}),sh({imageDataResizer:h,canvasMemoryLimit:o,srcShapes:"manipulation"}),sd(),sa(),sh({imageDataResizer:h,canvasMemoryLimit:o,srcShapes:"annotation",shapeFilter:t=>!t.aboveFrame}),sp({imageDataResizer:h,canvasMemoryLimit:o,shapeFilter:t=>!t.aboveFrame}),sg({imageDataResizer:h,canvasMemoryLimit:o}),sh({imageDataResizer:h,canvasMemoryLimit:o,srcShapes:"annotation",shapeFilter:t=>t.aboveFrame,shapeClip:!1}),sp({imageDataResizer:h,canvasMemoryLimit:o,shapeFilter:t=>t.aboveFrame}),y&&[l4(y,(t,e,n)=>[t.imageData,e,n],(t,e)=>t.imageData=e),"postprocess-image-data"],"file"===g?sm({mimeType:s,quality:c}):"canvas"===g?sf():[t=>(t.dest=t.imageData,t)],"file"===g&&a&&si(),"file"===g&&l&&sy(),x&&[l4(x,(t,e,n)=>{let{blob:r,imageData:o,src:a}=t;return[{blob:r,imageData:o,src:a},e,n]},(t,e)=>t.blob=e),"postprocess-image-file"],"file"===g&&sx({defaultFilename:"image",renameFile:d}),"file"===g?sS(p):W(p)&&[p,"store"],sv(m)].filter(Boolean)}};var sC=(t,e,n,r,o,a,l,s,c,d,u)=>{if(!t||!e||!n||!r||!s)return;s*=a;let h=eF(e5(ek(e))),p=eF(t),g=eF(eT(n)),m=eF(lg(n,r,c)),f=tQ(tN(g),m),$=tQ(tN(p),h);f.x+=$.x,f.y+=$.y;let y=tj(tN(f));return y.x+=$.x,y.y+=$.y,tJ(f,tQ(eF(eB(eB(ek(o),l),t)),p)),{origin:y,translation:f,rotation:{x:u?Math.PI:0,y:d?Math.PI:0,z:c},scale:s}};let sM=null;var sT=()=>{if(null===sM){if("WebGL2RenderingContext"in window){let t;try{sM=!!(t=M("canvas")).getContext("webgl2")}catch(t){sM=!1}t&&R(t),t=void 0}else sM=!1}return sM},sP=t=>(t&t-1)==0,sR=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object.keys(e).filter(t=>!O(e[t])).reduce((t,o)=>t.replace(new RegExp(n+o+r),e[o]),t)};let sA={head:"#version 300 es\n\nin vec4 aPosition;uniform mat4 uMatrix;",text:"\nin vec2 aTexCoord;out vec2 vTexCoord;",matrix:"\ngl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);"},sE={head:"#version 300 es\nprecision highp float;\n\nout vec4 fragColor;",mask:"\nuniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}",init:"\nfloat a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);",colorize:"\nif(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}",maskapply:"\nfloat m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);",maskfeatherapply:"\nfloat leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;",rectaa:"\nvec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);",cornerradius:"\nvec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);",fragcolor:"\nif(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));"},sI=(t,e,n)=>(e=sR(e,n===t.VERTEX_SHADER?sA:sE,"##").trim(),sT())?e:(e=(e=e.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),n===t.VERTEX_SHADER&&(e=e.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),n===t.FRAGMENT_SHADER&&(e=e.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),"".concat(e)),sL=(t,e,n)=>{let r=t.createShader(n),o=sI(t,e,n);return t.shaderSource(r,o),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(r)),r},sF=(t,e,n,r,o)=>{let a=sL(t,e,t.VERTEX_SHADER),l=sL(t,n,t.FRAGMENT_SHADER),s=t.createProgram();t.attachShader(s,a),t.attachShader(s,l),t.linkProgram(s);let c={};return r.forEach(e=>{c[e]=t.getAttribLocation(s,e)}),o.forEach(e=>{c[e]=t.getUniformLocation(s,e)}),{program:s,locations:c,destroy(){t.detachShader(s,a),t.detachShader(s,l),t.deleteShader(a),t.deleteShader(l),t.deleteProgram(s)}}},sB=t=>"VIDEO"!==t.nodeName&&(!!sT()||sP(t.width)&&sP(t.height)),sD=(t,e,n)=>{t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,sB(e)?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n.filterParam),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,n.wrapParam),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,n.wrapParam),sB(e)&&t.generateMipmap(t.TEXTURE_2D)},sO=(t,e,n,r)=>(t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),sD(t,n,r),t.bindTexture(t.TEXTURE_2D,null),e),sz=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t?[t[0],t[1],t[2],nt(t[3])?e*t[3]:e]:[0,0,0,0]},s_=()=>{let t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},sN=(t,e,n,r,o)=>{let a=1/Math.tan(e/2),l=1/(r-o);t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*r*l,t[15]=0},sW=(t,e,n,r,o,a,l)=>{let s=1/(e-n),c=1/(r-o),d=1/(a-l);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*c,t[14]=(l+a)*d,t[15]=1},sj=(t,e,n,r)=>{t[12]=t[0]*e+t[4]*n+t[8]*r+t[12],t[13]=t[1]*e+t[5]*n+t[9]*r+t[13],t[14]=t[2]*e+t[6]*n+t[10]*r+t[14],t[15]=t[3]*e+t[7]*n+t[11]*r+t[15]},sH=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},sV=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e},sU=(t,e)=>{t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e},sG=(t,e)=>{let n=Math.sin(e),r=Math.cos(e),o=t[4],a=t[5],l=t[6],s=t[7],c=t[8],d=t[9],u=t[10],h=t[11];t[4]=o*r+c*n,t[5]=a*r+d*n,t[6]=l*r+u*n,t[7]=s*r+h*n,t[8]=c*r-o*n,t[9]=d*r-a*n,t[10]=u*r-l*n,t[11]=h*r-s*n},sX=(t,e)=>{let n=Math.sin(e),r=Math.cos(e),o=t[0],a=t[1],l=t[2],s=t[3],c=t[8],d=t[9],u=t[10],h=t[11];t[0]=o*r-c*n,t[1]=a*r-d*n,t[2]=l*r-u*n,t[3]=s*r-h*n,t[8]=o*n+c*r,t[9]=a*n+d*r,t[10]=l*n+u*r,t[11]=s*n+h*r},sZ=(t,e)=>{let n=Math.sin(e),r=Math.cos(e),o=t[0],a=t[1],l=t[2],s=t[3],c=t[4],d=t[5],u=t[6],h=t[7];t[0]=o*r+c*n,t[1]=a*r+d*n,t[2]=l*r+u*n,t[3]=s*r+h*n,t[4]=c*r-o*n,t[5]=d*r-a*n,t[6]=u*r-l*n,t[7]=h*r-s*n};var sY=t=>t*Math.PI/180,sq=(t,e)=>sT()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);let sK=(t,e)=>{let n=t.length;return e>=n?t[e%n]:e<0?t[e%n+n]:t[e]},sJ=t=>{let e=0,n,r,o,a,l=t.length;for(n=0;n<l;n++)r=t[n],a=(o=t[(n+1)%l]).x-r.x,e+=(o.y+r.y)/2*a;return e},sQ=(t,e,n,r)=>{let o=tB(n.x-e.x,n.y-e.y),a=tB(r.x-n.x,r.y-n.y),l=tB(e.x-r.x,e.y-r.y),s=tB(t.x-e.x,t.y-e.y),c=tB(t.x-n.x,t.y-n.y),d=tB(t.x-r.x,t.y-r.y),u=t4(o,s),h=t4(a,c),p=t4(l,d);return u<=0&&h<=0&&p<=0},s1=t=>{let e=t.length;for(let n=0;n<e;n++)if(e7(e$(t[n],sK(t,n+1)),t,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0;return!1},s0=t=>{let e,n,r,o,a,l,s,c,d;if(t.length<3||s1(t))return[];0>sJ(t)&&t.reverse();let u=t.length,h=[...Array(u).keys()],p=[],g=1024;for(;h.length>3;){if(g<=0)return[];for(g--,e=0;e<h.length;e++)if(r=h[e],o=sK(h,e-1),a=sK(h,e+1),l=t[r],s=t[o],c=t[a],!(0>t4(tB(s.x-l.x,s.y-l.y),tB(c.x-l.x,c.y-l.y)))){for(n=0,d=!0;n<u;n++)if(n!==r&&n!==o&&n!==a&&sQ(t[n],s,l,c)){d=!1;break}if(d){p.push([s,l,c]),h.splice(e,1);break}}}return p.push([t[h[0]],t[h[1]],t[h[2]]]),p},s2=(t,e,n,r,o)=>{let a=tG(tB(r.x-n.x,r.y-n.y)),l=tG(tB(o.x-r.x,o.y-r.y)),s=tG(tB(a.x+l.x,a.y+l.y)),c=tB(-s.y,s.x),d=Math.min(1/t2(c,tB(-a.y,a.x)),5);t[e]=r.x,t[e+1]=r.y,t[e+2]=c.x*d,t[e+3]=c.y*d,t[e+4]=-1,t[e+5]=r.x,t[e+6]=r.y,t[e+7]=c.x*d,t[e+8]=c.y*d,t[e+9]=1},s4=(t,e)=>{let n,r,o,a=0,l=t.length,s=new Float32Array((e?l+1:l)*10),c=t[0],d=t[l-1];for(a=0;a<l;a++)n=t[a-1],r=t[a],o=t[a+1],n||(n=e?d:tB(r.x+(r.x-o.x),r.y+(r.y-o.y))),o||(o=e?c:tB(r.x+(r.x-n.x),r.y+(r.y-n.y))),s2(s,10*a,n,r,o);return e&&s2(s,10*l,d,c,t[1]),s},s5=t=>{let e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},s3=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=e0(t),a=t.x+.5*t.width,l=t.y+.5*t.height;return(n||r)&&t7(o,n,r,a,l),0!==e&&t9(o,e,a,l),o},s6=(t,e,n,r,o,a,l)=>{let s=.5*Math.abs(n),c=.5*Math.abs(r),d=Math.abs(n)+Math.abs(r);return ir(tB(t+s,e+c),s,c,o,a,l,Math.max(20,Math.round(d/6)))},s8=(t,e,n,r,o,a,l,s)=>{let c=[];if(a.every(t=>0===t))c.push(tB(t,e),tB(t+n,e),tB(t+n,e+r),tB(t,e+r));else{let[o,l,s,d]=a,u=t+n,h=e+r;c.push(tB(t+o,e)),s7(c,u-l,e+l,l,-1),c.push(tB(u,e+l)),s7(c,u-d,h-d,d,0),c.push(tB(u-d,h)),s7(c,t+s,h-s,s,1),c.push(tB(t,h-s)),s7(c,t+o,e+o,o,2)}return(l||s)&&t7(c,l,s,t+.5*n,e+.5*r),o&&t9(c,o,t+.5*n,e+.5*r),c},s7=(t,e,n,r,o)=>{let a=Math.min(20,Math.max(4,Math.round(r/2))),l=0,s=0,c=0,d=0;for(;d<a;d++)s=r*Math.cos(l=o*ty+d/a*ty),c=r*Math.sin(l),t.push(tB(e+s,n+c))},s9=null;var ct=()=>{if(null!==s9)return s9;let t=M("canvas"),e=sq(t);return s9=e?e.getParameter(e.MAX_TEXTURE_SIZE):void 0,R(t),t=void 0,s9},ce=()=>w()&&!!window.chrome;let ci=new Float32Array([0,1,0,0,1,1,1,0]),cn=new Float32Array([1,0,0,0,1,1,0,1]),cr=w()&&tt(),co=[0,0,0,0,1,0,0,0,0],ca=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],cl=[0,0,0,0],cs=[0,0,0,0],cc=(t,e,n,r,o)=>{if(!n||!r)return ci;let a=r.x/n.width,l=r.y/n.height,s=t/n.width/o,c=e/n.height/o;return s-=a,new Float32Array([-a,c-=l,-a,-l,s,c,s,-l])},cd=(t,e)=>Math.floor(lm(t,0,Math.min((e.width-1)*.5,(e.height-1)*.5)));var cu=function(t){let e,n,r,o,a,l,s,c,d,u,h,p,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{alpha:m=!1}=g,f={width:0,height:0},$={width:0,height:0},y=ct()||1024,x=s_(),b=s_(),v=0,w=0,S=0,k=1,C=new Map([]),M=()=>{A.stencilOp(A.KEEP,A.KEEP,A.KEEP),A.stencilFunc(A.ALWAYS,1,255),A.stencilMask(255)},T=sY(30),P=Math.tan(T/2),A=sq(t,{alpha:m,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!A)return;A.getExtension("OES_standard_derivatives"),A.disable(A.DEPTH_TEST),A.enable(A.STENCIL_TEST),A.enable(A.BLEND),A.blendFunc(A.ONE,A.ONE_MINUS_SRC_ALPHA),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!m&&tt())),M();let E=A.createTexture();A.bindTexture(A.TEXTURE_2D,E),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,new Uint8Array(cl)),C.set(0,E);let I=A.createTexture();C.set(2,I);let L=A.createFramebuffer(),F=A.createTexture();C.set(1,F);let B=A.createFramebuffer(),D=sF(A,"\n##head\n##text\nvoid main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}","\n##head\nin vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){vec4 res=(c*m)+(o*c.a);res=clamp(res,0.0,1.0);return res;}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}",["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),O=A.createBuffer(),z=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,z),A.bufferData(A.ARRAY_BUFFER,ci,A.STATIC_DRAW);let _=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,_),A.bufferData(A.ARRAY_BUFFER,cn,A.STATIC_DRAW);let N=sF(A,"#version 300 es\n\nin vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}","\n##head\n##mask\nin vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),W=A.createBuffer();ce()&&(A.bindBuffer(A.ARRAY_BUFFER,W),A.bufferData(A.ARRAY_BUFFER,1,A.DYNAMIC_DRAW));let j=function(t,e,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{program:l,locations:s}=N;A.useProgram(l),A.enableVertexAttribArray(s.aPosition),A.enableVertexAttribArray(s.aNormal),A.enableVertexAttribArray(s.aMiter);let c=s4(t,a),h=5*Float32Array.BYTES_PER_ELEMENT,p=2*Float32Array.BYTES_PER_ELEMENT,g=4*Float32Array.BYTES_PER_ELEMENT;A.uniform1f(s.uWidth,e),A.uniform1f(s.uSharpness,r),A.uniform4fv(s.uColor,n),A.uniformMatrix4fv(s.uMatrix,!1,o),A.uniform4f(s.uCanvasColor,v,w,S,k),A.uniform1fv(s.uMaskBounds,u),A.uniform1f(s.uMaskOpacity,d),A.bindBuffer(A.ARRAY_BUFFER,W),A.bufferData(A.ARRAY_BUFFER,c,A.STATIC_DRAW),A.vertexAttribPointer(s.aPosition,2,A.FLOAT,!1,h,0),A.vertexAttribPointer(s.aNormal,2,A.FLOAT,!1,h,p),A.vertexAttribPointer(s.aMiter,1,A.FLOAT,!1,h,g),A.drawArrays(A.TRIANGLE_STRIP,0,c.length/5),A.disableVertexAttribArray(s.aPosition),A.disableVertexAttribArray(s.aNormal),A.disableVertexAttribArray(s.aMiter)},H=sF(A,"\n##head\nvoid main(){\n##matrix\n}","\n##head\n##mask\nuniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;\n##maskapply\nfillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),V=A.createBuffer(),U=(t,e)=>{let{program:n,locations:r}=H;return A.useProgram(n),A.enableVertexAttribArray(r.aPosition),A.uniform4fv(r.uColor,e),A.uniformMatrix4fv(r.uMatrix,!1,o),A.uniform1fv(r.uMaskBounds,u),A.uniform1f(r.uMaskOpacity,d),A.uniform4f(r.uCanvasColor,v,w,S,k),A.bindBuffer(A.ARRAY_BUFFER,V),A.bufferData(A.ARRAY_BUFFER,t,A.STATIC_DRAW),A.vertexAttribPointer(r.aPosition,2,A.FLOAT,!1,0,0),A.drawArrays(A.TRIANGLES,0,t.length/2),A.disableVertexAttribArray(r.aPosition),t},G=sF(A,"\n##head\n##text\nin vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){\n##init\n##colorize\n##rectaa\n##cornerradius\n##maskfeatherapply\nif(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),X=A.createBuffer(),Z=A.createBuffer(),Y=A.createBuffer(),q=function(t,e,r,a,l){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:E,c=arguments.length>6?arguments[6]:void 0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:cl,m=arguments.length>9&&void 0!==arguments[9]?arguments[9]:ci,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:p,$=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,y=arguments.length>12?arguments[12]:void 0,{program:x,locations:b}=G;return A.useProgram(x),A.enableVertexAttribArray(b.aPosition),A.enableVertexAttribArray(b.aTexCoord),A.enableVertexAttribArray(b.aRectCoord),A.uniform4fv(b.uColor,l),A.uniform2fv(b.uSize,[e,r]),A.uniform2fv(b.uPosition,[t[2],t[3]]),A.uniform2fv(b.uRepeat,c),A.uniform1i(b.uInverted,y?1:0),A.uniform1fv(b.uCornerRadius,a),A.uniform4f(b.uCanvasColor,v,w,S,k),A.uniform1fv(b.uMaskFeather,f.map((t,e)=>e%2==0?t:t*n)),A.uniform1fv(b.uMaskBounds,u),A.uniform1f(b.uMaskOpacity,d),A.uniform1f(b.uEdgeFeather,Math.max(0,$)),A.uniformMatrix4fv(b.uMatrix,!1,o),A.uniform1i(b.uTexture,4),A.uniform4fv(b.uTextureColor,g),A.uniform1f(b.uTextureOpacity,h),A.activeTexture(A.TEXTURE0+4),A.bindTexture(A.TEXTURE_2D,s),A.bindBuffer(A.ARRAY_BUFFER,Z),A.bufferData(A.ARRAY_BUFFER,m,A.STATIC_DRAW),A.vertexAttribPointer(b.aTexCoord,2,A.FLOAT,!1,0,0),A.bindBuffer(A.ARRAY_BUFFER,Y),A.bufferData(A.ARRAY_BUFFER,ci,A.STATIC_DRAW),A.vertexAttribPointer(b.aRectCoord,2,A.FLOAT,!1,0,0),A.bindBuffer(A.ARRAY_BUFFER,X),A.bufferData(A.ARRAY_BUFFER,t,A.STATIC_DRAW),A.vertexAttribPointer(b.aPosition,2,A.FLOAT,!1,0,0),A.drawArrays(A.TRIANGLE_STRIP,0,t.length/2),A.disableVertexAttribArray(b.aPosition),A.disableVertexAttribArray(b.aTexCoord),A.disableVertexAttribArray(b.aRectCoord),t},K=sF(A,"\n##head\n##text\nout vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){\n##init\nfloat ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),J=A.createBuffer(),Q=A.createBuffer(),te=function(t,e,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:E,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ci,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],{program:h,locations:p}=K;A.useProgram(h),A.enableVertexAttribArray(p.aPosition),A.enableVertexAttribArray(p.aTexCoord),A.uniformMatrix4fv(p.uMatrix,!1,o),A.uniform2fv(p.uRadius,[.5*e,.5*n]),A.uniform1i(p.uInverted,c?1:0),A.uniform4fv(p.uColor,r),A.uniform4f(p.uCanvasColor,v,w,S,k),A.uniform2fv(p.uRepeat,[1,1]),A.uniform1fv(p.uMaskBounds,u),A.uniform1f(p.uMaskOpacity,d),A.uniform1i(p.uTexture,4),A.uniform1f(p.uTextureOpacity,s),A.activeTexture(A.TEXTURE0+4),A.bindTexture(A.TEXTURE_2D,a),A.bindBuffer(A.ARRAY_BUFFER,Q),A.bufferData(A.ARRAY_BUFFER,l,A.STATIC_DRAW),A.vertexAttribPointer(p.aTexCoord,2,A.FLOAT,!1,0,0),A.bindBuffer(A.ARRAY_BUFFER,J),A.bufferData(A.ARRAY_BUFFER,t,A.STATIC_DRAW),A.vertexAttribPointer(p.aPosition,2,A.FLOAT,!1,0,0),A.drawArrays(A.TRIANGLE_STRIP,0,t.length/2),A.disableVertexAttribArray(p.aPosition),A.disableVertexAttribArray(p.aTexCoord)},ti=new Map,tn={};tn[2]={width:0,height:0},tn[1]={width:0,height:0};let tr=function(t,e,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=Math.min(Math.min(4096,y)/r.width,Math.min(4096,y)/r.height,a),s=Math.floor(l*r.width),c=Math.floor(l*r.height);es(r,tn[t])?A.bindFramebuffer(A.FRAMEBUFFER,e):(A.bindTexture(A.TEXTURE_2D,C.get(t)),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,s,c,0,A.RGBA,A.UNSIGNED_BYTE,null),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.bindFramebuffer(A.FRAMEBUFFER,e),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,C.get(t),0),tn[t]=r);let d=r.width*n,u=r.height*n;sW(b,0,d,u,0,-1,1),sj(b,0,u,0),sV(b,1),sU(b,-1),o=b,A.viewport(0,0,s,c),A.colorMask(!0,!0,!0,!0),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT),p=[1,0,1,0,1,Math.max(f.width,r.width),1,Math.max(f.width,r.width)]},to=(t,e)=>{let{forceRelease:n=!1}=e||{},{src:r}=ti.get(t);r instanceof HTMLCanvasElement&&!n&&!r.dataset.retain&&R(r),ti.delete(t),A.deleteTexture(t)},ta=t=>ti.get(t).isRotatedVideo;return{drawPath:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];let e=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0;if(t.length<2)return;let s=t.map(t=>({x:t.x*n,y:t.y*n})),c=e*n;if(c>0&&j(s,c,sz(r,l),o),s.length<3||!a||0===a[3]||!o)return;let d=s0(s),u=new Float32Array(6*d.length);d.forEach((t,e)=>{let[n,r,o]=t,a=6*e;u[a+0]=n.x,u[a+1]=n.y,u[a+2]=r.x,u[a+3]=r.y,u[a+4]=o.x,u[a+5]=o.y}),U(u,sz(a,l))},drawRect:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:void 0,u=arguments.length>9&&void 0!==arguments[9]&&arguments[9],h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0,g=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,f=arguments.length>14&&void 0!==arguments[14]?arguments[14]:void 0,$=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1/n,y=arguments.length>16?arguments[16]:void 0,x=arguments.length>17?arguments[17]:void 0,b=e_(ek(t),n),v=a.map(e=>cd(e||0,t)).map(t=>t*n);if(l||s){let t;let a=ek(b);a.x-=.5,a.y-=.5,a.width+=1,a.height+=1;let p=s5(s3(a,e,r,o));y&&0===(t=sz(y))[3]&&(t[3]=.001);let g=c&&u?[a.width/c.width,a.height/c.height]:[1,1];q(p,a.width,a.height,v,sz(l,m),s,g,m,t,h?new Float32Array(h):cc(a.width,a.height,c,d,n),f,$*n,x)}p&&(p=Math.min(p,b.width,b.height),j(s8(b.x,b.y,b.width,b.height,e,v,r,o),p*n,sz(g,m),!0))},drawEllipse:function(t,e,r,o,a,l,s,c){let d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:void 0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:void 0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0,g=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,f=arguments.length>14?arguments[14]:void 0,$=e_(eL(t.x-e,t.y-r,2*e,2*r),n);if(s||c){let t=ek($);f||(t.x-=.5,t.y-=.5,t.width+=1,t.height+=1),te(s5(s3(t,o,a,l)),t.width,t.height,sz(s,m),c,h?new Float32Array(h):cc(t.width,t.height,d,u,n),m,f)}p&&j(s6($.x,$.y,$.width,$.height,o,a,l),p*n,sz(g,m),!0)},drawImage:function(t,r,o,a,l,s,c,p,g,m){let $,y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:ca,x=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,b=arguments.length>12?arguments[12]:void 0,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:1,w=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,S=arguments.length>15&&void 0!==arguments[15]?arguments[15]:h,k=arguments.length>16&&void 0!==arguments[16]?arguments[16]:cs,M=arguments.length>17&&void 0!==arguments[17]?arguments[17]:cl,R=arguments.length>18&&void 0!==arguments[18]&&arguments[18],E=arguments.length>19&&void 0!==arguments[19]&&arguments[19],I=!(arguments.length>20)||void 0===arguments[20]||arguments[20],L=r.width*n,F=r.height*n,B=-.5*L,N=.5*F,W=.5*L,j=-.5*F,H=new Float32Array([B,j,0,B,N,0,W,j,0,W,N,0]);A.bindBuffer(A.ARRAY_BUFFER,O),A.bufferData(A.ARRAY_BUFFER,H,A.STATIC_DRAW);let V=-(r.height/2/P*(f.height/r.height)*1);l*=n,s*=n,o*=n,a*=n;let{program:U,locations:G}=D,X=s_();sN(X,T,e,1,-(2*V)),sj(X,l,-s,V),sj(X,o,-a,0),sZ(X,-g),sH(X,m),sj(X,-o,a,0),sX(X,p),sG(X,c),A.useProgram(U),A.enableVertexAttribArray(G.aPosition),A.enableVertexAttribArray(G.aTexCoord),A.uniform1i(G.uTexture,3),A.uniform2f(G.uTextureSize,r.width,r.height),A.activeTexture(A.TEXTURE0+3),A.bindTexture(A.TEXTURE_2D,t);let Z=E?1:0,Y=C.get(Z);A.uniform1i(G.uTextureBlend,Z),A.activeTexture(A.TEXTURE0+Z),A.bindTexture(A.TEXTURE_2D,Y);let q=R?2:0,K=C.get(q);A.uniform1i(G.uTextureOverlay,q),A.activeTexture(A.TEXTURE0+q),A.bindTexture(A.TEXTURE_2D,K),A.bindBuffer(A.ARRAY_BUFFER,O),A.vertexAttribPointer(G.aPosition,3,A.FLOAT,!1,0,0);let J=cr&&ta(t);A.bindBuffer(A.ARRAY_BUFFER,J?_:z),A.vertexAttribPointer(G.aTexCoord,2,A.FLOAT,!1,0,0),A.uniformMatrix4fv(G.uMatrix,!1,X),A.uniform4fv(G.uOverlayColor,M),!b||lw(b,co)?(b=co,$=-1):$=($=b.reduce((t,e)=>t+e,0))<=0?1:$,A.uniform1fv(G.uClarityKernel,b),A.uniform1f(G.uClarityKernelWeight,$),A.uniform1f(G.uColorGamma,1/v),A.uniform1f(G.uColorVignette,w),A.uniform1i(G.uAntialias,I?1:0),A.uniform4f(G.uColorOffset,y[4],y[9],y[14],y[19]),A.uniformMatrix4fv(G.uColorMatrix,!1,[y[0],y[1],y[2],y[3],y[5],y[6],y[7],y[8],y[10],y[11],y[12],y[13],y[15],y[16],y[17],y[18]]),A.uniform1f(G.uOpacity,x),A.uniform1f(G.uMaskOpacity,d),A.uniform1fv(G.uMaskBounds,u),A.uniform1fv(G.uMaskCornerRadius,k.map(t=>t*n)),A.uniform1fv(G.uMaskFeather,S.map((t,e)=>e%2==0?t:t*n)),A.drawArrays(A.TRIANGLE_STRIP,0,4),A.disableVertexAttribArray(G.aPosition),A.disableVertexAttribArray(G.aTexCoord)},textureFilterNearest:A.NEAREST,textureFilterLinear:A.LINEAR,textureClamp:A.CLAMP_TO_EDGE,textureRepeat:A.REPEAT,textureCreate:()=>A.createTexture(),textureUpdate:(t,e,n)=>(ti.set(t,{src:e,options:n,isRotatedVideo:"VIDEO"===e.nodeName&&(e.dataset&&90==e.dataset.rotation||270==e.dataset.rotation)}),sO(A,t,e,n)),textureGetSize:t=>{let{src:e,options:n}=ti.get(t),r=ei(e);return n.scalar?eg(r,t=>t/n.scalar):r},textureDelete:to,enablePreviewStencil:()=>{A.stencilOp(A.KEEP,A.KEEP,A.REPLACE),A.stencilFunc(A.ALWAYS,1,255),A.stencilMask(255)},applyPreviewStencil:()=>{A.stencilFunc(A.EQUAL,1,255),A.stencilMask(0)},disablePreviewStencil:M,setCanvasColor(t){v=t[0],w=t[1],S=t[2],k=m?t[3]:1,A.clear(A.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{sW(x,0,f.width,f.height,0,-1,1)},updateCanvasMatrix(t,e,r,o,a){let l=t.width,s=t.height,c=f.width*(.5/n),d=f.height*(.5/n),u={x:c+(r.x+e.x),y:d+(r.y+e.y)},h={x:u.x-e.x,y:u.y-e.y},p={x:.5*l,y:.5*s};tV(h,a.z,u),t6(h,o,u);let g={x:h.x-p.x,y:h.y-p.y};sj(x,g.x*n,g.y*n,0),sj(x,p.x*n,p.y*n,0),sZ(x,a.z),sG(x,a.x>Math.PI/2?Math.PI:0),sX(x,a.y>Math.PI/2?Math.PI:0),sH(x,o),sj(x,-p.x*n,-p.y*n,0)},drawToCanvas(){A.bindFramebuffer(A.FRAMEBUFFER,null),o=x,A.viewport(0,0,A.drawingBufferWidth,A.drawingBufferHeight),A.colorMask(!0,!0,!0,!0),A.clearColor(v,w,S,k),A.clear(A.COLOR_BUFFER_BIT),p=[1,0,1,0,1,f.width,1,f.width]},drawToImageBlendBuffer(t,e){tr(1,B,t,e)},drawToImageOverlayBuffer(t,e){tr(2,L,t,e)},enableMask(t,e){let r=t.x*n,o=t.y*n,h=t.width*n,p=t.height*n;l=(c=r)+h,a=f.height-o,s=f.height-(o+p),d=1-e,u=[a,l,s,c]},disableMask(){c=0,l=f.width,a=f.height,d=1,u=[a,l,s=0,c]},resize:(o,a,l)=>{r=1===(n=Math.max(1,l))?.75:1,$.width=o,$.height=a,f.width=o*n,f.height=a*n,e=tm(f.width,f.height),t.width=f.width,t.height=f.height,sW(x,0,f.width,f.height,0,-1,1),h=[1,0,1,0,1,$.width,1,$.width]},release(){Array.from(ti.keys()).forEach(t=>to(t,{forceRelease:!0})),ti.clear(),C.forEach(t=>{A.deleteTexture(t)}),C.clear(),D.destroy(),N.destroy(),H.destroy(),G.destroy(),K.destroy(),t.width=1,t.height=1,t=void 0}}},ch=(t,e)=>{let n,r;let{imageData:o,amount:a=1}=t,l=Math.round(2*Math.max(1,a)),s=Math.round(.5*l),c=o.width,d=o.height,u=new Uint8ClampedArray(c*d*4),h=o.data,p=0,g,m,f,$=0,y=0,x=c*d*4-4;for(m=0;m<d;m++)for(g=0,n=crypto.getRandomValues(new Uint8ClampedArray(d));g<c;g++)f=n[m]/255,$=0,y=0,f<.5&&($=(-s+Math.round(Math.random()*l))*4),f>.5&&(y=4*c*(-s+Math.round(Math.random()*l))),r=Math.min(Math.max(0,p+$+y),x),u[p]=h[r],u[p+1]=h[r+1],u[p+2]=h[r+2],u[p+3]=h[r+3],p+=4;e(null,{data:u,width:o.width,height:o.height})};let cp=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];var cg=async function(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return;let{width:r,height:o}=t,{dataSize:a=96,dataSizeScalar:l=1,scrambleAmount:s=4,blurAmount:c=6,outputFormat:d="canvas",backgroundColor:u=[0,0,0]}=n,h=Math.round(a*l),p=Math.min(h/r,h/o),g=Math.floor(r*p),m=Math.floor(o*p),f=M("canvas",{width:g,height:m}),$=f.getContext("2d",{willReadFrequently:!0});if(u.length=3,$.fillStyle=ng(u),$.fillRect(0,0,g,m),A(t)){let e=M("canvas",{width:r,height:o});e.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),$.drawImage(e,0,0,g,m),R(e)}else $.drawImage(t,0,0,g,m);let y=$.getImageData(0,0,g,m),x=[];if(s>0&&x.push([ch,{amount:s}]),c>0)for(let t=0;t<c;t++)x.push([i5,{matrix:cp}]);if(x.length){let t=(e,n)=>"(err, imageData) => {\n(".concat(e[n][0].toString(),")(Object.assign({ imageData: imageData }, filterInstructions[").concat(n,"]), \n").concat(e[n+1]?t(e,n+1):"done",")\n}"),n="function (options, done) {\nconst filterInstructions = options.filterInstructions;\nconst imageData = options.imageData;\n(".concat(t(x,0),")(null, imageData)\n}");e=i0(await J(n,[{imageData:y,filterInstructions:x.map(t=>t[1])}],[y.data.buffer]))}else e=y;return"canvas"===d?($.putImageData(e,0,0),f):e};function cm(t){return Math.sqrt(1- --t*t)}function cf(t){return"[object Date]"===Object.prototype.toString.call(t)}function c$(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a4(t),o=t;function a(a,l){let s;if(null==t)return r.set(t=a),Promise.resolve();o=a;let c=e,d=!1,{delay:u=0,duration:h=400,easing:p=oB,interpolate:g=function t(e,n){if(e===n||e!=e)return()=>e;let r=typeof e;if(r!==typeof n||Array.isArray(e)!==Array.isArray(n))throw Error("Cannot interpolate values of different type");if(Array.isArray(e)){let r=n.map((n,r)=>t(e[r],n));return t=>r.map(e=>e(t))}if("object"===r){if(!e||!n)throw Error("Object cannot be null");if(cf(e)&&cf(n)){e=e.getTime();let t=(n=n.getTime())-e;return n=>new Date(e+n*t)}let r=Object.keys(n),o={};return r.forEach(r=>{o[r]=t(e[r],n[r])}),t=>{let e={};return r.forEach(n=>{e[n]=o[n](t)}),e}}if("number"===r){let t=n-e;return n=>e+n*t}throw Error("Cannot interpolate ".concat(r," values"))}}=oD(oD({},n),l);if(0===h)return c&&(c.abort(),c=null),r.set(t=o),Promise.resolve();let m=o1()+u;return(e=o5(e=>{if(e<m)return!0;d||(s=g(t,a),"function"==typeof h&&(h=h(t,a)),d=!0),c&&(c.abort(),c=null);let n=e-m;return n>h?(r.set(t=a),!1):(r.set(t=s(p(n/h))),!0)})).promise}return{set:a,update:(e,n)=>a(e(o,t),n),subscribe:r.subscribe}}function cy(t){let e,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=a4(t),{stiffness:l=.15,damping:s=.8,precision:c=.01}=o,d=t,u=t,h=1,p=0,g=!1;function m(o){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u=o;let s=r={};if(null==t||l.hard||f.stiffness>=1&&f.damping>=1)return g=!0,e=null,d=o,a.set(t=u),Promise.resolve();if(l.soft&&(p=1/(60*(!0===l.soft?.5:+l.soft)),h=0),!n){e=null,g=!1;let r={inv_mass:void 0,opts:f,settled:!0,dt:void 0};n=o5(o=>{if(null===e&&(e=o),g)return g=!1,n=null,!1;h=Math.min(h+p,1),r.inv_mass=h,r.opts=f,r.settled=!0,r.dt=(o-e)*60/1e3;let l=function t(e,n,r,o){if("number"==typeof r){let t=o-r,a=(r-n)/(e.dt||1/60),l=(e.opts.stiffness*t-e.opts.damping*a)*e.inv_mass,s=(a+l)*e.dt;return Math.abs(s)<e.opts.precision&&Math.abs(t)<e.opts.precision?o:(e.settled=!1,r+s)}if(nn(r))return r.map((a,l)=>t(e,n[l],r[l],o[l]));if("object"==typeof r){let a={};for(let l in r)a[l]=t(e,n[l],r[l],o[l]);return a}throw Error("Cannot spring ".concat(typeof r," values"))}(r,d,t,u);return e=o,d=t,a.set(t=l),r.settled&&(n=null),!r.settled})}return new Promise(t=>{n.promise.then(()=>{s===r&&t()})})}let f={set:m,update:(e,n)=>m(e(u,t),n),subscribe:a.subscribe,stiffness:l,damping:s,precision:c};return f}var cx=a2(!1,t=>{let e=window.matchMedia("(prefers-reduced-motion:reduce)"),n=()=>t(e.matches);return n(),e.addListener(n),()=>e.removeListener(n)}),cb=()=>"ResizeObserver"in window;let cv=eC(),cw=(t,e,n,r,o)=>{t.rect||(t.rect=eC());let a=t.rect;eU(cv,e,n,r,o),eH(a,cv)||(eG(a,cv),t.dispatchEvent(new CustomEvent("measure",{detail:a})))},cS=Math.round,ck=t=>{let e=t.getBoundingClientRect();u&&cw(t,cS(e.x),cS(e.y),cS(e.width),cS(e.height))},cC=t=>{u&&cw(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)},cM=[];function cT(){if(!cM.length){u=void 0;return}cM.forEach(t=>t.measure(t)),u=requestAnimationFrame(cT)}let cP=new Map([]),cR=0,cA=0;var cE=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{observePosition:n=!1,observeViewRect:r=!1,once:o=!1,disabled:a=!1,isMeasureRoot:l=!1}=e;if(cb()&&l&&(c||(c=new ResizeObserver(t=>{t.forEach(t=>{cP.set(t.target,t.contentRect)});let e=Array.from(cP.values()).some(t=>{let{width:e,height:n}=t;return e>0&&n>0});e?e&&!1===u&&cT():(u&&cancelAnimationFrame(u),u=!1)})),c.observe(t),cR++),!a)return!cb()||n||r?(t.measure=r?ck:cC,cM.push(t),void 0===u&&(u=requestAnimationFrame(cT)),t.measure(t),{destroy(){l&&c&&(cP.delete(t),c.unobserve(t),0==--cR&&(c.disconnect(),c=void 0));let e=cM.indexOf(t);cM.splice(e,1),delete t.measure}}):(s||(s=new ResizeObserver(t=>{t.forEach(t=>{u&&cC(t.target)})})),s.observe(t),cC(t),o?s.unobserve(t):cA++,{destroy(){l&&c&&(cP.delete(t),c.unobserve(t),0==--cR&&(c.disconnect(),c=void 0)),o||(s.unobserve(t),0!=--cA||(s.disconnect(),s=void 0))}})},cI=t=>{let e=!1,n={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:t=>{e&&(t.target.dataset.focusVisible="")},blur:t=>{delete t.target.dataset.focusVisible}};return Object.keys(n).forEach(e=>t.addEventListener(e,n[e],!0)),{destroy(){Object.keys(n).forEach(e=>t.removeEventListener(e,n[e],!0))}}};let cL=async t=>new Promise(e=>{if("file"===t.kind)return e(t.getAsFile());t.getAsString(e)}),cF=t=>new Promise((e,n)=>{let{items:r}=t.dataTransfer;if(!r)return e([]);Promise.all(Array.from(r).map(cL)).then(t=>{e(t.filter(t=>nh(t)&&iS(t)||/^http/.test(t)))}).catch(n)});var cB=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t=>{t.preventDefault()},r=async n=>{n.preventDefault(),n.stopPropagation();try{let r=await cF(n);t.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:n,resources:r},...e}))}catch(t){}};return t.addEventListener("drop",r),t.addEventListener("dragover",n),{destroy(){t.removeEventListener("drop",r),t.removeEventListener("dragover",n)}}};let cD=null;var cO=()=>{if(null===cD){if(w()){let t=M("canvas");cD=!sq(t,{failIfMajorPerformanceCaveat:!0}),R(t)}else cD=!1}return cD},cz=t=>{let e=.5*t,n=M("canvas",{"data-retain":!0,width:t,height:t}),r=n.getContext("2d");return r.fillStyle="#f0f",r.fillRect(0,0,e,e),r.fillRect(e,e,e,e),n},c_=t=>{let e=parseFloat(t);return/^[0-9]+s$/.test(t)?1e3*e:e},cN=t=>t instanceof WebGLTexture,cW=t=>{let[e,n,r,o]=t;return[o.x,o.y,e.x,e.y,r.x,r.y,n.x,n.y]},cj=t=>t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2,cH=(t,e,n)=>{let{selectionColor:r=[1,1,1],scalar:o=1}=n||{},a=!1;for(let n of e){let e="subtract"===n.drawMode;if(e&&!a)continue;t.globalCompositeOperation=e?"destination-out":"source-over",t.save(),t.beginPath();let l=oa(n);iJ(t,o,o),iq(t,n.rotation,l),oC(t,n.flipX,n.flipY,l),n.width?ox(t,{...n,backgroundColor:r}):n.points?ok(t,Object.assign({},n,n.pathClose?{backgroundColor:r,strokeColor:[0,0,0,0]}:{strokeColor:r,strokeJoin:"round",strokeCap:"round"})):n.rx&&ob(t,{...n,backgroundColor:r,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"}),t.restore(),a=!0}};function cV(t){let e,n,r,o;return{c(){e=o9("div"),n=o9("canvas"),ao(e,"class","PinturaCanvas")},m(a,l){o8(a,e,l),o3(e,n),t[37](n),r||(o=[ar(n,"measure",t[38]),oQ(cE.call(null,n))],r=!0)},p:oF,i:oF,o:oF,d(n){n&&o7(e),t[37](null),r=!1,o_(o)}}}function cU(t,e,n){let r,o,a,l,s,c,d,u,h,p;let g=[0,0,0,0],m=tF(),f=w()&&cz(128),$=ax(),{isAnimated:x}=e,{isTransparent:b}=e,{maskRect:v}=e,{maskOpacity:S=1}=e,{maskFrameOpacity:k=.95}=e,{maskMarkupOpacity:C=1}=e,{clipAnnotationsToImage:T=!0}=e,{pixelRatio:P=1}=e,{textPixelRatio:E=P}=e,{backgroundColor:I}=e,{willRender:L=tf}=e,{didRender:F=tf}=e,{willRequest:B}=e,{csp:D}=e,{loadImageData:O=tf}=e,{enableGrid:z=!1}=e,{gridColors:_}=e,{gridSize:W}=e,{gridOpacity:j=0}=e,{images:H=[]}=e,{interfaceImages:V=[]}=e,{selectionColor:U}=e,G=null,X=null,Z=null,Y=(t,e)=>t.set(e,{hard:!x}),q={precision:10000000000000002e-22},K=0,J=c$(void 0,{duration:0});oV(t,J,t=>n(36,d=t));let Q=cy(1,q);oV(t,Q,t=>n(35,s=t));let te=cy(1,q);oV(t,te,t=>n(51,a=t));let ti=a4();oV(t,ti,t=>n(53,c=t));let tn=a4();oV(t,tn,t=>n(52,l=t));let tr={},to=(t,e)=>{if(t.total!==e.length)return!0;let n=t.last,r=e[e.length-1];return!!(n.drawMode!==r.drawMode||rt(n)&&(!rt(r)||!eH(n,r))||re(n)&&(!re(r)||!(n.x===r.x&&n.y===r.y&&n.rx===r.rx&&n.ry===r.ry))||rn(n)&&(!rn(r)||r.points.length!==n.points.length))},ta=(t,e)=>{let n=tr[t.id],r=Math.min(1,2048/e.width),o=n?n.element:M("canvas",{width:e.width*r,height:e.height*r,"data-retain":!0});if(!n||to(n,t.actions)){cH((o=o.cloneNode()).getContext("2d"),t.actions,{selectionColor:[1,0,1],scalar:r});let e=t.actions.length;tr[t.id]={total:e,last:{...t.actions[e-1]},element:o}}return{x:0,y:0,...e,fillColor:t.color||[1,1,1],backgroundImage:o}},tl=()=>{cancelAnimationFrame(h),h=requestAnimationFrame(()=>{tI=!0,tH=0,o()})},ts=new Map([]),tc=new Map([]),td=t=>!N(t)&&(i_(t)||A(t)||os(t)||iC(t)),tu=(t,e)=>({filterParam:"pixelated"===t?G.textureFilterNearest:G.textureFilterLinear,wrapParam:"repeat"===e?G.textureRepeat:G.textureClamp}),th=(t,e,n)=>{if(!ts.has(t)){ts.set(t,t);let r=tu(e,n);if(td(t)){let e=G.textureCreate();G.textureUpdate(e,t,r),ts.set(t,e)}else O(t).then(e=>{if(!G||!e)return;let n=G.textureCreate();G.textureUpdate(n,e,r),ts.set(t,n),tl()}).catch(e=>{ts.set(t,e)})}if(iC(t)&&(cj(t)||"true"===t.dataset.redraw)){let r=ts.get(t),o=tu(e,n);return G.textureUpdate(r,t,o),t.dataset.redraw=!1,r}return ts.get(t)},tp=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id||t.id;if(t.width&&t.width<1||t.height&&t.height<1||!t.text.length){tc.delete(n);return}let{text:r,textAlign:o,fontFamily:a,fontSize:l=16,fontWeight:s,fontVariant:c,fontStyle:d,letterSpacing:u,lineHeight:h=l,width:p,height:g}=t,{outline:m=0,blur:f=0,paddingTop:$=0,paddingRight:y=0,paddingBottom:x=0,paddingLeft:b=0}=e;p=nt(p)?Math.floor(p):p,g=nt(g)?Math.floor(g):g;let{textSize:v,signature:w}=nA(r,{...t,width:p,height:void 0}),S=nm({text:r,textAlign:o,fontFamily:a,fontSize:l,fontWeight:s,fontVariant:c,fontStyle:d,lineHeight:h,letterSpacing:u,outline:m,blur:f,signature:w});if(!ts.has(S)){ts.set(S,r);let t=Math.ceil(v.width),e=Math.ceil(v.height);if(0===t||0===e)return;let w=ct(),k=Math.min(1,(w-(b+y)*E)/(t*E),(w-($+x)*E)/(e*E));nJ(r,{fontSize:l,fontFamily:a,fontWeight:s,fontVariant:c,fontStyle:d,letterSpacing:u,textAlign:o,lineHeight:h,width:p,height:g,imageWidth:t,imageHeight:e,paddingLeft:b,paddingTop:$,paddingRight:y,paddingBottom:x,pixelRatio:E*k,willRequest:B,outline:m,blur:f,styleNonce:D.styleNonce,color:[1,0,1]}).then(t=>{if(!G)return;let e=G.textureCreate();G.textureUpdate(e,t,{filterParam:G.textureFilterLinear,wrapParam:G.textureClamp,scalar:k}),ts.set(S,e),tc.set(n,e),tl()}).catch(console.error)}let k=ts.get(S);return cN(k)?k:tc.get(n)},tg=new Map,t$=t=>{let{id:e,points:n,strokeWidth:r,strokeCap:o,strokeJoin:a,strokeColor:l,strokeDash:s}=t,c=ts.get(e),d=tg.get(e),u=nm({points:n.map(t=>"".concat(t.x,",").concat(t.y)).join(","),strokeWidth:r,strokeCap:o,strokeJoin:a,strokeColor:l,strokeDash:(s||[]).join(",")});if(d){let{hash:t}=d;if(ts.has(e)){if(u===t)return ts.get(e)}else d=void 0}if(!d){let n=M("canvas",{width:1,height:1});d={canvas:n,hash:void 0},tg.set(t.id,d),c=G.textureCreate(),G.textureUpdate(c,n,{filterParam:G.textureFilterLinear,wrapParam:G.textureClamp}),ts.set(e,c)}let{canvas:h}=d,p=Math.ceil(t.strokeWidth),g=eA(n),m=Math.floor(g.x)-.5*p,f=Math.floor(g.y)-.5*p,$=Math.ceil(g.width+p),y=Math.ceil(g.height+p);h.width=Math.max($,1),h.height=Math.max(y,1);let x=h.getContext("2d");return x.clearRect(0,0,h.width,h.height),$>=1&&y>=1&&(x.translate(-m,-f),ok(x,t),x.resetTransform()),G.textureUpdate(c,h,{filterParam:G.textureFilterLinear,wrapParam:G.textureClamp}),tg.set(e,{canvas:h,hash:u}),ts.get(e)},ty=t=>{let e;return t.backgroundImage?e=th(t.backgroundImage,t.backgroundImageRendering,"repeat"===t.backgroundRepeat?"repeat":void 0):t.bitmap&&t.points&&(e=t$(t)),e},tx=t=>{ts.forEach((e,n)=>{!t.find(t=>t===e)&&cN(e)&&(Array.from(tc.values()).includes(e)||(ts.delete(n),G.textureDelete(e)))})},tb=t=>{let{texture:e,size:n,origin:r,translation:o,rotation:a,scale:l,colorMatrix:s,opacity:c,convolutionMatrix:d,gamma:u,vignette:h,maskFeather:p,maskCornerRadius:g,overlayColor:m,enableOverlay:f,enableManipulation:$,enableAntialiasing:y}=t,x=0,b=0;if(1===P){let t=Math.abs(1-l)<Number.EPSILON;x=t&&X%2!=0?.5:0,b=t&&Z%2!=0?.5:0}return G.drawImage(e,n,r.x,r.y,o.x+x,o.y+b,a.x,a.y,a.z,l,s,lm(c,0,1),d,u,h,p,g,m,f,$,y),e},tv=(t,e,n)=>{let r=eF(e),o=eF(t),a={x:r.x-o.x,y:r.y-o.y},l=tV(r,n,o);return{x:l.x-o.x-a.x,y:l.y-o.y-a.y}},tw=(t,e)=>[t,t,t,t].map(t=>t*e),tS=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;t.forEach(t=>{let n=ty(t),r="complete"!==t.status&&("loading"===t.status||t.backgroundImage&&n===t.backgroundImage);r&&tl();let o="error"===t.status||t.backgroundImage&&n instanceof Error,a=cN(n)?n:void 0,l=t._scale||1,s=t._translate||m,c=t.strokeWidth&&t.strokeWidth*l,d=t.cornerRadius?tw(t.cornerRadius,l):g,u=!!t.width,h=N(t.text),p=nn(t.points),f=re(t);if(p){let r=t.points.map(t=>tB(t.x*l+s.x,t.y*l+s.y));if(t.bitmap){n&&e.push(n);let o=eA(r),s=Math.ceil(t.strokeWidth*l);G.drawRect({x:Math.floor(o.x)-.5*s,y:Math.floor(o.y)-.5*s,width:Math.ceil(o.width+s),height:Math.ceil(o.height+s)},t.rotation,t.flipX,t.flipY,[0,0,0,0],void 0,a,void 0,void 0,void 0,void 0,void 0,void 0,t.opacity,void 0,void 0,!1,!1)}else G.drawPath(r,t.rotation,t.flipX,t.flipY,c,t.strokeColor,t.pathClose,t.backgroundColor,t.opacity)}else if(f){let d=t.x,u=t.y;d*=l,u*=l;let h=tB(d+=s.x,u+=s.y);G.drawEllipse(h,t.rx*l,t.ry*l,t.rotation,t.flipX,t.flipY,t.backgroundColor,a,void 0,void 0,t.backgroundCorners&&cW(t.backgroundCorners),c,t.strokeColor,t.opacity,t.inverted),n&&e.push(n),(r||o)&&(t.backgroundColor||t.strokeColor&&t.strokeWidth||G.drawEllipse(h,t.rx*l,t.ry*l,t.rotation,t.flipX,t.flipY,o?[1,0,0,.25*t.opacity]:[0,0,0,.25*t.opacity]),o&&tR(h),r&&tP(h))}else if(h){let{fontSize:n=16}=t,r=n>1e3&&tt()?n/1e3:1,o=Math.max(16,Math.ceil(n/r*.25)),a=Math.abs(t.rotation)>0,u=nL(t.text,t),h={x:t.x*l+s.x,y:t.y*l+s.y,width:u.width*l,height:u.height*l},p=!!t.height;(t.backgroundColor||t.strokeColor)&&G.drawRect(h,t.rotation,t.flipX,t.flipY,d,t.backgroundColor,void 0,void 0,void 0,!1,void 0,c,t.strokeColor,t.opacity,void 0,void 0,void 0,t.inverted);let{textShadowX:m,textShadowY:f,textShadowBlur:$}=t;if(m||f||$){let n=Math.max(o,p?0:Math.ceil(.5*$)),c=tp(t,{id:t.id+"shadow",blur:$,paddingTop:n,paddingRight:n,paddingBottom:n,paddingLeft:n});if(c&&!t._prerender){let n;e.push(c);let d=G.textureGetSize(c),u={x:0,y:0},g={width:d.width/E*l,height:d.height/E*l},$=o*l/r;if(p)n={...h},u.x=m-$,u.y=f-$;else if(n={x:t.x*l+s.x-$,y:t.y*l+s.y-$,width:g.width,height:g.height},a){let e=tv(h,n,t.rotation);n.x+=e.x,n.y+=e.y;let r=tV(tB(m,f),t.rotation);n.x+=r.x,n.y+=r.y}else n.x+=m,n.y+=f;G.drawRect(n,t.rotation,t.flipX,t.flipY,[0,0,0,0],void 0,c,g,u,!1,void 0,void 0,void 0,t.opacity,void 0,0,t.textShadowColor)}}if(t.textOutlineWidth){let n=Math.ceil(.5*t.textOutlineWidth),c=o+n,d=tp(t,{id:t.id+"outline",outline:t.textOutlineWidth,paddingTop:c,paddingRight:c,paddingBottom:c,paddingLeft:c});if(d&&!t._prerender){e.push(d);let c=G.textureGetSize(d),p={width:c.width/E*l,height:c.height/E*l},g=(o+n)*l/r,m={x:t.x*l+s.x-g,y:t.y*l+s.y-g,width:p.width,height:t.height?u.height+g:p.height};if(a){let e=tv(h,m,t.rotation);m.x+=e.x,m.y+=e.y}G.drawRect(m,t.rotation,t.flipX,t.flipY,[0,0,0,0],void 0,d,p,{x:0,y:0},!1,void 0,void 0,void 0,t.opacity,void 0,0,t.textOutlineColor)}}let y=tp(t,{id:t.id+"text",paddingTop:o,paddingRight:o,paddingBottom:o,paddingLeft:o});if(y&&!t._prerender){e.push(y);let n=G.textureGetSize(y),c={width:n.width/E*l,height:n.height/E*l},d=o*l/r,p={x:t.x*l+s.x-d,y:t.y*l+s.y-d,width:c.width,height:t.height?u.height+d:c.height};if(a){let e=tv(h,p,t.rotation);p.x+=e.x,p.y+=e.y}let m=t.color||[0,0,0];t._prerender&&(m[3]=0),G.drawRect(p,t.rotation,t.flipX,t.flipY,g,!1,y,c,{x:0,y:0},!1,!1,void 0,void 0,t.opacity,void 0,t.feather,m,t.inverted)}}else if(u){let u,h;n&&e.push(n);let p=eR(t);l&&s&&(p.x*=l,p.y*=l,p.x+=s.x,p.y+=s.y,p.width*=l,p.height*=l);let{backgroundRepeat:g="no-repeat"}=t,m=a&&G.textureGetSize(a);if(m&&t.backgroundImage&&(t.backgroundSize||t.backgroundPosition||t.backgroundRepeat)){let e=tm(m.width,m.height);if("repeat"===t.backgroundRepeat&&(u={...m},h={x:0,y:0}),"contain"===t.backgroundSize)u=en(eQ(p,e,p)),h=t.backgroundPosition?t.backgroundPosition:tB((p.width-u.width)*.5,(p.height-u.height)*.5);else if("cover"===t.backgroundSize){let n=eq(p,e,p);u=en(n),t.backgroundPosition?h=t.backgroundPosition:(h=tB(n.x,n.y),h=tB((p.width-u.width)*.5,(p.height-u.height)*.5))}else t.backgroundSize?(u=t.backgroundSize,h=t.backgroundPosition||{x:0,y:0}):t.backgroundPosition&&(u={...m},h=t.backgroundPosition)}if(G.drawRect(p,t.rotation,t.flipX,t.flipY,d,t.backgroundColor,a,u,h,"repeat"===g,t.backgroundCorners&&cW(t.backgroundCorners),c,t.strokeColor,t.opacity,void 0,t.feather,t.fillColor,t.inverted),r||o){t.backgroundColor&&0!==t.backgroundColor[3]||t.strokeColor&&t.strokeWidth||G.drawRect(p,t.rotation,t.flipX,t.flipY,d,o?[1,.2549,.2118,.25*t.opacity]:[0,0,0,.25*t.opacity]);let e=eF(p);o&&tR(e),r&&tP(e)}}else n&&e.push(n)})},tk=0,tC=[{x:-5,y:-5},{x:5,y:5}],tM=[{x:5,y:-5},{x:-5,y:5}],tT=ir({x:0,y:0},10,10,0,!1,!1,16);tT.length=9;let tP=t=>{tk=Date.now()/50,G.drawEllipse(t,15,15,0,!1,!1,[0,0,0,.5]);let e=t9(tT.map(e=>({x:e.x+t.x,y:e.y+t.y})),tk,t.x,t.y);G.drawPath(e,0,!1,!1,2,[1,1,1])},tR=t=>{G.drawEllipse(t,13,13,0,!1,!1,[1,.2549,.2118,.75]);let e=tC.map(e=>({x:e.x+t.x,y:e.y+t.y})),n=tM.map(e=>({x:e.x+t.x,y:e.y+t.y}));G.drawPath(e,0,!1,!1,3,[1,1,1]),G.drawPath(n,0,!1,!1,3,[1,1,1])},tA=(t,e,n,r,o,a)=>G.drawRect(e,0,!1,!1,g,g,t,r,n,!0,void 0,0,void 0,a,void 0,void 0,o),tE=(t,e,n,r,o)=>{let a=el(e,e),l=th(f,"pixelated","repeat"),s=tB(-t.x%e,-t.y%e),c=tB(s.x+.5*a.width,s.y);tA(l,t,s,a,n,o),tA(l,t,c,a,r,o)},tI=!1,tL=!0,tD=!1,tO=[],tz=[],t_=[],tN=t=>!t.aboveFrame,tW=t=>t.aboveFrame,tj=()=>{t_.length=0;let t=H[0],{manipulationShapes:e,manipulationShapesDirty:n,annotationShapes:r,annotationShapesDirty:o,interfaceShapes:u,decorationShapes:h,frameShapes:p,selectionShapes:m}=L({opacity:t.opacity,rotation:t.rotation,scale:t.scale,images:H,size:el(X,Z),backgroundColor:[...d],selectionRect:c}),f=[...d],$=c,y=lm(s,0,1),x=l,w=Math.abs(-1+t.rotation.x/Math.PI*2),S=Math.abs(-1+t.rotation.y/Math.PI*2),k=w<.99||S<.99,M={...t.size},P=t.backgroundColor,R=t.backgroundImage,A=e.length>0,I=r.length>0,B=r.filter(tW).length>0,D=h.filter(tW).length>0,O=P[3]>0,N=!!T&&C>=1;if(y<1&&O){let t=f[0],e=f[1],n=f[2],r=1-y,o=P[0]*r,a=P[1]*r,l=P[2]*r,s=1-r;f[0]=o+t*s,f[1]=a+e*s,f[2]=l+n*s,f[3]=1}G.setCanvasColor(b?g:f),A&&(n||tI)?(G.disableMask(),G.drawToImageBlendBuffer(M),tO.length=0,tS(e,tO)):A||(tO.length=0),t_.push(...tO),tL&&(G.drawToImageOverlayBuffer(M,E),tL=!1);let Y=I&&(o||tI);if(k?(Y||!tD?(G.disableMask(),G.drawToImageOverlayBuffer(M,E),tz.length=0,tS(B?r.filter(tN):r,tz)):I||(tz.length=0),tD=!0):tD=!1,G.drawToCanvas(),G.enableMask($,y),z&&W>=1&&2===_.length&&j&&tE($,W,_[0],_[1],j),O&&G.drawRect($,0,!1,!1,g,P),R){G.enableMask($,1);let t=Math.max(v.width/R.width,v.height/R.height),e=R.width*t,n=R.height*t,r={x:v.x+.5*v.width-.5*e,y:v.y+.5*v.height-.5*n,width:e,height:n};G.drawRect(r,0,!1,!1,g,g,th(R,"linear")),G.enableMask($,y)}if(N&&G.enablePreviewStencil(),t_.push(...[...H].reverse().map(t=>tb({...t,texture:th(t.data),enableOverlay:k&&I,enableManipulation:A,enableAntialiasing:!0,mask:$,maskOpacity:y,overlayColor:x}))),G.enableMask($,C),!k&&(N&&G.applyPreviewStencil(),G.resetCanvasMatrix(),G.updateCanvasMatrix(M,t.origin,t.translation,t.scale,t.rotation),tz.length=0,tS(B?r.filter(tN):r,tz),N&&G.disablePreviewStencil()),t_.push(...tz),G.resetCanvasMatrix(),G.enableMask($,C),tS(D?h.filter(tN):h,t_),p.length){G.enableMask($,1);let t=p.filter(t=>!t.expandsCanvas),e=p.filter(t=>t.expandsCanvas);t.length&&tS(t,t_),e.length&&(G.enableMask({x:$.x+.5,y:$.y+.5,width:$.width-1,height:$.height-1},a),tS(e,t_))}if(B&&(G.resetCanvasMatrix(),G.updateCanvasMatrix(M,t.origin,t.translation,t.scale,t.rotation),tS(r.filter(tW),t_),G.resetCanvasMatrix()),D&&(G.resetCanvasMatrix(),tS(h.filter(tW),t_),G.resetCanvasMatrix()),U&&m.length&&!k){G.resetCanvasMatrix(),G.updateCanvasMatrix(M,t.origin,t.translation,t.scale,t.rotation);let e=[...U];e[3]=.5,tS([{id:"selection",color:e,actions:[...m]}].map(t=>ta(t,M)),t_),G.resetCanvasMatrix()}G.disableMask(),tS(u,t_),V.forEach(t=>{if(G.enableMask(t.mask,t.maskOpacity),t.backgroundColor){let e=R&&eq({...t.mask},R.width/R.height),n=R&&th(R,"linear");G.drawRect(t.mask,0,!1,!1,t.maskCornerRadius,t.backgroundColor,n,e,e,void 0,void 0,void 0,void 0,t.opacity,t.maskFeather),n&&t_.push(n)}let e=tb({...t,texture:th(t.data),enableAntialiasing:!1,translation:{x:t.translation.x+t.offset.x-.5*X,y:t.translation.y+t.offset.y-.5*Z}});t_.push(e)}),G.disableMask(),tx(t_),F(),tI=!1},tH=0,tU=()=>{clearTimeout(p);let t=Date.now();if(t-tH<48){p=setTimeout(tU,48);return}tH=t,tj()},tG=()=>cO()?tU:tj;return a$(()=>o()),af(()=>n(31,G=cu(u,{alpha:b}))),ay(()=>{G&&(tg.forEach(t=>{let{canvas:e}=t;return R(e)}),tg.clear(),G.release(),n(31,G=void 0),n(0,u=void 0))}),t.$$set=t=>{"isAnimated"in t&&n(9,x=t.isAnimated),"isTransparent"in t&&n(10,b=t.isTransparent),"maskRect"in t&&n(11,v=t.maskRect),"maskOpacity"in t&&n(12,S=t.maskOpacity),"maskFrameOpacity"in t&&n(13,k=t.maskFrameOpacity),"maskMarkupOpacity"in t&&n(14,C=t.maskMarkupOpacity),"clipAnnotationsToImage"in t&&n(15,T=t.clipAnnotationsToImage),"pixelRatio"in t&&n(16,P=t.pixelRatio),"textPixelRatio"in t&&n(17,E=t.textPixelRatio),"backgroundColor"in t&&n(18,I=t.backgroundColor),"willRender"in t&&n(19,L=t.willRender),"didRender"in t&&n(20,F=t.didRender),"willRequest"in t&&n(21,B=t.willRequest),"csp"in t&&n(22,D=t.csp),"loadImageData"in t&&n(23,O=t.loadImageData),"enableGrid"in t&&n(24,z=t.enableGrid),"gridColors"in t&&n(25,_=t.gridColors),"gridSize"in t&&n(26,W=t.gridSize),"gridOpacity"in t&&n(27,j=t.gridOpacity),"images"in t&&n(28,H=t.images),"interfaceImages"in t&&n(29,V=t.interfaceImages),"selectionColor"in t&&n(30,U=t.selectionColor)},t.$$.update=()=>{1&t.$$.dirty[0]&&u&&n(32,K=c_(getComputedStyle(u).getPropertyValue("--color-transition-duration"))),262656&t.$$.dirty[0]|2&t.$$.dirty[1]&&I&&J.set(I,{duration:x?K:0}),4096&t.$$.dirty[0]&&Y(Q,nt(S)?S:1),8192&t.$$.dirty[0]&&Y(te,nt(k)?k:1),2048&t.$$.dirty[0]&&v&&ti.set(v),48&t.$$.dirty[1]&&d&&tn.set([d[0],d[1],d[2],lm(s,0,1)]),268435462&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(34,r=!!(G&&X&&Z&&H.length)),65542&t.$$.dirty[0]|1&t.$$.dirty[1]&&X&&Z&&G&&(tH=0,G.resize(X,Z,P)),8&t.$$.dirty[1]&&n(33,o=r?tG():y),12&t.$$.dirty[1]&&r&&o&&o()},[u,X,Z,$,J,Q,te,ti,tn,x,b,v,S,k,C,T,P,E,I,L,F,B,D,O,z,_,W,j,H,V,U,G,K,o,r,s,d,function(t){ak[t?"unshift":"push"](()=>{n(0,u=t)})},t=>{n(1,X=t.detail.width),n(2,Z=t.detail.height),$("measure",{width:X,height:Z})}]}class cG extends a1{constructor(t){super(),aQ(this,t,cU,cV,oW,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,csp:22,loadImageData:23,enableGrid:24,gridColors:25,gridSize:26,gridOpacity:27,images:28,interfaceImages:29,selectionColor:30},null,[-1,-1,-1])}}var cX=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Boolean,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return t.filter(e).join(n)};function cZ(t,e,n){let r=t.slice();return r[17]=e[n],r}let cY=t=>({tab:4&t}),cq=t=>({tab:t[17]});function cK(t){let e,n,r;let o=[],a=new Map,l=t[2],s=t=>t[17].id;for(let e=0;e<l.length;e+=1){let n=cZ(t,l,e),r=s(n);a.set(r,o[e]=cJ(r,n))}return{c(){e=o9("ul");for(let t=0;t<o.length;t+=1)o[t].c();ao(e,"class",n=cX(["PinturaTabList",t[0]])),ao(e,"role","tablist"),ao(e,"data-layout",t[1])},m(n,a){o8(n,e,a);for(let t=0;t<o.length;t+=1)o[t].m(e,null);t[14](e),r=!0},p(t,c){1124&c&&(l=t[2],aO(),o=aG(o,c,s,1,t,l,a,e,aU,cJ,null,cZ),az()),(!r||1&c&&n!==(n=cX(["PinturaTabList",t[0]])))&&ao(e,"class",n),(!r||2&c)&&ao(e,"data-layout",t[1])},i(t){if(!r){for(let t=0;t<l.length;t+=1)a_(o[t]);r=!0}},o(t){for(let t=0;t<o.length;t+=1)aN(o[t]);r=!1},d(n){n&&o7(e);for(let t=0;t<o.length;t+=1)o[t].d();t[14](null)}}}function cJ(t,e){let n,r,o,a,l,s,c,d,u,h;let p=e[11].default,g=oU(p,e,e[10],cq);function m(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[12](e[17],...n)}function f(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[13](e[17],...n)}return{key:t,first:null,c(){n=o9("li"),r=o9("button"),g&&g.c(),a=ai(),ao(r,"type","button"),r.disabled=o=e[17].disabled,ao(n,"role","tab"),ao(n,"aria-controls",l=e[17].href.substring(1)),ao(n,"id",s=e[17].tabId),ao(n,"aria-selected",c=e[17].selected),this.first=n},m(t,e){o8(t,n,e),o3(n,r),g&&g.m(r,null),o3(n,a),d=!0,u||(h=[ar(r,"keydown",m),ar(r,"click",f)],u=!0)},p(t,a){e=t,g&&g.p&&(!d||1028&a)&&oZ(g,p,e,e[10],d?oX(p,e[10],a,cY):oY(e[10]),cq),(!d||4&a&&o!==(o=e[17].disabled))&&(r.disabled=o),(!d||4&a&&l!==(l=e[17].href.substring(1)))&&ao(n,"aria-controls",l),(!d||4&a&&s!==(s=e[17].tabId))&&ao(n,"id",s),(!d||4&a&&c!==(c=e[17].selected))&&ao(n,"aria-selected",c)},i(t){d||(a_(g,t),d=!0)},o(t){aN(g,t),d=!1},d(t){t&&o7(n),g&&g.d(t),u=!1,o_(h)}}}function cQ(t){let e,n;let r=t[4]&&cK(t);return{c(){r&&r.c(),e=an()},m(t,o){r&&r.m(t,o),o8(t,e,o),n=!0},p(t,n){let[o]=n;t[4]?r?(r.p(t,o),16&o&&a_(r,1)):((r=cK(t)).c(),a_(r,1),r.m(e.parentNode,e)):r&&(aO(),aN(r,1,1,()=>{r=null}),az())},i(t){n||(a_(r),n=!0)},o(t){aN(r),n=!1},d(t){r&&r.d(t),t&&o7(e)}}}function c1(t,e,n){let r,o,a;let{$$slots:l={},$$scope:s}=e,{class:c}=e,{name:d}=e,{selected:u}=e,{tabs:h=[]}=e,{layout:p}=e,g=ax(),m=t=>{let e=a.querySelectorAll('[role="tab"] button')[t];e&&e.focus()},f=(t,e)=>{t.preventDefault(),t.stopPropagation(),g("select",e)},$=(t,e)=>{let{key:n}=t;if(!/arrow/i.test(n))return;let r=h.findIndex(t=>t.id===e);return/right|down/i.test(n)?m(r<h.length-1?r+1:0):/left|up/i.test(n)?m(r>0?r-1:h.length-1):void 0};return t.$$set=t=>{"class"in t&&n(0,c=t.class),"name"in t&&n(7,d=t.name),"selected"in t&&n(8,u=t.selected),"tabs"in t&&n(9,h=t.tabs),"layout"in t&&n(1,p=t.layout),"$$scope"in t&&n(10,s=t.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&n(2,r=h.map(t=>{let e=t.id===u;return{...t,tabId:"tab-".concat(d,"-").concat(t.id),href:"#panel-".concat(d,"-").concat(t.id),selected:e}})),4&t.$$.dirty&&n(4,o=r.length>1)},[c,p,r,a,o,f,$,d,u,h,s,l,(t,e)=>$(e,t.id),(t,e)=>f(e,t.id),function(t){ak[t?"unshift":"push"](()=>{n(3,a=t)})}]}class c0 extends a1{constructor(t){super(),aQ(this,t,c1,cQ,oW,{class:0,name:7,selected:8,tabs:9,layout:1})}}let c2=t=>({panel:16&t}),c4=t=>({panel:t[4][0].id,panelIsActive:!0});function c5(t,e,n){let r=t.slice();return r[14]=e[n].id,r[15]=e[n].shouldDraw,r[16]=e[n].panelId,r[17]=e[n].tabindex,r[18]=e[n].labelledBy,r[19]=e[n].isActive,r[20]=e[n].hidden,r[3]=e[n].visible,r}let c3=t=>({panel:16&t,panelIsActive:16&t}),c6=t=>({panel:t[14],panelIsActive:t[19]});function c8(t){let e,n,r,o,a,l;let s=t[11].default,c=oU(s,t,t[10],c4);return{c(){e=o9("div"),n=o9("div"),c&&c.c(),ao(n,"class",r=cX([t[1]])),ao(e,"class",t[0]),ao(e,"style",t[2])},m(r,s){o8(r,e,s),o3(e,n),c&&c.m(n,null),o=!0,a||(l=[ar(e,"measure",t[13]),oQ(cE.call(null,e))],a=!0)},p(t,a){c&&c.p&&(!o||1040&a)&&oZ(c,s,t,t[10],o?oX(s,t[10],a,c2):oY(t[10]),c4),(!o||2&a&&r!==(r=cX([t[1]])))&&ao(n,"class",r),(!o||1&a)&&ao(e,"class",t[0]),(!o||4&a)&&ao(e,"style",t[2])},i(t){o||(a_(c,t),o=!0)},o(t){aN(c,t),o=!1},d(t){t&&o7(e),c&&c.d(t),a=!1,o_(l)}}}function c7(t){let e,n,r,o,a;let l=[],s=new Map,c=t[4],d=t=>t[14];for(let e=0;e<c.length;e+=1){let n=c5(t,c,e),r=d(n);s.set(r,l[e]=dt(r,n))}return{c(){e=o9("div");for(let t=0;t<l.length;t+=1)l[t].c();ao(e,"class",n=cX(["PinturaTabPanels",t[0]])),ao(e,"style",t[2])},m(n,s){o8(n,e,s);for(let t=0;t<l.length;t+=1)l[t].m(e,null);r=!0,o||(a=[ar(e,"measure",t[12]),oQ(cE.call(null,e,{observePosition:!0}))],o=!0)},p(t,o){1042&o&&(c=t[4],aO(),l=aG(l,o,d,1,t,c,s,e,aU,dt,null,c5),az()),(!r||1&o&&n!==(n=cX(["PinturaTabPanels",t[0]])))&&ao(e,"class",n),(!r||4&o)&&ao(e,"style",t[2])},i(t){if(!r){for(let t=0;t<c.length;t+=1)a_(l[t]);r=!0}},o(t){for(let t=0;t<l.length;t+=1)aN(l[t]);r=!1},d(t){t&&o7(e);for(let t=0;t<l.length;t+=1)l[t].d();o=!1,o_(a)}}}function c9(t){let e;let n=t[11].default,r=oU(n,t,t[10],c6);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,o){r&&r.p&&(!e||1040&o)&&oZ(r,n,t,t[10],e?oX(n,t[10],o,c3):oY(t[10]),c6)},i(t){e||(a_(r,t),e=!0)},o(t){aN(r,t),e=!1},d(t){r&&r.d(t)}}}function dt(t,e){let n,r,o,a,l,s,c,d,u;let h=e[15]&&c9(e);return{key:t,first:null,c(){n=o9("div"),h&&h.c(),r=ai(),ao(n,"class",o=cX(["PinturaTabPanel",e[1]])),n.hidden=a=e[20],ao(n,"id",l=e[16]),ao(n,"tabindex",s=e[17]),ao(n,"aria-labelledby",c=e[18]),ao(n,"data-inert",d=!e[3]),this.first=n},m(t,e){o8(t,n,e),h&&h.m(n,null),o3(n,r),u=!0},p(t,p){(e=t)[15]?h?(h.p(e,p),16&p&&a_(h,1)):((h=c9(e)).c(),a_(h,1),h.m(n,r)):h&&(aO(),aN(h,1,1,()=>{h=null}),az()),(!u||2&p&&o!==(o=cX(["PinturaTabPanel",e[1]])))&&ao(n,"class",o),(!u||16&p&&a!==(a=e[20]))&&(n.hidden=a),(!u||16&p&&l!==(l=e[16]))&&ao(n,"id",l),(!u||16&p&&s!==(s=e[17]))&&ao(n,"tabindex",s),(!u||16&p&&c!==(c=e[18]))&&ao(n,"aria-labelledby",c),(!u||16&p&&d!==(d=!e[3]))&&ao(n,"data-inert",d)},i(t){u||(a_(h),u=!0)},o(t){aN(h),u=!1},d(t){t&&o7(n),h&&h.d()}}}function de(t){let e,n,r,o;let a=[c7,c8],l=[];return n=l[e=t[5]?0:1]=a[e](t),{c(){n.c(),r=an()},m(t,n){l[e].m(t,n),o8(t,r,n),o=!0},p(t,o){let[s]=o,c=e;(e=t[5]?0:1)===c?l[e].p(t,s):(aO(),aN(l[c],1,1,()=>{l[c]=null}),az(),(n=l[e])?n.p(t,s):(n=l[e]=a[e](t)).c(),a_(n,1),n.m(r.parentNode,r))},i(t){o||(a_(n),o=!0)},o(t){aN(n),o=!1},d(t){l[e].d(t),t&&o7(r)}}}function di(t,e,n){let r,o;let{$$slots:a={},$$scope:l}=e,{class:s}=e,{name:c}=e,{selected:d}=e,{panelClass:u}=e,{panels:h=[]}=e,{visible:p}=e,{style:g}=e,m={};return t.$$set=t=>{"class"in t&&n(0,s=t.class),"name"in t&&n(6,c=t.name),"selected"in t&&n(7,d=t.selected),"panelClass"in t&&n(1,u=t.panelClass),"panels"in t&&n(8,h=t.panels),"visible"in t&&n(3,p=t.visible),"style"in t&&n(2,g=t.style),"$$scope"in t&&n(10,l=t.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&n(4,r=h.map(t=>{let e=t===d;e&&n(9,m[t]=!0,m);let r=p?-1!==p.indexOf(t):e;return{id:t,panelId:"panel-".concat(c,"-").concat(t),labelledBy:"tab-".concat(c,"-").concat(t),isActive:e,hidden:!e,visible:r,tabindex:e?0:-1,shouldDraw:e||m[t]}})),16&t.$$.dirty&&n(5,o=r.length>1)},[s,u,g,p,r,o,c,d,h,m,l,a,function(e){aw.call(this,t,e)},function(e){aw.call(this,t,e)}]}class dn extends a1{constructor(t){super(),aQ(this,t,di,de,oW,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var dr=t=>{let e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter(t=>!!e[t].get)};function da(t){let e,n,r,o;let a=[t[5],{locale:t[1]}];function l(e){t[22](e)}var s=t[10];function c(t){let e={};for(let t=0;t<a.length;t+=1)e=oD(e,a[t]);return void 0!==t[3]&&(e.name=t[3]),{props:e}}return s&&(e=new s(c(t)),ak.push(()=>aY(e,"name",l)),t[23](e),e.$on("measure",t[11])),{c(){e&&aq(e.$$.fragment),r=an()},m(t,n){e&&aK(e,t,n),o8(t,r,n),o=!0},p(t,o){let d=34&o[0]?aX(a,[32&o[0]&&aZ(t[5]),2&o[0]&&{locale:t[1]}]):{};if(!n&&8&o[0]&&(n=!0,d.name=t[3],aE(()=>n=!1)),s!==(s=t[10])){if(e){aO();let t=e;aN(t.$$.fragment,1,0,()=>{aJ(t,1)}),az()}s?(e=new s(c(t)),ak.push(()=>aY(e,"name",l)),t[23](e),e.$on("measure",t[11]),aq(e.$$.fragment),a_(e.$$.fragment,1),aK(e,r.parentNode,r)):e=null}else s&&e.$set(d)},i(t){o||(e&&a_(e.$$.fragment,t),o=!0)},o(t){e&&aN(e.$$.fragment,t),o=!1},d(n){t[23](null),n&&o7(r),e&&aJ(e,n)}}}function dl(t){let e,n,r;let o=t[6]&&da(t);return{c(){e=o9("div"),o&&o.c(),ao(e,"data-util",t[3]),ao(e,"class",n=cX(["PinturaUtilPanel",t[2]])),ao(e,"style",t[7])},m(n,a){o8(n,e,a),o&&o.m(e,null),t[24](e),r=!0},p(t,a){t[6]?o?(o.p(t,a),64&a[0]&&a_(o,1)):((o=da(t)).c(),a_(o,1),o.m(e,null)):o&&(aO(),aN(o,1,1,()=>{o=null}),az()),(!r||8&a[0])&&ao(e,"data-util",t[3]),(!r||4&a[0]&&n!==(n=cX(["PinturaUtilPanel",t[2]])))&&ao(e,"class",n),(!r||128&a[0])&&ao(e,"style",t[7])},i(t){r||(a_(o),r=!0)},o(t){aN(o),r=!1},d(n){n&&o7(e),o&&o.d(),t[24](null)}}}function ds(t,e,n){let r,o,a,l,s,c,d,u;let h=ax(),{isActive:p=!0}=e,{stores:g}=e,{view:m}=e,{props:f}=e,{component:$}=e,{locale:y}=e,{class:x}=e,b=av("isAnimated");oV(t,b,t=>n(21,s=t));let v=cy(0),w=a5(v,t=>lm(t,0,1));oV(t,w,t=>n(20,l=t));let S=!p,k=a4(p),C={isActive:a5(k,async(t,e)=>{if(!t)return e(t);await (aR(),aT),e(t)},!1),isActiveFraction:a5(w,t=>t),isVisible:a5(w,t=>t>0)},M=m,T=dr(M),P=Object.keys(f||{}).reduce((t,e)=>(T.includes(e)&&(t[e]=f[e]),t),{}),R=Object.keys(C).reduce((t,e)=>(T.includes(e)&&(t[e]=C[e]),t),{}),A=t=>{n(17,c={...t.detail}),I&&p&&h("measure",{...c})};ab("measurable",cE);let E=am().$$.context,I=!1;return af(()=>{if(n(19,I=!0),a)return;n(0,$=new M({target:u,props:{...o,locale:y},context:E})),n(3,d=$.name);let t=$.$on("measure",A);return()=>{t(),$.$destroy()}}),t.$$set=t=>{"isActive"in t&&n(12,p=t.isActive),"stores"in t&&n(13,g=t.stores),"view"in t&&n(14,m=t.view),"props"in t&&n(15,f=t.props),"component"in t&&n(0,$=t.component),"locale"in t&&n(1,y=t.locale),"class"in t&&n(2,x=t.class)},t.$$.update=()=>{135169&t.$$.dirty[0]&&c&&p&&$&&h("measure",c),2101248&t.$$.dirty[0]&&v.set(p?1:0,{hard:!1===s}),1310720&t.$$.dirty[0]&&(l<=0&&!S?n(18,S=!0):l>0&&S&&n(18,S=!1)),786432&t.$$.dirty[0]&&I&&h(S?"hide":"show"),1048576&t.$$.dirty[0]&&h("fade",l),1048576&t.$$.dirty[0]&&n(7,r=l<1?"opacity: ".concat(l):void 0),4096&t.$$.dirty[0]&&k.set(p),8192&t.$$.dirty[0]&&n(5,o={...P,...R,stores:g})},n(6,a=!T.includes("external")),[$,y,x,d,u,o,a,r,b,w,M,A,p,g,m,f,v,c,S,I,l,s,function(t){n(3,d=t)},function(t){ak[t?"unshift":"push"](()=>{n(0,$=t)})},function(t){ak[t?"unshift":"push"](()=>{n(4,u=t)})}]}class dc extends a1{get opacity(){return this.$$.ctx[16]}constructor(t){super(),aQ(this,t,ds,dl,oW,{isActive:12,stores:13,view:14,props:15,component:0,locale:1,class:2,opacity:16},null,[-1,-1])}}function dd(t){let e,n,r;let o=t[5].default,a=oU(o,t,t[4],null);return{c(){e=at("svg"),a&&a.c(),ao(e,"class",t[3]),ao(e,"style",t[2]),ao(e,"width",t[0]),ao(e,"height",t[1]),ao(e,"viewBox",n="0 0 "+t[0]+"\n    "+t[1]),ao(e,"xmlns","http://www.w3.org/2000/svg"),ao(e,"aria-hidden","true"),ao(e,"focusable","false"),ao(e,"stroke-linecap","round"),ao(e,"stroke-linejoin","round")},m(t,n){o8(t,e,n),a&&a.m(e,null),r=!0},p(t,l){let[s]=l;a&&a.p&&(!r||16&s)&&oZ(a,o,t,t[4],r?oX(o,t[4],s,null):oY(t[4]),null),(!r||8&s)&&ao(e,"class",t[3]),(!r||4&s)&&ao(e,"style",t[2]),(!r||1&s)&&ao(e,"width",t[0]),(!r||2&s)&&ao(e,"height",t[1]),(!r||3&s&&n!==(n="0 0 "+t[0]+"\n    "+t[1]))&&ao(e,"viewBox",n)},i(t){r||(a_(a,t),r=!0)},o(t){aN(a,t),r=!1},d(t){t&&o7(e),a&&a.d(t)}}}function du(t,e,n){let{$$slots:r={},$$scope:o}=e,{width:a=24}=e,{height:l=24}=e,{style:s}=e,{class:c}=e;return t.$$set=t=>{"width"in t&&n(0,a=t.width),"height"in t&&n(1,l=t.height),"style"in t&&n(2,s=t.style),"class"in t&&n(3,c=t.class),"$$scope"in t&&n(4,o=t.$$scope)},[a,l,s,c,o,r]}class dh extends a1{constructor(t){super(),aQ(this,t,du,dd,oW,{width:0,height:1,style:2,class:3})}}var dp=(t,e)=>e===t.target||e.contains(t.target),dg=t=>t.map(t=>"CMD"===t?ij()?"⌘":"Ctrl":t).join("+"),dm=(t,e,n)=>{let r=N(e)?e:t;return n?"".concat(r," (").concat(dg(n),")"):r};function df(t){let e,n;return e=new dh({props:{class:"PinturaButtonIcon",$$slots:{default:[d$]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};536870920&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function d$(t){let e;return{c(){e=at("g")},m(n,r){o8(n,e,r),e.innerHTML=t[3]},p(t,n){8&n&&(e.innerHTML=t[3])},d(t){t&&o7(e)}}}function dy(t){let e;return{c(){ao(e=o9("span"),"class",t[11])},m(n,r){o8(n,e,r),e.innerHTML=t[0]},p(t,n){1&n&&(e.innerHTML=t[0]),2048&n&&ao(e,"class",t[11])},d(t){t&&o7(e)}}}function dx(t){var e;let n,r,o,a,l,s,c,d,u,h;let p=t[27].default,g=oU(p,t,t[29],null),m=g||(u=(e=t)[3]&&df(e),h=e[0]&&dy(e),{c(){s=o9("span"),u&&u.c(),c=ai(),h&&h.c(),ao(s,"class",e[13])},m(t,e){o8(t,s,e),u&&u.m(s,null),o3(s,c),h&&h.m(s,null),d=!0},p(t,e){t[3]?u?(u.p(t,e),8&e&&a_(u,1)):((u=df(t)).c(),a_(u,1),u.m(s,c)):u&&(aO(),aN(u,1,1,()=>{u=null}),az()),t[0]?h?h.p(t,e):((h=dy(t)).c(),h.m(s,null)):h&&(h.d(1),h=null),(!d||8192&e)&&ao(s,"class",t[13])},i(t){d||(a_(u),d=!0)},o(t){aN(u),d=!1},d(t){t&&o7(s),u&&u.d(),h&&h.d()}});return{c(){n=o9("button"),m&&m.c(),ao(n,"type",t[6]),ao(n,"style",t[4]),n.disabled=t[5],ao(n,"class",t[12]),ao(n,"title",r=dm(t[0],t[1],t[2]))},m(e,r){o8(e,n,r),m&&m.m(n,null),t[28](n),o=!0,a||(l=[ar(n,"keydown",function(){oN(t[8])&&t[8].apply(this,arguments)}),ar(n,"click",function(){oN(t[7])&&t[7].apply(this,arguments)}),ar(n,"pointerdown",function(){oN(t[14])&&t[14].apply(this,arguments)}),oQ(t[9].call(null,n))],a=!0)},p(e,a){let[l]=a;t=e,g?g.p&&(!o||536870912&l)&&oZ(g,p,t,t[29],o?oX(p,t[29],l,null):oY(t[29]),null):m&&m.p&&(!o||10249&l)&&m.p(t,o?l:-1),(!o||64&l)&&ao(n,"type",t[6]),(!o||16&l)&&ao(n,"style",t[4]),(!o||32&l)&&(n.disabled=t[5]),(!o||4096&l)&&ao(n,"class",t[12]),(!o||7&l&&r!==(r=dm(t[0],t[1],t[2])))&&ao(n,"title",r)},i(t){o||(a_(m,t),o=!0)},o(t){aN(m,t),o=!1},d(e){e&&o7(n),m&&m.d(e),t[28](null),a=!1,o_(l)}}}function db(t,e,n){let r,o,a,l,s,c,d;let{$$slots:u={},$$scope:h}=e,{class:p}=e,{label:g}=e,{title:m}=e,{shortcut:f}=e,{labelClass:$}=e,{innerClass:x}=e,{hideLabel:b=!1}=e,{icon:v}=e,{style:w}=e,{disabled:S}=e,{type:k="button"}=e,{onclick:C}=e,{onkeydown:M}=e,{onhold:T}=e,{action:P=()=>{}}=e,{holdThreshold:R=500}=e,{holdSpeedUpFactor:A=.5}=e,{holdSpeedMin:E=20}=e,I=t=>{n(25,c=setTimeout(()=>{T(),I(Math.max(t*A,E))},t))};return t.$$set=t=>{"class"in t&&n(15,p=t.class),"label"in t&&n(0,g=t.label),"title"in t&&n(1,m=t.title),"shortcut"in t&&n(2,f=t.shortcut),"labelClass"in t&&n(16,$=t.labelClass),"innerClass"in t&&n(17,x=t.innerClass),"hideLabel"in t&&n(18,b=t.hideLabel),"icon"in t&&n(3,v=t.icon),"style"in t&&n(4,w=t.style),"disabled"in t&&n(5,S=t.disabled),"type"in t&&n(6,k=t.type),"onclick"in t&&n(7,C=t.onclick),"onkeydown"in t&&n(8,M=t.onkeydown),"onhold"in t&&n(19,T=t.onhold),"action"in t&&n(9,P=t.action),"holdThreshold"in t&&n(20,R=t.holdThreshold),"holdSpeedUpFactor"in t&&n(21,A=t.holdSpeedUpFactor),"holdSpeedMin"in t&&n(22,E=t.holdSpeedMin),"$$scope"in t&&n(29,h=t.$$scope)},t.$$.update=()=>{101187584&t.$$.dirty&&n(26,o=T?()=>{c&&(clearTimeout(c),n(25,c=void 0),document.documentElement.removeEventListener("pointerup",o))}:y),68681728&t.$$.dirty&&n(14,r=T?()=>{document.documentElement.addEventListener("pointerup",o),I(R)}:y),131072&t.$$.dirty&&n(13,a=cX(["PinturaButtonInner",x])),294912&t.$$.dirty&&n(12,l=cX(["PinturaButton",b&&"PinturaButtonIconOnly",p])),327680&t.$$.dirty&&n(11,s=cX([b?"implicit":"PinturaButtonLabel",$]))},[g,m,f,v,w,S,k,C,M,P,d,s,l,a,r,p,$,x,b,T,R,A,E,t=>dp(t,d),()=>d,c,o,u,function(t){ak[t?"unshift":"push"](()=>{n(10,d=t)})},h]}class dv extends a1{get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}constructor(t){super(),aQ(this,t,db,dx,oW,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}}var dw=(t,e)=>{let n=t.findIndex(e);if(n>=0)return t.splice(n,1)};let dS=t=>nt(t.button)&&0!==t.button;var dk=function(t){let e,n,r,o,a,l,s,c,d,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{inertia:h=!1,inertiaDurationMultiplier:p=80,shouldStartInteraction:g=()=>!0,pinch:m=!1,multiTouch:f,getEventPosition:$=t=>tB(t.clientX,t.clientY),observeKeys:y=!1}=u;function x(e,n){t.dispatchEvent(new CustomEvent(e,{detail:n}))}function b(){a&&a(),a=void 0}let v=[],w=t=>0===t.timeStamp?Date.now():t.timeStamp,S=t=>{let e=w(t),n={timeStamp:e,timeStampInitial:e,position:$(t),origin:$(t),velocity:tF(),velocityHistory:[],velocityAverage:tF(),translation:tF(),interactionState:void 0,event:t};v.push(n),n.interactionState=F(v)},k=t=>{let e=dw(v,e=>e.event.pointerId===t.pointerId);if(e)return e[0]},C=()=>{v.length=0},M=t=>v.findIndex(e=>e.event.pointerId===t.pointerId),T=()=>{let t=tN(v[0].position);if(v[1]){let e=(v[1].position.x-t.x)*.5,n=(v[1].position.y-t.y)*.5;t.x+=e,t.y+=n}return t},P=t=>{t.origin.x=t.position.x,t.origin.y=t.position.y,t.translation.x=0,t.translation.y=0},R=t=>{let e=A(t);if(!e)return;let n=w(t),r=$(t),o=Math.max(1,n-e.timeStamp);e.velocity.x=(r.x-e.position.x)/o,e.velocity.y=(r.y-e.position.y)/o,e.velocityHistory.push(tN(e.velocity)),e.velocityHistory=e.velocityHistory.slice(-3),e.velocityAverage=e.velocityHistory.reduce((t,e,n,r)=>(t.x+=e.x/r.length,t.y+=e.y/r.length,t),tF()),e.translation.x=r.x-e.origin.x,e.translation.y=r.y-e.origin.y,e.timeStamp=n,e.position.x=r.x,e.position.y=r.y,e.event=t},A=t=>{let e=M(t);if(!(e<0))return v[e]},E=()=>1===v.length,I=()=>2===v.length,L=(t,e)=>t.reduce((t,n)=>t+=t3(e,n.position),0)/t.length,F=t=>{let e=t8(t.map(t=>t.position)),n=L(t,e);return{center:e,distance:n,velocity:t8(t.map(t=>t.velocity)),translation:t8(t.map(t=>t.translation))}},B=0;t.addEventListener("pointerdown",N);let D=["Meta","Control","Alt","Shift"];function O(t){if(!D.includes(t.key))return;let{metaKey:e,ctrlKey:n,altKey:r,shiftKey:o}=t;_({metaKey:e,ctrlKey:n,altKey:r,shiftKey:o})}let z=Date.now(),_=t=>{let e=tN(v[0].translation),n=c;m&&I()&&(n*=t3(v[0].position,v[1].position)/l,tJ(e,v[1].translation)),tJ(e,s);let r=Date.now();r-z<16||(z=r,x("interactionupdate",{position:T(),translation:e,scalar:m?n:void 0,isMultiTouching:I(),...t}))};function N(e){if(!(I()||dS(e))&&g(e,t)){if(b(),S(e),y&&(window.addEventListener("keydown",O),window.addEventListener("keyup",O)),E())document.documentElement.addEventListener("pointermove",W),document.documentElement.addEventListener("pointerup",j),document.documentElement.addEventListener("pointercancel",j),document.addEventListener("visibilitychange",V),d=!1,c=1,s=tF(),l=void 0,x("interactionstart",{origin:tN(A(e).origin)});else if(m)d=!0,l=t3(v[0].position,v[1].position),s.x+=v[0].translation.x,s.y+=v[0].translation.y,P(v[0]);else if(!1===f)return C(),G(),x("interactioncancel")}}function W(t){t.preventDefault(),R(t);let{metaKey:e=!1,ctrlKey:n=!1,altKey:r=!1,shiftKey:o=!1}=y?t:{};_({metaKey:e,ctrlKey:n,altKey:r,shiftKey:o})}function j(t){if(!A(t))return;let u=T(),g=k(t);if(m&&E()){let t=t3(v[0].position,g.position);c*=t/l,s.x+=v[0].translation.x+g.translation.x,s.y+=v[0].translation.y+g.translation.y,P(v[0])}let f=!1,$=!1;if(!d&&g){let t=performance.now(),n=t-g.timeStampInitial;f=64>t5(g.translation)&&n<300,$=!!(e&&f&&t-B<700&&128>t5(e,g.position)),f&&(e=tN(g.position),B=t)}if(v.length>0)return;G();let y=tN(g.translation),b=tN(g.velocityAverage),w=!1;x("interactionrelease",{isTap:f,isDoubleTap:$,position:u,translation:y,scalar:c,preventInertia:()=>w=!0});let S=t3(b);if(w||!h||S<.25)return U(y,{isTap:f,isDoubleTap:$});r=tN(u),o=tN(y),(n=c$(tN(y),{easing:cm,duration:S*p})).set({x:y.x+50*b.x,y:y.y+50*b.y}).then(()=>{a&&U(oH(n),{isTap:f,isDoubleTap:$})}),a=n.subscribe(H)}function H(t){t&&x("interactionupdate",{position:tB(r.x+(t.x-o.x),r.y+(t.y-o.y)),translation:t,scalar:m?c:void 0})}function V(t){if("visible"===document.visibilityState||!v.length)return;let e=F(v);b(),x("interactionend",{...e}),v.length=0,G()}function U(t,e){b(),x("interactionend",{...e,translation:t,scalar:m?c:void 0})}function G(){y&&window.removeEventListener("keydown",O),y&&window.removeEventListener("keyup",O),document.documentElement.removeEventListener("pointermove",W),document.documentElement.removeEventListener("pointerup",j),document.documentElement.removeEventListener("pointercancel",j),document.addEventListener("visibilitychange",V)}return{destroy(){b(),t.removeEventListener("pointerdown",N)}}},dC=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{direction:n,shiftMultiplier:r=10,bubbles:o=!1,preventDefault:a=!1,stopKeydownPropagation:l=!0}=e,s="horizontal"===n,c="vertical"===n,d=e=>{let{key:n}=e,d=e.shiftKey,u=/up|down/i.test(n),h=/left|right/i.test(n);if(!h&&!u||s&&u||c&&h)return;let p=d?r:1;l&&e.stopPropagation(),a&&e.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:o,detail:tB((/left/i.test(n)?-1:/right/i.test(n)?1:0)*p,(/up/i.test(n)?-1:/down/i.test(n)?1:0)*p)}))};return t.addEventListener("keydown",d),{destroy(){t.removeEventListener("keydown",d)}}};function dM(t,e){return e?e*Math.sign(t)*Math.log10(1+Math.abs(t)/e):t}let dT=(t,e,n)=>{if(!e||!n)return{...t};let r=t.x+dM(e.x-t.x,n),o=t.x+t.width+dM(e.x+e.width-(t.x+t.width),n),a=t.y+dM(e.y-t.y,n);return{x:r,y:a,width:o-r,height:t.y+t.height+dM(e.y+e.height-(t.y+t.height),n)-a}},dP=(t,e,n)=>e&&n?tB(t.x+dM(e.x-t.x,n),t.y+dM(e.y-t.y,n)):{...t};var dR=(t,e)=>{if(t){if(/em/.test(t))return 16*parseInt(t,10);if(/px/.test(t))return parseInt(t,10)}},dA=(t,e)=>{let n=t.detail||0,{deltaX:r,deltaY:o,wheelDelta:a,wheelDeltaX:l,wheelDeltaY:s}=t,{fixScrollDirection:c=!1}=e||{};return nt(l)&&Math.abs(l)>Math.abs(s)?n=-(l/120):nt(r)&&Math.abs(r)>Math.abs(o)?n=r/20:(a||s)&&(n=-((a||s)/120)),n||(n=o/20),(tt()||ib())&&(n*=2),c&&ij()&&(n*=-1),n};function dE(t){let e,n,r,o,a,l,s;let c=t[37].default,d=oU(c,t,t[36],null);return{c(){e=o9("div"),n=o9("div"),d&&d.c(),ao(n,"style",t[5]),ao(e,"class",r=cX(["PinturaScrollable",t[0]])),ao(e,"style",t[4]),ao(e,"data-direction",t[1]),ao(e,"data-state",t[6])},m(r,c){o8(r,e,c),o3(e,n),d&&d.m(n,null),t[39](e),a=!0,l||(s=[ar(n,"interactionstart",t[9]),ar(n,"interactionupdate",t[11]),ar(n,"interactionend",t[12]),ar(n,"interactionrelease",t[10]),oQ(dk.call(null,n,{inertia:!0})),ar(n,"measure",t[38]),oQ(cE.call(null,n)),ar(e,"wheel",t[14],{passive:!1}),ar(e,"scroll",t[16]),ar(e,"focusin",t[15]),ar(e,"nudge",t[17]),ar(e,"measure",t[13]),oQ(cE.call(null,e,{observePosition:!0})),oQ(o=dC.call(null,e,{direction:"x"===t[1]?"horizontal":"vertical",stopKeydownPropagation:!1}))],l=!0)},p(t,l){d&&d.p&&(!a||32&l[1])&&oZ(d,c,t,t[36],a?oX(c,t[36],l,null):oY(t[36]),null),(!a||32&l[0])&&ao(n,"style",t[5]),(!a||1&l[0]&&r!==(r=cX(["PinturaScrollable",t[0]])))&&ao(e,"class",r),(!a||16&l[0])&&ao(e,"style",t[4]),(!a||2&l[0])&&ao(e,"data-direction",t[1]),(!a||64&l[0])&&ao(e,"data-state",t[6]),o&&oN(o.update)&&2&l[0]&&o.update.call(null,{direction:"x"===t[1]?"horizontal":"vertical",stopKeydownPropagation:!1})},i(t){a||(a_(d,t),a=!0)},o(t){aN(d,t),a=!1},d(n){n&&o7(e),d&&d.d(n),t[39](null),l=!1,o_(s)}}}function dI(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,x,b,v;let{$$slots:w={},$$scope:S}=e,k=ax(),C="idle",M=cy(0);oV(t,M,t=>n(35,u=t));let{class:T}=e,{scrollBlockInteractionDist:P=5}=e,{scrollStep:R=10}=e,{scrollFocusMargin:A=64}=e,{scrollDirection:E="x"}=e,{scrollAutoCancel:I=!1}=e,{elasticity:L=0}=e,{onscroll:F=y}=e,{maskFeatherSize:B}=e,{maskFeatherStartOpacity:D}=e,{maskFeatherEndOpacity:O}=e,{scroll:z}=e,_=av("fixScrollDirection");oV(t,_,t=>n(46,h=t));let N="",W=!0,j=M.subscribe(t=>{let e=tF();e[E]=t,F(e)}),H=t=>Math.max(Math.min(0,t),m[r]-g[r]),V=t=>{let e=tq(tB(t.x-v.x,t.y-v.y),Math.abs);v=tN(t);let n=t5(e),r=e.x-e.y;return!(n>1&&r<-.5)},U=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{elastic:r=!1,animate:o=!1,preventScrollState:a=!1}=e;!(Math.abs(t-p)>P)||"idle"!==C||f||a||n(28,C="scrolling");let l=H(t),s=r&&L&&!f?l+dM(t-l,L):l,c=!0;o?c=!1:W||(c=!f),W=!1,M.set(s,{hard:c}).then(t=>{f&&(W=!0)})};return ay(()=>{j()}),t.$$set=t=>{"class"in t&&n(0,T=t.class),"scrollBlockInteractionDist"in t&&n(21,P=t.scrollBlockInteractionDist),"scrollStep"in t&&n(22,R=t.scrollStep),"scrollFocusMargin"in t&&n(23,A=t.scrollFocusMargin),"scrollDirection"in t&&n(1,E=t.scrollDirection),"scrollAutoCancel"in t&&n(24,I=t.scrollAutoCancel),"elasticity"in t&&n(25,L=t.elasticity),"onscroll"in t&&n(26,F=t.onscroll),"maskFeatherSize"in t&&n(20,B=t.maskFeatherSize),"maskFeatherStartOpacity"in t&&n(18,D=t.maskFeatherStartOpacity),"maskFeatherEndOpacity"in t&&n(19,O=t.maskFeatherEndOpacity),"scroll"in t&&n(27,z=t.scroll),"$$scope"in t&&n(36,S=t.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&n(32,r="x"===E?"width":"height"),2&t.$$.dirty[0]&&n(30,o=E.toUpperCase()),8&t.$$.dirty[0]&&n(34,a=$&&getComputedStyle($)),8&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(33,l=a&&dR(a.getPropertyValue("--scrollable-feather-size"))),537657348&t.$$.dirty[0]|22&t.$$.dirty[1]&&null!=u&&m&&null!=l&&g){let t=-1*u/l,e=-(m[r]-g[r]-u)/l;n(18,D=lm(1-t,0,1)),n(19,O=lm(1-e,0,1)),n(20,B=l),n(4,N="--scrollable-feather-start-opacity: ".concat(D,";--scrollable-feather-end-opacity: ").concat(O))}134217736&t.$$.dirty[0]&&$&&void 0!==z&&(nt(z)?U(z):U(z.scrollOffset,z)),536870916&t.$$.dirty[0]|2&t.$$.dirty[1]&&n(31,s=m&&g?g[r]>m[r]:void 0),268435456&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(6,c=cX([C,s?"overflows":void 0])),1073741824&t.$$.dirty[0]|17&t.$$.dirty[1]&&n(5,d=s?"transform: translate".concat(o,"(").concat(u,"px)"):void 0)},[T,E,g,$,N,d,c,M,_,()=>{s&&(b=!1,x=!0,v=tB(0,0),f=!1,n(28,C="idle"),p=oH(M))},t=>{let{detail:e}=t;s&&(f=!0,n(28,C="idle"))},t=>{let{detail:e}=t;if(s&&!b){if(x&&(x=!1,.1>t5(e.translation)))return;if(I&&"x"===E&&!V(e.translation)){b=!0;return}U(p+e.translation[E],{elastic:!0})}},t=>{let{detail:e}=t;if(!s||b)return;let n=H(p+e.translation[E]);W=!1,M.set(n).then(t=>{f&&(W=!0)})},t=>{let{detail:e}=t;n(29,m=e),k("measure",{x:e.x,y:e.y,width:e.width,height:e.height})},t=>{if(!s)return;t.preventDefault(),t.stopPropagation();let e=t.shiftKey,n=dA(t,{fixScrollDirection:h})*(e?-1:1);U(oH(M)+n*R,{animate:!0})},t=>{if(!s||!f)return;let e=t.target;t.target.classList.contains("implicit")&&(e=e.parentNode);let n=e["x"===E?"offsetLeft":"offsetTop"],o=n+e["x"===E?"offsetWidth":"offsetHeight"],a=oH(M),l=A+B;a+n<l?U(-n+l):a+o>m[r]-l&&U(m[r]-o-l,{animate:!0})},()=>{n(3,$["x"===E?"scrollLeft":"scrollTop"]=0,$)},t=>{let{detail:e}=t;if($.querySelector("[data-focus-visible]"))return;let n=-2*e[E];U(oH(M)+n*R,{animate:!0,preventScrollState:!0})},D,O,B,P,R,A,I,L,F,z,C,m,o,s,r,l,a,u,S,w,t=>n(2,g=t.detail),function(t){ak[t?"unshift":"push"](()=>{n(3,$=t)})}]}class dL extends a1{constructor(t){super(),aQ(this,t,dI,dE,oW,{class:0,scrollBlockInteractionDist:21,scrollStep:22,scrollFocusMargin:23,scrollDirection:1,scrollAutoCancel:24,elasticity:25,onscroll:26,maskFeatherSize:20,maskFeatherStartOpacity:18,maskFeatherEndOpacity:19,scroll:27},null,[-1,-1])}}function dF(t){let e,n,r,o,a;return{c(){ao(e=o9("span"),"class","PinturaStatusMessage")},m(n,l){o8(n,e,l),e.innerHTML=t[0],r=!0,o||(a=[ar(e,"measure",function(){oN(t[1])&&t[1].apply(this,arguments)}),oQ(cE.call(null,e))],o=!0)},p(n,o){let[a]=o;t=n,(!r||1&a)&&(e.innerHTML=t[0])},i(o){r||(aA(()=>{n||(n=aj(e,t[4],{duration:t[2]},!0)),n.run(1)}),r=!0)},o(o){n||(n=aj(e,t[4],{duration:t[2]},!1)),n.run(0),r=!1},d(t){t&&o7(e),t&&n&&n.end(),o=!1,o_(a)}}}function dB(t,e,n){let r,o;let{text:a}=e,{onmeasure:l=y}=e,s=av("isAnimated");return oV(t,s,t=>n(5,o=t)),t.$$set=t=>{"text"in t&&n(0,a=t.text),"onmeasure"in t&&n(1,l=t.onmeasure)},t.$$.update=()=>{32&t.$$.dirty&&n(2,r=o?500:0)},[a,l,r,s,function(t,e){let{duration:n}=e;return{duration:n,tick:e=>{t.style.opacity=e}}},o]}class dD extends a1{constructor(t){super(),aQ(this,t,dB,dF,oW,{text:0,onmeasure:1})}}function dO(t){let e,n,r,o,a,l,s,c,d;return{c(){e=o9("span"),n=at("svg"),r=at("g"),o=at("circle"),a=at("circle"),l=ai(),s=o9("span"),c=ae(t[3]),ao(o,"class","PinturaProgressIndicatorBar"),ao(o,"r","8.5"),ao(o,"cx","10"),ao(o,"cy","10"),ao(o,"stroke-linecap","round"),ao(o,"opacity",".25"),ao(a,"class","PinturaProgressIndicatorFill"),ao(a,"r","8.5"),ao(a,"stroke-dasharray",t[2]),ao(a,"cx","10"),ao(a,"cy","10"),ao(a,"transform","rotate(-90) translate(-20)"),ao(r,"fill","none"),ao(r,"stroke","currentColor"),ao(r,"stroke-width","2.5"),ao(r,"stroke-linecap","round"),ao(r,"opacity",t[1]),ao(n,"width","20"),ao(n,"height","20"),ao(n,"viewBox","0 0 20 20"),ao(n,"xmlns","http://www.w3.org/2000/svg"),ao(n,"aria-hidden","true"),ao(n,"focusable","false"),ao(s,"class","implicit"),ao(e,"class","PinturaProgressIndicator"),ao(e,"data-status",t[0]),ao(e,"style",d="opacity:".concat(t[4]))},m(t,d){o8(t,e,d),o3(e,n),o3(n,r),o3(r,o),o3(r,a),o3(e,l),o3(e,s),o3(s,c)},p(t,n){let[o]=n;4&o&&ao(a,"stroke-dasharray",t[2]),2&o&&ao(r,"opacity",t[1]),8&o&&as(c,t[3]),1&o&&ao(e,"data-status",t[0]),16&o&&d!==(d="opacity:".concat(t[4]))&&ao(e,"style",d)},i:oF,o:oF,d(t){t&&o7(e)}}}function dz(t,e,n){let r,o,a,l,s,c,d,u;let h=ax(),{progress:p}=e,{min:g=0}=e,{max:m=100}=e,{labelBusy:f="Busy"}=e,{opacity:$}=e,y=av("isAnimated");oV(t,y,t=>n(14,s=t));let x=cy($,{precision:.01});oV(t,x,t=>n(4,u=t));let b=cy(0,{precision:.01}),v=cy(0,{precision:.01});oV(t,v,t=>n(15,c=t));let w=a5([b],t=>lm(t,g,m));oV(t,w,t=>n(16,d=t));let S=w.subscribe(t=>{1===p&&Math.round(t)>=100&&h("complete")});return af(()=>{v.set(1,{hard:!s})}),ay(()=>{S()}),t.$$set=t=>{"progress"in t&&n(9,p=t.progress),"min"in t&&n(10,g=t.min),"max"in t&&n(11,m=t.max),"labelBusy"in t&&n(12,f=t.labelBusy),"opacity"in t&&n(13,$=t.opacity)},t.$$.update=()=>{24576&t.$$.dirty&&nt($)&&x.set($,{hard:!s}),16896&t.$$.dirty&&p&&p!==1/0&&b.set(100*p,{hard:!s}),70144&t.$$.dirty&&n(3,r=p===1/0?f:"".concat(Math.round(d),"%")),66048&t.$$.dirty&&n(2,o=p===1/0?"26.5 53":"".concat(d/100*53," 53")),32768&t.$$.dirty&&n(1,a=c),512&t.$$.dirty&&n(0,l=p===1/0?"busy":"loading")},[l,a,o,r,u,y,x,v,w,p,g,m,f,$,s,c,d]}class d_ extends a1{constructor(t){super(),aQ(this,t,dz,dO,oW,{progress:9,min:10,max:11,labelBusy:12,opacity:13})}}function dN(t){let e,n,r;let o=t[5].default,a=oU(o,t,t[4],null);return{c(){e=o9("span"),a&&a.c(),ao(e,"class",n="PinturaStatusAside ".concat(t[0])),ao(e,"style",t[1])},m(t,n){o8(t,e,n),a&&a.m(e,null),r=!0},p(t,l){let[s]=l;a&&a.p&&(!r||16&s)&&oZ(a,o,t,t[4],r?oX(o,t[4],s,null):oY(t[4]),null),(!r||1&s&&n!==(n="PinturaStatusAside ".concat(t[0])))&&ao(e,"class",n),(!r||2&s)&&ao(e,"style",t[1])},i(t){r||(a_(a,t),r=!0)},o(t){aN(a,t),r=!1},d(t){t&&o7(e),a&&a.d(t)}}}function dW(t,e,n){let r;let{$$slots:o={},$$scope:a}=e,{offset:l=0}=e,{opacity:s=0}=e,{class:c}=e;return t.$$set=t=>{"offset"in t&&n(2,l=t.offset),"opacity"in t&&n(3,s=t.opacity),"class"in t&&n(0,c=t.class),"$$scope"in t&&n(4,a=t.$$scope)},t.$$.update=()=>{12&t.$$.dirty&&n(1,r="transform:translateX(".concat(l,"px);opacity:").concat(s))},[c,r,l,s,a,o]}class dj extends a1{constructor(t){super(),aQ(this,t,dW,dN,oW,{offset:2,opacity:3,class:0})}}let{document:dH}=aH;function dV(t){let e,n,r,o;return{c(){e=ai(),ao(n=o9("button"),"class","PinturaImageButton"),ao(n,"type","button"),ao(n,"title",t[1]),n.disabled=t[2]},m(a,l){o8(a,e,l),o8(a,n,l),n.innerHTML=t[0],t[11](n),r||(o=[ar(dH.body,"load",t[5],!0),ar(dH.body,"error",t[6],!0),ar(n,"pointerdown",t[4])],r=!0)},p(t,e){let[r]=e;1&r&&(n.innerHTML=t[0]),2&r&&ao(n,"title",t[1]),4&r&&(n.disabled=t[2])},i:oF,o:oF,d(a){a&&o7(e),a&&o7(n),t[11](null),r=!1,o_(o)}}}function dU(t,e,n){let r,o,{html:a}=e,{title:l}=e,{onclick:s}=e,{disabled:c=!1}=e,{ongrab:d=y}=e,{ondrag:u=y}=e,{ondrop:h=y}=e,p=t=>256>t5(o,tB(t.pageX,t.pageY)),g=t=>{document.documentElement.removeEventListener("pointermove",m),document.documentElement.removeEventListener("pointerup",g);let e=tB(t.pageX,t.pageY);if(32>t5(o,e))return s(t);p(t)||h(t)},m=t=>{p(t)||u(t)},f=t=>r&&r.contains(t)&&"IMG"===t.nodeName;return t.$$set=t=>{"html"in t&&n(0,a=t.html),"title"in t&&n(1,l=t.title),"onclick"in t&&n(7,s=t.onclick),"disabled"in t&&n(2,c=t.disabled),"ongrab"in t&&n(8,d=t.ongrab),"ondrag"in t&&n(9,u=t.ondrag),"ondrop"in t&&n(10,h=t.ondrop)},t.$$.update=()=>{8&t.$$.dirty&&r&&r.querySelector("img")&&n(3,r.dataset.loader=!0,r)},[a,l,c,r,t=>{o=tB(t.pageX,t.pageY),d(t),document.documentElement.addEventListener("pointermove",m),document.documentElement.addEventListener("pointerup",g)},t=>{let{target:e}=t;f(e)&&n(3,r.dataset.load=!0,r)},t=>{let{target:e}=t;f(e)&&n(3,r.dataset.error=!0,r)},s,d,u,h,function(t){ak[t?"unshift":"push"](()=>{n(3,r=t)})}]}class dG extends a1{constructor(t){super(),aQ(this,t,dU,dV,oW,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function dX(t,e,n){let r=t.slice();return r[14]=e[n],r}function dZ(t,e){let n,r,o,a,l,s,c;function d(){return e[10](e[14])}function u(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[11](e[14],...n)}function h(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[12](e[14],...n)}function p(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[13](e[14],...n)}return r=new dG({props:{onclick:d,ongrab:u,ondrag:h,ondrop:p,disabled:e[1]||e[14].disabled,title:e[14].title,html:e[14].thumb}}),{key:t,first:null,c(){n=o9("li"),aq(r.$$.fragment),o=ai(),ao(n,"style",e[6]),this.first=n},m(t,d){o8(t,n,d),aK(r,n,null),o3(n,o),l=!0,s||(c=oQ(a=e[8].call(null,n,e[14])),s=!0)},p(t,o){e=t;let s={};5&o&&(s.onclick=d),9&o&&(s.ongrab=u),17&o&&(s.ondrag=h),33&o&&(s.ondrop=p),3&o&&(s.disabled=e[1]||e[14].disabled),1&o&&(s.title=e[14].title),1&o&&(s.html=e[14].thumb),r.$set(s),(!l||64&o)&&ao(n,"style",e[6]),a&&oN(a.update)&&1&o&&a.update.call(null,e[14])},i(t){l||(a_(r.$$.fragment,t),l=!0)},o(t){aN(r.$$.fragment,t),l=!1},d(t){t&&o7(n),aJ(r),s=!1,c()}}}function dY(t){let e,n;let r=[],o=new Map,a=t[0],l=t=>t[14].id;for(let e=0;e<a.length;e+=1){let n=dX(t,a,e),s=l(n);o.set(s,r[e]=dZ(s,n))}return{c(){e=o9("ul");for(let t=0;t<r.length;t+=1)r[t].c();ao(e,"class","PinturaImageButtonList")},m(t,o){o8(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,n){let[s]=n;127&s&&(a=t[0],aO(),r=aG(r,s,l,1,t,a,o,e,aU,dZ,null,dX),az())},i(t){if(!n){for(let t=0;t<a.length;t+=1)a_(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)aN(r[t]);n=!1},d(t){t&&o7(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function dq(t,e,n){let r,o;let{items:a}=e,{disabled:l}=e,{onclickitem:s}=e,{ongrabitem:c}=e,{ondragitem:d}=e,{ondropitem:u}=e,h=cy(0,{stiffness:.25,damping:.9});return oV(t,h,t=>n(9,o=t)),af(()=>h.set(1)),t.$$set=t=>{"items"in t&&n(0,a=t.items),"disabled"in t&&n(1,l=t.disabled),"onclickitem"in t&&n(2,s=t.onclickitem),"ongrabitem"in t&&n(3,c=t.ongrabitem),"ondragitem"in t&&n(4,d=t.ondragitem),"ondropitem"in t&&n(5,u=t.ondropitem)},t.$$.update=()=>{512&t.$$.dirty&&n(6,r="opacity:".concat(o))},[a,l,s,c,d,u,r,h,(t,e)=>e.mount&&e.mount(t.firstChild,e),o,t=>s(t.id),(t,e)=>c&&c(t.id,e),(t,e)=>d&&d(t.id,e),(t,e)=>u&&u(t.id,e)]}class dK extends a1{constructor(t){super(),aQ(this,t,dq,dY,oW,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var dJ=()=>w()&&window.devicePixelRatio||1;let dQ=null;var d1=t=>(null===dQ&&(dQ=1===dJ()?Math.round:t=>t),dQ(t)),d0=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){if(e.preventScroll&&ib()){let e=document.body.scrollTop;t.focus(),document.body.scrollTop=e;return}t.focus(e)}},d2=t=>/textarea/i.test(t.nodeName),d4=t=>/date|email|number|search|text|url/.test(t.type),d5=t=>d2(t)||d4(t)||t.isContentEditable;let d3=t=>({}),d6=t=>({}),d8=t=>({}),d7=t=>({});function d9(t){let e,n;let r=[t[7]],o={$$slots:{default:[ue]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return e=new dv({props:o}),t[46](e),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=128&n[0]?aX(r,[aZ(t[7])]):{};524288&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(n){t[46](null),aJ(e,n)}}}function ut(t){let e,n;let r=[t[7]],o={};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return e=new dv({props:o}),t[45](e),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=128&n[0]?aX(r,[aZ(t[7])]):{};e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(n){t[45](null),aJ(e,n)}}}function ue(t){let e;let n=t[44].label,r=oU(n,t,t[50],d7);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,o){r&&r.p&&(!e||524288&o[1])&&oZ(r,n,t,t[50],e?oX(n,t[50],o,d8):oY(t[50]),d7)},i(t){e||(a_(r,t),e=!0)},o(t){aN(r,t),e=!1},d(t){r&&r.d(t)}}}function ui(t){let e,n,r,o,a,l,s;let c=t[44].details,d=oU(c,t,t[50],d6);return{c(){e=o9("div"),d&&d.c(),n=ai(),ao(r=o9("span"),"class","PinturaPanelTip"),ao(r,"style",t[10]),ao(e,"class",o=cX(["PinturaPanel","pintura-editor-panel",t[2]])),ao(e,"tabindex","-1"),ao(e,"style",t[11])},m(o,c){o8(o,e,c),d&&d.m(e,null),o3(e,n),o3(e,r),t[47](e),a=!0,l||(s=[ar(e,"close",t[48]),ar(e,"keydown",t[18]),ar(e,"measure",t[49]),oQ(cE.call(null,e))],l=!0)},p(t,n){d&&d.p&&(!a||524288&n[1])&&oZ(d,c,t,t[50],a?oX(c,t[50],n,d3):oY(t[50]),d6),(!a||1024&n[0])&&ao(r,"style",t[10]),(!a||4&n[0]&&o!==(o=cX(["PinturaPanel","pintura-editor-panel",t[2]])))&&ao(e,"class",o),(!a||2048&n[0])&&ao(e,"style",t[11])},i(t){a||(a_(d,t),a=!0)},o(t){aN(d,t),a=!1},d(n){n&&o7(e),d&&d.d(n),t[47](null),l=!1,o_(s)}}}function un(t){let e,n,r,o,a,l,s,c,d;let u=[ut,d9],h=[];r=h[n=t[1]?0:1]=u[n](t);let p=t[6]&&ui(t);return{c(){e=ai(),r.c(),o=ai(),p&&p.c(),a=ai(),l=an()},m(r,u){o8(r,e,u),h[n].m(r,u),o8(r,o,u),p&&p.m(r,u),o8(r,a,u),o8(r,l,u),s=!0,c||(d=[ar(document.body,"pointerdown",function(){oN(t[9])&&t[9].apply(this,arguments)}),ar(document.body,"pointerup",function(){oN(t[8])&&t[8].apply(this,arguments)})],c=!0)},p(e,l){let s=n;(n=(t=e)[1]?0:1)===s?h[n].p(t,l):(aO(),aN(h[s],1,1,()=>{h[s]=null}),az(),(r=h[n])?r.p(t,l):(r=h[n]=u[n](t)).c(),a_(r,1),r.m(o.parentNode,o)),t[6]?p?(p.p(t,l),64&l[0]&&a_(p,1)):((p=ui(t)).c(),a_(p,1),p.m(a.parentNode,a)):p&&(aO(),aN(p,1,1,()=>{p=null}),az())},i(t){s||(a_(r),a_(p),a_(!1),s=!0)},o(t){aN(r),aN(p),aN(!1),s=!1},d(t){t&&o7(e),h[n].d(t),t&&o7(o),p&&p.d(t),t&&o7(a),t&&o7(l),c=!1,o_(d)}}}function ur(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,x,b,v,w,S,k,C,M,T,P;let{$$slots:R={},$$scope:A}=e,{buttonClass:E}=e,{buttonLabel:I}=e,{buttonLabelClass:L}=e,{buttonHideLabel:F}=e,{buttonIcon:B}=e,{buttonTitle:D}=e,{panelClass:O}=e,{isActive:z=!1}=e,{onshow:_=t=>{let{panel:e}=t;return d0(e,{preventScroll:!0})}}=e,{onhide:N=y}=e,W=av("isAnimated");oV(t,W,t=>n(43,S=t));let j=av("rootPortal");oV(t,j,t=>n(38,$=t));let H=av("rootRect");oV(t,H,t=>n(41,v=t));let V=()=>n(26,M=r&&r.getBoundingClientRect()),U=tF(),G=cy(0);oV(t,G,t=>n(40,b=t));let X=tF(),Z=a4({x:0,y:0});oV(t,Z,t=>n(39,x=t));let Y=cy(-5,{stiffness:.1,damping:.35,precision:.001});oV(t,Y,t=>n(42,w=t));let q=!0,K=t=>dp(t,$)||C.isEventTarget(t),J=!1,Q=t=>{d5(t.target)||(z||V(),n(31,P=t),n(0,z=!z))},tt=t=>{/down/i.test(t.key)&&(n(0,z=!0),n(31,P=t))};return ay(()=>{if(!$||!T)return;let t=T;(aR(),aT).then(()=>{t.parentNode&&t.remove()})}),t.$$set=t=>{"buttonClass"in t&&n(19,E=t.buttonClass),"buttonLabel"in t&&n(1,I=t.buttonLabel),"buttonLabelClass"in t&&n(20,L=t.buttonLabelClass),"buttonHideLabel"in t&&n(21,F=t.buttonHideLabel),"buttonIcon"in t&&n(22,B=t.buttonIcon),"buttonTitle"in t&&n(23,D=t.buttonTitle),"panelClass"in t&&n(2,O=t.panelClass),"isActive"in t&&n(0,z=t.isActive),"onshow"in t&&n(24,_=t.onshow),"onhide"in t&&n(25,N=t.onhide),"$$scope"in t&&n(50,A=t.$$scope)},t.$$.update=()=>{if(16&t.$$.dirty[0]&&(r=C&&C.getElement()),1073741825&t.$$.dirty[0]&&n(8,m=z?t=>{J&&(n(30,J=!1),K(t)||n(0,z=!1))}:void 0),1&t.$$.dirty[0]|4096&t.$$.dirty[1]&&G.set(z?1:0,{hard:!1===S}),1&t.$$.dirty[0]|4096&t.$$.dirty[1]&&Y.set(z?0:-5,{hard:!1===S}),2048&t.$$.dirty[1]&&n(34,o=1- -(w/5)),1&t.$$.dirty[0]|1024&t.$$.dirty[1]&&v&&z&&V(),67108873&t.$$.dirty[0]|1024&t.$$.dirty[1]&&v&&k&&M&&z){n(29,q=!0);let t=M.x-v.x+.5*M.width-.5*k.width,e=M.y-v.y+M.height,r=v.width-12,o=v.height-12,a=t,l=e,s=a+k.width,c=l+k.height;(a<12&&(n(28,X.x=a-12,X),t=12),s>r&&(n(28,X.x=s-r,X),t=r-k.width),c>o)?(n(27,U.y=-1,U),12<e-k.height-M.height?(n(28,X.y=0,X),e-=k.height+M.height):(n(28,X.y=e-(c-o),X),e-=c-o-12,n(29,q=!1))):n(27,U.y=1,U),oJ(Z,x=tq(tB(t,e),d1),x)}512&t.$$.dirty[1]&&n(6,a=b>0),512&t.$$.dirty[1]&&n(37,l=b<1),134217728&t.$$.dirty[0]|2304&t.$$.dirty[1]&&n(36,s="translateX(".concat(Math.round(x.x)+12*U.x,"px) translateY(").concat(Math.round(x.y)+12*U.y+U.y*w,"px)")),1024&t.$$.dirty[1]&&n(35,c="--panel-max-height:".concat(v.height-24,"px")),624&t.$$.dirty[1]&&n(11,d=l?"opacity: ".concat(b,"; pointer-events: ").concat(b<1?"none":"all","; transform: ").concat(s,";").concat(c):"transform: ".concat(s,";").concat(c)),8&t.$$.dirty[1]&&n(32,u=.5+.5*o),8&t.$$.dirty[1]&&n(33,h=o),939524104&t.$$.dirty[0]|262&t.$$.dirty[1]&&n(10,p=x&&k&&"opacity:".concat(q?h:0,";transform:scaleX(").concat(u,")rotate(45deg);top:").concat(U.y<0?X.y+k.height:0,"px;left:").concat(X.x+.5*k.width,"px")),1&t.$$.dirty[0]&&n(9,g=z?t=>{K(t)||n(30,J=!0)}:void 0),96&t.$$.dirty[0]|128&t.$$.dirty[1]&&a&&$&&T&&T.parentNode!==$&&$.append(T),1&t.$$.dirty[0]&&!z&&n(31,P=void 0),16777313&t.$$.dirty[0]|1&t.$$.dirty[1]&&z&&a&&T&&_({e:P,panel:T}),33554497&t.$$.dirty[0]&&a&&!z&&N(),16252930&t.$$.dirty[0]&&n(7,f={label:I,icon:B,class:cX(["PinturaPanelButton",E]),onkeydown:tt,onclick:Q,hideLabel:F,labelClass:L,title:D})},[z,I,O,k,C,T,a,f,m,g,p,d,W,j,H,G,Z,Y,t=>{/esc/i.test(t.key)&&(n(0,z=!1),r.focus())},E,L,F,B,D,_,N,M,U,X,q,J,P,u,h,o,c,s,l,$,x,b,v,w,S,R,function(t){ak[t?"unshift":"push"](()=>{n(4,C=t)})},function(t){ak[t?"unshift":"push"](()=>{n(4,C=t)})},function(t){ak[t?"unshift":"push"](()=>{n(5,T=t)})},t=>{t.stopPropagation(),n(0,z=!1)},t=>n(3,k=ei(t.detail)),A]}class uo extends a1{constructor(t){super(),aQ(this,t,ur,un,oW,{buttonClass:19,buttonLabel:1,buttonLabelClass:20,buttonHideLabel:21,buttonIcon:22,buttonTitle:23,panelClass:2,isActive:0,onshow:24,onhide:25},null,[-1,-1])}}var ua={Up:38,Down:40,Left:37,Right:39};function ul(t){let e,n,r,o,a,l,s,c;let d=t[15].default,u=oU(d,t,t[14],null);return{c(){e=o9("li"),n=o9("input"),r=ai(),o=o9("label"),u&&u.c(),ao(n,"type","radio"),ao(n,"class","implicit"),ao(n,"id",t[7]),ao(n,"name",t[0]),n.value=t[3],n.disabled=t[6],n.hidden=t[5],n.checked=t[4],ao(o,"for",t[7]),ao(o,"title",t[2]),ao(e,"class",a=cX(["PinturaRadioGroupOption",t[1]])),ao(e,"data-hidden",t[5]),ao(e,"data-disabled",t[6]),ao(e,"data-selected",t[4])},m(a,d){if(o8(a,e,d),o3(e,n),o3(e,r),o3(e,o),u&&u.m(o,null),l=!0,!s){var h;c=[ar(n,"change",(h=t[16],function(t){return t.stopPropagation(),h.call(this,t)})),ar(n,"keydown",t[9]),ar(n,"click",t[10])],s=!0}},p(t,r){let[s]=r;(!l||128&s)&&ao(n,"id",t[7]),(!l||1&s)&&ao(n,"name",t[0]),(!l||8&s)&&(n.value=t[3]),(!l||64&s)&&(n.disabled=t[6]),(!l||32&s)&&(n.hidden=t[5]),(!l||16&s)&&(n.checked=t[4]),u&&u.p&&(!l||16384&s)&&oZ(u,d,t,t[14],l?oX(d,t[14],s,null):oY(t[14]),null),(!l||128&s)&&ao(o,"for",t[7]),(!l||4&s)&&ao(o,"title",t[2]),(!l||2&s&&a!==(a=cX(["PinturaRadioGroupOption",t[1]])))&&ao(e,"class",a),(!l||32&s)&&ao(e,"data-hidden",t[5]),(!l||64&s)&&ao(e,"data-disabled",t[6]),(!l||16&s)&&ao(e,"data-selected",t[4])},i(t){l||(a_(u,t),l=!0)},o(t){aN(u,t),l=!1},d(t){t&&o7(e),u&&u.d(t),s=!1,o_(c)}}}function us(t,e,n){let r,o;let{$$slots:a={},$$scope:l}=e,{name:s}=e,{class:c}=e,{label:d}=e,{id:u}=e,{value:h}=e,{checked:p}=e,{onkeydown:g}=e,{onclick:m}=e,{hidden:f=!1}=e,{disabled:$=!1}=e,y=Object.values(ua),x=av("keysPressed");return oV(t,x,t=>n(17,o=t)),t.$$set=t=>{"name"in t&&n(0,s=t.name),"class"in t&&n(1,c=t.class),"label"in t&&n(2,d=t.label),"id"in t&&n(11,u=t.id),"value"in t&&n(3,h=t.value),"checked"in t&&n(4,p=t.checked),"onkeydown"in t&&n(12,g=t.onkeydown),"onclick"in t&&n(13,m=t.onclick),"hidden"in t&&n(5,f=t.hidden),"disabled"in t&&n(6,$=t.disabled),"$$scope"in t&&n(14,l=t.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&n(7,r="".concat(s,"-").concat(u))},[s,c,d,h,p,f,$,r,x,t=>{g(t)},t=>{o.some(t=>y.includes(t))||m(t)},u,g,m,l,a,function(e){aw.call(this,t,e)}]}class uc extends a1{constructor(t){super(),aQ(this,t,us,ul,oW,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var ud=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce((t,e)=>(nn(e)?nn(e[1]):!!e.options)?t.concat(nn(e)?e[1]:e.options):(t.push(e),t),[])};let uu=(t,e,n)=>{let r;return nn(t)?r={id:e,value:t[0],label:t[1],...t[2]||{}}:(r=t).id=null!=r.id?r.id:e,n?n(r):r};var uh=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=0;return t.map(t=>(n++,nn(t))?nn(t[1])?{id:n,label:t[0],options:t[1].map(t=>uu(t,++n,e))}:uu(t,n,e):t.options?{id:t.id||n,label:t.label,options:t.options.map(t=>uu(t,++n,e))}:uu(t,n,e))},up=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t&&t(...n)},ug=(t,e,n)=>W(t)?t(e,n):t;let um=(t,e)=>t.map(t=>{let[n,r,o]=t;if(nn(r))return[ug(n,e),um(r,e)];{let t=[n,ug(r,e)];if(o){let n={...o};o.icon&&(n.icon=ug(o.icon,e)),t.push(n)}return t}});var uf=(t,e)=>um(t,e),u$=t=>/enter| /i.test(t),uy=(t,e)=>Array.isArray(t)&&Array.isArray(e)?lw(t,e):t===e;function ux(t,e,n){let r=t.slice();return r[27]=e[n],r}let ub=t=>({option:1024&t[0]}),uv=t=>({option:t[27]});function uw(t,e,n){let r=t.slice();return r[27]=e[n],r}let uS=t=>({option:1024&t[0]}),uk=t=>({option:t[27]}),uC=t=>({option:1024&t[0]}),uM=t=>({option:t[27]});function uT(t){let e,n,r,o,a;let l=[],s=new Map,c=t[1]&&uP(t),d=t[10],u=t=>t[27].id;for(let e=0;e<d.length;e+=1){let n=ux(t,d,e),r=u(n);s.set(r,l[e]=uN(r,n))}return{c(){e=o9("fieldset"),c&&c.c(),n=ai(),r=o9("ul");for(let t=0;t<l.length;t+=1)l[t].c();ao(r,"class","PinturaRadioGroupOptions"),ao(e,"class",o=cX(["PinturaRadioGroup",t[3]])),ao(e,"data-layout",t[5]),ao(e,"title",t[7])},m(t,o){o8(t,e,o),c&&c.m(e,null),o3(e,n),o3(e,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);a=!0},p(t,h){t[1]?c?c.p(t,h):((c=uP(t)).c(),c.m(e,n)):c&&(c.d(1),c=null),8419153&h[0]&&(d=t[10],aO(),l=aG(l,h,u,1,t,d,s,r,aU,uN,null,ux),az()),(!a||8&h[0]&&o!==(o=cX(["PinturaRadioGroup",t[3]])))&&ao(e,"class",o),(!a||32&h[0])&&ao(e,"data-layout",t[5]),(!a||128&h[0])&&ao(e,"title",t[7])},i(t){if(!a){for(let t=0;t<d.length;t+=1)a_(l[t]);a=!0}},o(t){for(let t=0;t<l.length;t+=1)aN(l[t]);a=!1},d(t){t&&o7(e),c&&c.d();for(let t=0;t<l.length;t+=1)l[t].d()}}}function uP(t){let e,n,r;return{c(){e=o9("legend"),n=ae(t[1]),ao(e,"class",r=t[2]&&"implicit")},m(t,r){o8(t,e,r),o3(e,n)},p(t,o){2&o[0]&&as(n,t[1]),4&o[0]&&r!==(r=t[2]&&"implicit")&&ao(e,"class",r)},d(t){t&&o7(e)}}}function uR(t){let e,n;return e=new uc({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[uF]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};16&n[0]&&(r.name=t[4]),1024&n[0]&&(r.label=t[27].label),1024&n[0]&&(r.id=t[27].id),1024&n[0]&&(r.value=t[27].value),1024&n[0]&&(r.disabled=t[27].disabled),1024&n[0]&&(r.hidden=t[27].hidden),256&n[0]&&(r.class=t[8]),1025&n[0]&&(r.checked=t[12](t[27])===t[0]),1024&n[0]&&(r.onkeydown=t[13](t[27])),1024&n[0]&&(r.onclick=t[14](t[27])),8389696&n[0]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function uA(t){let e,n,r,o,a,l,s,c,d;let u=[],h=new Map,p=t[22].group,g=oU(p,t,t[23],uM),m=g||(d=t[27].label+"",{c(){s=o9("span"),c=ae(d),ao(s,"class","PinturaRadioGroupOptionGroupLabel")},m(t,e){o8(t,s,e),o3(s,c)},p(t,e){1024&e[0]&&d!==(d=t[27].label+"")&&as(c,d)},d(t){t&&o7(s)}}),f=t[27].options,$=t=>t[27].id;for(let e=0;e<f.length;e+=1){let n=uw(t,f,e),r=$(n);h.set(r,u[e]=u_(r,n))}return{c(){e=o9("li"),m&&m.c(),n=ai(),r=o9("ul");for(let t=0;t<u.length;t+=1)u[t].c();o=ai(),ao(r,"class","PinturaRadioGroupOptions"),ao(e,"class",a=cX(["PinturaRadioGroupOptionGroup",t[9]]))},m(t,a){o8(t,e,a),m&&m.m(e,null),o3(e,n),o3(e,r);for(let t=0;t<u.length;t+=1)u[t].m(r,null);o3(e,o),l=!0},p(t,n){g?g.p&&(!l||8389632&n[0])&&oZ(g,p,t,t[23],l?oX(p,t[23],n,uC):oY(t[23]),uM):m&&m.p&&(!l||1024&n[0])&&m.p(t,l?n:[-1,-1]),8418641&n[0]&&(f=t[27].options,aO(),u=aG(u,n,$,1,t,f,h,r,aU,u_,null,uw),az()),(!l||512&n[0]&&a!==(a=cX(["PinturaRadioGroupOptionGroup",t[9]])))&&ao(e,"class",a)},i(t){if(!l){a_(m,t);for(let t=0;t<f.length;t+=1)a_(u[t]);l=!0}},o(t){aN(m,t);for(let t=0;t<u.length;t+=1)aN(u[t]);l=!1},d(t){t&&o7(e),m&&m.d(t);for(let t=0;t<u.length;t+=1)u[t].d()}}}function uE(t){let e,n;return e=new dh({props:{$$slots:{default:[uI]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};8389632&n[0]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function uI(t){let e;let n=t[27].icon+"";return{c(){e=at("g")},m(t,r){o8(t,e,r),e.innerHTML=n},p(t,r){1024&r[0]&&n!==(n=t[27].icon+"")&&(e.innerHTML=n)},d(t){t&&o7(e)}}}function uL(t){let e,n;let r=t[27].label+"";return{c(){e=o9("span"),n=ae(r),ao(e,"class",t[6])},m(t,r){o8(t,e,r),o3(e,n)},p(t,o){1024&o[0]&&r!==(r=t[27].label+"")&&as(n,r),64&o[0]&&ao(e,"class",t[6])},d(t){t&&o7(e)}}}function uF(t){let e,n,r,o,a,l;let s=t[22].option,c=oU(s,t,t[23],uv),d=c||(a=t[27].icon&&uE(t),l=!t[27].hideLabel&&uL(t),{c(){a&&a.c(),n=ai(),l&&l.c(),r=ai()},m(t,e){a&&a.m(t,e),o8(t,n,e),l&&l.m(t,e),o8(t,r,e),o=!0},p(t,e){t[27].icon?a?(a.p(t,e),1024&e[0]&&a_(a,1)):((a=uE(t)).c(),a_(a,1),a.m(n.parentNode,n)):a&&(aO(),aN(a,1,1,()=>{a=null}),az()),t[27].hideLabel?l&&(l.d(1),l=null):l?l.p(t,e):((l=uL(t)).c(),l.m(r.parentNode,r))},i(t){o||(a_(a),o=!0)},o(t){aN(a),o=!1},d(t){a&&a.d(t),t&&o7(n),l&&l.d(t),t&&o7(r)}});return{c(){d&&d.c()},m(t,n){d&&d.m(t,n),e=!0},p(t,n){c?c.p&&(!e||8389632&n[0])&&oZ(c,s,t,t[23],e?oX(s,t[23],n,ub):oY(t[23]),uv):d&&d.p&&(!e||1088&n[0])&&d.p(t,e?n:[-1,-1])},i(t){e||(a_(d,t),e=!0)},o(t){aN(d,t),e=!1},d(t){d&&d.d(t)}}}function uB(t){let e,n;return e=new dh({props:{$$slots:{default:[uD]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};8389632&n[0]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function uD(t){let e;let n=t[27].icon+"";return{c(){e=at("g")},m(t,r){o8(t,e,r),e.innerHTML=n},p(t,r){1024&r[0]&&n!==(n=t[27].icon+"")&&(e.innerHTML=n)},d(t){t&&o7(e)}}}function uO(t){let e,n;let r=t[27].label+"";return{c(){e=o9("span"),n=ae(r),ao(e,"class",t[6])},m(t,r){o8(t,e,r),o3(e,n)},p(t,o){1024&o[0]&&r!==(r=t[27].label+"")&&as(n,r),64&o[0]&&ao(e,"class",t[6])},d(t){t&&o7(e)}}}function uz(t){let e,n,r,o,a,l;let s=t[22].option,c=oU(s,t,t[23],uk),d=c||(a=t[27].icon&&uB(t),l=!t[27].hideLabel&&uO(t),{c(){a&&a.c(),n=ai(),l&&l.c(),r=ai()},m(t,e){a&&a.m(t,e),o8(t,n,e),l&&l.m(t,e),o8(t,r,e),o=!0},p(t,e){t[27].icon?a?(a.p(t,e),1024&e[0]&&a_(a,1)):((a=uB(t)).c(),a_(a,1),a.m(n.parentNode,n)):a&&(aO(),aN(a,1,1,()=>{a=null}),az()),t[27].hideLabel?l&&(l.d(1),l=null):l?l.p(t,e):((l=uO(t)).c(),l.m(r.parentNode,r))},i(t){o||(a_(a),o=!0)},o(t){aN(a),o=!1},d(t){a&&a.d(t),t&&o7(n),l&&l.d(t),t&&o7(r)}});return{c(){d&&d.c()},m(t,n){d&&d.m(t,n),e=!0},p(t,n){c?c.p&&(!e||8389632&n[0])&&oZ(c,s,t,t[23],e?oX(s,t[23],n,uS):oY(t[23]),uk):d&&d.p&&(!e||1088&n[0])&&d.p(t,e?n:[-1,-1])},i(t){e||(a_(d,t),e=!0)},o(t){aN(d,t),e=!1},d(t){d&&d.d(t)}}}function u_(t,e){let n,r,o;return r=new uc({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[uz]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=an(),aq(r.$$.fragment),this.first=n},m(t,e){o8(t,n,e),aK(r,t,e),o=!0},p(t,n){e=t;let o={};16&n[0]&&(o.name=e[4]),1024&n[0]&&(o.label=e[27].label),1024&n[0]&&(o.id=e[27].id),1024&n[0]&&(o.value=e[27].value),1024&n[0]&&(o.disabled=e[27].disabled),1024&n[0]&&(o.hidden=e[27].hidden),256&n[0]&&(o.class=e[8]),1025&n[0]&&(o.checked=e[12](e[27])===e[0]),1024&n[0]&&(o.onkeydown=e[13](e[27])),1024&n[0]&&(o.onclick=e[14](e[27])),8389696&n[0]&&(o.$$scope={dirty:n,ctx:e}),r.$set(o)},i(t){o||(a_(r.$$.fragment,t),o=!0)},o(t){aN(r.$$.fragment,t),o=!1},d(t){t&&o7(n),aJ(r,t)}}}function uN(t,e){let n,r,o,a,l;let s=[uA,uR],c=[];function d(t,e){return t[27].options?0:1}return o=c[r=d(e)]=s[r](e),{key:t,first:null,c(){n=an(),o.c(),a=an(),this.first=n},m(t,e){o8(t,n,e),c[r].m(t,e),o8(t,a,e),l=!0},p(t,n){let l=r;(r=d(e=t))===l?c[r].p(e,n):(aO(),aN(c[l],1,1,()=>{c[l]=null}),az(),(o=c[r])?o.p(e,n):(o=c[r]=s[r](e)).c(),a_(o,1),o.m(a.parentNode,a))},i(t){l||(a_(o),l=!0)},o(t){aN(o),l=!1},d(t){t&&o7(n),c[r].d(t),t&&o7(a)}}}function uW(t){let e,n,r;let o=t[11].length&&uT(t);return{c(){o&&o.c(),e=ai(),n=an()},m(t,a){o&&o.m(t,a),o8(t,e,a),o8(t,n,a),r=!0},p(t,n){t[11].length?o?(o.p(t,n),2048&n[0]&&a_(o,1)):((o=uT(t)).c(),a_(o,1),o.m(e.parentNode,e)):o&&(aO(),aN(o,1,1,()=>{o=null}),az())},i(t){r||(a_(o),a_(!1),r=!0)},o(t){aN(o),aN(!1),r=!1},d(t){o&&o.d(t),t&&o7(e),t&&o7(n)}}}function uj(t,e,n){let r,o,a;let{$$slots:l={},$$scope:s}=e,c=ax(),{label:d}=e,{hideLabel:u=!0}=e,{class:h}=e,{name:p="radio-group-".concat(Z())}=e,{selectedIndex:g=-1}=e,{options:m=[]}=e,{onchange:f}=e,{layout:$}=e,{optionMapper:y}=e,{optionFilter:x}=e,{value:b}=e,{optionLabelClass:v}=e,{title:w}=e,{locale:S}=e,{optionClass:k}=e,{optionGroupClass:C}=e,M=t=>t.findIndex(t=>void 0===t[0]),T=t=>a.findIndex(e=>e.id===t.id),P=(t,e)=>{n(0,g=T(t));let r={index:g,...t};up(f,r,e),c("change",r)};return t.$$set=t=>{"label"in t&&n(1,d=t.label),"hideLabel"in t&&n(2,u=t.hideLabel),"class"in t&&n(3,h=t.class),"name"in t&&n(4,p=t.name),"selectedIndex"in t&&n(0,g=t.selectedIndex),"options"in t&&n(15,m=t.options),"onchange"in t&&n(16,f=t.onchange),"layout"in t&&n(5,$=t.layout),"optionMapper"in t&&n(17,y=t.optionMapper),"optionFilter"in t&&n(18,x=t.optionFilter),"value"in t&&n(19,b=t.value),"optionLabelClass"in t&&n(6,v=t.optionLabelClass),"title"in t&&n(7,w=t.title),"locale"in t&&n(20,S=t.locale),"optionClass"in t&&n(8,k=t.optionClass),"optionGroupClass"in t&&n(9,C=t.optionGroupClass),"$$scope"in t&&n(23,s=t.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&n(11,r=uf(x?m.filter(x):m,S)),133120&t.$$.dirty[0]&&n(10,o=uh(r,y)),1024&t.$$.dirty[0]&&n(21,a=ud(o)),2654209&t.$$.dirty[0]&&g<0&&(n(0,g=a.findIndex(t=>uy(t.value,b))),g<0&&n(0,g=M(m)))},[g,d,u,h,p,$,v,w,k,C,o,r,T,t=>e=>{u$(e.key)&&P(t,e)},t=>e=>{P(t,e)},m,f,y,x,b,S,a,l,s]}class uH extends a1{constructor(t){super(),aQ(this,t,uj,uW,oW,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function uV(t){let e,n,r,o,a,l,s,c,d,u;return{c(){e=o9("div"),n=o9("button"),r=ae("▲"),a=ai(),l=o9("button"),s=ae("▼"),ao(n,"type","button"),ao(n,"tabindex","-1"),ao(n,"aria-label",o="increase ".concat(t[7])),ao(l,"type","button"),ao(l,"tabindex","-1"),ao(l,"aria-label",c="decrease ".concat(t[7])),ao(e,"class","PinturaInputSpinners")},m(o,c){o8(o,e,c),o3(e,n),o3(n,r),o3(e,a),o3(e,l),o3(l,s),d||(u=[ar(n,"click",t[17]),ar(l,"click",t[18])],d=!0)},p(t,e){128&e&&o!==(o="increase ".concat(t[7]))&&ao(n,"aria-label",o),128&e&&c!==(c="decrease ".concat(t[7]))&&ao(l,"aria-label",c)},d(t){t&&o7(e),d=!1,o_(u)}}}function uU(t){let e,n,r,o,a,l;let s="number"===t[1]&&t[9]&&uV(t);return{c(){e=o9("div"),n=o9("input"),o=ai(),s&&s.c(),ao(n,"class","PinturaInputField"),ao(n,"title",t[7]),ao(n,"type",t[1]),ao(n,"min",t[4]),ao(n,"max",t[5]),ao(n,"step",t[6]),ao(n,"inputmode",t[3]),n.value=r=t[14]?t[13]:t[0],ao(n,"style",t[11]),ao(n,"placeholder",t[8]),ao(n,"maxlength",t[12]),n.disabled=t[2],ao(n,"spellcheck","false"),ao(n,"autocorrect","off"),ao(n,"autocapitalize","off"),ao(e,"class","PinturaInput")},m(r,c){o8(r,e,c),o3(e,n),t[27](n),o3(e,o),s&&s.m(e,null),a||(l=[ar(n,"input",t[16]),ar(n,"blur",function(){oN(t[14]&&t[15])&&(t[14]&&t[15]).apply(this,arguments)}),ar(n,"keydown",t[19]),ar(n,"keyup",t[20])],a=!0)},p(o,a){let[l]=a;t=o,128&l&&ao(n,"title",t[7]),2&l&&ao(n,"type",t[1]),16&l&&ao(n,"min",t[4]),32&l&&ao(n,"max",t[5]),64&l&&ao(n,"step",t[6]),8&l&&ao(n,"inputmode",t[3]),24577&l&&r!==(r=t[14]?t[13]:t[0])&&n.value!==r&&(n.value=r),2048&l&&ao(n,"style",t[11]),256&l&&ao(n,"placeholder",t[8]),4096&l&&ao(n,"maxlength",t[12]),4&l&&(n.disabled=t[2]),"number"===t[1]&&t[9]?s?s.p(t,l):((s=uV(t)).c(),s.m(e,null)):s&&(s.d(1),s=null)},i:oF,o:oF,d(n){n&&o7(e),t[27](null),s&&s.d(),a=!1,o_(l)}}}function uG(t,e,n){let r,o,a,l,s,c,d;let{value:u}=e,{type:h="text"}=e,{disabled:p=!1}=e,{inputmode:g}=e,{min:m}=e,{max:f}=e,{step:$}=e,{onchange:x=y}=e,{onkeydown:b=y}=e,{title:v}=e,{stepMultiplier:w=10}=e,{placeholder:S}=e,{enableSpinButtons:k=!0}=e,{enableStopPropagation:C=!1}=e,M=()=>{let t=c.value;return"number"===h&&(!nt(t="numeric"===g?parseInt(t,10):parseFloat(t))||Number.isNaN(t)?t=m||0:r&&(t=lm(t,m,f))),t},T=u,P=()=>{let t=lm(M()+(d?$*w:$),m,f);t!==u&&(n(25,T=t),n(0,u=t),x(u))},R=()=>{let t=lm(M()-(d?$*w:$),m,f);t!==u&&(n(25,T=t),n(0,u=t),x(u))};return t.$$set=t=>{"value"in t&&n(0,u=t.value),"type"in t&&n(1,h=t.type),"disabled"in t&&n(2,p=t.disabled),"inputmode"in t&&n(3,g=t.inputmode),"min"in t&&n(4,m=t.min),"max"in t&&n(5,f=t.max),"step"in t&&n(6,$=t.step),"onchange"in t&&n(21,x=t.onchange),"onkeydown"in t&&n(22,b=t.onkeydown),"title"in t&&n(7,v=t.title),"stepMultiplier"in t&&n(23,w=t.stepMultiplier),"placeholder"in t&&n(8,S=t.placeholder),"enableSpinButtons"in t&&n(9,k=t.enableSpinButtons),"enableStopPropagation"in t&&n(24,C=t.enableStopPropagation)},t.$$.update=()=>{48&t.$$.dirty&&n(14,r=nt(m)&&nt(f)),33555457&t.$$.dirty&&n(13,o=c===document.activeElement?T:u),32&t.$$.dirty&&n(26,a=f?(f+"").length:void 0),67108872&t.$$.dirty&&n(12,l="numeric"===g&&a?a:void 0),67108864&t.$$.dirty&&n(11,s=a?"min-width:".concat(a,"em"):void 0)},[u,h,p,g,m,f,$,v,S,k,c,s,l,o,r,()=>{n(25,T=M()),x(u)},()=>{n(25,T=c.value),x(M())},P,R,t=>{d=t.shiftKey,b(t);let{key:e}=t;C&&t.stopPropagation(),/up|down/i.test(e)&&(/up/i.test(e)&&P(),/down/i.test(e)&&R(),t.preventDefault(),t.stopPropagation())},t=>{let{key:e}=t;/up|down/i.test(e)&&(t.preventDefault(),t.stopPropagation())},x,b,w,C,T,a,function(t){ak[t?"unshift":"push"](()=>{n(10,c=t)})}]}class uX extends a1{constructor(t){super(),aQ(this,t,uG,uU,oW,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:21,onkeydown:22,title:7,stepMultiplier:23,placeholder:8,enableSpinButtons:9,enableStopPropagation:24})}}let uZ=t=>({}),uY=t=>({});function uq(t){let e,n,r,o;let a=(t[2]||t[21])+"",l=t[6]&&uJ(t);return{c(){l&&l.c(),e=ai(),ao(n=o9("span"),"class",r=cX(["PinturaButtonLabel",t[3],t[5]&&"implicit"]))},m(t,r){l&&l.m(t,r),o8(t,e,r),o8(t,n,r),n.innerHTML=a,o=!0},p(t,s){t[6]?l?(l.p(t,s),64&s[0]&&a_(l,1)):((l=uJ(t)).c(),a_(l,1),l.m(e.parentNode,e)):l&&(aO(),aN(l,1,1,()=>{l=null}),az()),(!o||2097156&s[0])&&a!==(a=(t[2]||t[21])+"")&&(n.innerHTML=a),(!o||40&s[0]&&r!==(r=cX(["PinturaButtonLabel",t[3],t[5]&&"implicit"])))&&ao(n,"class",r)},i(t){o||(a_(l),o=!0)},o(t){aN(l),o=!1},d(t){l&&l.d(t),t&&o7(e),t&&o7(n)}}}function uK(t){let e,n;return e=new uX({props:{value:t[10],onchange:t[17],enableStopPropagation:!0,type:"number",inputmode:"numeric",min:t[8].reduce(u9,1/0),max:t[8].reduce(ht,-1/0),enableSpinButtons:!1}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};1024&n[0]&&(r.value=t[10]),131072&n[0]&&(r.onchange=t[17]),256&n[0]&&(r.min=t[8].reduce(u9,1/0)),256&n[0]&&(r.max=t[8].reduce(ht,-1/0)),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function uJ(t){let e,n;return e=new dh({props:{class:"PinturaButtonIcon",$$slots:{default:[uQ]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};536870976&n[0]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function uQ(t){let e;return{c(){e=at("g")},m(n,r){o8(n,e,r),e.innerHTML=t[6]},p(t,n){64&n[0]&&(e.innerHTML=t[6])},d(t){t&&o7(e)}}}function u1(t){let e,n,r,o,a,l;let s=[uK,uq],c=[];return r=c[n=t[18]?0:1]=s[n](t),{c(){e=o9("span"),r.c(),ao(e,"slot","label"),ao(e,"title",o=ug(t[1],t[16])),ao(e,"class",a=cX(["PinturaButtonInner",t[18]&&"PinturaComboBox",t[4]]))},m(t,r){o8(t,e,r),c[n].m(e,null),l=!0},p(t,d){let u=n;(n=t[18]?0:1)===u?c[n].p(t,d):(aO(),aN(c[u],1,1,()=>{c[u]=null}),az(),(r=c[n])?r.p(t,d):(r=c[n]=s[n](t)).c(),a_(r,1),r.m(e,null)),(!l||65538&d[0]&&o!==(o=ug(t[1],t[16])))&&ao(e,"title",o),(!l||262160&d[0]&&a!==(a=cX(["PinturaButtonInner",t[18]&&"PinturaComboBox",t[4]])))&&ao(e,"class",a)},i(t){l||(a_(r),l=!0)},o(t){aN(r),l=!1},d(t){t&&o7(e),c[n].d()}}}function u0(t){let e,n;let r=t[31].label+"";return{c(){e=o9("span"),n=ae(r),ao(e,"slot","group")},m(t,r){o8(t,e,r),o3(e,n)},p(t,e){1&e[1]&&r!==(r=t[31].label+"")&&as(n,r)},d(t){t&&o7(e)}}}function u2(t){let e,n;return e=new dh({props:{style:W(t[14])?t[14](t[31].value):t[14],$$slots:{default:[u4]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};16384&n[0]|1&n[1]&&(r.style=W(t[14])?t[14](t[31].value):t[14]),536870912&n[0]|1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function u4(t){let e;let n=t[31].icon+"";return{c(){e=at("g")},m(t,r){o8(t,e,r),e.innerHTML=n},p(t,r){1&r[1]&&n!==(n=t[31].icon+"")&&(e.innerHTML=n)},d(t){t&&o7(e)}}}function u5(t){let e,n,r,o,a;let l=t[31].label+"",s=t[31].sublabel&&u3(t);return{c(){e=o9("span"),n=new au(!1),r=ai(),s&&s.c(),n.a=r,ao(e,"style",o=W(t[15])?t[15](t[31].value):t[15]),ao(e,"class",a=cX(["PinturaDropdownOptionLabel",t[11]]))},m(t,o){o8(t,e,o),n.m(l,e),o3(e,r),s&&s.m(e,null)},p(t,r){1&r[1]&&l!==(l=t[31].label+"")&&n.p(l),t[31].sublabel?s?s.p(t,r):((s=u3(t)).c(),s.m(e,null)):s&&(s.d(1),s=null),32768&r[0]|1&r[1]&&o!==(o=W(t[15])?t[15](t[31].value):t[15])&&ao(e,"style",o),2048&r[0]&&a!==(a=cX(["PinturaDropdownOptionLabel",t[11]]))&&ao(e,"class",a)},d(t){t&&o7(e),s&&s.d()}}}function u3(t){let e;let n=t[31].sublabel+"";return{c(){ao(e=o9("span"),"class","PinturaDropdownOptionSublabel")},m(t,r){o8(t,e,r),e.innerHTML=n},p(t,r){1&r[1]&&n!==(n=t[31].sublabel+"")&&(e.innerHTML=n)},d(t){t&&o7(e)}}}function u6(t){let e,n,r;let o=t[31].icon&&u2(t),a=!t[31].hideLabel&&u5(t);return{c(){e=o9("span"),o&&o.c(),n=ai(),a&&a.c(),ao(e,"slot","option")},m(t,l){o8(t,e,l),o&&o.m(e,null),o3(e,n),a&&a.m(e,null),r=!0},p(t,r){t[31].icon?o?(o.p(t,r),1&r[1]&&a_(o,1)):((o=u2(t)).c(),a_(o,1),o.m(e,n)):o&&(aO(),aN(o,1,1,()=>{o=null}),az()),t[31].hideLabel?a&&(a.d(1),a=null):a?a.p(t,r):((a=u5(t)).c(),a.m(e,null))},i(t){r||(a_(o),r=!0)},o(t){aN(o),r=!1},d(t){t&&o7(e),o&&o.d(),a&&a.d()}}}function u8(t){let e,n,r,o,a,l;let s=t[27].controls,c=oU(s,t,t[29],uY);return r=new uH({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[10],selectedIndex:t[9],optionFilter:t[12],optionMapper:t[13],optionLabelClass:cX(["PinturaDropdownOptionLabel",t[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[19],onchange:t[22],$$slots:{option:[u6,t=>{let{option:e}=t;return{31:e}},t=>{let{option:e}=t;return[0,e?1:0]}],group:[u0,t=>{let{option:e}=t;return{31:e}},t=>{let{option:e}=t;return[0,e?1:0]}]},$$scope:{ctx:t}}}),{c(){e=o9("div"),c&&c.c(),n=ai(),aq(r.$$.fragment),ao(e,"slot","details"),ao(e,"class","PinturaOptionsListWrapper")},m(s,d){o8(s,e,d),c&&c.m(e,null),o3(e,n),aK(r,e,null),o=!0,a||(l=ar(e,"keydown",t[24]),a=!0)},p(t,e){c&&c.p&&(!o||536870912&e[0])&&oZ(c,s,t,t[29],o?oX(s,t[29],e,uZ):oY(t[29]),uY);let n={};128&e[0]&&(n.name=t[7]),1024&e[0]&&(n.value=t[10]),512&e[0]&&(n.selectedIndex=t[9]),4096&e[0]&&(n.optionFilter=t[12]),8192&e[0]&&(n.optionMapper=t[13]),2048&e[0]&&(n.optionLabelClass=cX(["PinturaDropdownOptionLabel",t[11]])),524288&e[0]&&(n.options=t[19]),536922112&e[0]|1&e[1]&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){o||(a_(c,t),a_(r.$$.fragment,t),o=!0)},o(t){aN(c,t),aN(r.$$.fragment,t),o=!1},d(t){t&&o7(e),c&&c.d(t),aJ(r),a=!1,l()}}}function u7(t){let e,n,r;function o(e){t[28](e)}let a={onshow:t[23],buttonClass:cX(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[u8],label:[u1]},$$scope:{ctx:t}};return void 0!==t[20]&&(a.isActive=t[20]),e=new uo({props:a}),ak.push(()=>aY(e,"isActive",o)),{c(){aq(e.$$.fragment)},m(t,n){aK(e,t,n),r=!0},p(t,r){let o={};33&r[0]&&(o.buttonClass=cX(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"])),540016638&r[0]&&(o.$$scope={dirty:r,ctx:t}),!n&&1048576&r[0]&&(n=!0,o.isActive=t[20],aE(()=>n=!1)),e.$set(o)},i(t){r||(a_(e.$$.fragment,t),r=!0)},o(t){aN(e.$$.fragment,t),r=!1},d(t){aJ(e,t)}}}let u9=(t,e)=>{let[n]=e;return n<t?n:t},ht=(t,e)=>{let[n]=e;return n>t?n:t};function he(t,e,n){let r,o,a;let{$$slots:l={},$$scope:s}=e,{class:c}=e,{title:d}=e,{label:u}=e,{labelClass:h}=e,{innerClass:p}=e,{hideLabel:g=!1}=e,{icon:m}=e,{name:f}=e,{options:$=[]}=e,{selectedIndex:x=-1}=e,{value:b}=e,{optionLabelClass:v}=e,{optionFilter:w}=e,{optionMapper:S}=e,{optionIconStyle:k}=e,{optionLabelStyle:C}=e,{locale:M}=e,{onchange:T=y}=e,{onload:P=y}=e,{ondestroy:R=y}=e,{enableInput:A=!1}=e,E=t=>{let e=t.find(t=>void 0===t[0]);if(e)return e[1]};return af(()=>P({options:$})),ay(()=>R({options:$})),t.$$set=t=>{"class"in t&&n(0,c=t.class),"title"in t&&n(1,d=t.title),"label"in t&&n(2,u=t.label),"labelClass"in t&&n(3,h=t.labelClass),"innerClass"in t&&n(4,p=t.innerClass),"hideLabel"in t&&n(5,g=t.hideLabel),"icon"in t&&n(6,m=t.icon),"name"in t&&n(7,f=t.name),"options"in t&&n(8,$=t.options),"selectedIndex"in t&&n(9,x=t.selectedIndex),"value"in t&&n(10,b=t.value),"optionLabelClass"in t&&n(11,v=t.optionLabelClass),"optionFilter"in t&&n(12,w=t.optionFilter),"optionMapper"in t&&n(13,S=t.optionMapper),"optionIconStyle"in t&&n(14,k=t.optionIconStyle),"optionLabelStyle"in t&&n(15,C=t.optionLabelStyle),"locale"in t&&n(16,M=t.locale),"onchange"in t&&n(17,T=t.onchange),"onload"in t&&n(25,P=t.onload),"ondestroy"in t&&n(26,R=t.ondestroy),"enableInput"in t&&n(18,A=t.enableInput),"$$scope"in t&&n(29,s=t.$$scope)},t.$$.update=()=>{65792&t.$$.dirty[0]&&n(19,r=M?uf($,M):$),525312&t.$$.dirty[0]&&n(21,o=r.reduce((t,e)=>{if(t)return t;let[n,r]=Array.isArray(e)?e:[e,e];if(uy(n,b))return r},void 0)||E(r)||b)},[c,d,u,h,p,g,m,f,$,x,b,v,w,S,k,C,M,T,A,r,a,o,t=>{n(21,o=t.value),T(t),n(20,a=!1)},t=>{let{e,panel:n}=t;if(e&&e.key&&/up|down/i.test(e.key))return d0(n.querySelector("input:not([disabled])"));d0(n.querySelector("fieldset"))},t=>{/tab/i.test(t.key)&&t.preventDefault()},P,R,l,function(t){n(20,a=t)},s]}class hi extends a1{constructor(t){super(),aQ(this,t,he,u7,oW,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:16,onchange:17,onload:25,ondestroy:26,enableInput:18},null,[-1,-1])}}function hn(t){let e;return{c(){ao(e=o9("div"),"slot","details")},m(n,r){o8(n,e,r),t[14](e)},p:oF,d(n){n&&o7(e),t[14](null)}}}function hr(t){let e,n,r;function o(e){t[15](e)}let a={buttonLabel:t[0],buttonClass:t[1],buttonIcon:t[2],buttonHideLabel:t[3],buttonTitle:t[4],buttonLabelClass:t[5],onshow:t[6],onhide:t[7],$$slots:{details:[hn]},$$scope:{ctx:t}};return void 0!==t[9]&&(a.isActive=t[9]),e=new uo({props:a}),ak.push(()=>aY(e,"isActive",o)),{c(){aq(e.$$.fragment)},m(t,n){aK(e,t,n),r=!0},p(t,r){let[o]=r,a={};1&o&&(a.buttonLabel=t[0]),2&o&&(a.buttonClass=t[1]),4&o&&(a.buttonIcon=t[2]),8&o&&(a.buttonHideLabel=t[3]),16&o&&(a.buttonTitle=t[4]),32&o&&(a.buttonLabelClass=t[5]),64&o&&(a.onshow=t[6]),128&o&&(a.onhide=t[7]),65792&o&&(a.$$scope={dirty:o,ctx:t}),!n&&512&o&&(n=!0,a.isActive=t[9],aE(()=>n=!1)),e.$set(a)},i(t){r||(a_(e.$$.fragment,t),r=!0)},o(t){aN(e.$$.fragment,t),r=!1},d(t){aJ(e,t)}}}function ho(t,e,n){let r,{buttonLabel:o}=e,{buttonClass:a}=e,{buttonIcon:l}=e,{buttonHideLabel:s}=e,{buttonTitle:c}=e,{buttonLabelClass:d}=e,{root:u}=e,{ondestroy:h=y}=e,{onshow:p=y}=e,{onhide:g=y}=e,m=!1;return ay(h),t.$$set=t=>{"buttonLabel"in t&&n(0,o=t.buttonLabel),"buttonClass"in t&&n(1,a=t.buttonClass),"buttonIcon"in t&&n(2,l=t.buttonIcon),"buttonHideLabel"in t&&n(3,s=t.buttonHideLabel),"buttonTitle"in t&&n(4,c=t.buttonTitle),"buttonLabelClass"in t&&n(5,d=t.buttonLabelClass),"root"in t&&n(10,u=t.root),"ondestroy"in t&&n(11,h=t.ondestroy),"onshow"in t&&n(6,p=t.onshow),"onhide"in t&&n(7,g=t.onhide)},t.$$.update=()=>{1280&t.$$.dirty&&r&&u&&r.firstChild!==u&&(r.hasChildNodes()?r.replaceChild(u,r.firstChild):r.append(u))},[o,a,l,s,c,d,p,g,r,m,u,h,()=>n(9,m=!1),()=>n(9,m=!0),function(t){ak[t?"unshift":"push"](()=>{n(8,r=t)})},function(t){n(9,m=t)}]}class ha extends a1{get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}constructor(t){super(),aQ(this,t,ho,hr,oW,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}}var hl=(t,e)=>Math.round(t*(e=1/e))/e,hs=(t,e,n)=>(t-e)/(n-e);let hc=t=>({}),hd=t=>({});function hu(t){let e,n,r,o,a,l,s,c;return n=new dh({props:{$$slots:{default:[hh]},$$scope:{ctx:t}}}),a=new dh({props:{$$slots:{default:[hp]},$$scope:{ctx:t}}}),{c(){e=o9("button"),aq(n.$$.fragment),r=ai(),o=o9("button"),aq(a.$$.fragment),ao(e,"type","button"),ao(e,"aria-label","Increase"),ao(o,"type","button"),ao(o,"aria-label","Decrease")},m(d,u){o8(d,e,u),aK(n,e,null),o8(d,r,u),o8(d,o,u),aK(a,o,null),l=!0,s||(c=[ar(e,"pointerdown",t[20](1)),ar(o,"pointerdown",t[20](-1))],s=!0)},p(t,e){let r={};128&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);let o={};128&e[1]&&(o.$$scope={dirty:e,ctx:t}),a.$set(o)},i(t){l||(a_(n.$$.fragment,t),a_(a.$$.fragment,t),l=!0)},o(t){aN(n.$$.fragment,t),aN(a.$$.fragment,t),l=!1},d(t){t&&o7(e),aJ(n),t&&o7(r),t&&o7(o),aJ(a),s=!1,o_(c)}}}function hh(t){let e;return{c(){ao(e=at("path"),"d","M8 12 h8 M12 8 v8")},m(t,n){o8(t,e,n)},p:oF,d(t){t&&o7(e)}}}function hp(t){let e;return{c(){ao(e=at("path"),"d","M9 12 h6")},m(t,n){o8(t,e,n)},p:oF,d(t){t&&o7(e)}}}function hg(t){let e,n,r,o,a,l,s,c,d,u,h,p,g,m,f,$,y;let x=t[36].default,b=oU(x,t,t[38],null),v=t[36].knob,w=oU(v,t,t[38],hd),S=t[9]&&hu(t);return{c(){e=o9("div"),n=o9("div"),r=o9("input"),a=ai(),l=o9("div"),b&&b.c(),c=ai(),d=o9("div"),u=o9("div"),w&&w.c(),g=ai(),S&&S.c(),ao(r,"type","range"),ao(r,"id",t[3]),ao(r,"min",t[0]),ao(r,"max",t[1]),ao(r,"step",t[2]),r.value=t[14],ao(r,"style",o=t[10]?"pointer-events:none":""),ao(l,"class",s=cX(["PinturaSliderTrack",t[5]])),ao(l,"style",t[4]),ao(u,"class",h=cX(["PinturaSliderKnob",t[7]])),ao(u,"style",t[6]),ao(d,"class","PinturaSliderKnobController"),ao(d,"style",t[17]),ao(n,"class","PinturaSliderControl"),ao(n,"style",p="--slider-position:".concat(Math.round(t[15]))),ao(e,"class",m=cX(["PinturaSlider",t[12]])),ao(e,"data-direction",t[8])},m(o,s){o8(o,e,s),o3(e,n),o3(n,r),t[37](r),o3(n,a),o3(n,l),b&&b.m(l,null),o3(n,c),o3(n,d),o3(d,u),w&&w.m(u,null),o3(e,g),S&&S.m(e,null),f=!0,$||(y=[ar(r,"input",t[18]),ar(r,"nudge",t[19]),oQ(dC.call(null,r)),ar(n,"pointerdown",function(){oN(t[11]&&t[13])&&(t[11]&&t[13]).apply(this,arguments)})],$=!0)},p(a,c){t=a,(!f||8&c[0])&&ao(r,"id",t[3]),(!f||1&c[0])&&ao(r,"min",t[0]),(!f||2&c[0])&&ao(r,"max",t[1]),(!f||4&c[0])&&ao(r,"step",t[2]),(!f||16384&c[0])&&(r.value=t[14]),(!f||1024&c[0]&&o!==(o=t[10]?"pointer-events:none":""))&&ao(r,"style",o),b&&b.p&&(!f||128&c[1])&&oZ(b,x,t,t[38],f?oX(x,t[38],c,null):oY(t[38]),null),(!f||32&c[0]&&s!==(s=cX(["PinturaSliderTrack",t[5]])))&&ao(l,"class",s),(!f||16&c[0])&&ao(l,"style",t[4]),w&&w.p&&(!f||128&c[1])&&oZ(w,v,t,t[38],f?oX(v,t[38],c,hc):oY(t[38]),hd),(!f||128&c[0]&&h!==(h=cX(["PinturaSliderKnob",t[7]])))&&ao(u,"class",h),(!f||64&c[0])&&ao(u,"style",t[6]),(!f||131072&c[0])&&ao(d,"style",t[17]),(!f||32768&c[0]&&p!==(p="--slider-position:".concat(Math.round(t[15]))))&&ao(n,"style",p),t[9]?S?(S.p(t,c),512&c[0]&&a_(S,1)):((S=hu(t)).c(),a_(S,1),S.m(e,null)):S&&(aO(),aN(S,1,1,()=>{S=null}),az()),(!f||4096&c[0]&&m!==(m=cX(["PinturaSlider",t[12]])))&&ao(e,"class",m),(!f||256&c[0])&&ao(e,"data-direction",t[8])},i(t){f||(a_(b,t),a_(w,t),a_(S),f=!0)},o(t){aN(b,t),aN(w,t),aN(S),f=!1},d(n){n&&o7(e),t[37](null),b&&b.d(n),w&&w.d(n),S&&S.d(),$=!1,o_(y)}}}function hm(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,x,b,v,w;let{$$slots:S={},$$scope:k}=e,{min:C=0}=e,{max:M=100}=e,{step:T=1}=e,{id:P}=e,{value:R=0}=e,{valueMin:A}=e,{valueMax:E}=e,{trackStyle:I}=e,{trackClass:L}=e,{knobStyle:F}=e,{knobClass:B}=e,{ongrab:D=y}=e,{onchange:O=y}=e,{onrelease:z=y}=e,{onexceed:_=y}=e,{direction:W="x"}=e,{getValue:j=tf}=e,{setValue:H=tf}=e,{enableSpinButtons:V=!0}=e,{enableForceUseKnob:U=!1}=e,{enableStopPropagation:G=!0}=e,{enablePointerdownListener:X=!0}=e,{maxInteractionDistance:Z=6}=e,{class:Y}=e,q=t=>H(hl(lm(t,C,M),T),R),K=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{grabbed:a=!1,released:l=!1}=r,s=q(C+t/e*o),c=A||C,d=E||M;if(n(21,R=N(s)?s:lm(s,c,d)),x!==s){if(x=s,!N(s)&&(s<c||s>d)&&_(R,s),R===$)return;$=R,a&&D(R),O(R),l&&z(R)}},J=t=>{let e=t[u]-f;K(m+e,g)},Q=t=>{v=setTimeout(()=>{g=void 0},50),document.documentElement.removeEventListener("pointermove",J),document.documentElement.removeEventListener("pointerup",Q),O(R),z(R)},tt=()=>{n(21,R=q(r+te*T)),O(R)},te=1,ti=!1,tn=t=>{clearTimeout(w),ti||tt(),z(R),document.removeEventListener("pointerup",tn)};return t.$$set=t=>{"min"in t&&n(0,C=t.min),"max"in t&&n(1,M=t.max),"step"in t&&n(2,T=t.step),"id"in t&&n(3,P=t.id),"value"in t&&n(21,R=t.value),"valueMin"in t&&n(22,A=t.valueMin),"valueMax"in t&&n(23,E=t.valueMax),"trackStyle"in t&&n(4,I=t.trackStyle),"trackClass"in t&&n(5,L=t.trackClass),"knobStyle"in t&&n(6,F=t.knobStyle),"knobClass"in t&&n(7,B=t.knobClass),"ongrab"in t&&n(24,D=t.ongrab),"onchange"in t&&n(25,O=t.onchange),"onrelease"in t&&n(26,z=t.onrelease),"onexceed"in t&&n(27,_=t.onexceed),"direction"in t&&n(8,W=t.direction),"getValue"in t&&n(28,j=t.getValue),"setValue"in t&&n(29,H=t.setValue),"enableSpinButtons"in t&&n(9,V=t.enableSpinButtons),"enableForceUseKnob"in t&&n(10,U=t.enableForceUseKnob),"enableStopPropagation"in t&&n(30,G=t.enableStopPropagation),"enablePointerdownListener"in t&&n(11,X=t.enablePointerdownListener),"maxInteractionDistance"in t&&n(31,Z=t.maxInteractionDistance),"class"in t&&n(12,Y=t.class),"$$scope"in t&&n(38,k=t.$$scope)},t.$$.update=()=>{270532608&t.$$.dirty[0]&&n(14,r=void 0!==R?j(R):0),3&t.$$.dirty[0]&&(o=M-C),16387&t.$$.dirty[0]&&n(33,a=hs(r,C,M)),4&t.$$.dirty[1]&&n(15,l=100*a),256&t.$$.dirty[0]&&n(34,s=W.toUpperCase()),256&t.$$.dirty[0]&&n(35,c="x"===W?"Width":"Height"),16&t.$$.dirty[1]&&(d="offset".concat(c)),t.$$.dirty[1],8&t.$$.dirty[1]&&(u="page".concat(s)),32768&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(17,h="transform: translate".concat(s,"(").concat(l,"%)"))},[C,M,T,P,I,L,F,B,W,V,U,X,Y,t=>{clearTimeout(v);let e=!1;G&&t.stopPropagation(),clearTimeout(b);let n=p.getBoundingClientRect();if(g=p[d],m=(f=t[u])-n[W],U){if(Math.abs(m-a*g)>Z)return;e=!0,t.stopPropagation()}return document.activeElement!==p&&p.focus(),K(m,g,{grabbed:!0}),document.documentElement.addEventListener("pointermove",J),document.documentElement.addEventListener("pointerup",Q),e},r,l,p,h,t=>{g||(n(21,R=H(parseFloat(t.target.value))),R!==$&&($=R,O(R)))},t=>{let e=p[d];K(r/o*e+t.detail[W],e),clearTimeout(b),b=setTimeout(()=>{z(R)},250)},t=>e=>{clearTimeout(b),te=t,ti=!1,w=setInterval(()=>{ti=!0,tt()},100),document.addEventListener("pointercancel",tn),document.addEventListener("pointerup",tn)},R,A,E,D,O,z,_,j,H,G,Z,t=>{let e=p.getBoundingClientRect(),n=t[u]-e[W],r=p[d];return Math.abs(n-a*r)},a,s,c,S,function(t){ak[t?"unshift":"push"](()=>{n(16,p=t)})},k]}class hf extends a1{get eventDistanceToKnob(){return this.$$.ctx[32]}get handlePointerDown(){return this.$$.ctx[13]}constructor(t){super(),aQ(this,t,hm,hg,oW,{min:0,max:1,step:2,id:3,value:21,valueMin:22,valueMax:23,trackStyle:4,trackClass:5,knobStyle:6,knobClass:7,ongrab:24,onchange:25,onrelease:26,onexceed:27,direction:8,getValue:28,setValue:29,enableSpinButtons:9,enableForceUseKnob:10,enableStopPropagation:30,enablePointerdownListener:11,maxInteractionDistance:31,class:12,eventDistanceToKnob:32,handlePointerDown:13},null,[-1,-1])}}function h$(t){let e,n;return e=new dh({props:{class:"PinturaButtonIcon",$$slots:{default:[hy]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};1048580&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function hy(t){let e;return{c(){e=at("g")},m(n,r){o8(n,e,r),e.innerHTML=t[2]},p(t,n){4&n&&(e.innerHTML=t[2])},d(t){t&&o7(e)}}}function hx(t){let e,n;let r=ug(t[8],t[6])+"";return{c(){e=o9("span"),n=ae(r),ao(e,"class","PinturaButtonLabelPrefix")},m(t,r){o8(t,e,r),o3(e,n)},p(t,e){320&e&&r!==(r=ug(t[8],t[6])+"")&&as(n,r)},d(t){t&&o7(e)}}}function hb(t){let e,n,r,o,a,l,s,c,d;let u=t[2]&&h$(t),h=t[8]&&hx(t);return{c(){e=o9("span"),u&&u.c(),n=ai(),h&&h.c(),r=ai(),o=o9("span"),a=ae(t[9]),ao(o,"class",l=cX(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),ao(e,"slot","label"),ao(e,"title",s=ug(t[1],t[6])),ao(e,"class",c=cX(["PinturaButtonInner",t[4]]))},m(t,l){o8(t,e,l),u&&u.m(e,null),o3(e,n),h&&h.m(e,null),o3(e,r),o3(e,o),o3(o,a),d=!0},p(t,p){t[2]?u?(u.p(t,p),4&p&&a_(u,1)):((u=h$(t)).c(),a_(u,1),u.m(e,n)):u&&(aO(),aN(u,1,1,()=>{u=null}),az()),t[8]?h?h.p(t,p):((h=hx(t)).c(),h.m(e,r)):h&&(h.d(1),h=null),(!d||512&p)&&as(a,t[9]),(!d||40&p&&l!==(l=cX(["PinturaButtonLabel",t[3],t[5]&&"implicit"])))&&ao(o,"class",l),(!d||66&p&&s!==(s=ug(t[1],t[6])))&&ao(e,"title",s),(!d||16&p&&c!==(c=cX(["PinturaButtonInner",t[4]])))&&ao(e,"class",c)},i(t){d||(a_(u),d=!0)},o(t){aN(u),d=!1},d(t){t&&o7(e),u&&u.d(),h&&h.d()}}}function hv(t){let e,n,r,o,a;let l=[t[12],{value:t[7]},{onchange:t[11]}],s={};for(let t=0;t<l.length;t+=1)s=oD(s,l[t]);return n=new hf({props:s}),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"slot","details")},m(l,s){o8(l,e,s),aK(n,e,null),r=!0,o||(a=ar(e,"keydown",t[10]),o=!0)},p(t,e){let r=6272&e?aX(l,[4096&e&&aZ(t[12]),128&e&&{value:t[7]},2048&e&&{onchange:t[11]}]):{};n.$set(r)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n),o=!1,a()}}}function hw(t){let e,n;return e=new uo({props:{panelClass:"PinturaSliderPanel",buttonClass:cX(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[hv],label:[hb]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let[r]=n,o={};33&r&&(o.buttonClass=cX(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"])),1053694&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function hS(t,e,n){let r;let o=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"],a=oK(e,o),{class:l}=e,{title:s}=e,{label:c=Math.round}=e,{icon:d}=e,{labelClass:u}=e,{innerClass:h}=e,{hideLabel:p=!1}=e,{locale:g}=e,{value:m}=e,{onchange:f=y}=e,{labelPrefix:$}=e,{min:x,max:b,getValue:v=tf}=a,w=t=>W(c)?c(v(t),x,b,t):c,S=t=>n(9,r=w(t));return t.$$set=t=>{n(12,a=oK(e=oD(oD({},e),oq(t)),o)),"class"in t&&n(0,l=t.class),"title"in t&&n(1,s=t.title),"label"in t&&n(13,c=t.label),"icon"in t&&n(2,d=t.icon),"labelClass"in t&&n(3,u=t.labelClass),"innerClass"in t&&n(4,h=t.innerClass),"hideLabel"in t&&n(5,p=t.hideLabel),"locale"in t&&n(6,g=t.locale),"value"in t&&n(7,m=t.value),"onchange"in t&&n(14,f=t.onchange),"labelPrefix"in t&&n(8,$=t.labelPrefix)},t.$$.update=()=>{8320&t.$$.dirty&&S(m)},[l,s,d,u,h,p,g,m,$,r,t=>{/tab/i.test(t.key)&&t.preventDefault()},t=>{S(t),f(t)},a,c,f]}class hk extends a1{constructor(t){super(),aQ(this,t,hS,hw,oW,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function hC(t){let e,n;let r=ug(t[0],t[1])+"";return{c(){e=o9("span"),n=ae(r),ao(e,"class",t[3])},m(t,r){o8(t,e,r),o3(e,n)},p(t,o){3&o&&r!==(r=ug(t[0],t[1])+"")&&as(n,r),8&o&&ao(e,"class",t[3])},d(t){t&&o7(e)}}}function hM(t){let e,n,r,o;let a=t[0]&&hC(t);return r=new pr({props:{items:t[2]}}),{c(){e=o9("li"),a&&a.c(),n=ai(),aq(r.$$.fragment),ao(e,"class","PinturaShapeStyle")},m(t,l){o8(t,e,l),a&&a.m(e,null),o3(e,n),aK(r,e,null),o=!0},p(t,o){let[l]=o;t[0]?a?a.p(t,l):((a=hC(t)).c(),a.m(e,n)):a&&(a.d(1),a=null);let s={};4&l&&(s.items=t[2]),r.$set(s)},i(t){o||(a_(r.$$.fragment,t),o=!0)},o(t){aN(r.$$.fragment,t),o=!1},d(t){t&&o7(e),a&&a.d(),aJ(r)}}}function hT(t,e,n){let r;let{title:o}=e,{locale:a}=e,{items:l}=e,{hideTitle:s=!1}=e;return t.$$set=t=>{"title"in t&&n(0,o=t.title),"locale"in t&&n(1,a=t.locale),"items"in t&&n(2,l=t.items),"hideTitle"in t&&n(4,s=t.hideTitle)},t.$$.update=()=>{16&t.$$.dirty&&n(3,r="PinturaShapeStyleLabel"+(s?" implicit":""))},[o,a,l,r,s]}class hP extends a1{constructor(t){super(),aQ(this,t,hT,hM,oW,{title:0,locale:1,items:2,hideTitle:4})}}var hR=(t,e,n)=>{let r=Math.max(t,e,n),o=r-Math.min(t,e,n),a=o&&(r==t?(e-n)/o:r==e?2+(n-t)/o:4+(t-e)/o);return[60*(a<0?a+6:a)/360,r&&o/r,r]},hA=(t,e,n)=>{let r,o,a;let l=Math.floor(6*t),s=6*t-l,c=n*(1-e),d=n*(1-s*e),u=n*(1-(1-s)*e);switch(l%6){case 0:r=n,o=u,a=c;break;case 1:r=d,o=n,a=c;break;case 2:r=c,o=n,a=u;break;case 3:r=c,o=d,a=n;break;case 4:r=u,o=c,a=n;break;case 5:r=n,o=c,a=d}return[r,o,a]};function hE(t){let e,n,r;return{c(){e=o9("div"),n=o9("span"),ao(e,"class","PinturaColorPreview"),ao(e,"title",t[0]),ao(e,"style",r="--color:".concat(t[1]))},m(t,r){o8(t,e,r),o3(e,n)},p(t,n){let[o]=n;1&o&&ao(e,"title",t[0]),2&o&&r!==(r="--color:".concat(t[1]))&&ao(e,"style",r)},i:oF,o:oF,d(t){t&&o7(e)}}}function hI(t,e,n){let r;let{color:o}=e,{title:a}=e;return t.$$set=t=>{"color"in t&&n(2,o=t.color),"title"in t&&n(0,a=t.title)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=o?ng(o):"transparent")},[a,r,o]}class hL extends a1{constructor(t){super(),aQ(this,t,hI,hE,oW,{color:2,title:0})}}var hF=t=>{let[,e,n,r,o]=t.split("");t=t.length>=4&&t.length<=5?"#".concat(e).concat(e).concat(n).concat(n).concat(r).concat(r).concat(o?"".concat(o).concat(o):""):t;let[a,l,s,c,d]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(t)||[];if(a)return[l,s,c,d].filter(t=>void 0!==t).map(t=>parseInt(t,16)/255)},hB=t=>(t=t.trim(),/^rgba/.test(t))?t.substring(5).split(",").map(parseFloat).map((t,e)=>t/(3===e?1:255)):/^rgb/.test(t)?t.substring(4).split(",").map(parseFloat).map(t=>t/255):/^#/.test(t)?hF(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map(t=>parseInt(t,10)).map(t=>t/255):void 0;let hD=null;var hO=()=>(null===hD&&(hD=w()&&"EyeDropper"in window),hD);function hz(t){let e,n;return{c(){e=o9("span"),n=ae(t[0])},m(t,r){o8(t,e,r),o3(e,n)},p(t,e){1&e[0]&&as(n,t[0])},d(t){t&&o7(e)}}}function h_(t){let e,n,r,o;n=new hL({props:{color:t[4],title:ug(t[8],t[10])}});let a=!t[9]&&hz(t);return{c(){e=o9("span"),aq(n.$$.fragment),r=ai(),a&&a.c(),ao(e,"slot","label"),ao(e,"class","PinturaButtonLabel")},m(t,l){o8(t,e,l),aK(n,e,null),o3(e,r),a&&a.m(e,null),o=!0},p(t,r){let o={};16&r[0]&&(o.color=t[4]),1280&r[0]&&(o.title=ug(t[8],t[10])),n.$set(o),t[9]?a&&(a.d(1),a=null):a?a.p(t,r):((a=hz(t)).c(),a.m(e,null))},i(t){o||(a_(n.$$.fragment,t),o=!0)},o(t){aN(n.$$.fragment,t),o=!1},d(t){t&&o7(e),aJ(n),a&&a.d()}}}function hN(t){let e,n,r,o,a,l,s,c,d,u,h,p,g,m;d=new hf({props:{class:"PinturaHuePicker",knobStyle:"background-color:".concat(t[21]),onchange:t[27],value:t[16],min:0,max:1,step:.01}});let f=t[11]&&hW(t),$=(t[14]||t[15])&&hj(t);return{c(){e=o9("div"),n=o9("div"),r=o9("div"),o=o9("div"),c=ai(),aq(d.$$.fragment),u=ai(),f&&f.c(),h=ai(),$&&$.c(),ao(o,"role","button"),ao(o,"aria-label","Saturation slider"),ao(o,"class","PinturaPickerKnob"),ao(o,"tabindex","0"),ao(o,"style",a="background-color:".concat(t[20],";")),ao(r,"class","PinturaPickerKnobController"),ao(r,"style",l="transform:translate(".concat(t[25],"%,").concat(t[24],"%)")),ao(n,"class","PinturaSaturationPicker"),ao(n,"style",s="background-color: ".concat(t[21])),ao(e,"class","PinturaPicker")},m(a,l){o8(a,e,l),o3(e,n),o3(n,r),o3(r,o),t[41](n),o3(e,c),aK(d,e,null),o3(e,u),f&&f.m(e,null),o3(e,h),$&&$.m(e,null),p=!0,g||(m=[ar(o,"nudge",t[30]),oQ(dC.call(null,o,{preventDefault:!0})),ar(n,"pointerdown",t[29])],g=!0)},p(t,c){(!p||1048576&c[0]&&a!==(a="background-color:".concat(t[20],";")))&&ao(o,"style",a),(!p||50331648&c[0]&&l!==(l="transform:translate(".concat(t[25],"%,").concat(t[24],"%)")))&&ao(r,"style",l),(!p||2097152&c[0]&&s!==(s="background-color: ".concat(t[21])))&&ao(n,"style",s);let u={};2097152&c[0]&&(u.knobStyle="background-color:".concat(t[21])),65536&c[0]&&(u.value=t[16]),d.$set(u),t[11]?f?(f.p(t,c),2048&c[0]&&a_(f,1)):((f=hW(t)).c(),a_(f,1),f.m(e,h)):f&&(aO(),aN(f,1,1,()=>{f=null}),az()),t[14]||t[15]?$?($.p(t,c),49152&c[0]&&a_($,1)):(($=hj(t)).c(),a_($,1),$.m(e,null)):$&&(aO(),aN($,1,1,()=>{$=null}),az())},i(t){p||(a_(d.$$.fragment,t),a_(f),a_($),p=!0)},o(t){aN(d.$$.fragment,t),aN(f),aN($),p=!1},d(n){n&&o7(e),t[41](null),aJ(d),f&&f.d(),$&&$.d(),g=!1,o_(m)}}}function hW(t){let e,n;return e=new hf({props:{class:"PinturaOpacityPicker",knobStyle:"background-color:".concat(t[18]),trackStyle:"background-image:linear-gradient(to right,".concat(t[19],",").concat(t[20],")"),onchange:t[28],value:t[17],min:0,max:1,step:.01}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};262144&n[0]&&(r.knobStyle="background-color:".concat(t[18])),1572864&n[0]&&(r.trackStyle="background-image:linear-gradient(to right,".concat(t[19],",").concat(t[20],")")),131072&n[0]&&(r.value=t[17]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function hj(t){let e,n,r,o,a,l,s;let c=t[15]&&hH(t);return{c(){e=o9("div"),n=o9("input"),o=ai(),c&&c.c(),ao(n,"class","PinturaColorPickerInput"),ao(n,"type","text"),n.disabled=r=!t[14],n.value=t[23],ao(e,"class","PinturColorPickerInputGroup")},m(r,d){o8(r,e,d),o3(e,n),o3(e,o),c&&c.m(e,null),a=!0,l||(s=[ar(n,"keydown",t[32]),ar(n,"input",t[31])],l=!0)},p(t,o){(!a||16384&o[0]&&r!==(r=!t[14]))&&(n.disabled=r),(!a||8388608&o[0]&&n.value!==t[23])&&(n.value=t[23]),t[15]?c?(c.p(t,o),32768&o[0]&&a_(c,1)):((c=hH(t)).c(),a_(c,1),c.m(e,null)):c&&(aO(),aN(c,1,1,()=>{c=null}),az())},i(t){a||(a_(c),a=!0)},o(t){aN(c),a=!1},d(t){t&&o7(e),c&&c.d(),l=!1,o_(s)}}}function hH(t){let e,n;return e=new dv({props:{icon:'<path stroke="currentColor" stroke-linecap="square" d="m13 14-7 7a2.704 2.704 0 0 1-3 0 2.704 2.704 0 0 1 0-3l7-7"/><path fill="currentColor" d="M9.475 9.475 14.5 14.5c.263.263.69.265.955.005l.783-.767a4.209 4.209 0 0 0 1.262-3.006V10l4-4c.5-.5.375-2.125-.5-3s-2.5-1-3-.5l-4 4h-.732a4.329 4.329 0 0 0-3.03 1.238l-.758.742a.7.7 0 0 0-.005.995Z"/>',hideLabel:!0,label:"Pick a color",class:"PinturaEyeDropper",onclick:t[33]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p:oF,i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function hV(t){let e,n;return e=new uH({props:{label:ug(t[10].labelColorPalette,t[10]),class:cX(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[42]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[43],$$slots:{option:[hX,t=>{let{option:e}=t;return{59:e}},t=>{let{option:e}=t;return[0,e?268435456:0]}],group:[hU,t=>{let{option:e}=t;return{59:e}},t=>{let{option:e}=t;return[0,e?268435456:0]}]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};1024&n[0]&&(r.label=ug(t[10].labelColorPalette,t[10])),512&n[0]&&(r.class=cX(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&n[0]&&(r.name=t[1]),16&n[0]&&(r.value=t[4]),1028&n[0]&&(r.options=t[2].map(t[42])),8&n[0]&&(r.selectedIndex=t[3]),128&n[0]&&(r.optionMapper=t[7]),64&n[0]&&(r.optionLabelClass=t[6]),512&n[0]|805306368&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function hU(t){let e,n;let r=t[59].label+"";return{c(){e=o9("span"),n=ae(r),ao(e,"slot","group")},m(t,r){o8(t,e,r),o3(e,n)},p(t,e){268435456&e[1]&&r!==(r=t[59].label+"")&&as(n,r)},d(t){t&&o7(e)}}}function hG(t){let e,n;let r=t[59].label+"";return{c(){e=o9("span"),n=ae(r),ao(e,"class","PinturaButtonLabel")},m(t,r){o8(t,e,r),o3(e,n)},p(t,e){268435456&e[1]&&r!==(r=t[59].label+"")&&as(n,r)},d(t){t&&o7(e)}}}function hX(t){let e,n,r,o;n=new hL({props:{title:t[59].label,color:t[59].value}});let a=!t[9]&&hG(t);return{c(){e=o9("span"),aq(n.$$.fragment),r=ai(),a&&a.c(),ao(e,"slot","option")},m(t,l){o8(t,e,l),aK(n,e,null),o3(e,r),a&&a.m(e,null),o=!0},p(t,r){let o={};268435456&r[1]&&(o.title=t[59].label),268435456&r[1]&&(o.color=t[59].value),n.$set(o),t[9]?a&&(a.d(1),a=null):a?a.p(t,r):((a=hG(t)).c(),a.m(e,null))},i(t){o||(a_(n.$$.fragment,t),o=!0)},o(t){aN(n.$$.fragment,t),o=!1},d(t){t&&o7(e),aJ(n),a&&a.d()}}}function hZ(t){let e,n,r;let o=t[13]&&hN(t),a=t[12]&&hV(t);return{c(){e=o9("div"),o&&o.c(),n=ai(),a&&a.c(),ao(e,"slot","details"),ao(e,"class","PinturaColorPickerPanel")},m(t,l){o8(t,e,l),o&&o.m(e,null),o3(e,n),a&&a.m(e,null),r=!0},p(t,r){t[13]?o?(o.p(t,r),8192&r[0]&&a_(o,1)):((o=hN(t)).c(),a_(o,1),o.m(e,n)):o&&(aO(),aN(o,1,1,()=>{o=null}),az()),t[12]?a?(a.p(t,r),4096&r[0]&&a_(a,1)):((a=hV(t)).c(),a_(a,1),a.m(e,null)):a&&(aO(),aN(a,1,1,()=>{a=null}),az())},i(t){r||(a_(o),a_(a),r=!0)},o(t){aN(o),aN(a),r=!1},d(t){t&&o7(e),o&&o.d(),a&&a.d()}}}function hY(t){let e,n;return e=new uo({props:{buttonClass:cX(["PinturaColorPickerButton",t[5]]),$$slots:{details:[hZ],label:[h_]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};32&n[0]&&(r.buttonClass=cX(["PinturaColorPickerButton",t[5]])),67108831&n[0]|536870912&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function hq(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,y,x,b,v,w,S,k,C,M;let{label:T}=e,{name:P}=e,{options:R=[]}=e,{selectedIndex:A=-1}=e,{value:E}=e,{buttonClass:I}=e,{optionLabelClass:L}=e,{optionMapper:F}=e,{onchange:B}=e,{title:D}=e,{hidePresetLabel:O=!0}=e,{locale:z}=e,{enableOpacity:_=!0}=e,{enablePresets:N=!0}=e,{enablePicker:j=!0}=e,{enableInput:H=!1}=e,{enableEyeDropper:V=!1}=e,U=(t,e)=>{if(p=[t[0],t[1],t[2]],e){let e=hR(...p),r=e[0],o=e[1],a=e[2];nt(v)&&(r=v),nt(x)&&(o=x),nt(b)&&(a=b),n(16,c=r),n(36,d=o),n(37,u=a),n(17,h=nt(t[3])?t[3]:1)}n(18,g=ng(t)),n(19,m=ng([...p,0])),n(20,f=ng([...p,1])),n(21,$=ng(hA(c,1,1)))},G=()=>{let t=[...hA(c,d,u),h];U(t),B(t)},X=t=>{let e=3===t.length?[...t,1]:t;Z(),U(e,!0),B(e)},Z=()=>{x=void 0,b=void 0,v=void 0},Y=(t,e)=>{n(36,d=t),n(37,u=e),x=t,b=e,G()},q=(t,e)=>{Y(lm(t.x/e.width,0,1),1-lm(t.y/e.height,0,1))},K=t=>{let e=tQ(tz(t),C);q(tJ(tN(k),e),S)},J=t=>{S=void 0,document.documentElement.removeEventListener("pointermove",K),document.documentElement.removeEventListener("pointerup",J)},Q=(t,e,n)=>{let r=t.map(t=>Math.round(255*t).toString(16).toLowerCase().padStart(2,"0"));return(!e&&r.length>3||"ff"===r[3])&&r.pop(),n&&(r=r.map(t=>t.substring(0,1))),"#".concat(r.join(""))};return t.$$set=t=>{"label"in t&&n(0,T=t.label),"name"in t&&n(1,P=t.name),"options"in t&&n(2,R=t.options),"selectedIndex"in t&&n(3,A=t.selectedIndex),"value"in t&&n(4,E=t.value),"buttonClass"in t&&n(5,I=t.buttonClass),"optionLabelClass"in t&&n(6,L=t.optionLabelClass),"optionMapper"in t&&n(7,F=t.optionMapper),"onchange"in t&&n(34,B=t.onchange),"title"in t&&n(8,D=t.title),"hidePresetLabel"in t&&n(9,O=t.hidePresetLabel),"locale"in t&&n(10,z=t.locale),"enableOpacity"in t&&n(11,_=t.enableOpacity),"enablePresets"in t&&n(12,N=t.enablePresets),"enablePicker"in t&&n(13,j=t.enablePicker),"enableInput"in t&&n(14,H=t.enableInput),"enableEyeDropper"in t&&n(35,V=t.enableEyeDropper)},t.$$.update=()=>{16&t.$$.dirty[1]&&n(15,r=V&&hO()),16&t.$$.dirty[0]|128&t.$$.dirty[1]&&E&&(!y||!lw(E,y))&&(n(38,y=[...E]),U(E,!0)),32&t.$$.dirty[1]&&n(25,o=100*d),64&t.$$.dirty[1]&&n(24,a=100-100*u),256&t.$$.dirty[1]&&n(40,l=!!M&&M.length>=4&&M.length<=5),51216&t.$$.dirty[0]|512&t.$$.dirty[1]&&n(23,s=(H||r)&&E?Q(E,_,l):void 0)},[T,P,R,A,E,I,L,F,D,O,z,_,N,j,H,r,c,h,g,m,f,$,w,s,a,o,X,t=>{n(16,c=t),v=t,G()},t=>{n(17,h=t),G()},t=>{t.stopPropagation(),S=el(w.offsetWidth,w.offsetHeight),k=t_(t),C=tz(t),q(k,S),document.documentElement.addEventListener("pointermove",K),document.documentElement.addEventListener("pointerup",J)},t=>{S=el(w.offsetWidth,w.offsetHeight);let e=o/100*S.width,n=a/100*S.height;q({x:e+t.detail.x,y:n+t.detail.y},S)},t=>{let{value:e}=t.target,r=e.length;if(!e.startsWith("#")||r<4||6===r||8===r||r>9||!_&&r>7)return;let o=hB(e);o&&(n(39,M=e),Z(),U(o),B(o))},t=>{t.stopPropagation()},t=>{new EyeDropper().open().then(t=>{let{sRGBHex:e}=t,r=hB(e);r&&(r[3]=1,n(39,M=E),Z(),U(r),B(r))}).catch(t=>{})},B,V,d,u,y,M,l,function(t){ak[t?"unshift":"push"](()=>{n(22,w=t)})},t=>{let[e,n]=t;return[e,W(n)?n(z):n]},t=>X(t.value)]}class hK extends a1{constructor(t){super(),aQ(this,t,hq,hY,oW,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:34,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14,enableEyeDropper:35},null,[-1,-1])}}function hJ(t){let e,n,r;return n=new pr({props:{items:t[0]}}),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"class","PinturaShorthandControl PinturaShapeStyle")},m(t,o){o8(t,e,o),aK(n,e,null),r=!0},p(t,e){let[r]=e,o={};1&r&&(o.items=t[0]),n.$set(o)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n)}}}function hQ(t,e,n){let r,o;let{value:a}=e,{onchange:l}=e,{controls:s=[]}=e,c=t=>{let{controls:e,...n}=t;return n};return t.$$set=t=>{n(6,e=oD(oD({},e),oq(t))),"value"in t&&n(1,a=t.value),"onchange"in t&&n(2,l=t.onchange),"controls"in t&&n(3,s=t.controls)},t.$$.update=()=>{n(4,r=c(e)),30&t.$$.dirty&&n(0,o=s.map((t,e)=>{let[n,o,s]=t;return[n,o,{...r,...s,value:a[e],onchange:t=>{let n=[...a];n[e]=t,l(n)}}]}))},e=oq(e),[o,a,l,s,r]}class h1 extends a1{constructor(t){super(),aQ(this,t,hQ,hJ,oW,{value:1,onchange:2,controls:3})}}function h0(t){let e,n;return e=new hi({props:{label:t[4],options:t[1],title:t[2],selectedIndex:t[5],onchange:t[10]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let[r]=n,o={};16&r&&(o.label=t[4]),2&r&&(o.options=t[1]),4&r&&(o.title=t[2]),32&r&&(o.selectedIndex=t[5]),9&r&&(o.onchange=t[10]),e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function h2(t,e,n){let r,o,a,l;let{options:s}=e,{title:c}=e,{onchange:d}=e,{selectedIndex:u=-1}=e,{value:h}=e,{label:p}=e,g=(t,e,n)=>{if(t)return e>-1?t[e]:void 0!==n?t.find(t=>t[0]===n):t[0]};return t.$$set=t=>{"options"in t&&n(1,s=t.options),"title"in t&&n(2,c=t.title),"onchange"in t&&n(3,d=t.onchange),"selectedIndex"in t&&n(0,u=t.selectedIndex),"value"in t&&n(6,h=t.value),"label"in t&&n(7,p=t.label)},t.$$.update=()=>{67&t.$$.dirty&&n(9,r=g(s,u,h)),514&t.$$.dirty&&n(5,o=s&&s.findIndex(t=>t===r)),512&t.$$.dirty&&n(8,a=r&&r[1]),384&t.$$.dirty&&n(4,l=p||a)},[u,s,c,d,l,o,h,p,a,r,t=>{n(0,u=t.index),d&&d(t)}]}class h4 extends a1{constructor(t){super(),aQ(this,t,h2,h0,oW,{options:1,title:2,onchange:3,selectedIndex:0,value:6,label:7})}}function h5(t,e,n){let r=t.slice();return r[9]=e[n][0],r[0]=e[n][1],r[10]=e[n][2],r[2]=e[n][3],r}function h3(t){let e,n,r;let o=[t[10]];var a=t[3][t[9]]||t[9];function l(t){let e={};for(let t=0;t<o.length;t+=1)e=oD(e,o[t]);return{props:e}}return a&&(e=new a(l())),{c(){e&&aq(e.$$.fragment),n=an()},m(t,o){e&&aK(e,t,o),o8(t,n,o),r=!0},p(t,r){let s=4&r?aX(o,[aZ(t[10])]):{};if(a!==(a=t[3][t[9]]||t[9])){if(e){aO();let t=e;aN(t.$$.fragment,1,0,()=>{aJ(t,1)}),az()}a?(aq((e=new a(l())).$$.fragment),a_(e.$$.fragment,1),aK(e,n.parentNode,n)):e=null}else a&&e.$set(s)},i(t){r||(e&&a_(e.$$.fragment,t),r=!0)},o(t){e&&aN(e.$$.fragment,t),r=!1},d(t){t&&o7(n),e&&aJ(e,t)}}}function h6(t){let e,n=t[9],r=t[9]&&pt(t);return{c(){r&&r.c(),e=an()},m(t,n){r&&r.m(t,n),o8(t,e,n)},p(t,o){t[9]?n?oW(n,t[9])?(r.d(1),(r=pt(t)).c(),r.m(e.parentNode,e)):r.p(t,o):((r=pt(t)).c(),r.m(e.parentNode,e)):n&&(r.d(1),r=null),n=t[9]},i:oF,o(t){aN(r)},d(t){t&&o7(e),r&&r.d(t)}}}function h8(t){let e,n;let r=t[10].innerHTML+"";return{c(){e=new au(!1),n=an(),e.a=n},m(t,o){e.m(r,t,o),o8(t,n,o)},p(t,n){4&n&&r!==(r=t[10].innerHTML+"")&&e.p(r)},i:oF,o:oF,d(t){t&&o7(n),t&&e.d()}}}function h7(t){let e,n=t[10].textContent+"";return{c(){e=ae(n)},m(t,n){o8(t,e,n)},p(t,r){4&r&&n!==(n=t[10].textContent+"")&&as(e,n)},i:oF,o:oF,d(t){t&&o7(e)}}}function h9(t){let e,n;return e=new pr({props:{items:t[2],discardEmptyItems:!0}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};4&n&&(r.items=t[2]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function pt(t){let e,n,r,o,a;let l=[h9,h7,h8],s=[];function c(t,e){return t[2]&&t[2].length?0:t[10].textContent?1:t[10].innerHTML?2:-1}~(n=c(t))&&(r=s[n]=l[n](t));let d=[t[4](t[10])],u={};for(let t=0;t<d.length;t+=1)u=oD(u,d[t]);return{c(){e=o9(t[9]),r&&r.c(),o=ai(),/-/.test(t[9])?al(e,u):aa(e,u)},m(t,r){o8(t,e,r),~n&&s[n].m(e,null),o3(e,o),a=!0},p(t,a){let h=n;(n=c(t))===h?~n&&s[n].p(t,a):(r&&(aO(),aN(s[h],1,1,()=>{s[h]=null}),az()),~n?((r=s[n])?r.p(t,a):(r=s[n]=l[n](t)).c(),a_(r,1),r.m(e,o)):r=null),u=aX(d,[4&a&&t[4](t[10])]),/-/.test(t[9])?al(e,u):aa(e,u)},i(t){a||(a_(r),a=!0)},o(t){aN(r),a=!1},d(t){t&&o7(e),~n&&s[n].d()}}}function pe(t,e){let n,r,o,a,l,s;let c=[h6,h3],d=[];function u(t,e){return(4&e&&(r=null),null==r&&(r=!t[5](t[9])),r)?0:1}return a=d[o=u(e,-1)]=c[o](e),{key:t,first:null,c(){n=an(),a.c(),l=an(),this.first=n},m(t,e){o8(t,n,e),d[o].m(t,e),o8(t,l,e),s=!0},p(t,n){let r=o;(o=u(e=t,n))===r?d[o].p(e,n):(aO(),aN(d[r],1,1,()=>{d[r]=null}),az(),(a=d[o])?a.p(e,n):(a=d[o]=c[o](e)).c(),a_(a,1),a.m(l.parentNode,l))},i(t){s||(a_(a),s=!0)},o(t){aN(a),s=!1},d(t){t&&o7(n),d[o].d(t),t&&o7(l)}}}function pi(t){let e,n,r=[],o=new Map,a=t[2],l=t=>t[0]+t[1];for(let e=0;e<a.length;e+=1){let n=h5(t,a,e),s=l(n);o.set(s,r[e]=pe(s,n))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=an()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);o8(t,e,o),n=!0},p(t,n){let[s]=n;62&s&&(a=t[2],aO(),r=aG(r,s,l,1,t,a,o,e.parentNode,aU,pe,e,h5),az())},i(t){if(!n){for(let t=0;t<a.length;t+=1)a_(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)aN(r[t]);n=!1},d(t){for(let e=0;e<r.length;e+=1)r[e].d(t);t&&o7(e)}}}function pn(t,e,n){let r,o;let{items:a}=e,{discardEmptyItems:l=!0}=e,{key:s=""}=e,c={Button:dv,ImageButton:dG,ImageButtonList:dK,Dropdown:hi,Select:h4,RadioGroup:uH,Input:uX,Panel:ha,ProgressIndicator:d_,ShapeStyle:hP,ToggleSlider:hk,ColorPicker:hK,ShorthandControl:h1},d=t=>!N(t)||!!c[t],u=t=>{if(!t)return!1;let[e,,n,r=[]]=t;return!!d(e)||r.some(u)||n.textContent||n.innerHTML};return t.$$set=t=>{"items"in t&&n(6,a=t.items),"discardEmptyItems"in t&&n(7,l=t.discardEmptyItems),"key"in t&&n(0,s=t.key)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=s),192&t.$$.dirty&&n(2,o=(a&&l?a.filter(u):a)||[])},[s,r,o,c,function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{textContent:e,innerHTML:n,...r}=t;return r},d,a,l]}class pr extends a1{get items(){return this.$$.ctx[6]}set items(t){this.$$set({items:t}),aF()}get discardEmptyItems(){return this.$$.ctx[7]}set discardEmptyItems(t){this.$$set({discardEmptyItems:t}),aF()}get key(){return this.$$.ctx[0]}set key(t){this.$$set({key:t}),aF()}constructor(t){super(),aQ(this,t,pn,pi,oW,{items:6,discardEmptyItems:7,key:0})}}var po=t=>t.selectionStart=t.selectionEnd=t.value.length;let pa=null;var pl=()=>(null===pa&&(pa=w()&&"visualViewport"in window),pa),ps=t=>{if(!pl())return!1;let e=visualViewport.height,n=()=>{t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",n),()=>visualViewport.removeEventListener("resize",n)};function pc(t){let e,n;let r=[{onclick:t[1]},t[3]],o={};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return e=new dv({props:o}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=10&n[0]?aX(r,[2&n[0]&&{onclick:t[1]},8&n[0]&&aZ(t[3])]):{};e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function pd(t){let e,n;let r=[{onclick:t[0]},{class:"PinturaInputFormButtonConfirm"},t[2]],o={};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return e=new dv({props:o}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=5&n[0]?aX(r,[1&n[0]&&{onclick:t[0]},r[1],4&n[0]&&aZ(t[2])]):{};e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function pu(t){let e,n,r,o,a,l,s,c;let d=t[3]&&pc(t),u=t[24].default,h=oU(u,t,t[23],null),p=t[2]&&pd(t);return{c(){e=o9("div"),n=o9("div"),d&&d.c(),r=ai(),o=o9("div"),h&&h.c(),a=ai(),p&&p.c(),ao(o,"class","PinturaInputFormFields"),ao(n,"class","PinturaInputFormInner"),ao(e,"class","PinturaInputForm"),ao(e,"data-layout",t[4]),ao(e,"style",t[6])},m(u,g){o8(u,e,g),o3(e,n),d&&d.m(n,null),o3(n,r),o3(n,o),h&&h.m(o,null),o3(n,a),p&&p.m(n,null),t[25](e),l=!0,s||(c=[ar(o,"keydown",t[10]),ar(e,"focusin",t[7]),ar(e,"focusout",t[8]),ar(e,"measure",t[9]),oQ(cE.call(null,e))],s=!0)},p(t,o){t[3]?d?(d.p(t,o),8&o[0]&&a_(d,1)):((d=pc(t)).c(),a_(d,1),d.m(n,r)):d&&(aO(),aN(d,1,1,()=>{d=null}),az()),h&&h.p&&(!l||8388608&o[0])&&oZ(h,u,t,t[23],l?oX(u,t[23],o,null):oY(t[23]),null),t[2]?p?(p.p(t,o),4&o[0]&&a_(p,1)):((p=pd(t)).c(),a_(p,1),p.m(n,null)):p&&(aO(),aN(p,1,1,()=>{p=null}),az()),(!l||16&o[0])&&ao(e,"data-layout",t[4]),(!l||64&o[0])&&ao(e,"style",t[6])},i(t){l||(a_(d),a_(h,t),a_(p),l=!0)},o(t){aN(d),aN(h,t),aN(p),l=!1},d(n){n&&o7(e),d&&d.d(),h&&h.d(n),p&&p.d(),t[25](null),s=!1,o_(c)}}}function ph(t,e,n){let r,o,a,l,s,c,d,u;let{$$slots:h={},$$scope:p}=e,{onconfirm:g}=e,{oncancel:m}=e,{autoFocus:f=!0}=e,{autoPositionCursor:$=!0}=e,{buttonConfirm:y}=e,{buttonCancel:x}=e,{layout:b="stack"}=e,{parentRect:v}=e,{align:w}=e,{justify:S}=e,{parentMargin:k=16}=e,{panelOffset:C=tF()}=e,M=!1,T="",P=0,R=(t,e,n,r,o)=>{let a,l;return a="center"===r?t.x+.5*t.width-.5*e.width:"right"===r?t.x+t.width-e.width-o:t.x+o,l="center"===n?t.y+.5*t.height-.5*e.height:"bottom"===n?t.y+t.height-e.height-o:t.y+o,"left:".concat(a,"px;top:").concat(l,"px;right:auto;bottom:auto;")},A=t=>/textarea/i.test(t),E=t=>{let e;let n=t=>e=t.touches[0].screenY,r=t=>{let n=t.touches[0].screenY,r=t.target;/textarea/i.test(r.nodeName)?(n>e?0==r.scrollTop&&t.preventDefault():n<e?r.scrollTop+r.offsetHeight==r.scrollHeight&&t.preventDefault():t.preventDefault(),e=n):t.preventDefault()};return t.addEventListener("touchstart",n),t.addEventListener("touchmove",r),()=>{t.removeEventListener("touchstart",n),t.removeEventListener("touchmove",r)}},I=()=>{let t=s.querySelector("input, textarea");t.focus(),P>=1||t.select()},F=()=>{M=!0,!D&&(iV()||L())&&n(19,T="top:1em;bottom:auto;"),iV()&&E(s),n(20,P=1)},B=()=>{M=!1,n(20,P=0)},D=ps(t=>{if(!a){n(19,T="top: 4.5em; bottom: auto");return}if("hidden"===t&&!M){I();return}clearTimeout(u),u=void 0,n(19,T="top:".concat(visualViewport.height-d.height-C.y,"px")),"visible"===t?(n(5,s.dataset.stick=!0,s),I(),F()):B()});return af(()=>{f&&I()}),ay(()=>{D&&D()}),t.$$set=t=>{"onconfirm"in t&&n(0,g=t.onconfirm),"oncancel"in t&&n(1,m=t.oncancel),"autoFocus"in t&&n(11,f=t.autoFocus),"autoPositionCursor"in t&&n(12,$=t.autoPositionCursor),"buttonConfirm"in t&&n(2,y=t.buttonConfirm),"buttonCancel"in t&&n(3,x=t.buttonCancel),"layout"in t&&n(4,b=t.layout),"parentRect"in t&&n(13,v=t.parentRect),"align"in t&&n(14,w=t.align),"justify"in t&&n(15,S=t.justify),"parentMargin"in t&&n(16,k=t.parentMargin),"panelOffset"in t&&n(17,C=t.panelOffset),"$$scope"in t&&n(23,p=t.$$scope)},t.$$.update=()=>{385024&t.$$.dirty[0]&&n(21,r=v&&d?R(v,d,w,S,k):void 0),32&t.$$.dirty[0]&&n(22,o=s&&getComputedStyle(s)),4194304&t.$$.dirty[0]&&(a=o&&"1"===o.getPropertyValue("--editor-modal")),3670016&t.$$.dirty[0]&&n(6,l="opacity:".concat(P,";").concat(r||T))},[g,m,y,x,b,s,l,t=>{(A(t.target)||d4(t.target))&&(c=Date.now(),$&&po(t.target),clearTimeout(u),u=setTimeout(F,200))},t=>{Date.now()-c>50||(t.stopPropagation(),I())},t=>{let{detail:e}=t;n(18,d={width:e.width,height:e.height})},t=>"Enter"===t.key?g():"Escape"===t.key?m():void 0,f,$,v,w,S,k,C,d,T,P,r,o,p,h,function(t){ak[t?"unshift":"push"](()=>{n(5,s=t)})}]}class pp extends a1{constructor(t){super(),aQ(this,t,ph,pu,oW,{onconfirm:0,oncancel:1,autoFocus:11,autoPositionCursor:12,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:13,align:14,justify:15,parentMargin:16,panelOffset:17},null,[-1,-1])}}var pg=(t,e)=>{t.fastSeek&&t.fastSeek(e),t.currentTime=e};let pm=["aspectRatio","isRotatedSideways","flip","cropSize"],pf=lA.map(t=>{let[e]=t;return e}).filter(t=>!pm.includes(t)),p$=function(t,e,n){let r=[];return{set:e,update:n,publish:t=>{r.forEach(e=>e(t))},subscribe:e=>(r.push(e),t(e),()=>{r=r.filter(t=>t!==e)})}};var py=()=>{let t,e;let n=pf.reduce((t,n)=>(t[n]=p$(t=>{if(!e)return t();e.stores[n].subscribe(t)()},t=>{e&&e.stores[n].set(t)},t=>{e&&e.stores[n].update(t)}),t),{});return{update:r=>{if(e=r,t&&(t.forEach(t=>t()),t=void 0),!r){n.file.publish(void 0),n.loadState.publish(void 0);return}t=pf.map(t=>r.stores[t].subscribe(e=>{n[t].publish(e)}))},stores:n,destroy:()=>{t&&t.forEach(t=>t())}}},px=function(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return n=>{"ping"===n.type&&(e&&n.stopPropagation(),t(n.detail.type,n.detail.data))}},pb=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),pv=(t,e)=>(e?sR(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),pw=(t,e)=>{let n=matchMedia(t);return n.addListener(e),e(n),{get matches(){return n.matches},destroy:()=>n.removeListener(e)}},pS=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tf,{subscribe:n,set:r}=a4(void 0);return{subscribe:n,destroy:pw(t,t=>{let{matches:n}=t;return r(e(n))}).destroy}},pk=()=>{if(!iV())return!1;let[,t,e]=(navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[]).map(t=>parseInt(t,10)||0);return t>13||13===t&&e>=4},pC=(t,e,n)=>{let{sub:r,pub:o}=nw(),{willUndo:a=()=>!0}=n||{},l=[],s=a4(0),c=[],d=()=>c.forEach(t=>t({index:oH(s),length:l.length})),u={get index(){return oH(s)},set index(i){i=lm(i=Number.isInteger(i)?i:0,0,l.length-1),s.set(i),e(l[u.index]),d()},get state(){return l[l.length-1]},length:()=>l.length,undo(){if(!1===a())return;let t=u.index--;return o("undo",t),t},redo(){let t=u.index++;return o("redo",u.index),t},revert(){l.length=1,u.index=0,o("revert")},write(n){n&&e({...t(),...n});let r=t(),a=l[l.length-1];JSON.stringify(r)!==JSON.stringify(a)&&(l.length=u.index+1,l.push(r),s.set(l.length-1),d(),o("writehistory"))},set(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.length=0,u.index=0;let e=Array.isArray(t)?t:[t];l.push(...e),u.index=l.length-1},get:()=>[...l],subscribe:t=>(c.push(t),t({index:u.index,length:l.length}),()=>c.splice(c.indexOf(t),1)),on:r};return u},pM=async t=>C(await B(t)),pT=(t,e,n)=>new Promise((r,o)=>{(async()=>{let a;l0(t)&&r(await l1(t));let l=await e.read(t),s=t=>ti(t,n).then(t=>e.apply(t,l)).then(r).catch(o);if(X(t)||!U()||ib()||iV())return s(t);try{a=await J((t,e)=>createImageBitmap(t).then(t=>e(null,t)).catch(e),[t])}catch(t){}return a&&a.width?await k()?ce()&&l>1?r(await pM(a)):void r(a):r(e.apply(a,l)):s(t)})()}),pP=(t,e)=>new Promise(async n=>{if(t.width<e.width&&t.height<e.height)return n(t);let r=Math.min(e.width/t.width,e.height/t.height),o=r*t.width,a=r*t.height,l=M("canvas",{width:o,height:a}),s=l.getContext("2d",{willReadFrequently:!0}),c=A(t)?await B(t):t;s.drawImage(c,0,0,o,a),n(C(l))});let pR=null;var pA=()=>{if(null===pR){let t=M("canvas");pR=!!sq(t),R(t),t=void 0}return pR},pE=t=>/^image/.test(t.type)&&!/svg/.test(t.type);let pI=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],pL={precision:1e-4},pF={precision:.01*pL.precision};var pB=function(t,e){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{resize:o=1,opacity:a=0}=r,l={opacity:[cy(a,{...pL,stiffness:.1}),tf],resize:[cy(o,{...pL,stiffness:.1}),tf],translation:[cy(void 0,pL),tf],rotation:[cy(void 0,pF),tf],origin:[cy(void 0,pL),tf],scale:[cy(void 0,pF),tf],gamma:[cy(void 0,pF),t=>t||1],vignette:[cy(void 0,pF),t=>t||0],colorMatrix:[cy([...pI],pL),t=>t||[...pI]],convolutionMatrix:[a4(void 0),t=>t&&t.clarity||void 0],backgroundColor:[cy(void 0,pL),(t,e,n)=>{if(Array.isArray(t)){if(Array.isArray(e)){let r=[...t];0===e[3]?(r[3]=0,n(r)):0===r[3]&&((t=[...e])[3]=0)}return t}}],backgroundImage:[a4(void 0),tf]},s=Object.entries(l).map(t=>{let[e,n]=t;return[e,n[0]]}),c=s.map(t=>{let[,e]=t;return e}),d=Object.entries(l).reduce((t,e)=>{let[r,o]=e,[a,l]=o;return t[r]=(t,e)=>a.set(l(t,n[r],t=>{a.set(t,{hard:!0})}),e),t},{}),u=a5(c,r=>((n=r.reduce((t,e,n)=>(t[s[n][0]]=e,t),{})).data=t,n.size=e,n.scale*=r[1],n));return u.get=()=>n,u.set=(t,e)=>{let n={hard:!e};Object.entries(t).forEach(t=>{let[e,r]=t;d[e]&&d[e](r,n)})},u},pD=()=>{let t=[],e=[],n=[],r=(e,r)=>{let a=t.indexOf(e);a<0||(n[a]=r,o())},o=()=>{e.forEach(t=>t(n))},a=t=>{t.unsub=t.subscribe(e=>r(t,e)),o()};return{get length(){return t.length},clear:()=>{t.forEach(t=>t.unsub()),t.length=0,n.length=0},unshift:e=>{t.unshift(e),a(e)},get:e=>t[e],push:e=>{t.push(e),a(e)},remove:e=>{e.unsub();let r=t.indexOf(e);t.splice(r,1),n.splice(r,1)},forEach:e=>t.forEach(e),filter:e=>t.filter(e),subscribe:t=>(e.push(t),t(n),()=>{e.splice(e.indexOf(t),1)})}},pO=t=>t[0]<.25&&t[1]<.25&&t[2]<.25,pz=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(e=>{let{accept:n="image/*"}=t,r=M("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:n}),o=()=>{let[t]=r.files;r.parentNode&&r.remove(),r.removeEventListener("change",o),e(t)};r.addEventListener("change",o),iV()&&document.body.append(r),r.click()})},p_=t=>{try{return t()}catch(t){console.error(t)}},pN=t=>{let[e,n]=t;return e+(n-e)*.5},pW=t=>Math.round(100*t),pj=t=>tB(t.clientX,t.clientY),pH=(t,e,n)=>tQ(tQ(pj(t),e),n);function pV(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,y,x,b,v,w,S,k,C,M,T,P,R,A,E,I,L,F,B,D;let{root:O}=e,{locale:z}=e,{stores:_}=e,{allowPan:N=!0}=e,{allowZoom:W=!0}=e,{enablePan:j=!0}=e,{enableZoom:H=!0}=e,{enableZoomControls:V=H}=e,{enableZoomInput:U=!0}=e,{enablePanInput:G=!0}=e,{enablePanLimit:X=!0}=e,{panLimitGutterScalar:Z=0}=e,{zoomOptions:Y=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:q=.25}=e,{zoomAdjustFactor:K=.1}=e,{zoomAdjustWheelFactor:J=1}=e,{elasticity:Q=5}=e,{imageSelectionRectCentered:tt}=e,{imageSelectionRectScalar:te}=e,{zoomLevel:ti=null}=e,{zoomControls:tn}=e,{zoomMultiTouching:tr=!1}=e,{isAnimated:to,isInteracting:ta,rootRect:tl,stageRect:ts,stageScalar:tc,imageSelectionPan:td,imageSelectionZoom:tu,imageSelectionStageFitScalar:th,imageSelectionRect:tp,imageSelectionStoredState:tg,imagePreviewUpscale:tm}=_;oV(t,to,t=>n(70,S=t)),oV(t,ta,t=>n(69,v=t)),oV(t,tl,t=>n(66,y=t)),oV(t,ts,t=>n(65,$=t)),oV(t,tc,t=>n(46,w=t)),oV(t,td,t=>n(64,g=t)),oV(t,tu,t=>n(43,p=t)),oV(t,th,t=>n(44,m=t)),oV(t,tp,t=>n(67,x=t)),oV(t,tg,t=>n(71,k=t)),oV(t,tm,t=>n(45,f=t));let tf=av("fixScrollDirection");oV(t,tf,t=>n(68,b=t));let t$=!1,ty=t=>{let e=O.querySelector(".PinturaMain > .PinturaUtilMain")||O.querySelector('div[tabindex="0"] .PinturaUtilMain');return!(!e||!e.contains(t.target)||d5(t.target))},tx=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{pan:e=g,zoom:n=p}=t;oJ(tg,k={translation:e,zoom:n},k)},tb=()=>g&&0===g.x&&0===g.y,tv=()=>{tb()||oJ(td,g=tF(),g)},tw=()=>{oJ(tu,p=H?k.zoom:void 0,p),oJ(td,g=j?tN(k.translation):tb()?g:tF(),g),tC.set(p)},tS=()=>{oJ(tu,p=void 0,p),tv(),tC.set(void 0,{hard:!0})},tk=()=>{tS(),tx()},tC=cy(void 0,{precision:.01});tC.subscribe(t=>{if(void 0===t){oJ(tu,p=void 0,p),tb()||oJ(td,g=tF(),g);return}let e=p;t<=1?tb()||oJ(td,g=tF(),g):t<=e&&oJ(td,g=t0(g,.8),g),oJ(tu,p=t,p)});let tM=t=>{tC.update(e=>{let n=t(e||m);return tx({zoom:n}),n})},tT=t=>{t?tC.set(t,{hard:!1===S}):(t=void 0,tC.set(void 0,{hard:!0})),oJ(tu,p=t,p),tx({zoom:t})},tP=(t,e)=>t.findIndex(t=>t===e),tR=(t,e)=>{let n=te*e,r={...tt},o=1-lm(Z,0,1);eD(r,n<o?n:o);let a={...tt};eD(a,n),eB(a,t);let l={...a};return a.x>r.x&&(l.x=r.x),a.y>r.y&&(l.y=r.y),a.x+a.width<r.x+r.width&&(l.x=r.x+r.width-a.width),a.y+a.height<r.y+r.height&&(l.y=r.y+r.height-a.height),tQ(eF(l),eF(r))},tA=t=>{let{translation:e,zoom:n=1,elastify:r=!0}=t;if(!L)return;let o=tB(L.x+e.x,L.y+e.y);if(!X)return o;let a=tR(o,n);return r?dP(a,o,Q):a},tE=()=>{M=void 0,oJ(ta,v=!0,v),n(34,t$=G),C=!1,B=!1,L={...g},F=f?p||m:a?p||1:p||m},tI=t=>{let{scalar:e,translation:o,isMultiTouching:a}=t.detail;if(!L||!(a||G))return;a&&t0(o,.5),(G||a)&&(C=!0),tr||n(13,tr=a);let l=r?lm(F*e,s,c):1,d=tA({translation:o,zoom:l,elastify:!0});B=tU(d)<(D=tU(g)),r&&tu.set(l),td.set(d),M=tr&&{translation:t.detail.translation,scalar:e}},tL=t=>{oJ(ta,v=!1,v),n(34,t$=!1),n(13,tr=!1),B&&D<50&&(L=void 0,F=void 0,td.set(tF()))},tD=t=>{oJ(ta,v=!1,v),n(34,t$=!1),n(13,tr=!1),Promise.resolve().then(()=>{if(C&&L){let e=M||t.detail,n=r?lm(F*e.scalar,s,c):1,o=tA({elastify:!1,translation:e.translation,zoom:n});td.set(o)}L=void 0,F=void 0,G&&t.detail.isDoubleTap&&tk(),tx()})},tO=Date.now(),tz=0,t_=!1,tj=!1,tH=t=>{if(!ty(t)||(t.preventDefault(),t.stopPropagation(),tj))return;clearTimeout(T);let e=dA(t,{fixScrollDirection:b}),n=Date.now(),r=n-tO;tO=n;let o=Math.abs(e/r)>.2;tz=o?tz+1:0;let a=-1*e*J;tV(pH(t,y,$),1+a/(o?50:100),{isZoomingFast:o})},tV=(t,e,n)=>{let{isZoomingFast:r}=n,o=f?p||m:a?p||1:p||m,l=o*e,d=tF(),u=g,h=f?m:a?1:m,$=Math.abs(l-h),y=o>h,b=o<h,v=l>o,w=l<o,S=y&&w||b&&v,k=tz>=5;if(r||(t_=!1),tz>0&&!t_&&(t_=S),k&&t_){tk(),tj=!0,setTimeout(()=>{tj=!1},100);return}if(k)return;!r&&S&&$<=.05&&(T=setTimeout(()=>{tk()},250)),oJ(tu,p=lm(l,s,c),p);let C=ek(x);eD(C,o),eB(C,u);let M=eF(C),P=ek(C);eD(P,1+(p-o),t);let R=t1(tQ(eF(P),M),o);tW(d,u.x+R.x,u.y+R.y),w&&r?oJ(td,g=t0(tN(g),.85),g):oJ(td,g=tR(d,o),g),tx()},tG=t=>(t?"add":"remove")+"EventListener",tX=t=>{t.preventDefault(),R={...g},E=ek(x),A=pH(t,y,$),P=f?p||m:a?p||1:p||m},tZ=t=>{t.preventDefault(),oJ(tu,p=lm(t.scale*P,s,c),p);let e=ek(E);eD(e,P),eB(e,R);let n=eF(e),r=ek(e);eD(r,1+(p-P),A);let o=t1(tQ(eF(r),n),P);oJ(td,g=tR({x:R.x+o.x,y:R.y+o.y},p),g)},tY=t=>{t.preventDefault()},tq=t=>{O[tG(t)]("wheel",tH),iV()||(O[tG(t)]("gesturestart",tX),O[tG(t)]("gesturechange",tZ),O[tG(t)]("gestureend",tY))},tK=t=>{let e=tG(t);O[e]("interactionstart",tE),O[e]("interactionupdate",tI),O[e]("interactionrelease",tL),O[e]("interactionend",tD)};return af(()=>{I=dk(O,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:ty})}),ay(()=>{tq(!1),tK(!1),I.destroy(),I=void 0}),t.$$set=t=>{"root"in t&&n(14,O=t.root),"locale"in t&&n(15,z=t.locale),"stores"in t&&n(16,_=t.stores),"allowPan"in t&&n(17,N=t.allowPan),"allowZoom"in t&&n(18,W=t.allowZoom),"enablePan"in t&&n(19,j=t.enablePan),"enableZoom"in t&&n(20,H=t.enableZoom),"enableZoomControls"in t&&n(21,V=t.enableZoomControls),"enableZoomInput"in t&&n(22,U=t.enableZoomInput),"enablePanInput"in t&&n(23,G=t.enablePanInput),"enablePanLimit"in t&&n(24,X=t.enablePanLimit),"panLimitGutterScalar"in t&&n(25,Z=t.panLimitGutterScalar),"zoomOptions"in t&&n(26,Y=t.zoomOptions),"zoomAdjustStep"in t&&n(27,q=t.zoomAdjustStep),"zoomAdjustFactor"in t&&n(28,K=t.zoomAdjustFactor),"zoomAdjustWheelFactor"in t&&n(29,J=t.zoomAdjustWheelFactor),"elasticity"in t&&n(30,Q=t.elasticity),"imageSelectionRectCentered"in t&&n(31,tt=t.imageSelectionRectCentered),"imageSelectionRectScalar"in t&&n(32,te=t.imageSelectionRectScalar),"zoomLevel"in t&&n(33,ti=t.zoomLevel),"zoomControls"in t&&n(12,tn=t.zoomControls),"zoomMultiTouching"in t&&n(13,tr=t.zoomMultiTouching)},t.$$.update=()=>{5505024&t.$$.dirty[0]&&n(36,r=W&&H&&U),655360&t.$$.dirty[0]&&n(35,o=N&&j),393216&t.$$.dirty[0]&&(N||W?tw():tS()),32768&t.$$.dirty[1]&&(a=w>=1),67141632&t.$$.dirty[0]|57344&t.$$.dirty[1]&&n(40,l=[(f||w<1)&&[m,pW(m)+"%",{sublabel:z.labelZoomFit}],...Y.map(t=>[t,pW(t)+"%"])].filter(Boolean).map(t=>(1===t[0]&&(t[2]={sublabel:z.labelZoomActual}),t)).sort((t,e)=>{let n=t[0]||m,r=e[0]||m;return n<r?-1:r<n?1:0})),8704&t.$$.dirty[1]&&n(38,s=Math.min(l.reduce((t,e)=>{let[n]=e;return n<t?n:t},Number.MAX_SAFE_INTEGER),m)),512&t.$$.dirty[1]&&n(37,c=l.reduce((t,e)=>{let[n]=e;return n>t?n:t},Number.MIN_SAFE_INTEGER)),4&t.$$.dirty[1]&&null!==ti&&tT(ti),61440&t.$$.dirty[1]&&n(42,u=p||(f||w<1?m:1)),2560&t.$$.dirty[1]&&n(39,d=tP(l.map(t=>{let[e]=t;return e}),u)),2048&t.$$.dirty[1]&&n(41,h=pW(u)+"%"),405045248&t.$$.dirty[0]|6080&t.$$.dirty[1]&&n(12,tn=(W||W)&&V?[["Button","zoom-out",{hideLabel:!0,label:z.labelZoomOut,icon:z.iconZoomOut,disabled:p===s,onclick:()=>tM(t=>Math.max(s,t-q)),onhold:()=>tM(t=>Math.max(s,t*(1-K)))}],["Dropdown","zoom-level",{label:h,labelClass:"PinturaFixedWidthCharacters",options:l,selectedIndex:d,onchange:t=>tT(t.value)}],["Button","zoom-in",{hideLabel:!0,label:z.labelZoomIn,icon:z.iconZoomIn,disabled:p===c,onclick:()=>tM(t=>Math.min(c,t+q)),onhold:()=>tM(t=>Math.min(c,t*(1+K)))}]]:[]),16384&t.$$.dirty[0]|32&t.$$.dirty[1]&&O&&tq(r),16384&t.$$.dirty[0]|16&t.$$.dirty[1]&&O&&tK(o),8404992&t.$$.dirty[0]|24&t.$$.dirty[1]&&O&&O.style.setProperty("--cursor",o&&G?t$?"grabbing":"grab":"")},[to,ta,tl,ts,tc,td,tu,th,tp,tg,tm,tf,tn,tr,O,z,_,N,W,j,H,V,U,G,X,Z,Y,q,K,J,Q,tt,te,ti,t$,o,r,c,s,d,l,h,u,p,m,f,w]}class pU extends a1{constructor(t){super(),aQ(this,t,pV,null,oW,{root:14,locale:15,stores:16,allowPan:17,allowZoom:18,enablePan:19,enableZoom:20,enableZoomControls:21,enableZoomInput:22,enablePanInput:23,enablePanLimit:24,panLimitGutterScalar:25,zoomOptions:26,zoomAdjustStep:27,zoomAdjustFactor:28,zoomAdjustWheelFactor:29,elasticity:30,imageSelectionRectCentered:31,imageSelectionRectScalar:32,zoomLevel:33,zoomControls:12,zoomMultiTouching:13},null,[-1,-1,-1,-1])}}let{window:pG}=aH;function pX(t){let e,n,r;let o=t[41]&&pZ(t),a=t[38]&&p4(t);return{c(){o&&o.c(),e=ai(),a&&a.c(),n=an()},m(t,l){o&&o.m(t,l),o8(t,e,l),a&&a.m(t,l),o8(t,n,l),r=!0},p(t,r){t[41]?o?(o.p(t,r),1024&r[1]&&a_(o,1)):((o=pZ(t)).c(),a_(o,1),o.m(e.parentNode,e)):o&&(aO(),aN(o,1,1,()=>{o=null}),az()),t[38]?a?(a.p(t,r),128&r[1]&&a_(a,1)):((a=p4(t)).c(),a_(a,1),a.m(n.parentNode,n)):a&&(aO(),aN(a,1,1,()=>{a=null}),az())},i(t){r||(a_(o),a_(a),r=!0)},o(t){aN(o),aN(a),r=!1},d(t){o&&o.d(t),t&&o7(e),a&&a.d(t),t&&o7(n)}}}function pZ(t){let e,n,r,o,a,l;let s=[pq,pY],c=[];function d(t,e){return t[39]?0:t[35]?1:-1}return~(r=d(t))&&(o=c[r]=s[r](t)),{c(){e=o9("div"),n=o9("p"),o&&o.c(),ao(n,"style",t[72]),ao(e,"class","PinturaStatus"),ao(e,"style",a="opacity: ".concat(t[54]))},m(t,o){o8(t,e,o),o3(e,n),~r&&c[r].m(n,null),l=!0},p(t,u){let h=r;(r=d(t))===h?~r&&c[r].p(t,u):(o&&(aO(),aN(c[h],1,1,()=>{c[h]=null}),az()),~r?((o=c[r])?o.p(t,u):(o=c[r]=s[r](t)).c(),a_(o,1),o.m(n,null)):o=null),(!l||1024&u[2])&&ao(n,"style",t[72]),(!l||8388608&u[1]&&a!==(a="opacity: ".concat(t[54])))&&ao(e,"style",a)},i(t){l||(a_(o),l=!0)},o(t){aN(o),l=!1},d(t){t&&o7(e),~r&&c[r].d()}}}function pY(t){let e,n,r,o;e=new dD({props:{text:t[35].text||"",onmeasure:t[221]}});let a=t[35].aside&&pK(t);return{c(){aq(e.$$.fragment),n=ai(),a&&a.c(),r=an()},m(t,l){aK(e,t,l),o8(t,n,l),a&&a.m(t,l),o8(t,r,l),o=!0},p(t,n){let o={};16&n[1]&&(o.text=t[35].text||""),e.$set(o),t[35].aside?a?(a.p(t,n),16&n[1]&&a_(a,1)):((a=pK(t)).c(),a_(a,1),a.m(r.parentNode,r)):a&&(aO(),aN(a,1,1,()=>{a=null}),az())},i(t){o||(a_(e.$$.fragment,t),a_(a),o=!0)},o(t){aN(e.$$.fragment,t),aN(a),o=!1},d(t){aJ(e,t),t&&o7(n),a&&a.d(t),t&&o7(r)}}}function pq(t){let e,n,r,o;return e=new dD({props:{text:t[39],onmeasure:t[221]}}),r=new dj({props:{class:"PinturaStatusIcon",offset:t[82],opacity:t[83],$$slots:{default:[p2]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment),n=ai(),aq(r.$$.fragment)},m(t,a){aK(e,t,a),o8(t,n,a),aK(r,t,a),o=!0},p(t,n){let o={};256&n[1]&&(o.text=t[39]),e.$set(o);let a={};1048576&n[2]&&(a.offset=t[82]),2097152&n[2]&&(a.opacity=t[83]),8&n[0]|32768&n[19]&&(a.$$scope={dirty:n,ctx:t}),r.$set(a)},i(t){o||(a_(e.$$.fragment,t),a_(r.$$.fragment,t),o=!0)},o(t){aN(e.$$.fragment,t),aN(r.$$.fragment,t),o=!1},d(t){aJ(e,t),t&&o7(n),aJ(r,t)}}}function pK(t){let e,n;return e=new dj({props:{class:"PinturaStatusButton",offset:t[82],opacity:t[83],$$slots:{default:[p1]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};1048576&n[2]&&(r.offset=t[82]),2097152&n[2]&&(r.opacity=t[83]),16&n[1]|32768&n[19]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function pJ(t){let e,n;return e=new d_({props:{progress:t[35].progressIndicator.progress}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};16&n[1]&&(r.progress=t[35].progressIndicator.progress),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function pQ(t){let e,n;let r=[t[35].closeButton,{hideLabel:!0}],o={};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return e=new dv({props:o}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=16&n[1]?aX(r,[aZ(t[35].closeButton),r[1]]):{};e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function p1(t){let e,n,r;let o=t[35].progressIndicator.visible&&pJ(t),a=t[35].closeButton&&t[35].text&&pQ(t);return{c(){o&&o.c(),e=ai(),a&&a.c(),n=an()},m(t,l){o&&o.m(t,l),o8(t,e,l),a&&a.m(t,l),o8(t,n,l),r=!0},p(t,r){t[35].progressIndicator.visible?o?(o.p(t,r),16&r[1]&&a_(o,1)):((o=pJ(t)).c(),a_(o,1),o.m(e.parentNode,e)):o&&(aO(),aN(o,1,1,()=>{o=null}),az()),t[35].closeButton&&t[35].text?a?(a.p(t,r),16&r[1]&&a_(a,1)):((a=pQ(t)).c(),a_(a,1),a.m(n.parentNode,n)):a&&(aO(),aN(a,1,1,()=>{a=null}),az())},i(t){r||(a_(o),a_(a),r=!0)},o(t){aN(o),aN(a),r=!1},d(t){o&&o.d(t),t&&o7(e),a&&a.d(t),t&&o7(n)}}}function p0(t){let e;let n=t[3].iconSupportError+"";return{c(){e=at("g")},m(t,r){o8(t,e,r),e.innerHTML=n},p(t,r){8&r[0]&&n!==(n=t[3].iconSupportError+"")&&(e.innerHTML=n)},d(t){t&&o7(e)}}}function p2(t){let e,n;return e=new dh({props:{$$slots:{default:[p0]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};8&n[0]|32768&n[19]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function p4(t){let e,n,r,o,a,l,s,c,d,u,h,p,g,m;let f=t[10]&&p5(t),$=t[46]&&t[45]&&p3(t),y=[gi,ge],x=[];function b(e){t[439](e)}function v(e){t[440](e)}function w(e){t[441](e)}o=x[r=t[46]?0:1]=y[r](t),l=new cG({props:{isAnimated:t[53],isTransparent:t[20],pixelRatio:t[57],textPixelRatio:t[6],backgroundColor:t[56],maskRect:t[58],maskOpacity:t[73]?t[73].maskOpacity:1,maskMarkupOpacity:t[7],maskFrameOpacity:t[5],clipAnnotationsToImage:t[85],images:t[55],interfaceImages:t[86],loadImageData:t[28],enableGrid:t[11],gridSize:t[87],gridColors:[t[88],t[89]],gridOpacity:t[90],selectionColor:t[91],csp:t[92]||{},willRequest:t[81]||t[93],willRender:t[436],didRender:t[437]}});let S={root:t[2],locale:t[3],stores:t[202],allowPan:t[95],enablePan:t[17],enablePanLimit:t[21],panLimitGutterScalar:t[22],enablePanInput:t[96],allowZoom:t[97],enableZoom:t[18],enableZoomInput:void 0!==t[19]?t[19]:t[98],enableZoomControls:t[99],zoomOptions:t[13]||t[23],zoomAdjustStep:t[14]||t[24],zoomAdjustFactor:t[15]||t[25],zoomAdjustWheelFactor:t[16]||t[26],imageSelectionRectCentered:t[100],imageSelectionRectScalar:t[101],elasticity:gs*t[8]};return void 0!==t[0]&&(S.zoomLevel=t[0]),void 0!==t[33]&&(S.zoomControls=t[33]),void 0!==t[34]&&(S.zoomMultiTouching=t[34]),u=new pU({props:S}),ak.push(()=>aY(u,"zoomLevel",b)),ak.push(()=>aY(u,"zoomControls",v)),ak.push(()=>aY(u,"zoomMultiTouching",w)),{c(){f&&f.c(),e=ai(),$&&$.c(),n=ai(),o.c(),a=ai(),aq(l.$$.fragment),s=ai(),c=o9("div"),d=ai(),aq(u.$$.fragment),ao(c,"class","PinturaRootPortal")},m(o,h){f&&f.m(o,h),o8(o,e,h),$&&$.m(o,h),o8(o,n,h),x[r].m(o,h),o8(o,a,h),aK(l,o,h),o8(o,s,h),o8(o,c,h),t[438](c),o8(o,d,h),aK(u,o,h),m=!0},p(t,s){t[10]?f?(f.p(t,s),1024&s[0]&&a_(f,1)):((f=p5(t)).c(),a_(f,1),f.m(e.parentNode,e)):f&&(aO(),aN(f,1,1,()=>{f=null}),az()),t[46]&&t[45]?$?($.p(t,s),49152&s[1]&&a_($,1)):(($=p3(t)).c(),a_($,1),$.m(n.parentNode,n)):$&&(aO(),aN($,1,1,()=>{$=null}),az());let c=r;(r=t[46]?0:1)===c?x[r].p(t,s):(aO(),aN(x[c],1,1,()=>{x[c]=null}),az(),(o=x[r])?o.p(t,s):(o=x[r]=y[r](t)).c(),a_(o,1),o.m(a.parentNode,a));let d={};4194304&s[1]&&(d.isAnimated=t[53]),1048576&s[0]&&(d.isTransparent=t[20]),67108864&s[1]&&(d.pixelRatio=t[57]),64&s[0]&&(d.textPixelRatio=t[6]),33554432&s[1]&&(d.backgroundColor=t[56]),134217728&s[1]&&(d.maskRect=t[58]),2048&s[2]&&(d.maskOpacity=t[73]?t[73].maskOpacity:1),128&s[0]&&(d.maskMarkupOpacity=t[7]),32&s[0]&&(d.maskFrameOpacity=t[5]),8388608&s[2]&&(d.clipAnnotationsToImage=t[85]),16777216&s[1]&&(d.images=t[55]),16777216&s[2]&&(d.interfaceImages=t[86]),268435456&s[0]&&(d.loadImageData=t[28]),2048&s[0]&&(d.enableGrid=t[11]),33554432&s[2]&&(d.gridSize=t[87]),201326592&s[2]&&(d.gridColors=[t[88],t[89]]),268435456&s[2]&&(d.gridOpacity=t[90]),536870912&s[2]&&(d.selectionColor=t[91]),1073741824&s[2]&&(d.csp=t[92]||{}),524288&s[2]|1&s[3]&&(d.willRequest=t[81]||t[93]),512&s[0]|270991424&s[1]|2&s[3]&&(d.willRender=t[436]),62&s[2]&&(d.didRender=t[437]),l.$set(d);let m={};4&s[0]&&(m.root=t[2]),8&s[0]&&(m.locale=t[3]),4&s[3]&&(m.allowPan=t[95]),131072&s[0]&&(m.enablePan=t[17]),2097152&s[0]&&(m.enablePanLimit=t[21]),4194304&s[0]&&(m.panLimitGutterScalar=t[22]),8&s[3]&&(m.enablePanInput=t[96]),16&s[3]&&(m.allowZoom=t[97]),262144&s[0]&&(m.enableZoom=t[18]),524288&s[0]|32&s[3]&&(m.enableZoomInput=void 0!==t[19]?t[19]:t[98]),64&s[3]&&(m.enableZoomControls=t[99]),8396800&s[0]&&(m.zoomOptions=t[13]||t[23]),16793600&s[0]&&(m.zoomAdjustStep=t[14]||t[24]),33587200&s[0]&&(m.zoomAdjustFactor=t[15]||t[25]),67174400&s[0]&&(m.zoomAdjustWheelFactor=t[16]||t[26]),128&s[3]&&(m.imageSelectionRectCentered=t[100]),256&s[3]&&(m.imageSelectionRectScalar=t[101]),256&s[0]&&(m.elasticity=gs*t[8]),!h&&1&s[0]&&(h=!0,m.zoomLevel=t[0],aE(()=>h=!1)),!p&&4&s[1]&&(p=!0,m.zoomControls=t[33],aE(()=>p=!1)),!g&&8&s[1]&&(g=!0,m.zoomMultiTouching=t[34],aE(()=>g=!1)),u.$set(m)},i(t){m||(a_(f),a_($),a_(o),a_(l.$$.fragment,t),a_(u.$$.fragment,t),m=!0)},o(t){aN(f),aN($),aN(o),aN(l.$$.fragment,t),aN(u.$$.fragment,t),m=!1},d(o){f&&f.d(o),o&&o7(e),$&&$.d(o),o&&o7(n),x[r].d(o),o&&o7(a),aJ(l,o),o&&o7(s),o&&o7(c),t[438](null),o&&o7(d),aJ(u,o)}}}function p5(t){let e,n,r,o,a;return n=new pr({props:{items:t[69]}}),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"class","PinturaNav PinturaNavTools")},m(l,s){o8(l,e,s),aK(n,e,null),r=!0,o||(a=[ar(e,"measure",t[425]),oQ(cE.call(null,e))],o=!0)},p(t,e){let r={};128&e[2]&&(r.items=t[69]),n.$set(r)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n),o=!1,o_(a)}}}function p3(t){let e,n,r;return n=new dL({props:{elasticity:t[8]*gd,scrollDirection:t[76]?"y":"x",$$slots:{default:[gt]},$$scope:{ctx:t}}}),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"class","PinturaNav PinturaNavMain")},m(t,o){o8(t,e,o),aK(n,e,null),r=!0},p(t,e){let r={};256&e[0]&&(r.elasticity=t[8]*gd),16384&e[2]&&(r.scrollDirection=t[76]?"y":"x"),12288&e[1]|135168&e[2]|32768&e[19]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n)}}}function p6(t){let e,n;let r=[t[79],{tabs:t[44]}],o={$$slots:{default:[p9,t=>{let{tab:e}=t;return{603:e}},t=>{let{tab:e}=t;return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e?16384:0]}]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return(e=new c0({props:o})).$on("select",t[426]),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=8192&n[1]|131072&n[2]?aX(r,[131072&n[2]&&aZ(t[79]),8192&n[1]&&{tabs:t[44]}]):{};49152&n[19]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function p8(t){let e,n;return e=new pr({props:{items:t[44]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};8192&n[1]&&(r.items=t[44]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function p7(t){let e;let n=t[603].icon+"";return{c(){e=at("g")},m(t,r){o8(t,e,r),e.innerHTML=n},p(t,r){16384&r[19]&&n!==(n=t[603].icon+"")&&(e.innerHTML=n)},d(t){t&&o7(e)}}}function p9(t){let e,n,r,o,a;let l=t[603].label+"";return e=new dh({props:{$$slots:{default:[p7]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment),n=ai(),r=o9("span"),o=ae(l)},m(t,l){aK(e,t,l),o8(t,n,l),o8(t,r,l),o3(r,o),a=!0},p(t,n){let r={};49152&n[19]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r),(!a||16384&n[19])&&l!==(l=t[603].label+"")&&as(o,l)},i(t){a||(a_(e.$$.fragment,t),a=!0)},o(t){aN(e.$$.fragment,t),a=!1},d(t){aJ(e,t),t&&o7(n),t&&o7(r)}}}function gt(t){let e,n,r,o;let a=[p8,p6],l=[];return n=l[e=t[74]?0:1]=a[e](t),{c(){n.c(),r=an()},m(t,n){l[e].m(t,n),o8(t,r,n),o=!0},p(t,o){let s=e;(e=t[74]?0:1)===s?l[e].p(t,o):(aO(),aN(l[s],1,1,()=>{l[s]=null}),az(),(n=l[e])?n.p(t,o):(n=l[e]=a[e](t)).c(),a_(n,1),n.m(r.parentNode,r))},i(t){o||(a_(n),o=!0)},o(t){aN(n),o=!1},d(t){l[e].d(t),t&&o7(r)}}}function ge(t){let e,n,r;function o(e){t[432](e)}let a={locale:t[3],class:"PinturaMain",view:t[207](t[43]),props:t[206](t[43],t[27]),stores:t[202]};return void 0!==t[1][t[43]]&&(a.component=t[1][t[43]]),e=new dc({props:a}),ak.push(()=>aY(e,"component",o)),e.$on("measure",t[233]),e.$on("show",t[433]),e.$on("hide",t[434]),e.$on("fade",t[435]),{c(){aq(e.$$.fragment)},m(t,n){aK(e,t,n),r=!0},p(t,r){let o={};8&r[0]&&(o.locale=t[3]),4096&r[1]&&(o.view=t[207](t[43])),134217728&r[0]|4096&r[1]&&(o.props=t[206](t[43],t[27])),!n&&2&r[0]|4096&r[1]&&(n=!0,o.component=t[1][t[43]],aE(()=>n=!1)),e.$set(o)},i(t){r||(a_(e.$$.fragment,t),r=!0)},o(t){aN(e.$$.fragment,t),r=!1},d(t){aJ(e,t)}}}function gi(t){let e,n;let r=[{class:"PinturaMain"},{visible:t[62]},t[79],{panels:t[78]}],o={$$slots:{default:[gn,t=>{let{panel:e,panelIsActive:n}=t;return{601:e,602:n}},t=>{let{panel:e,panelIsActive:n}=t;return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(e?4096:0)|(n?8192:0)]}]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return(e=new dn({props:o})).$on("measure",t[431]),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=196609&n[2]?aX(r,[r[0],1&n[2]&&{visible:t[62]},131072&n[2]&&aZ(t[79]),65536&n[2]&&{panels:t[78]}]):{};134217738&n[0]|45056&n[19]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function gn(t){let e,n,r;function o(e){t[427](e,t[601])}let a={locale:t[3],view:t[207](t[601]),props:t[206](t[601],t[27]),isActive:t[602],stores:t[202]};return void 0!==t[1][t[601]]&&(a.component=t[1][t[601]]),e=new dc({props:a}),ak.push(()=>aY(e,"component",o)),e.$on("measure",t[233]),e.$on("show",function(){return t[428](t[601])}),e.$on("hide",function(){return t[429](t[601])}),e.$on("fade",function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[430](t[601],...n)}),{c(){aq(e.$$.fragment)},m(t,n){aK(e,t,n),r=!0},p(r,o){t=r;let a={};8&o[0]&&(a.locale=t[3]),4096&o[19]&&(a.view=t[207](t[601])),134217728&o[0]|4096&o[19]&&(a.props=t[206](t[601],t[27])),8192&o[19]&&(a.isActive=t[602]),!n&&2&o[0]|4096&o[19]&&(n=!0,a.component=t[1][t[601]],aE(()=>n=!1)),e.$set(a)},i(t){r||(a_(e.$$.fragment,t),r=!0)},o(t){aN(e.$$.fragment,t),r=!1},d(t){aJ(e,t)}}}function gr(t){let e,n;return{c(){ao(e=o9("span"),"class","PinturaEditorOverlay"),ao(e,"style",n="opacity:".concat(t[102]))},m(t,n){o8(t,e,n)},p(t,r){512&r[3]&&n!==(n="opacity:".concat(t[102]))&&ao(e,"style",n)},d(t){t&&o7(e)}}}function go(t){let e,n;let r=[{layout:"row"},{parentRect:t[50]},t[60]],o={$$slots:{default:[ga]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return e=new pp({props:o}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=537395200&n[1]?aX(r,[r[0],524288&n[1]&&{parentRect:t[50]},536870912&n[1]&&aZ(t[60])]):{};1610612736&n[1]|32768&n[19]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function ga(t){let e,n,r;return{c(){(e=o9("input")).value=n=t[60].text,ao(e,"placeholder",r=t[60].placeholder),ao(e,"type","text"),ao(e,"spellcheck","false"),ao(e,"autocorrect","off"),ao(e,"autocapitalize","off")},m(n,r){o8(n,e,r),t[442](e)},p(t,o){536870912&o[1]&&n!==(n=t[60].text)&&e.value!==n&&(e.value=n),536870912&o[1]&&r!==(r=t[60].placeholder)&&ao(e,"placeholder",r)},d(n){n&&o7(e),t[442](null)}}}function gl(t){let e,n,r,o,a,l;aA(t[424]);let s=t[40]&&pX(t),c=t[102]>0&&gr(t),d=t[60]&&go(t);return{c(){e=o9("div"),s&&s.c(),n=ai(),c&&c.c(),r=ai(),d&&d.c(),ao(e,"id",t[4]),ao(e,"class",t[77]),ao(e,"data-env",t[75]),ao(e,"dir",t[12])},m(u,h){o8(u,e,h),s&&s.m(e,null),o3(e,n),c&&c.m(e,null),o3(e,r),d&&d.m(e,null),t[443](e),o=!0,a||(l=[ar(pG,"keydown",t[224]),ar(pG,"keyup",t[225]),ar(pG,"blur",t[226]),ar(pG,"paste",t[230]),ar(pG,"resize",t[424]),ar(e,"ping",function(){oN(t[68])&&t[68].apply(this,arguments)}),ar(e,"contextmenu",t[227]),ar(e,"touchstart",t[222],{passive:!1}),ar(e,"touchmove",function(){oN(t[71])&&t[71].apply(this,arguments)}),ar(e,"pointermove",function(){oN(t[70])&&t[70].apply(this,arguments)}),ar(e,"transitionend",t[212]),ar(e,"dropfiles",t[228]),ar(e,"measure",t[444]),ar(e,"click",function(){oN(t[42]?t[229]:y)&&(t[42]?t[229]:y).apply(this,arguments)}),oQ(cE.call(null,e,{observeViewRect:!0,isMeasureRoot:!0})),oQ(cI.call(null,e)),oQ(cB.call(null,e))],a=!0)},p(a,l){(t=a)[40]?s?(s.p(t,l),512&l[1]&&a_(s,1)):((s=pX(t)).c(),a_(s,1),s.m(e,n)):s&&(aO(),aN(s,1,1,()=>{s=null}),az()),t[102]>0?c?c.p(t,l):((c=gr(t)).c(),c.m(e,r)):c&&(c.d(1),c=null),t[60]?d?(d.p(t,l),536870912&l[1]&&a_(d,1)):((d=go(t)).c(),a_(d,1),d.m(e,null)):d&&(aO(),aN(d,1,1,()=>{d=null}),az()),(!o||16&l[0])&&ao(e,"id",t[4]),(!o||32768&l[2])&&ao(e,"class",t[77]),(!o||8192&l[2])&&ao(e,"data-env",t[75]),(!o||4096&l[0])&&ao(e,"dir",t[12])},i(t){o||(a_(s),a_(d),o=!0)},o(t){aN(s),aN(d),o=!1},d(n){n&&o7(e),s&&s.d(),c&&c.d(),d&&d.d(),t[443](null),a=!1,o_(l)}}}let gs=1,gc="stage-overlay",gd=10;function gu(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,x,b,v,w,S,k,M,T,P,A,E,I,B,D,O,z,_,W,j,H,V,U,G,X,Y,q,K,J,Q,te,ti,tn,tr,to,ta,tl,ts,tc,td,tu,th,tp,tg,tm,t$,ty,tx,tb,tv,tw,tS,tk,tC,tM,tT,tP,tR,tA,tI,tL,tD,tz,t_,tN,tW,tj,tH,tV,tU,tG,tX,tZ,tY,tK,tJ,tQ,t1,t0,t2,t4,t5,t3,t6,t8,t7,t9,et,ee,ei,en,er,eo,ea,es,ec,ed,eu,eh,ep,eg,em,e$,ey,ex,eb,ev,ew,eS,eM,eP,eR,eE,eI,eF,eO,ez,eU,eG,eY,eq,eK,e1,e0,e4,e3,e6,e8,e7,e9,it,ie,ii,ir,io,ia,il,is,ic,id,ip,ig,im,i$,iy,ix,iv,iw,iS,ik,iC,iM,iT,iP,iR,iA,iE,iI,iL,iF,iB,iD,iO,i_,iN,iW,ij,iH,iU,iG,iX,iZ,iY,iq,iK,iJ,iQ,i1,i0,i2,i4,i5,i3,i6,i8,i7,i9,ne,ni,nn,nr,no,na,nl,ns,nc,nd,nu,np,ng,nm,nf,n$,ny,nx,nb,nv,nS,nk,nC,nM,nT,nP,nR,nA,nE,nI,nL,nF,nB,nD;let nO,nz=oF,n_,nN=oF;oV(t,cx,t=>n(412,iF=t)),t.$$.on_destroy.push(()=>nz()),t.$$.on_destroy.push(()=>nN());let nW=nw(),nj=ax(),{class:nH}=e,{layout:nV}=e,{stores:nU}=e,{locale:nG}=e,{id:nX}=e,{util:nZ}=e,{utils:nY}=e,{animations:nq="auto"}=e,{disabled:nK=!1}=e,{status:nJ}=e,{previewUpscale:nQ=!1}=e,{previewPad:n0=!1}=e,{previewMaskOpacity:n2=.95}=e,{previewImageDataMaxSize:n4}=e,{previewImageTextPixelRatio:n5}=e,{markupMaskOpacity:n3=1}=e,{zoomMaskOpacity:n6=.85}=e,{elasticityMultiplier:n8=10}=e,{willRevert:n9=()=>Promise.resolve(!0)}=e,{willProcessImage:rt=()=>Promise.resolve(!0)}=e,{willRenderCanvas:re=tf}=e,{willRenderToolbar:rn=tf}=e,{willRenderUtilTabs:ro=tf}=e,{willSetHistoryInitialState:rl=tf}=e,{enableButtonExport:rs=!0}=e,{enableButtonRevert:rd=!0}=e,{enableNavigateHistory:ru=!0}=e,{enableToolbar:rh=!0}=e,{enableUtils:rp=!0}=e,{enableButtonClose:rg=!1}=e,{enableDropImage:rm=!1}=e,{enablePasteImage:rf=!1}=e,{enableBrowseImage:r$=!1}=e,{enableTransparencyGrid:ry=!1}=e,{layoutDirectionPreference:rx="auto"}=e,{layoutHorizontalUtilsPreference:rb="left"}=e,{layoutVerticalUtilsPreference:rv="bottom"}=e,{layoutVerticalToolbarPreference:rw="top"}=e,{layoutVerticalControlGroupsPreference:rS="bottom"}=e,{layoutVerticalControlTabsPreference:rk="bottom"}=e,{textDirection:rC}=e,{markupEditorZoomLevel:rM=null}=e,{markupEditorZoomLevels:rT}=e,{markupEditorZoomAdjustStep:rP}=e,{markupEditorZoomAdjustFactor:rR}=e,{markupEditorZoomAdjustWheelFactor:rA}=e,{markupEditorInteractionMode:rE=!1}=e,{muteAudio:rI=!0}=e,{willSetMediaInitialTimeOffset:rL=(t,e)=>t*pN(e[0])}=e,{enablePan:rF=!0}=e,{enableZoom:rB=!0}=e,{enableZoomControls:rD=!0}=e,{enableZoomInput:rO}=e,{enablePanInput:rz}=e,{enableCanvasAlpha:r_=!1}=e,{enablePanLimit:rN}=e,{panLimitGutterScalar:rW}=e,{pan:rj=null}=e,{zoomPresetOptions:rH=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:rV=.25}=e,{zoomAdjustFactor:rU=.1}=e,{zoomAdjustWheelFactor:rG=1}=e,{zoomLevel:rX=null}=e,{fixScrollDirection:rZ=!1}=e,rY=a4(rZ);ab("fixScrollDirection",rY);let{imagePreviewSrc:rq}=e,{imageOrienter:rK={read:()=>1,apply:t=>t}}=e,{pluginComponents:rJ}=e,{pluginOptions:rQ={}}=e,r1=nW.sub,r0={},{root:r2}=e,r4=()=>{nO.setAttribute("data-redraw","true"),oy.set({})},r5=a4(!0);oV(t,r5,t=>n(477,ev=t));let r6=a4(void 0);oV(t,r6,t=>n(422,iQ=t));let r8=a4(0);oV(t,r8,t=>n(419,iq=t));let r7=a4(!1),r9=()=>r8.set(om()/og()),ot=t=>{r7.set("play"===t.type),nW.pub(t.type)},oe=t=>{if(!ol())return;let e=Date.now();if(n$&&e-n$<16)return;n$=e;let n=iK*t;if(n.toFixed(1)===nf)return;nf=n.toFixed(1);let r=nO,o=()=>{r.removeEventListener("seeked",o),r4()};r.addEventListener("seeked",o),pg(r,n)},or=!1,oo=()=>{if(!a||!ol())return;nx=h,oJ(r6,iQ=void 0,iQ);let t=nO;or=!1;let e=1/24,n=og(),r=Math.abs(d*n-iq*n)<=e,o=n-n*iq<=e;(r||o)&&oJ(r8,iq=c,iq),of(iq*og()),t.play().catch(()=>{});let l=om(),u=()=>{if(ol())return;ny=requestAnimationFrame(u);let t=om();t-l<=0&&(t=l+.01),l=t,oJ(r8,iq=t/og(),iq),nx>=0&&iq>=d&&(oJ(r8,iq=d,iq),oa()),h>-1&&(or=!0),or&&-1===h&&p>0&&(oJ(r8,iq=s[p][0],iq),of(iq*og())),oJ(oI,iG=iq*og(),iG),r4()};u()},oa=()=>{!a||ol()||(oJ(r6,iQ=void 0,iQ),nx=void 0,nO.pause(),cancelAnimationFrame(ny),r4())},ol=()=>nO&&nO.paused,oc=()=>{if(a)return ol()?oo():oa()},od=()=>{a&&(nO.muted=!0)},ou=()=>{a&&(nO.muted=!1)},oh=()=>{a&&oJ(op,iJ=!iJ,iJ)},op=a4(rI);oV(t,op,t=>n(421,iJ=t));let og=()=>{if(a)return nO.duration},om=()=>{if(a)return nO.currentTime},of=t=>{a&&(pg(nO,t),oJ(r8,iq=t/iK,iq))},o$=t=>{a&&(nO.volume=Math.min(1,t))},oy=a4({});oV(t,oy,t=>n(52,eM=t)),ab("redrawTrigger",oy);let ox=a4(n8);oV(t,ox,t=>n(494,iZ=t)),ab("elasticityMultiplier",ox);let ob=[],ov=cy();oV(t,ov,t=>n(102,np=t));let ow=ct()||1024,oS=el(ow,ow),ok=lW(),oC=t=>Promise.resolve(iX&&iX(t,{resourceType:"image"})).then(e=>{if(!1===e)return;let{headers:n,credentials:r}=e||{};return fetch(t,{headers:n,credentials:r}).then(t=>{if(200!==t.status)throw"".concat(t.status," (").concat(t.statusText,")");return t.blob()}).then(t=>pT(t,rK,ok)).then(t=>pP(t,f))}),{imageSourceToImageData:oM=t=>N(t)?oC(t):iu(t)?new Promise(e=>e(C(t))):iz(t)||ih(t)?pT(t,rK,ok).then(t=>pP(t,f)):void 0}=e,oT=py(),{file:oP,size:oR,duration:oA,currentTime:oI,trim:oB,volume:oD,minDuration:oO,maxDuration:oz,loadState:o_,processState:oN,cropAspectRatio:oW,cropLimitToImage:oH,crop:oU,cropMinSize:oG,cropMaxSize:oX,cropRange:oZ,cropOrigin:oY,cropRectAspectRatio:oq,rotation:oK,rotationRange:oQ,targetSize:o1,flipX:o0,flipY:o2,backgroundColor:o4,backgroundImage:o5,colorMatrix:o3,convolutionMatrix:o6,gamma:o8,vignette:o7,noise:o9,decoration:at,annotation:ae,manipulation:ai,redaction:an,frame:ar,selection:ao,state:aa}=oT.stores;oV(t,oP,t=>n(396,e9=t)),oV(t,oR,t=>n(369,ei=t)),oV(t,oA,t=>n(420,iK=t)),oV(t,oI,t=>n(493,iG=t)),oV(t,oB,t=>n(417,iU=t)),oV(t,oD,t=>n(418,iY=t)),oV(t,oz,t=>n(423,i1=t)),oV(t,o_,t=>n(388,eY=t)),oV(t,oN,t=>n(387,eG=t)),oV(t,oW,t=>n(490,iD=t)),oV(t,oH,t=>n(85,i5=t)),oV(t,oU,t=>n(407,iv=t)),oV(t,oK,t=>n(372,eo=t)),oV(t,o0,t=>n(371,er=t)),oV(t,o2,t=>n(370,en=t)),oV(t,o4,t=>n(378,ey=t)),oV(t,at,t=>n(48,ee=t)),oV(t,ae,t=>n(49,ea=t)),oV(t,ai,t=>n(375,eg=t)),oV(t,an,t=>n(376,em=t)),oV(t,ar,t=>n(47,et=t)),oV(t,ao,t=>n(59,iW=t)),oV(t,aa,t=>n(479,ie=t)),ab("components",{DynamicComponentTree:pr}),ab("previewcontrols",{play:oo,pause:oa,togglePlayPause:oc,mute:od,unmute:ou,toggleMute:oh,setCurrentTime:of,getCurrentTime:om,getDuration:og,frameOffset:r8,framePeekOffset:r6,isPlaying:r7,isMuted:op});let al=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((r,o)=>{let a;if(l0(t)){lJ(t).then(t=>{let e=nt(iG)?iG:rL(t.duration,iU||[[0,1]]);lQ(t,e).then(r)});return}let l=!1;e.cancel=()=>l=!0;let s=Date.now();oM(t).then(t=>{let e=Date.now()-s;clearTimeout(a),a=setTimeout(()=>{l||r(t)},Math.max(0,n-e))}).catch(o)})},{images:as,shapePreprocessor:ac,imageScrambler:ad,imageRedactionRendering:au,willRequest:ah,willRequestResource:ap,csp:ag}=nU;oV(t,as,t=>n(416,iH=t)),oV(t,ac,t=>n(415,ij=t)),oV(t,ad,t=>n(379,ex=t)),oV(t,au,t=>n(377,e$=t)),oV(t,ah,t=>n(81,iX=t)),oV(t,ap,t=>n(93,nn=t)),oV(t,ag,t=>n(92,ni=t));let am=a5(o5,(t,e)=>{if(!t)return e(void 0);nb&&(nb.cancel(),nb=void 0),al(t,nb={cancel:y}).then(e).catch(t=>{})}),af=aa.subscribe(t=>nW.pub("update",t)),a$=a4();ab("ui",a4({})),ab("selection",ao);let av=a4(!0);oV(t,av,t=>n(95,no=t));let aw=a4(!0);oV(t,aw,t=>n(97,nl=t));let aS=a4(!0);oV(t,aS,t=>n(414,iN=t));let aC=a4(!0);oV(t,aC,t=>n(491,iO=t));let aM=a4(!0);oV(t,aM,t=>n(98,ns=t));let aT=a4();oV(t,aT,t=>n(99,nc=t));let aP=a4();oV(t,aP,t=>n(492,i_=t));let aR=a5([aP,aC],()=>void 0!==i_?i_:iO);oV(t,aR,t=>n(96,na=t));let aA=a4([0,0,0]);oV(t,aA,t=>n(56,il=t));let aE=a4([1,1,1]);oV(t,aE,t=>n(475,ep=t));let aI=cy([1,1,1]);oV(t,aI,t=>n(474,eh=t));let aL=a4();oV(t,aL,t=>n(91,ne=t));let aF=a4(),aB=a4();oV(t,aB,t=>n(51,ew=t));let aD=a4();oV(t,aD,t=>n(373,ec=t));let aO=()=>{let t=iD,e=eV(ec);t&&t===e||(oW.set(eV(ec)),l9())},az=a4(eC());oV(t,az,t=>n(80,ii=t));let a_=a4(0);oV(t,a_,t=>n(413,iB=t));let aN=a4(eC());oV(t,aN,t=>n(84,i4=t));let aW=a4();oV(t,aW,t=>n(472,t9=t));let aj=pS("(pointer: fine)",t=>t?"pointer-fine":"pointer-coarse");oV(t,aj,t=>n(394,e8=t));let aH=pS("(hover: hover)",t=>t?"pointer-hover":"pointer-no-hover");oV(t,aH,t=>n(393,e6=t));let aV=a4(!1),aU=a4(!1);oV(t,aU,t=>n(374,eu=t));let aG=a2(void 0,t=>{let e=cy(0),n=[aU.subscribe(t=>{e.set(t?1:0,{hard:!eR})}),e.subscribe(t)];return()=>n.forEach(t=>t())});oV(t,aG,t=>n(473,ed=t));let aX=a4();oV(t,aX,t=>n(478,e0=t));let aZ=a4();oV(t,aZ,t=>n(53,eR=t)),ab("isAnimated",aZ);let aY=a4(nQ);oV(t,aY,t=>n(397,it=t));let aq=a4(!1);oV(t,aq,t=>n(484,ik=t)),ab("imageIsStatic",aq);let aK=a4();oV(t,aK,t=>n(485,iC=t));let aJ=a4();oV(t,aJ,t=>n(482,iw=t));let aQ=a2(void 0,t=>{let e=a4(void 0),n=[oU.subscribe(()=>{if(!iv)return;if(ik)return e.set(ek(iv));let t=dT(iv,iw,5*n8);e.set(t)}),e.subscribe(t)];return()=>n.forEach(t=>t())}),a1=a4();oV(t,a1,t=>n(481,ix=t));let a0=a4();oV(t,a0,t=>n(483,iS=t));let a3=a4(void 0);oV(t,a3,t=>n(488,iE=t));let a6=a4(tF());oV(t,a6,t=>n(489,iI=t));let a8=(t,e)=>{if(!e||!t)return{top:0,right:0,bottom:0,left:0};let n=oi(on(e,t,$),t);return{top:Math.abs(n.top),right:Math.abs(n.right),bottom:Math.abs(n.bottom),left:Math.abs(n.left)}},a7=a4({}),a9=a5([aW,az,aN,a7],(t,e)=>{let[n,r,o,a]=t;if(!n)return e(void 0);let l=0;1!==z.length||g||"bottom"===rw||(l=o.y+o.height),e(eL(n.x+r.x,n.y+r.y+l,n.width,n.height))}),lt={left:0,right:0,top:0,bottom:0},le=a4(!1),li=a5([le,ar,a9,aU],(t,e)=>{let[n,r,o,a]=t;if(!o)return e({left:0,right:0,top:0,bottom:0});if(!n)return;let l=Math.min(o.width,o.height),s=a8({width:l,height:l},r);(tE(lt.top,4)!==tE(s.top,4)||tE(lt.bottom,4)!==tE(s.bottom,4)||tE(lt.right,4)!==tE(s.right,4)||tE(lt.left,4)!==tE(s.left,4))&&(lt=s,e(s))});oV(t,li,t=>n(405,im=t));let ln=a5([le,li],(t,e)=>{let[n,r]=t;if(!n)return e(!1);e(Object.values(r).some(t=>t>0))});oV(t,ln,t=>n(406,i$=t));let lr=a5([le,aW,ln,li],(t,e)=>{let[n,r,o,a]=t;if(r){if(!n||!o)return e({...r});e(eL(r.x+a.left,r.y+a.top,r.width-a.left-a.right,r.height-a.top-a.bottom))}}),lo=a5([a9,ln,li],(t,e)=>{let[n,r,o]=t;return n?r?void e(eL(n.x+o.left,n.y+o.top,n.width-o.left-o.right,n.height-o.top-o.bottom)):e(n):e(void 0)});oV(t,lo,t=>n(50,es=t));let la=a5([aq,oR,oK],(t,e)=>{let[n,r,o]=t;if(!n||!r)return e(void 0);e(eX(eT(r),o))}),ll=a5([la],(t,e)=>{let[n]=t;if(!n)return e(void 0);e(e5(eA(n)))});oV(t,ll,t=>n(409,iP=t));let ls=a5([lo,oU,ll,aY],(t,e)=>{let[n,r,o,a]=t,l=!!(iC||iw);if(!n||!r||l)return;let{width:s,height:c}=o||r,d=Math.min(n.width/s,n.height/c);e(a?d:Math.min(1,d))});oV(t,ls,t=>n(408,iT=t)),ab("imageStaticVisualCorners",a5([aq,oR,oK,lo,aW,ls],(t,e)=>{let[n,r,o,a,l,s]=t;if(!n||!a||!l||!r)return e(void 0);let c=e5(eD(eT(r),s)),d=eZ(a,c);c.x=d.x,c.y=d.y,e(eX(c,o))}));let lc=a4(void 0);oV(t,lc,t=>n(411,iL=t));let ld=a5([oU,lo],t=>{let[e,n]=t;if(n&&e)return Math.min(n.width/e.width,n.height/e.height)}),lu=a5([oU,a1],t=>{let[e,n]=t;return e&&n?Math.min(e.width/n.width,e.height/n.height):1});oV(t,lu,t=>n(101,nu=t));let lh=a5([lc,lu],t=>{let[e,n]=t;return e&&n?n*e:1});oV(t,lh,t=>n(487,iR=t));let lp=a4(tF());oV(t,lp,t=>n(410,iA=t));let lg=a4({scalar:iR,translation:iA}),lf=()=>{lg.set({scalar:void 0,translation:tF()})},l$=a2(void 0,t=>{let e=cy(void 0,{precision:1e-4}),n=1===dJ()?t=>e2(t,Math.round):tf,r=()=>{if(!ix)return;let t=eu||!e0;if(ik){let n=ek(ix);return eB(n,iI),eB(n,es),e.set(n,{hard:t})}let r=dT(ix,iE,gs*n8);r.width<0&&(r.width=0,r.x=ix.x),r.height<0&&(r.height=0,r.y=ix.y),eB(r,es),eB(r,iA),eD(r,iR),t||n(r),e.set(r,{hard:t})},o=[lo.subscribe(r),a1.subscribe(r),lh.subscribe(r),lp.subscribe(r),ar.subscribe(r),e.subscribe(t)];return()=>o.forEach(t=>t())});oV(t,l$,t=>n(58,ig=t));let ly=a4(1);oV(t,ly,t=>n(480,iy=t));let lx=()=>{if(!iv||!es)return;let t=e_(ek(iv),iT||1);eB(t,eZ(es,e_(ek(iP),iT)));let e=Math.min(1,t9.width/t.width,t9.height/t.height);ly.set(e),eD(t,e),eJ(t,{...t9,x:0,y:0}),a1.set(t)},lb=a5([lo,ls,oU,oR],(t,e)=>{let[n,r,o,a]=t;n&&(o||a)&&e(lv(n,r||1,o||a))});oV(t,lb,t=>n(100,nd=t));let lv=(t,e,n)=>n.width<=t.width&&n.height<=t.height?eZ(t,e_(ek(n),e)):eQ(t,eV(n)),lS=t=>{if(g&&nS&&eH(nS,t)&&nk===iT)return;if(ik)return lx();nS=t,nk=iT;let e=lv(t,iT,iv||ei);a1.set(e)},lk=!1,lC=ls.subscribe(t=>{!lk&&void 0!==t&&iv&&(lS(es),lk=!0)}),lM=lo.subscribe(t=>{t&&void 0!==iT&&iv&&lS(t)}),lT=aq.subscribe(t=>{!t&&es&&lS(es)}),lP=a0.subscribe(t=>{if(!t){nC=void 0,oJ(aK,iC=void 0,iC);return}nC=iM;let e=ek(iv);aK.set(e)}),lR=a1.subscribe(t=>{if(!t||!iS)return;let e=eW(ek(t),iS);eN(e,nC);let n=ej(ek(iC),e);oU.set(n)}),lA=oU.subscribe(t=>{if(!t||!ix)return;if(ik){iS||lx();return}if(eu||iS||iw)return;let e=eV(ix),n=eV(t);if(tE(e,6)===tE(n,6))return;let{width:r,height:o}=iv,a=Math.min(es.width/r,es.height/o),l=el(t.width*a,t.height*a),s=(ix.width-l.width)*.5,c=(ix.height-l.height)*.5,d=eL(Math.max(0,Math.min(es.width-l.width,ix.x+s)),Math.max(0,Math.min(es.height-l.height,ix.y+c)),l.width,l.height);a1.set(d)}),lE=a5([ls,oU,a1,aq],(t,e)=>{let[n,r,o,a]=t;if(n&&r&&o){if(a)return e(iy);e(Math.max(o.width/r.width,o.height/r.height)/n)}}),lI=a5([ls,lE],(t,e)=>{let[n,r]=t;r&&e(n*r)});oV(t,lI,t=>n(486,iM=t));let lL={left:0,right:0,top:0,bottom:0},lF=a5([ar,a1],(t,e)=>{let[n,r]=t;if(!r)return e(lL);let o=a8(r,n);(tE(lL.top,4)!==tE(o.top,4)||tE(lL.bottom,4)!==tE(o.bottom,4)||tE(lL.right,4)!==tE(o.right,4)||tE(lL.left,4)!==tE(o.left,4))&&(lL=o,e(o))}),lB=a5([lF],(t,e)=>{let[n]=t;e(Object.values(n).some(t=>t>0))}),lD=cy(.075,{stiffness:.03,damping:.4,precision:.001}),lO=a5([aI,aA,lD,l$,lh,ar,lB,lF,ln],(t,e)=>{let[n,r,o,a,l,s,c,d,u]=t;if(!a||g)return e([]);let{x:h,y:p,width:m,height:f}=a;h+=.5,p+=.5,m-=.5,f-=.5;let $=[];if(s){if(c){let{left:t,right:e,top:n,bottom:o}=d;t*=l,e*=l,n*=l,o*=l;let a=pO(r);$.push({x:h-t-.5,y:p-n-.5,width:m+t+e+1,height:f+n+o+1,strokeWidth:1,strokeColor:a?[1,1,1,.125]:[0,0,0,.075],opacity:u?1:.5})}let t=pO(n);s&&s.frameColor&&pO(s.frameColor)||t||($.push({x:h-1,y:p-1,width:m+2,height:f+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:o}),$.push({x:h+1,y:p+1,width:m-2,height:f-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:o}))}e([...$,{x:h,y:p,width:m,height:f,strokeWidth:1,strokeColor:n,opacity:o}])}),lz=a4([]);oV(t,lz,t=>n(399,ir=t));let l_=a5([lO,lz],(t,e)=>{let[n,r]=t;e([...n,...r])});oV(t,l_,t=>n(94,nr=t));let lN=cy(0,{precision:.001});oV(t,lN,t=>n(401,ia=t));let lj=cy();oV(t,lj,t=>n(404,id=t));let lH=cy();oV(t,lH,t=>n(403,ic=t));let lV=cy();oV(t,lV,t=>n(402,is=t));let lU=cy();oV(t,lU,t=>n(400,io=t));let lG=a4(!1);oV(t,lG,t=>n(386,eU=t));let lX=a4();oV(t,lX,t=>n(389,eq=t));let lZ=a5([lG,lX],(t,e)=>{let[r,o]=t;if(!r||!o){e(void 0);return}if(nM&&(nM.cancel(),n(292,nM=void 0)),os(o))return e(F(o));let a=ss.length?0:eR?250:0;n(292,nM={cancel:y}),al(o,nM,a).then(e).catch(t=>{oJ(o_,eY.error=t,eY)}).finally(()=>{n(292,nM=void 0)})});nz(),nz=oj(lZ,t=>n(368,nO=t));let{imagePreviewCurrent:lY}=e,lq=a4({});oV(t,lq,t=>n(391,e4=t));let lK=a4([]);oV(t,lK,t=>n(86,i3=t));let l1=()=>{lp.set(tF()),lc.set(void 0),lf(),lK.set([])},l2=a5([lo,aD,oR,aQ,a1,lI,oK,o0,o2,lh,lp,aV],(t,e)=>{let[n,r,o,a,l,s,c,d,u,h,p,g]=t;if(!n||!l)return;let m=sC(n,r,o,a,l,h,p,s,c,d,u);g||I(m),e(m)});oV(t,l2,t=>n(392,e3=t));let l4=a5([o3,o6,o8,o7,o9],(t,e)=>{let[n,r,o,a,l]=t,s=n&&Object.keys(n).map(t=>n[t]).filter(Boolean);e({gamma:o||void 0,vignette:a||void 0,noise:l||void 0,convolutionMatrix:r||void 0,colorMatrix:s&&s.length&&oE(s)})}),l5=pk(),l3=a4({});oV(t,l3,t=>n(380,eS=t)),ab("env",l3);let l6=dJ(),l8=a2(l6,t=>{let e=()=>t(dJ()),n=matchMedia("(resolution: ".concat(l6,"dppx)"));return n.addListener(e),()=>n.removeListener(e)});oV(t,l8,t=>n(57,ip=t));let l7=pC(()=>ie,t=>{oJ(aa,ie=t,ie),az.set(ii)},{willUndo:()=>!sr()||(sn(),!1)});nN(),nN=oj(l7,t=>n(398,n_=t));let l9=()=>{let t=e2(eQ({x:0,y:0,...ei},ie.cropAspectRatio),Math.round),e=rl({...ie,rotation:0,crop:t},ie),n=[e];JSON.stringify(e)!==JSON.stringify(ie)&&n.push({...ie}),l7.set(n)},st=o_.subscribe(t=>{t&&t.complete&&l9()}),se=()=>n9().then(t=>t&&l7.revert()),si=[ae,at,an,ai],sn=()=>{si.forEach(t=>{t.update(t=>t.length&&rc(t[t.length-1])?t.slice(0,-1):t)})},sr=()=>O.filter(t=>t.length).some(t=>rc(t[t.length-1])),so=a4(!1);oV(t,so,t=>n(381,eP=t));let sa=()=>{oJ(so,eP=!0,eP),rt().then(t=>{let e;if(!t){oJ(so,eP=!1,eP);return}e=sN.subscribe(t=>{1===t&&(e&&e(),nj("processImage"))})})},sl=oN.subscribe(t=>{if(!t){oJ(so,eP=!1,eP);return}oJ(so,eP=!0,eP);let{complete:e,abort:n}=t;(e||n)&&oJ(so,eP=!1,eP)}),ss=pD();oV(t,ss,t=>n(55,eK=t));let sc=a5([ss],(t,e)=>{let[n]=t;if(!n.length)return e();let{origin:r,translation:o,rotation:a,scale:l}=n[0];e({origin:r,translation:o,rotation:a,scale:l})}),sd=a4();oV(t,sd,t=>n(395,e7=t));let su=[],sh=a4(),sp=a4(),sg=a5([lc,sp,ls,ld],t=>{let[e,n,r,o]=t;return e||(n||r<1?o:1)}),sm={...nU,imageFile:oP,imageSize:oR,mediaDuration:oA,mediaMinDuration:oO,mediaMaxDuration:oz,mediaTrim:oB,imageBackgroundColor:o4,imageBackgroundImage:o5,imageCropAspectRatio:oW,imageCropMinSize:oG,imageCropMaxSize:oX,imageCropLimitToImage:oH,imageCropRect:oU,imageCropRectOrigin:oY,imageCropRectSnapshot:aK,imageCropRectAspectRatio:oq,imageCropRange:oZ,imageRotation:oK,imageRotationRange:oQ,imageFlipX:o0,imageFlipY:o2,imageOutputSize:o1,imageColorMatrix:o3,imageConvolutionMatrix:o6,imageGamma:o8,imageVignette:o7,imageNoise:o9,imageManipulation:ai,imageDecoration:at,imageAnnotation:ae,imageRedaction:an,imageFrame:ar,imagePreview:lZ,imagePreviewSource:lX,imageTransforms:l2,imagePreviewModifiers:lq,history:l7,animation:aX,pixelRatio:l8,elasticityMultiplier:n8,scrollElasticity:gd,rangeInputElasticity:5,redrawTrigger:oy,pointerAccuracy:aj,pointerHoverable:aH,env:l3,rootRect:aD,stageRect:lo,stageRectBase:a9,stageRecenter:a7,stageScalar:ls,stagePadding:li,stagePadded:ln,presentationScalar:lI,imagePreviewUpscale:sp,utilRect:aW,utilRectPadded:lr,allowPlayPause:r5,allowPan:av,allowZoom:aw,allowZoomControls:aS,enableZoomInput:aM,enablePanInput:aC,enablePanInputStatus:aR,imageSelectionMultiTouching:sh,rootBackgroundColor:aA,rootForegroundColor:aE,rootLineColor:aI,rootColorSecondary:aF,imageOutlineOpacity:lD,utilTools:sd,imageSelectionPan:lp,imageSelectionZoom:lc,imageSelectionZoomCurrent:sg,imageSelectionStageFitScalar:ld,imageSelectionStoredState:lg,imageOverlayMarkup:lz,interfaceImages:lK,isInteracting:aU,isTransformingImage:aV,isInteractingFraction:aG,imageCropRectIntent:aJ,imageCropRectPresentation:aQ,imageSelectionRect:a1,imageSelectionRectIntent:a3,imageSelectionRectPresentation:l$,imageSelectionRectSnapshot:a0,imageScalar:lE,imageTransformsInterpolated:sc,imageEffects:l4};delete sm.image;let sf="util-".concat(Z()),s$=[],sy=(t,e,n,r)=>{let o=e.filter(e=>{let[n]=e;return t.includes(n)}).filter(t=>{let[e,{isSupported:o}]=t;return o({...r,...n[e]})}).map(t=>{let[e,n]=t;return[e,n.Component]});return lw(o,s$,(t,e)=>t[0]===e[0]&&t[1]===e[1])?s$:(s$=o,o)},sx=t=>_.find(e=>{let[n]=e;return t===n}),sb=()=>_[0][0],sv=[],sw=t=>{n(62,sv=sv.concat(t))},sS=t=>{n(62,sv=sv.filter(e=>e!==t))},sk=(t,e)=>{n(298,V[t]=e,V)},sM=iV(),sT=(t,e)=>ec?"auto"===e?t.width>t.height?"landscape":"portrait":"horizontal"===e?t.width<500?"portrait":"landscape":"vertical"===e?t.height<400?"landscape":"portrait":void 0:"landscape",sP=t=>hB(tx.getPropertyValue(t)),sA=(t,e,n)=>{let r=tx.getPropertyValue(t);r=n?n(r):/^[0-9]+$/.test(r)?parseFloat(r):void 0,e.set(r,{hard:!eR})},sE=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=sP(t);r&&0!==r[3]&&(n||(r.length=3),e.set(r,{hard:!eR}))},sI=a4();oV(t,sI,t=>n(87,i6=t));let sL=a4();oV(t,sL,t=>n(88,i8=t));let sF=a4();oV(t,sF,t=>n(89,i7=t));let sB=cy(0,{damping:.9});oV(t,sB,t=>n(90,i9=t));let sD=()=>{sE("color",aE),r_?sE("--color-background",aA):sE("background-color",aA),sE("outline-color",aI),sE("--color-primary",aL),sE("--color-secondary",aF),sE("--grid-color-even",sL,!0),sE("--grid-color-odd",sF,!0),sA("--grid-size",sI),sA("--editor-inset-top",a_,t=>parseInt(t,10))},sO=a5([l2,l4,o4,am],t=>{let[e,n,r,o]=t;return e&&{...e,...n,backgroundColor:r,backgroundImage:o}});oV(t,sO,t=>n(390,e1=t));let sz=()=>{let t=ss.length?void 0:{resize:1.05},e=pB(nO,ei,t);ss.unshift(e),s_(e1)},s_=t=>{ss.forEach((e,n)=>{e.set({...t,opacity:0===n?1:0,resize:1},e0)})},sN=c$(void 0,{duration:500});oV(t,sN,t=>n(54,eO=t));let sW=a4(!1);oV(t,sW,t=>n(385,ez=t));let sj=cy(void 0,{stiffness:.1,damping:.7,precision:.25});oV(t,sj,t=>n(82,i0=t));let sH=cy(0,{stiffness:.1,precision:.05});oV(t,sH,t=>n(83,i2=t));let sV=cy(0,{stiffness:.02,damping:.5,precision:.25});oV(t,sV,t=>n(383,eI=t));let sU=cy(void 0,{stiffness:.02,damping:.5,precision:.25});oV(t,sU,t=>n(384,eF=t));let sG=cy(void 0,{stiffness:.02,damping:.5,precision:.25});oV(t,sG,t=>n(382,eE=t));let sX=()=>{nj("abortLoadImage")},sZ=()=>{nj("abortProcessImage"),oJ(so,eP=!1,eP)},sY=t=>{t.target&&"true"===t.target.dataset.touchScroll||t.preventDefault()},sq=l5?t=>{let e=t.touches?t.touches[0]:t;e.pageX>20&&e.pageX<window.innerWidth-20||sY(t)}:y,sK=a4([]);oV(t,sK,t=>n(476,eb=t)),ab("keysPressed",sK);let sJ=t=>{!(!t||nh(t)&&!pE(t))&&(nh(t)||/^http/.test(t))&&nj("loadImage",t)},sQ=t=>{t&&sJ(t)},s1=(t,e,r,o)=>{if(!e)return;let a={dataSizeScalar:r};o&&o[3]>0&&(a.backgroundColor=[...o]),e(t,a).then(t=>{nD&&R(nD),n(296,nD=t)})},s0=[],s2=a4();ab("rootPortal",s2),ab("rootRect",aD);let s4=()=>({foregroundColor:[...ep],lineColor:[...eh],utilVisibility:{...V},isInteracting:eu,isInteractingFraction:ed,rootRect:ek(ec),stageRect:ek(es),manipulationShapesDirty:cm,annotationShapesDirty:cl,decorationShapesDirty:cu,frameShapesDirty:cp}),s5=(t,e,n)=>r3(t,el(Math.round(e.width/n),Math.round(e.height/n))),s3=(t,e,n)=>(t._translate=tO(e),t._scale=n,t),s6=t=>{let e=[];return t.forEach(t=>e.push(s8(t))),e.filter(Boolean)},s8=t=>(ri(t)?t.points=[tB(t.x1,t.y1),tB(t.x2,t.y2)]:rr(t)&&(!t.backgroundColor||0===t.backgroundColor[3])&&(n7(t)&&(t.width=5,t.height=t.lineHeight),t.strokeWidth=1,t.strokeColor=[1,1,1,.5],t.backgroundColor=[0,0,0,.1]),t),s7=[],s9=[],ci=[],cn=[],cr=[],co={},ca=(t,e,n,r,o,a,l)=>{let{manipulationShapesDirty:s,annotationShapesDirty:c,decorationShapesDirty:d,frameShapesDirty:u,selectionRect:h,scale:p}=t,g=nB!==p,m=g||!eH(co,h);m&&(nB=p,co=h),s&&(ci=e.filter(ra).map(n1).map(t=>r3(t,ei))),(c||n!==ea)&&(s7=n.filter(ra).map(n1).sort((t,e)=>t.alwaysOnTop?1:e.alwaysOnTop?-1:0).map(t=>r3(t,ei))),(g||cc||c||n!==ea)&&(s9=s6(s7.map(t=>$(t,{flipX:er,flipY:en,rotation:eo,scale:p,context:eT(ei)})).flat())),(d||r!==ee||m)&&(cn=s6(r.filter(ra).map(n1).sort((t,e)=>t.alwaysOnTop?1:e.alwaysOnTop?-1:0).map(t=>s5(t,h,p)).map(t=>$(t,{context:h})).flat().map(t=>s3(t,h,p)))),(u||a!==et||m)&&(cr=a?s6([a].map(n1).map(t=>s5(t,h,p)).map($).flat().map(t=>s3(t,h,p))):[]);let f=s6(o.filter(ra));return{manipulationShapesDirty:s,manipulationShapes:ci,annotationShapesDirty:c,annotationShapes:s9,decorationShapesDirty:d,decorationShapes:cn,frameShapesDirty:u,frameShapes:cr,interfaceShapes:f,selectionShapes:l.map(n1).map(t=>r3(t,ei))}},cl=!0,cs=()=>n(63,cl=!0),cc=!0,cd=()=>n(64,cc=!0),cu=!0,ch=()=>n(65,cu=!0),cp=!0,cg=()=>n(66,cp=!0),cm=!0,cf=()=>n(67,cm=!0);return ay(()=>{oa(),nO&&N(nO.src)&&/^blob:/.test(nO.src)&&URL.revokeObjectURL(nO.src),af(),lM(),lC(),lT(),lP(),lR(),lA(),st(),sl(),aj.destroy(),aH.destroy(),oT.destroy(),ss.clear(),s7.length=0,s9.length=0,ci.length=0,cn.length=0,cr.length=0;try{n(235,lY=void 0),n(293,nA=void 0)}catch(t){}}),t.$$set=t=>{"class"in t&&n(236,nH=t.class),"layout"in t&&n(237,nV=t.layout),"stores"in t&&n(238,nU=t.stores),"locale"in t&&n(3,nG=t.locale),"id"in t&&n(4,nX=t.id),"util"in t&&n(239,nZ=t.util),"utils"in t&&n(240,nY=t.utils),"animations"in t&&n(241,nq=t.animations),"disabled"in t&&n(242,nK=t.disabled),"status"in t&&n(234,nJ=t.status),"previewUpscale"in t&&n(243,nQ=t.previewUpscale),"previewPad"in t&&n(244,n0=t.previewPad),"previewMaskOpacity"in t&&n(5,n2=t.previewMaskOpacity),"previewImageDataMaxSize"in t&&n(245,n4=t.previewImageDataMaxSize),"previewImageTextPixelRatio"in t&&n(6,n5=t.previewImageTextPixelRatio),"markupMaskOpacity"in t&&n(7,n3=t.markupMaskOpacity),"zoomMaskOpacity"in t&&n(246,n6=t.zoomMaskOpacity),"elasticityMultiplier"in t&&n(8,n8=t.elasticityMultiplier),"willRevert"in t&&n(247,n9=t.willRevert),"willProcessImage"in t&&n(248,rt=t.willProcessImage),"willRenderCanvas"in t&&n(9,re=t.willRenderCanvas),"willRenderToolbar"in t&&n(249,rn=t.willRenderToolbar),"willRenderUtilTabs"in t&&n(250,ro=t.willRenderUtilTabs),"willSetHistoryInitialState"in t&&n(251,rl=t.willSetHistoryInitialState),"enableButtonExport"in t&&n(252,rs=t.enableButtonExport),"enableButtonRevert"in t&&n(253,rd=t.enableButtonRevert),"enableNavigateHistory"in t&&n(254,ru=t.enableNavigateHistory),"enableToolbar"in t&&n(10,rh=t.enableToolbar),"enableUtils"in t&&n(255,rp=t.enableUtils),"enableButtonClose"in t&&n(256,rg=t.enableButtonClose),"enableDropImage"in t&&n(257,rm=t.enableDropImage),"enablePasteImage"in t&&n(258,rf=t.enablePasteImage),"enableBrowseImage"in t&&n(259,r$=t.enableBrowseImage),"enableTransparencyGrid"in t&&n(11,ry=t.enableTransparencyGrid),"layoutDirectionPreference"in t&&n(260,rx=t.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in t&&n(261,rb=t.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in t&&n(262,rv=t.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in t&&n(263,rw=t.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in t&&n(264,rS=t.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in t&&n(265,rk=t.layoutVerticalControlTabsPreference),"textDirection"in t&&n(12,rC=t.textDirection),"markupEditorZoomLevel"in t&&n(266,rM=t.markupEditorZoomLevel),"markupEditorZoomLevels"in t&&n(13,rT=t.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in t&&n(14,rP=t.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in t&&n(15,rR=t.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in t&&n(16,rA=t.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in t&&n(267,rE=t.markupEditorInteractionMode),"muteAudio"in t&&n(268,rI=t.muteAudio),"willSetMediaInitialTimeOffset"in t&&n(269,rL=t.willSetMediaInitialTimeOffset),"enablePan"in t&&n(17,rF=t.enablePan),"enableZoom"in t&&n(18,rB=t.enableZoom),"enableZoomControls"in t&&n(270,rD=t.enableZoomControls),"enableZoomInput"in t&&n(19,rO=t.enableZoomInput),"enablePanInput"in t&&n(271,rz=t.enablePanInput),"enableCanvasAlpha"in t&&n(20,r_=t.enableCanvasAlpha),"enablePanLimit"in t&&n(21,rN=t.enablePanLimit),"panLimitGutterScalar"in t&&n(22,rW=t.panLimitGutterScalar),"pan"in t&&n(272,rj=t.pan),"zoomPresetOptions"in t&&n(23,rH=t.zoomPresetOptions),"zoomAdjustStep"in t&&n(24,rV=t.zoomAdjustStep),"zoomAdjustFactor"in t&&n(25,rU=t.zoomAdjustFactor),"zoomAdjustWheelFactor"in t&&n(26,rG=t.zoomAdjustWheelFactor),"zoomLevel"in t&&n(0,rX=t.zoomLevel),"fixScrollDirection"in t&&n(273,rZ=t.fixScrollDirection),"imagePreviewSrc"in t&&n(276,rq=t.imagePreviewSrc),"imageOrienter"in t&&n(277,rK=t.imageOrienter),"pluginComponents"in t&&n(278,rJ=t.pluginComponents),"pluginOptions"in t&&n(27,rQ=t.pluginOptions),"root"in t&&n(2,r2=t.root),"imageSourceToImageData"in t&&n(28,oM=t.imageSourceToImageData),"imagePreviewCurrent"in t&&n(235,lY=t.imagePreviewCurrent)},t.$$.update=()=>{if(33554432&t.$$.dirty[8]&&rY.set(rZ),8&t.$$.dirty[0]&&n(350,r=!!nG),1&t.$$.dirty[0]|262144&t.$$.dirty[8]&&n(0,rX=null===rX?rM:rX),2&t.$$.dirty[0]|1073741824&t.$$.dirty[8]){let t=!1;rJ.forEach(e=>{let[r]=e;r0[r]||(n(1,r0[r]={},r0),t=!0)}),t&&n(290,ob=[...rJ])}if(8388608&t.$$.dirty[7]|2048&t.$$.dirty[9]|512&t.$$.dirty[11]&&n(348,z=r&&ob.length?nY||ob.map(t=>{let[e]=t;return e}):[]),134217728&t.$$.dirty[0]|2048&t.$$.dirty[9]|128&t.$$.dirty[11]|16777216&t.$$.dirty[12]&&n(349,_=sy(z,ob,rQ,{src:e9})),256&t.$$.dirty[11]&&n(302,W=_.length),8&t.$$.dirty[0]|8388608&t.$$.dirty[9]|128&t.$$.dirty[11]&&n(347,j=W&&z.map(t=>{let e=sx(t);if(e)return{id:t,view:e[1],tabIcon:nG["".concat(t,"Icon")],tabLabel:nG["".concat(t,"Label")]}}).filter(Boolean)||[]),64&t.$$.dirty[11]&&n(367,o=!!j.find(t=>"trim"===t.id)),201326592&t.$$.dirty[11]|131072&t.$$.dirty[13]&&n(301,a=!!(iK&&nO&&o)),4194304&t.$$.dirty[7]|8388608&t.$$.dirty[9]&&n(43,H=W&&nZ&&"string"==typeof nZ&&sx(nZ)?nZ:W>0?sb():void 0),4096&t.$$.dirty[1]|4194304&t.$$.dirty[9]&&a&&H&&oa(),4194304&t.$$.dirty[9]|134217728&t.$$.dirty[11]&&(a?(nO.addEventListener("play",ot),nO.addEventListener("pause",ot)):nO&&"video"===nO.nodeName&&(nO.removeEventListener("play",ot),nO.removeEventListener("pause",ot))),4194304&t.$$.dirty[9]&&a&&r9(),589824&t.$$.dirty[13]&&oe(iQ||iq),65536&t.$$.dirty[13]&&n(365,l=iq&&tE(iq,6)),1196032&t.$$.dirty[13]&&n(363,s=iU||[[0,Math.min(iK,i1)/iK]]),4194304&t.$$.dirty[11]&&(c=s[0][0]),4194304&t.$$.dirty[11]&&(d=s[s.length-1][1]),4194304&t.$$.dirty[11]&&n(366,u=s.map(t=>{let[e,n]=t;return[tE(e,6),tE(n,6)]})),50331648&t.$$.dirty[11]&&n(364,h=u.findIndex(t=>{let[e,n]=t;return l>=e&&l<=n})),58720256&t.$$.dirty[11]&&(p=-1===h&&u.findIndex((t,e,n)=>{let r=n[e-1];return r?l<=t[0]&&l>=r[1]:l<=t[0]})),1048576&t.$$.dirty[8]&&op.set(rI),134217728&t.$$.dirty[11]|262144&t.$$.dirty[13]&&(nO&&iJ?od():ou()),4194304&t.$$.dirty[9]|65536&t.$$.dirty[13]&&a&&oI.set(og()*iq),134217728&t.$$.dirty[11]|32768&t.$$.dirty[13]&&nO&&o$(iY),256&t.$$.dirty[0]&&oJ(ox,iZ=n8,iZ),1048576&t.$$.dirty[7]&&n(359,g="overlay"===nV),128&t.$$.dirty[8]|262144&t.$$.dirty[11]&&n(45,m=rp&&!g),134217730&t.$$.dirty[0]&&rQ&&Object.entries(rQ).forEach(t=>{let[e,r]=t;Object.entries(r).forEach(t=>{let[r,o]=t;r0[e]&&n(1,r0[e][r]=o,r0)})}),512&t.$$.dirty[13]&&n(360,v=!iF),16777216&t.$$.dirty[7]|1572864&t.$$.dirty[11]&&oJ(aZ,eR="always"===nq?x:"never"!==nq&&x&&v,eR),4194304&t.$$.dirty[1]|33554432&t.$$.dirty[7]&&ov.set(nK?1:0,{hard:!eR}),268435456&t.$$.dirty[7]&&(f=n4?ef(n4,oS):oS),8192&t.$$.dirty[13]&&oT.update(iH[0]),4096&t.$$.dirty[13]&&($=ij?(t,e)=>ij(t,{flipX:void 0,flipY:void 0,rotation:void 0,...e,isPreview:!0}):tf),268435456&t.$$.dirty[1]&&Array.isArray(iW)&&nj("selectionchange",[...iW]),4194304&t.$$.dirty[8]|2048&t.$$.dirty[13]&&aT.set(iN&&rD),8912896&t.$$.dirty[8]&&aP.set("pan"===rE||rz),1048576&t.$$.dirty[1]&&ew&&aD.set(eL(ew.x,ew.y,ew.width,ew.height)),262144&t.$$.dirty[11]|65538&t.$$.dirty[12]&&ec&&g&&eY&&eY.complete&&aO(),128&t.$$.dirty[11]&&n(46,Y=z.length>1),32768&t.$$.dirty[1]&&!Y&&az.set(eC()),1024&t.$$.dirty[0]|1024&t.$$.dirty[13]&&!rh&&aN.set(eL(0,iB,0,0)),1048576&t.$$.dirty[11]|4&t.$$.dirty[12]&&n(362,b=!eu&&x),1048576&t.$$.dirty[1]&&n(303,t2=ew&&ew.width>0&&ew.height>0),8&t.$$.dirty[0]|25165824&t.$$.dirty[9]&&n(40,t4=t2&&nG&&!!W),512&t.$$.dirty[1]&&setTimeout(()=>n(291,nv=t4),1),16777216&t.$$.dirty[7]|4096&t.$$.dirty[9]|2621440&t.$$.dirty[11]&&oJ(aX,e0="always"===nq?b:"never"!==nq&&b&&nv&&v,e0),67108864&t.$$.dirty[7]|262144&t.$$.dirty[11]&&aY.set(nQ||g),134217728&t.$$.dirty[7]&&le.set(n0),16777216&t.$$.dirty[8]&&rj&&lp.set(rj),4&t.$$.dirty[0]|288&t.$$.dirty[13]&&r2&&(r2.dispatchEvent(pb("markupzoom",iL)),r2.dispatchEvent(pb("zoom",nt(iL)?iL:iT))),4&t.$$.dirty[0]|128&t.$$.dirty[13]&&r2&&(r2.dispatchEvent(pb("markuppan",iA)),r2.dispatchEvent(pb("pan",iA))),16&t.$$.dirty[13]&&iv&&lf(),64&t.$$.dirty[13]&&iP&&lx(),4198400&t.$$.dirty[1]&&H&&lD.set(.075,{hard:!eR}),536870912&t.$$.dirty[7]&&n(357,w=n6),12&t.$$.dirty[13]&&n(358,S=i$?-Math.max(...Object.values(im)):0),138936320&t.$$.dirty[1]|196608&t.$$.dirty[11]&&ig){let t=ig.x-es.x,e=es.x+es.width-(ig.x+ig.width),n=Math.min(t,ig.y-es.y,e,es.y+es.height-(ig.y+ig.height));lN.set(n>S?0:Math.min(w,Math.abs(n/64)),{hard:!eR})}if(67108864&t.$$.dirty[1]&&n(356,k=.55/ip),4718592&t.$$.dirty[1]|32768&t.$$.dirty[11]&&es&&lj.set({x:0,y:es.y,width:es.x<64?0:es.x,height:es.height+k},{hard:!eR}),4718592&t.$$.dirty[1]|32768&t.$$.dirty[11]|2&t.$$.dirty[12]&&es&&lH.set({x:0,y:0,width:ec.width,height:es.y+k},{hard:!eR}),4718592&t.$$.dirty[1]|32768&t.$$.dirty[11]|2&t.$$.dirty[12]&&es){let t=es.x+es.width,e=ec.width-(es.x+es.width);e<64&&(t+=e,e=0),lV.set({x:t,y:es.y,width:e,height:es.height+k},{hard:!eR})}if(4718592&t.$$.dirty[1]|2&t.$$.dirty[12]&&es&&lU.set({x:0,y:es.y+es.height,width:ec.width,height:ec.height-(es.y+es.height)},{hard:!eR}),33554432&t.$$.dirty[1]|536870912&t.$$.dirty[12]|2&t.$$.dirty[13]&&n(352,M=id&&{id:gc,backgroundColor:il,opacity:ia,...id}),33554432&t.$$.dirty[1]|536870912&t.$$.dirty[12]|1&t.$$.dirty[13]&&n(355,T=ic&&{id:gc,backgroundColor:il,opacity:ia,...ic}),33554432&t.$$.dirty[1]|1610612736&t.$$.dirty[12]&&n(354,P=is&&{id:gc,backgroundColor:il,opacity:ia,...is}),33554432&t.$$.dirty[1]|805306368&t.$$.dirty[12]&&n(353,A=io&&{id:gc,backgroundColor:il,opacity:ia,...io}),30720&t.$$.dirty[11]&&n(351,E=[T,P,A,M].filter(Boolean)),1024&t.$$.dirty[11]|134217728&t.$$.dirty[12]&&E&&ir&&lz.update(t=>[...t.filter(t=>t.id!==gc),...E]),268435456&t.$$.dirty[8]|16777216&t.$$.dirty[12]&&lX.set(rq||e9||void 0),4&t.$$.dirty[0]|262144&t.$$.dirty[7]|134217728&t.$$.dirty[11]&&(n(235,lY=nO),nO&&r2.dispatchEvent(pb("loadpreview",lY))),131072&t.$$.dirty[12]&&eq&&l1(),67108864&t.$$.dirty[12]&&n(307,B=n_.index>0),67108864&t.$$.dirty[12]&&n(306,D=n_.index<n_.length-1),393216&t.$$.dirty[1]|24&t.$$.dirty[12]&&(O=[ea,ee,em,eg]),8&t.$$.dirty[1]&&sh.set(nR),33554432&t.$$.dirty[12]&&sp.set(it),4096&t.$$.dirty[1]&&a$.set(H),524288&t.$$.dirty[9]|64&t.$$.dirty[11]&&n(298,V=j.reduce((t,e)=>(t[e.id]=V&&V[e.id]||0,t),{})),4096&t.$$.dirty[1]&&n(79,U={name:sf,selected:H}),64&t.$$.dirty[11]&&n(329,G=j.map(t=>({id:t.id,icon:t.tabIcon,label:t.tabLabel}))),64&t.$$.dirty[11]&&n(78,X=j.map(t=>t.id)),524288&t.$$.dirty[7]&&n(77,q=cX(["PinturaRoot","PinturaRootComponent",nH])),2&t.$$.dirty[12]&&n(343,K=ec&&(ec.width>1e3?"wide":ec.width<600?"narrow":void 0)),2&t.$$.dirty[12]&&n(330,J=ec&&(ec.width<=320||ec.height<=460)),2&t.$$.dirty[12]&&n(342,Q=ec&&(ec.height>1e3?"tall":ec.height<600?"short":void 0)),4&t.$$.dirty[0]&&n(309,te=r2&&r2.parentNode&&r2.parentNode.classList.contains("PinturaModal")),1&t.$$.dirty[1]|1073741824&t.$$.dirty[9]|2&t.$$.dirty[12]&&n(335,ti=te&&ec&&nT>ec.width),2&t.$$.dirty[1]|1073741824&t.$$.dirty[9]|2&t.$$.dirty[12]&&n(334,tn=te&&ec&&nP>ec.height),50331648&t.$$.dirty[10]&&n(336,tr=ti&&tn),1048576&t.$$.dirty[0]&&n(333,to=r_),4&t.$$.dirty[11]&&n(304,ta="narrow"===K),4096&t.$$.dirty[8]|2&t.$$.dirty[12]&&n(344,tl=sT(ec,rx)),8&t.$$.dirty[11]&&n(76,ts="landscape"===tl),33554432&t.$$.dirty[9]|2&t.$$.dirty[11]&&n(332,tc=ta||"short"===Q),1&t.$$.dirty[1]|2&t.$$.dirty[12]&&n(331,td=sM&&ec&&nT===ec.width&&!l5),4&t.$$.dirty[1]|8388608&t.$$.dirty[12]&&n(305,tu=[...e7||[],...su].filter(Boolean)),8192&t.$$.dirty[8]&&n(341,th="has-navigation-preference-".concat(rb)),16384&t.$$.dirty[8]&&n(340,tp="has-navigation-preference-".concat(rv)),32768&t.$$.dirty[8]&&n(337,tg="has-toolbar-preference-".concat(rw)),65536&t.$$.dirty[8]&&n(339,tm="has-controlgroups-preference-".concat(rS)),131072&t.$$.dirty[8]&&n(338,t$="has-controltabs-preference-".concat(rk)),2&t.$$.dirty[12]&&n(346,ty=void 0!==ec&&ec.width>0&&ec.height>0),4&t.$$.dirty[0]|32&t.$$.dirty[11]&&n(345,tx=ty&&r2&&getComputedStyle(r2)),16&t.$$.dirty[11]&&tx&&sD(),1024&t.$$.dirty[0]|4243456&t.$$.dirty[1]|34603008&t.$$.dirty[7]|1073741824&t.$$.dirty[9]|2146435072&t.$$.dirty[10]|15&t.$$.dirty[11]|6291712&t.$$.dirty[12]&&l3.set({...eS,layoutMode:nV,orientation:tl,horizontalSpace:K,verticalSpace:Q,navigationHorizontalPreference:th,navigationVerticalPreference:tp,controlGroupsVerticalPreference:tm,controlTabsVerticalpreference:t$,toolbarVerticalPreference:tg,isModal:te,isDisabled:nK,isCentered:tr,isCenteredHorizontally:ti,isCenteredVertically:tn,isAnimated:eR,isTransparent:to,pointerAccuracy:e8,pointerHoverable:e6,isCompact:tc,hasSwipeNavigation:td,hasLimitedSpace:J,hasToolbar:rh,hasNavigation:Y&&m,isIOS:sM,browserVersion:ce()?"chrome-".concat((navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]):void 0}),256&t.$$.dirty[12]&&n(75,tb=Object.entries(eS).map(t=>{let[e,n]=t;return/^is|has/.test(e)?n?pv(e):void 0:n}).filter(Boolean).join(" ")),4096&t.$$.dirty[1]&&H&&sd.set([]),4096&t.$$.dirty[1]|4&t.$$.dirty[8]|524288&t.$$.dirty[10]|256&t.$$.dirty[12]&&n(44,tv=ro(G.map(t=>({...t,selected:H===t.id})),{...eS},()=>oy.set({}))),8192&t.$$.dirty[1]&&n(74,tw=!!tv.find(t=>Array.isArray(t))),1572864&t.$$.dirty[12]&&n(73,tS=e3&&Object.entries(e4).filter(t=>{let[,e]=t;return null!=e}).reduce((t,e)=>{let[,n]=e;return t={...t,...n}},{})),65536&t.$$.dirty[12]&&n(326,tT=eY&&"any-to-file"===eY.task),65536&t.$$.dirty[10]&&tT&&ss&&ss.clear(),262144&t.$$.dirty[12]&&n(328,tk=!!e1&&!!e1.translation),16384&t.$$.dirty[9]|262144&t.$$.dirty[10]|134217728&t.$$.dirty[11]&&tk&&nO&&nO!==nA&&(n(293,nA=nO),sz()),262144&t.$$.dirty[10]|262144&t.$$.dirty[12]&&tk&&s_(e1),16777216&t.$$.dirty[1]&&eK&&eK.length>1){let t=[];ss.forEach((e,n)=>{0!==n&&e.get().opacity<=0&&t.push(e)}),t.forEach(t=>ss.remove(t))}if(8&t.$$.dirty[0]|131072&t.$$.dirty[10]&&n(39,tM=nG&&tC.length&&nG.labelSupportError(tC)),65536&t.$$.dirty[12]&&n(318,tP=eY&&!!eY.error),65536&t.$$.dirty[12]&&n(42,tR=!eY||!eY.complete&&void 0===eY.task),65536&t.$$.dirty[12]&&n(319,tA=eY&&(eY.taskLengthComputable?eY.taskProgress:1/0)),65536&t.$$.dirty[10]&&tT&&oJ(lG,eU=!1,eU),4194304&t.$$.dirty[1]|32768&t.$$.dirty[9]|65536&t.$$.dirty[12]&&eY&&eY.complete){let t=eR?250:0;clearTimeout(nE),n(294,nE=setTimeout(()=>{oJ(lG,eU=!0,eU)},t))}if(2048&t.$$.dirty[1]|256&t.$$.dirty[10]|81920&t.$$.dirty[12]&&n(323,tI=eY&&!tP&&!tR&&!eU),8192&t.$$.dirty[9]|134217728&t.$$.dirty[11]|131072&t.$$.dirty[12]&&n(322,tL=!!eq&&(!nO||!!nM)),4194304&t.$$.dirty[1]|16384&t.$$.dirty[12]&&(eU?setTimeout(()=>sB.set(1,{hard:!eR}),eR?500:0):sB.set(0,{hard:!eR})),33280&t.$$.dirty[12]&&n(317,tD=!!(eP||eG&&void 0!==eG.progress&&!eG.complete)),128&t.$$.dirty[10]&&tD&&oa(),2048&t.$$.dirty[1]|65536&t.$$.dirty[12]&&n(320,tz=eY&&!(eY.error||tR)),8&t.$$.dirty[0]|65536&t.$$.dirty[12]&&n(321,t_=nG&&(eY?!eY.complete||eY.error?sR(nG.statusLabelLoadImage(eY),eY.error&&eY.error.metadata,"{","}"):nG.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):nG.statusLabelLoadImage(eY))),8&t.$$.dirty[0]|32768&t.$$.dirty[12]&&n(316,tN=eG&&nG&&nG.statusLabelProcessImage(eG)),32768&t.$$.dirty[12]&&n(314,tW=eG&&(eG.taskLengthComputable?eG.taskProgress:1/0)),32768&t.$$.dirty[12]&&n(315,tj=eG&&!eG.error),32768&t.$$.dirty[12]&&n(313,tH=!!(eG&&eG.error)),8&t.$$.dirty[0]|2048&t.$$.dirty[1]|131072&t.$$.dirty[7]|16376&t.$$.dirty[10]){if(nJ){let t,e,r,o,a;N(nJ)&&(t=nJ),nt(nJ)?e=nJ:Array.isArray(nJ)&&([t,e,a]=nJ,!1===e&&(o=!0),nt(e)&&(r=!0)),n(35,nI=(t||e)&&{text:t,aside:o||r,progressIndicator:{visible:r,progress:e},closeButton:o&&{label:nG.statusLabelButtonClose,icon:nG.statusIconButtonClose,onclick:a||(()=>n(234,nJ=void 0))}})}else nG&&tR||tP||tI||tL?n(35,nI={text:t_,aside:tP||tz,progressIndicator:{visible:tz,progress:tA},closeButton:tP&&{label:nG.statusLabelButtonClose,icon:nG.statusIconButtonClose,onclick:sX}}):nG&&tD&&tN?n(35,nI={text:tN,aside:tH||tj,progressIndicator:{visible:tj,progress:tW},closeButton:tH&&{label:nG.statusLabelButtonClose,icon:nG.statusIconButtonClose,onclick:sZ}}):n(35,nI=void 0)}if(131072&t.$$.dirty[7]&&n(325,tV=void 0!==nJ),4194304&t.$$.dirty[1]|1073741824&t.$$.dirty[9]|32768&t.$$.dirty[12]&&te&&eG&&eG.complete&&(sW.set(!0),setTimeout(()=>sW.set(!1),eR?100:0)),4&t.$$.dirty[0]|4096&t.$$.dirty[1]|16384&t.$$.dirty[12]&&eU&&r2&&r2.dispatchEvent(pb("selectutil",H)),2304&t.$$.dirty[1]|45440&t.$$.dirty[10]|8192&t.$$.dirty[12]&&n(324,tU=ez||tM||tR||tP||tI||tL||tD||tV),16384&t.$$.dirty[10]&&oJ(sN,eO=tU?1:0,eO),4194304&t.$$.dirty[1]|16384&t.$$.dirty[10]&&sN.set(tU?1:0,{duration:eR?500:1}),8388608&t.$$.dirty[1]&&n(41,tG=eO>0),16&t.$$.dirty[1]&&n(312,tX=!!(nI&&nI.aside)),4195344&t.$$.dirty[1]|65536&t.$$.dirty[9]|4&t.$$.dirty[10]|4096&t.$$.dirty[12]&&tG&&nI){clearTimeout(nL);let t={hard:!1===eR};if(tX){let e=!!nI.error||!eR;sH.set(1,t),sj.set(eF,{hard:e}),n(295,nL=setTimeout(()=>{sV.set(16,t)},1))}else sH.set(0,t),n(295,nL=setTimeout(()=>{sV.set(0,t)},1))}if(1024&t.$$.dirty[1]&&!tG&&(sG.set(void 0,{hard:!0}),sj.set(void 0,{hard:!0}),sV.set(0,{hard:!0})),2048&t.$$.dirty[12]&&n(311,tZ=.5*eI),2&t.$$.dirty[10]|1024&t.$$.dirty[12]&&n(72,tY="transform: translateX(".concat(eE-tZ,"px)")),256&t.$$.dirty[1]|402653184&t.$$.dirty[11]&&n(38,t7=nO&&ei&&!tM),128&t.$$.dirty[1]|1073741824&t.$$.dirty[9]|1&t.$$.dirty[10]&&n(308,tJ=tK&&(t7||te)?sY:y),536870912&t.$$.dirty[9]&&n(71,tQ=tJ),536870912&t.$$.dirty[9]&&n(70,t1=tJ),8&t.$$.dirty[0]|2097152&t.$$.dirty[1]|370&t.$$.dirty[8]|503316480&t.$$.dirty[9]|256&t.$$.dirty[12]&&n(69,t0=nG&&eM&&p_(()=>rn([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[rg&&["Button","close",{label:nG.labelClose,icon:nG.iconButtonClose,onclick:()=>nj("close"),hideLabel:!0}],rd&&["Button","revert",{label:nG.labelButtonRevert,icon:nG.iconButtonRevert,disabled:!B,onclick:se,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[ru&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:nG.labelButtonUndo,icon:nG.iconButtonUndo,disabled:!B,onclick:l7.undo,hideLabel:!0}],["Button","redo",{label:nG.labelButtonRedo,icon:nG.iconButtonRedo,disabled:!D,onclick:l7.redo,hideLabel:!0}]]],tu.length&&["div","plugin-tools",{class:"PinturaNavSet"},tu.filter(Boolean).map(t=>{let[e,n,r]=t;return[e,n,{...r}]})]]],["div","gamma",{class:"PinturaNavGroup"},[rs&&["Button","export",{label:nG.labelButtonExport,icon:ta&&nG.iconButtonExport,class:"PinturaButtonExport",onclick:sa,hideLabel:ta}]]]],{...eS},()=>oy.set({})))),16&t.$$.dirty[12]&&n(300,t5=em&&!!em.length),2097152&t.$$.dirty[9]|268435456&t.$$.dirty[11]|16&t.$$.dirty[12]&&n(299,t3=t5&&oL(ei,em)),3145728&t.$$.dirty[9]|134217728&t.$$.dirty[11]|192&t.$$.dirty[12]&&t5&&s1(nO,ex,t3,ey),131072&t.$$.dirty[9]|268435456&t.$$.dirty[11]|48&t.$$.dirty[12]&&em&&nD&&ei){let{width:t,height:e}=ei,r=ib()?"pixelated":"auto"===e$?"auto":"pixelated";n(297,s0=em.map(n=>{let o=eX(ek(eL(n.x,n.y,n.width,n.height)),n.rotation).map(n=>tB(n.x/t,n.y/e));return{...n,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:nD,backgroundImageRendering:r,backgroundCorners:o}}))}262144&t.$$.dirty[9]|8&t.$$.dirty[12]&&n(37,t6=[...s0,...eg||[]]),32&t.$$.dirty[1]&&nF&&s2.set(nF),4&t.$$.dirty[0]|128&t.$$.dirty[1]&&t7&&r2&&r2.dispatchEvent(pb("ready")),262144&t.$$.dirty[1]&&cs(),1879048192&t.$$.dirty[11]|1&t.$$.dirty[12]&&cd(),131072&t.$$.dirty[1]&&ch(),65536&t.$$.dirty[1]&&cg(),64&t.$$.dirty[1]&&cf()},n(361,x=!cO()),I=1===dJ()?t=>{t&&(tq(t.origin,Math.round),tq(t.translation,Math.round))}:tf,n(327,tC=[!pA()&&"WebGL"].filter(Boolean)),n(310,tK=iV()||L()&&tt()),n(68,t8=px(nW.pub)),[rX,r0,r2,nG,nX,n2,n5,n3,n8,re,rh,ry,rC,rT,rP,rR,rA,rF,rB,rO,r_,rN,rW,rH,rV,rU,rG,rQ,oM,lZ,l7,nT,nP,su,nR,nI,nF,t6,t7,tM,t4,tG,tR,H,tv,m,Y,et,ee,ea,es,ew,eM,eR,eO,eK,il,ip,ig,iW,ng,nm,sv,cl,cc,cu,cp,cm,t8,t0,t1,tQ,tY,tS,tw,tb,ts,q,X,U,ii,iX,i0,i2,i4,i5,i3,i6,i8,i7,i9,ne,ni,nn,nr,no,na,nl,ns,nc,nd,nu,np,r5,r6,r8,op,oy,ox,ov,oP,oR,oA,oI,oB,oD,oz,o_,oN,oW,oH,oU,oK,o0,o2,o4,at,ae,ai,an,ar,ao,aa,as,ac,ad,au,ah,ap,ag,av,aw,aS,aC,aM,aT,aP,aR,aA,aE,aI,aL,aB,aD,az,a_,aN,aW,aj,aH,aU,aG,aX,aZ,aY,aq,aK,aJ,a1,a0,a3,a6,li,ln,lo,ll,ls,lc,lu,lh,lp,l$,ly,lb,lI,lz,l_,lN,lj,lH,lV,lU,lG,lX,lq,lK,l2,l3,l8,so,ss,sd,sm,sw,sS,sk,(t,e)=>e[t],t=>j.find(e=>e.id===t).view,sI,sL,sF,sB,t=>{let{target:e,propertyName:n}=t;e===r2&&/background|outline/.test(n)&&tx&&sD()},sO,sN,sW,sj,sH,sV,sU,sG,t=>{let e=!!(nI&&nI.closeButton)||!eR;sU.set(t.detail.width,{hard:e}),sG.set(Math.round(-(.5*t.detail.width)),{hard:e})},sq,sK,t=>{let{keyCode:e,metaKey:n,ctrlKey:r,shiftKey:o}=t;if(9===e&&nK){t.preventDefault();return}if(t.target&&32===e&&r2.contains(t.target)&&!d5(t.target)&&(ev&&a&&oc(),t.preventDefault()),90===e&&(n||r)){o&&n?l7.redo():l7.undo();return}if(89===e&&r){l7.redo();return}if(229===e)return;let l=new Set([...eb,e]);sK.set(Array.from(l))},t=>{let{key:e,keyCode:n}=t;if("Meta"===e)return sK.set([]);sK.set(eb.filter(t=>t!==n))},()=>{sK.set([])},t=>{d5(t.target)||t.preventDefault()},t=>{rm&&sJ(t.detail.resources[0])},()=>{r$&&pz().then(sQ)},t=>{if(!rf)return;let e=lm((window.innerWidth-Math.abs(ec.x))/ec.width,0,1),n=lm((window.innerHeight-Math.abs(ec.y))/ec.height,0,1);e<.75&&n<.75||sJ((t.clipboardData||window.clipboardData).files[0])},s4,ca,t=>{t9&&eH(t.detail,t9)||oJ(aW,t9=t.detail,t9)},nJ,lY,nH,nV,nU,nZ,nY,nq,nK,nQ,n0,n4,n6,n9,rt,rn,ro,rl,rs,rd,ru,rp,rg,rm,rf,r$,rx,rb,rv,rw,rS,rk,rM,rE,rI,rL,rD,rz,rj,rZ,()=>n(60,ng=void 0),(t,e,r)=>{let{text:o="",placeholder:a="",autoClose:l=!0,align:s="top",justify:c="center",buttonConfirm:d,buttonCancel:u}=r;n(60,ng={align:s,justify:c,text:o,placeholder:a,buttonConfirm:d,buttonCancel:u,onconfirm:()=>{t(nm.value),l&&n(60,ng=void 0)},oncancel:()=>{e(void 0),n(60,ng=void 0)}})},rq,rK,rJ,r1,oo,oa,ol,oc,od,ou,oh,og,om,of,ob,nv,nM,nA,nE,nL,nD,s0,V,t3,t5,a,W,t2,ta,tu,D,B,tJ,te,tK,tZ,tX,tH,tW,tj,tN,tD,tP,tA,tz,t_,tL,tI,tU,tV,tT,tC,tk,G,J,td,tc,to,tn,ti,tr,tg,t$,tm,tp,th,Q,K,tl,tx,ty,j,z,_,r,E,M,A,P,T,k,w,S,g,v,x,b,s,h,l,u,o,nO,ei,en,er,eo,ec,eu,eg,em,e$,ey,ex,eS,eP,eE,eI,eF,ez,eU,eG,eY,eq,e1,e4,e3,e6,e8,e7,e9,it,n_,ir,io,ia,is,ic,id,im,i$,iv,iT,iP,iA,iL,iF,iB,iN,ij,iH,iU,iY,iq,iK,iJ,iQ,i1,function(){n(31,nT=pG.innerWidth),n(32,nP=pG.innerHeight)},t=>oJ(aN,i4=t.detail,i4),t=>{let{detail:e}=t;return n(43,H=e)},function(e,r){t.$$.not_equal(r0[r],e)&&(r0[r]=e,n(1,r0),n(278,rJ),n(27,rQ))},t=>sw(t),t=>sS(t),(t,e)=>{let{detail:n}=e;return sk(t,n)},t=>oJ(az,ii=t.detail,ii),function(e){t.$$.not_equal(r0[H],e)&&(r0[H]=e,n(1,r0),n(278,rJ),n(27,rQ))},()=>sw(H),()=>sS(H),t=>{let{detail:e}=t;return sk(H,e)},t=>{let e={...t,...s4()},{annotationShapes:n,decorationShapes:r,interfaceShapes:o,frameShapes:a,selectionShapes:l}=re({annotationShapes:ea,decorationShapes:ee,interfaceShapes:nr,frameShapes:et,selectionShapes:iW},e);return ca(e,t6,n,r,o,a,l)},()=>{n(63,cl=!1),n(64,cc=!1),n(65,cu=!1),n(66,cp=!1),n(67,cm=!1)},function(t){ak[t?"unshift":"push"](()=>{n(36,nF=t)})},function(t){n(0,rX=t),n(266,rM)},function(t){n(33,su=t)},function(t){n(34,nR=t)},function(t){ak[t?"unshift":"push"](()=>{n(61,nm=t)})},function(t){ak[t?"unshift":"push"](()=>{n(2,r2=t)})},t=>oJ(aB,ew=t.detail,ew)]}class gh extends a1{get class(){return this.$$.ctx[236]}set class(t){this.$$set({class:t}),aF()}get layout(){return this.$$.ctx[237]}set layout(t){this.$$set({layout:t}),aF()}get stores(){return this.$$.ctx[238]}set stores(t){this.$$set({stores:t}),aF()}get locale(){return this.$$.ctx[3]}set locale(t){this.$$set({locale:t}),aF()}get id(){return this.$$.ctx[4]}set id(t){this.$$set({id:t}),aF()}get util(){return this.$$.ctx[239]}set util(t){this.$$set({util:t}),aF()}get utils(){return this.$$.ctx[240]}set utils(t){this.$$set({utils:t}),aF()}get animations(){return this.$$.ctx[241]}set animations(t){this.$$set({animations:t}),aF()}get disabled(){return this.$$.ctx[242]}set disabled(t){this.$$set({disabled:t}),aF()}get status(){return this.$$.ctx[234]}set status(t){this.$$set({status:t}),aF()}get previewUpscale(){return this.$$.ctx[243]}set previewUpscale(t){this.$$set({previewUpscale:t}),aF()}get previewPad(){return this.$$.ctx[244]}set previewPad(t){this.$$set({previewPad:t}),aF()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(t){this.$$set({previewMaskOpacity:t}),aF()}get previewImageDataMaxSize(){return this.$$.ctx[245]}set previewImageDataMaxSize(t){this.$$set({previewImageDataMaxSize:t}),aF()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(t){this.$$set({previewImageTextPixelRatio:t}),aF()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(t){this.$$set({markupMaskOpacity:t}),aF()}get zoomMaskOpacity(){return this.$$.ctx[246]}set zoomMaskOpacity(t){this.$$set({zoomMaskOpacity:t}),aF()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(t){this.$$set({elasticityMultiplier:t}),aF()}get willRevert(){return this.$$.ctx[247]}set willRevert(t){this.$$set({willRevert:t}),aF()}get willProcessImage(){return this.$$.ctx[248]}set willProcessImage(t){this.$$set({willProcessImage:t}),aF()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(t){this.$$set({willRenderCanvas:t}),aF()}get willRenderToolbar(){return this.$$.ctx[249]}set willRenderToolbar(t){this.$$set({willRenderToolbar:t}),aF()}get willRenderUtilTabs(){return this.$$.ctx[250]}set willRenderUtilTabs(t){this.$$set({willRenderUtilTabs:t}),aF()}get willSetHistoryInitialState(){return this.$$.ctx[251]}set willSetHistoryInitialState(t){this.$$set({willSetHistoryInitialState:t}),aF()}get enableButtonExport(){return this.$$.ctx[252]}set enableButtonExport(t){this.$$set({enableButtonExport:t}),aF()}get enableButtonRevert(){return this.$$.ctx[253]}set enableButtonRevert(t){this.$$set({enableButtonRevert:t}),aF()}get enableNavigateHistory(){return this.$$.ctx[254]}set enableNavigateHistory(t){this.$$set({enableNavigateHistory:t}),aF()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(t){this.$$set({enableToolbar:t}),aF()}get enableUtils(){return this.$$.ctx[255]}set enableUtils(t){this.$$set({enableUtils:t}),aF()}get enableButtonClose(){return this.$$.ctx[256]}set enableButtonClose(t){this.$$set({enableButtonClose:t}),aF()}get enableDropImage(){return this.$$.ctx[257]}set enableDropImage(t){this.$$set({enableDropImage:t}),aF()}get enablePasteImage(){return this.$$.ctx[258]}set enablePasteImage(t){this.$$set({enablePasteImage:t}),aF()}get enableBrowseImage(){return this.$$.ctx[259]}set enableBrowseImage(t){this.$$set({enableBrowseImage:t}),aF()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(t){this.$$set({enableTransparencyGrid:t}),aF()}get layoutDirectionPreference(){return this.$$.ctx[260]}set layoutDirectionPreference(t){this.$$set({layoutDirectionPreference:t}),aF()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[261]}set layoutHorizontalUtilsPreference(t){this.$$set({layoutHorizontalUtilsPreference:t}),aF()}get layoutVerticalUtilsPreference(){return this.$$.ctx[262]}set layoutVerticalUtilsPreference(t){this.$$set({layoutVerticalUtilsPreference:t}),aF()}get layoutVerticalToolbarPreference(){return this.$$.ctx[263]}set layoutVerticalToolbarPreference(t){this.$$set({layoutVerticalToolbarPreference:t}),aF()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[264]}set layoutVerticalControlGroupsPreference(t){this.$$set({layoutVerticalControlGroupsPreference:t}),aF()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[265]}set layoutVerticalControlTabsPreference(t){this.$$set({layoutVerticalControlTabsPreference:t}),aF()}get textDirection(){return this.$$.ctx[12]}set textDirection(t){this.$$set({textDirection:t}),aF()}get markupEditorZoomLevel(){return this.$$.ctx[266]}set markupEditorZoomLevel(t){this.$$set({markupEditorZoomLevel:t}),aF()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(t){this.$$set({markupEditorZoomLevels:t}),aF()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(t){this.$$set({markupEditorZoomAdjustStep:t}),aF()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(t){this.$$set({markupEditorZoomAdjustFactor:t}),aF()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(t){this.$$set({markupEditorZoomAdjustWheelFactor:t}),aF()}get markupEditorInteractionMode(){return this.$$.ctx[267]}set markupEditorInteractionMode(t){this.$$set({markupEditorInteractionMode:t}),aF()}get muteAudio(){return this.$$.ctx[268]}set muteAudio(t){this.$$set({muteAudio:t}),aF()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[269]}set willSetMediaInitialTimeOffset(t){this.$$set({willSetMediaInitialTimeOffset:t}),aF()}get enablePan(){return this.$$.ctx[17]}set enablePan(t){this.$$set({enablePan:t}),aF()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(t){this.$$set({enableZoom:t}),aF()}get enableZoomControls(){return this.$$.ctx[270]}set enableZoomControls(t){this.$$set({enableZoomControls:t}),aF()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(t){this.$$set({enableZoomInput:t}),aF()}get enablePanInput(){return this.$$.ctx[271]}set enablePanInput(t){this.$$set({enablePanInput:t}),aF()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(t){this.$$set({enableCanvasAlpha:t}),aF()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(t){this.$$set({enablePanLimit:t}),aF()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(t){this.$$set({panLimitGutterScalar:t}),aF()}get pan(){return this.$$.ctx[272]}set pan(t){this.$$set({pan:t}),aF()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(t){this.$$set({zoomPresetOptions:t}),aF()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(t){this.$$set({zoomAdjustStep:t}),aF()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(t){this.$$set({zoomAdjustFactor:t}),aF()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(t){this.$$set({zoomAdjustWheelFactor:t}),aF()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(t){this.$$set({zoomLevel:t}),aF()}get fixScrollDirection(){return this.$$.ctx[273]}set fixScrollDirection(t){this.$$set({fixScrollDirection:t}),aF()}get hideTextInput(){return this.$$.ctx[274]}get showTextInput(){return this.$$.ctx[275]}get imagePreviewSrc(){return this.$$.ctx[276]}set imagePreviewSrc(t){this.$$set({imagePreviewSrc:t}),aF()}get imageOrienter(){return this.$$.ctx[277]}set imageOrienter(t){this.$$set({imageOrienter:t}),aF()}get pluginComponents(){return this.$$.ctx[278]}set pluginComponents(t){this.$$set({pluginComponents:t}),aF()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(t){this.$$set({pluginOptions:t}),aF()}get sub(){return this.$$.ctx[279]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(t){this.$$set({root:t}),aF()}get play(){return this.$$.ctx[280]}get pause(){return this.$$.ctx[281]}get isPaused(){return this.$$.ctx[282]}get togglePlayPause(){return this.$$.ctx[283]}get mute(){return this.$$.ctx[284]}get unmute(){return this.$$.ctx[285]}get toggleMute(){return this.$$.ctx[286]}get getDuration(){return this.$$.ctx[287]}get getCurrentTime(){return this.$$.ctx[288]}get setCurrentTime(){return this.$$.ctx[289]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(t){this.$$set({imageSourceToImageData:t}),aF()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[235]}set imagePreviewCurrent(t){this.$$set({imagePreviewCurrent:t}),aF()}get history(){return this.$$.ctx[30]}constructor(t){super(),aQ(this,t,gu,gl,oW,{class:236,layout:237,stores:238,locale:3,id:4,util:239,utils:240,animations:241,disabled:242,status:234,previewUpscale:243,previewPad:244,previewMaskOpacity:5,previewImageDataMaxSize:245,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:246,elasticityMultiplier:8,willRevert:247,willProcessImage:248,willRenderCanvas:9,willRenderToolbar:249,willRenderUtilTabs:250,willSetHistoryInitialState:251,enableButtonExport:252,enableButtonRevert:253,enableNavigateHistory:254,enableToolbar:10,enableUtils:255,enableButtonClose:256,enableDropImage:257,enablePasteImage:258,enableBrowseImage:259,enableTransparencyGrid:11,layoutDirectionPreference:260,layoutHorizontalUtilsPreference:261,layoutVerticalUtilsPreference:262,layoutVerticalToolbarPreference:263,layoutVerticalControlGroupsPreference:264,layoutVerticalControlTabsPreference:265,textDirection:12,markupEditorZoomLevel:266,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:267,muteAudio:268,willSetMediaInitialTimeOffset:269,enablePan:17,enableZoom:18,enableZoomControls:270,enableZoomInput:19,enablePanInput:271,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,pan:272,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,fixScrollDirection:273,hideTextInput:274,showTextInput:275,imagePreviewSrc:276,imageOrienter:277,pluginComponents:278,pluginOptions:27,sub:279,pluginInterface:1,root:2,play:280,pause:281,isPaused:282,togglePlayPause:283,mute:284,unmute:285,toggleMute:286,getDuration:287,getCurrentTime:288,setCurrentTime:289,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:235,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}}let gp=["klass","stores","isVisible","isActive","isActiveFraction","locale"],gg=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],gm=["locale"],gf=new Set([]),g$={},gy=new Map,gx=(t,e)=>{let n={},r=new gh({target:t,props:{stores:e,pluginComponents:Array.from(gy)}}),o=!1,a=()=>{!o&&(w()&&window.removeEventListener("pagehide",a),r&&(o=!0,r.$destroy()))};d||(d=new Set(dr(gh).filter(t=>!gg.includes(t)))),d.forEach(t=>{Object.defineProperty(n,t,{get:()=>r[t],set:gm.includes(t)?e=>{r[t]={...r[t],...e}}:e=>r[t]=e})}),Object.defineProperty(n,"previewImageData",{get:()=>r.imagePreviewCurrent}),gf.forEach(t=>{let e=g$[t],o=e[0];Object.defineProperty(n,t,{get:()=>r.pluginInterface[o][t],set:n=>{let o=e.reduce((e,o)=>(e[o]={...r.pluginOptions[o],[t]:n},e),{});r.pluginOptions={...r.pluginOptions,...o}}})}),Object.defineProperty(n,"element",{get:()=>r.root,set:()=>void 0});let l=r.history;return la(n,{on:(t,e)=>{if(o)return()=>{};if(/undo|redo|revert|writehistory/.test(t))return l.on(t,e);let n=[r.sub(t,e),r.$on(t,t=>e(t instanceof CustomEvent&&!t.detail?void 0:t))].filter(Boolean);return()=>n.forEach(t=>t())},updateImagePreview:t=>{r.imagePreviewSrc=t},close:()=>!o&&r.pub("close"),destroy:a}),Object.defineProperty(n,"history",{get:()=>({undo:()=>l.undo(),redo:()=>l.redo(),revert:()=>l.revert(),get:()=>l.get(),getCollapsed:()=>l.get().splice(0,l.index+1),set:t=>l.set(t),write:t=>l.write(t),get length(){return l.length()},get index(){return l.index},set index(index){l.index=index}})}),w()&&window.addEventListener("pagehide",a),n};var gb=[...lL,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"];let gv=t=>N(t[0]),gw=t=>!gv(t),gS=t=>t[1],gk=t=>t[3]||[];function gC(t,e,n,r){return Array.isArray(n)&&(r=n,n={}),[t,e,n||{},r||[]]}let gM=(t,e)=>{if(gw(e))return e.push(t);e[3]=[...gk(e),t]},gT=(t,e)=>{let n=gP(t,e);return dw(n,e=>gS(e)===t),n},gP=(t,e)=>{if(gw(e)){if(e.find(e=>gS(e)===t))return e;let n=e.find(e=>gP(t,gk(e)));return n&&n[3]}return gP(t,gk(e))},gR=[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!cO()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean);var gA=t=>t.charAt(0).toUpperCase()+t.slice(1);let gE=null;var gI=()=>{if(null===gE){if(w())try{gE=!1===document.fonts.check("16px TestNonExistingFont")}catch(t){gE=!1}else gE=!1}return gE};let gL=(t,e)=>n=>n[e?"".concat(e).concat(gA(t)):t],gF=t=>[t,"".concat(t)],gB=(t,e)=>n=>[t[n],gL(n,e)],gD=t=>t.map(gF),gO=t=>Array.isArray(t)&&t.every(nt)?gD(t):t,gz=[1,.2549,.2118],g_="0.5%",gN=[1,1,1,0],gW={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[],disableAddPoints:!1}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},gj=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!gW[t])return;let{position:r="relative",inputMode:o="drag",isSelection:a=!1}=n||{};return[{...gW[t](),...e},{position:r,inputMode:o,isSelection:a}]},gH=t=>{let e={sharpie:gj("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:g_,strokeColor:[...gz],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0}),eraser:gj("eraser"),path:gj("path",{pathClose:void 0,strokeWidth:g_,strokeColor:[...gz],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:gj("line",{strokeColor:[...gz],strokeWidth:g_}),arrow:gj("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...gz],strokeWidth:g_}),rectangle:gj("rectangle",{strokeColor:[...gN],backgroundColor:[...gz]}),ellipse:gj("ellipse",{strokeColor:[...gN],backgroundColor:[...gz]}),text:gj("text",{color:[...gz],fontSize:"2%"})};return t&&Object.entries(t).forEach(t=>{let[n,r]=t;Array.isArray(r)?e[n]=r:O(r)&&e[n]&&(e[n]=[{...e[n][0],...r},e[n][1]])}),e},gV=(t,e,n)=>[t,e||gL(t,"shapeLabelTool"),{icon:gL(t,"shapeIconTool"),...n}],gU=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"];return t.map(t=>N(t)?gV(t):Array.isArray(t)?O(t[1])?gV(t[0],void 0,t[1]):gV(t[0],t[1],t[2]):void 0).filter(Boolean)},gG=()=>({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),gX=()=>({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),gZ=()=>({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"}),gY=()=>({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),gq=()=>["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"],gK=()=>[["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]],gJ=()=>["left","center","right"],gQ=()=>[["normal","bold"],["italic","normal"],["italic","bold"]],g1=t=>Object.keys(t).map(gB(t,"shapeTitleColor")),g0=t=>Object.keys(t).map(gB(t,"labelSize")),g2=t=>Object.keys(t).map(gB(t,"labelSize")),g4=t=>Object.keys(t).map(gB(t,"labelSize")),g5=t=>[...t],g3=t=>t.map(t=>[t,e=>e["shapeLabelFontStyle".concat(t.filter(t=>"normal"!==t).map(gA).join(""))]]),g6=t=>t.map(t=>[pv(t),e=>e["shapeTitleLineDecoration".concat(gA(t))],{icon:e=>e["shapeIconLineDecoration".concat(gA(t))]}]),g8=t=>t.map(t=>[t,e=>e["shapeTitleTextAlign".concat(gA(t))],{hideLabel:!0,icon:e=>e["shapeIconTextAlign".concat(gA(t))]}]),g7=(t,e)=>{let{defaultKey:n,defaultValue:r,defaultOptions:o}=e||{},a=[];return n&&(a[0]=[r,t=>t[n],{...o}]),[...a,...t]},g9=t=>t.split(",").map(t=>t.trim()).some(t=>document.fonts.check("16px ".concat(t))),mt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return["ToggleSlider",{...t}]},me="PinturaFontTest",mi=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return["ColorPicker",{options:g7(t),...e}]},mn=t=>function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mi(e,{title:e=>e[t],...n})},mr=mn("shapeTitleBackgroundColor"),mo=mn("shapeTitleTextColor"),ma=(t,e)=>{let{title:n,optionHideLabel:r=!1,layout:o,optionIcon:a=!1}=e||{},l=gO(t),s=t.map(t=>{let[e]=t;return N(e)?parseFloat(e):e}),c=Math.min(...s),d=Math.max(...s)-c;return["radio"===o?"RadioGroup":"Dropdown",{title:!1===n?void 0:n||(t=>t.shapeTitleStrokeWidth),options:t=>{let n=e?l.map(t=>{let e;let[n,o,l={}]=t,s=N(n)?parseFloat(n):n,u=(s-c)/d;return"line"===a?e='<path stroke="currentColor" stroke-linecap="square" stroke-width="'.concat(.1+.875*u,'em" d="M3,12 H20"/>'):"dot"===a?e='<circle fill="currentColor" cx="12" cy="12" r="'.concat(2+8*u,'"/>'):N(a)?e=a:W(a)&&(e=a(s,u)),[n,o,{icon:e,hideLabel:r,...l}]}):l;return ni(t,"backgroundColor")?g7(n,{defaultKey:"shapeLabelStrokeNone"}):g7(n)},onchange:(t,e)=>{if(!t)return;let n=e.strokeColor||[];if(n[3])return;let r=[...n];r[3]=1,e.strokeColor=r}}]},ml=(t,e)=>{let{title:n,layout:r}=e||{};return["radio"===r?"RadioGroup":"Dropdown",{title:n,options:g7(t)}]},ms=(t,e,n)=>["Dropdown",{title:t=>t[e],options:g7(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:n}],mc=t=>["ShorthandControl",t],md=(t,e,n,r)=>(r||t.find(t=>{let[e]=t;return e===n})||(r={defaultKey:"labelAuto",defaultValue:n}),["Dropdown",{title:e,options:g7(gO(t),r),...r}]),mu={colorOptions:()=>g1(gG()),lineEndStyleOptions:()=>g6(gq()),fontFamilyOptions:()=>g5(gK()),fontStyleOptions:()=>g3(gQ()),textAlignOptions:()=>g8(gJ()),strokeWidthOptions:()=>g4(gY()),brushSizeOptions:()=>g4(Object.entries(gY()).reduce((t,e)=>{let[n,r]=e;return t[n]="".concat(2*parseFloat(r),"%"),t},{})),fontSizeOptions:()=>g0(gX()),lineHeightOptions:()=>g2(gZ())},mh=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),mp=(t,e)=>N(e)?"".concat(t,"%"):t,mg=(t,e,n,r)=>N(r)?"".concat(Math.round(t/n*100),"%"):"".concat(mh.format(t)),mm={getValue:t=>parseFloat(t),setValue:mp,label:mg,step:.05,labelClass:"PinturaPercentageLabel"},mf={defaultColor:{factory:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mi(t,{title:t=>t.labelColor,...e})},items:"colorOptions"},defaultNumber:{factory:mt},defaultPercentage:{factory:mt,options:{getValue:t=>parseFloat(t),setValue:t=>"".concat(t,"%"),step:.05,label:(t,e,n)=>"".concat(Math.round(t/n*100),"%"),labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:mr},strokeColor:{items:"colorOptions",factory:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mi(t,{title:t=>t.shapeTitleStrokeColor,options:g7(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(t,n)=>{let r=n.strokeWidth;(nt(r)||N(r)?parseFloat(r):0)>0||(n.strokeWidth=e&&e.defaultStrokeWidth||"0.5%")},...e})}},strokeWidth:{items:"strokeWidthOptions",factory:ma},brushSize:{items:"brushSizeOptions",factory:t=>ma(t,{title:t=>t.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(t,e)=>'<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="'.concat(2+8*e,'"/>')})},drawMode:{factory:t=>{let{hideLabel:e=!0}=t||{};return ml(["new","add","subtract"].map(t=>[t,gL(t,"shapeLabelSelectionMode"),{icon:gL(t,"shapeIconSelectionMode"),hideLabel:e}]),{title:t=>t.shapeTitleSelectionMode,layout:"radio"})}},lineStart:{items:"lineEndStyleOptions",factory:t=>ms(t,"shapeTitleLineStart","transform: scaleX(-1)")},lineEnd:{items:"lineEndStyleOptions",factory:t=>ms(t,"shapeTitleLineEnd")},color:{items:"colorOptions",factory:mo},fontFamily:{items:"fontFamilyOptions",factory:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{defaultKey:"labelDefault"};return["Dropdown",{title:t=>t.shapeTitleFontFamily,onload:t=>{let{options:e=[]}=t;gI()&&e.map(t=>{let[e]=t;return e}).filter(Boolean).filter(t=>!g9(t)).forEach(t=>{let e="".concat(me,"-").concat(t.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase());document.getElementById(e)||document.body.append(M("span",{textContent:" ",id:e,class:me,style:"font-family:".concat(t,";font-size:0;color:transparent;")}))})},ondestroy:()=>{gI()&&document.querySelectorAll(".PinturaFontTest").forEach(t=>t.remove())},optionLabelStyle:t=>"font-family: ".concat(t),options:g7(t,e),optionFilter:t=>{if(!gI())return!0;let[e]=t;return!e||g9(e)}}]}},fontStyle_fontWeight:{items:"fontStyleOptions",factory:t=>["Dropdown",{title:t=>t.shapeTitleFontStyle,optionLabelStyle:t=>t&&"font-style:".concat(t[0],";font-weight:").concat(t[1]),options:g7(t,{defaultKey:"shapeLabelFontStyleNormal"})}]},fontSize:{items:"fontSizeOptions",factory:(t,e)=>md(t,t=>t.shapeTitleFontSize,"4%",e)},lineHeight:{items:"lineHeightOptions",factory:(t,e)=>md(t,t=>t.shapeTitleLineHeight,"120%",e)},textAlign:{items:"textAlignOptions",factory:t=>["RadioGroup",{title:t=>t.shapeTitleTextAlign,options:g7(t)}]},textShadowX_textShadowY_textShadowBlur_textShadowColor:{factory:mc,options:{title:"Text shadow",controls:[["ToggleSlider","x",{...mm,min:-100,max:100,labelPrefix:"X"}],["ToggleSlider","y",{...mm,min:-100,max:100,labelPrefix:"Y"}],["ToggleSlider","blur",{...mm,min:0,max:25,labelPrefix:t=>t.shapeTitleTextShadowBlur}],["ColorPicker","color",{enablePresets:!1}]]}},textOutlineWidth_textOutlineColor:{factory:mc,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:t=>parseFloat(t),setValue:mp,label:mg,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:t=>t.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:t=>t.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:t=>t.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:t=>t.labelAmount}}};function m$(t){let e,n,r,o,a;let l=t[7].default,s=oU(l,t,t[6],null);return{c(){e=o9("div"),n=o9("div"),s&&s.c(),ao(n,"class","PinturaToolbarInner"),ao(e,"class","PinturaToolbar"),ao(e,"data-layout",t[1]),ao(e,"data-overflow",t[0])},m(l,c){o8(l,e,c),o3(e,n),s&&s.m(n,null),r=!0,o||(a=[ar(n,"measure",t[3]),oQ(cE.call(null,n)),ar(e,"measure",t[2]),oQ(cE.call(null,e))],o=!0)},p(t,n){let[o]=n;s&&s.p&&(!r||64&o)&&oZ(s,l,t,t[6],r?oX(l,t[6],o,null):oY(t[6]),null),(!r||2&o)&&ao(e,"data-layout",t[1]),(!r||1&o)&&ao(e,"data-overflow",t[0])},i(t){r||(a_(s,t),r=!0)},o(t){aN(s,t),r=!1},d(t){t&&o7(e),s&&s.d(t),o=!1,o_(a)}}}function my(t,e,n){let r,o;let{$$slots:a={},$$scope:l}=e,s=0,c=0,d=0,u=()=>{n(0,o="compact"===r&&s>d?"overflow":void 0)};return t.$$set=t=>{"$$scope"in t&&n(6,l=t.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&n(1,r=c>d?"compact":"default")},[o,r,t=>{let{detail:e}=t,{width:r}=e;n(5,d=r),u()},t=>{let{detail:e}=t,{width:r}=e;r>c&&n(4,c=r),s=r,o||u()},c,d,l,a]}class mx extends a1{constructor(t){super(),aQ(this,t,my,m$,oW,{})}}function mb(t){let e,n,r,o;let a=t[5].default,l=oU(a,t,t[4],null);return{c(){e=o9("div"),l&&l.c(),ao(e,"class",t[0])},m(a,s){o8(a,e,s),l&&l.m(e,null),n=!0,r||(o=[ar(e,"measure",function(){oN(t[1]&&t[3])&&(t[1]&&t[3]).apply(this,arguments)}),oQ(t[2].call(null,e))],r=!0)},p(r,o){let[s]=o;t=r,l&&l.p&&(!n||16&s)&&oZ(l,a,t,t[4],n?oX(a,t[4],s,null):oY(t[4]),null),(!n||1&s)&&ao(e,"class",t[0])},i(t){n||(a_(l,t),n=!0)},o(t){aN(l,t),n=!1},d(t){t&&o7(e),l&&l.d(t),r=!1,o_(o)}}}function mv(t,e,n){let{$$slots:r={},$$scope:o}=e,a=ax(),{class:l=null}=e,s=av("measurable"),c=!1;return af(()=>n(1,c=!0)),t.$$set=t=>{"class"in t&&n(0,l=t.class),"$$scope"in t&&n(4,o=t.$$scope)},[l,c,s,t=>{let{detail:e}=t;return a("measure",e)},o,r]}class mw extends a1{constructor(t){super(),aQ(this,t,mv,mb,oW,{class:0})}}let mS=t=>({}),mk=t=>({}),mC=t=>({}),mM=t=>({}),mT=t=>({}),mP=t=>({});function mR(t){let e,n;let r=t[4].header,o=oU(r,t,t[3],mP);return{c(){e=o9("div"),o&&o.c(),ao(e,"class","PinturaUtilHeader")},m(t,r){o8(t,e,r),o&&o.m(e,null),n=!0},p(t,e){o&&o.p&&(!n||8&e)&&oZ(o,r,t,t[3],n?oX(r,t[3],e,mT):oY(t[3]),mP)},i(t){n||(a_(o,t),n=!0)},o(t){aN(o,t),n=!1},d(t){t&&o7(e),o&&o.d(t)}}}function mA(t){let e,n;let r=t[4].footer,o=oU(r,t,t[3],mk);return{c(){e=o9("div"),o&&o.c(),ao(e,"class","PinturaUtilFooter")},m(t,r){o8(t,e,r),o&&o.m(e,null),n=!0},p(t,e){o&&o.p&&(!n||8&e)&&oZ(o,r,t,t[3],n?oX(r,t[3],e,mS):oY(t[3]),mk)},i(t){n||(a_(o,t),n=!0)},o(t){aN(o,t),n=!1},d(t){t&&o7(e),o&&o.d(t)}}}function mE(t){let e,n,r,o,a,l,s,c;let d=t[1]&&mR(t),u=t[4].main,h=oU(u,t,t[3],mM),p=h||((s=new mw({props:{class:"PinturaStage"}})).$on("measure",t[5]),{c(){aq(s.$$.fragment)},m(t,e){aK(s,t,e),c=!0},p:oF,i(t){c||(a_(s.$$.fragment,t),c=!0)},o(t){aN(s.$$.fragment,t),c=!1},d(t){aJ(s,t)}}),g=t[2]&&mA(t);return{c(){d&&d.c(),e=ai(),n=o9("div"),p&&p.c(),r=ai(),g&&g.c(),o=ai(),a=an(),ao(n,"class","PinturaUtilMain")},m(s,c){d&&d.m(s,c),o8(s,e,c),o8(s,n,c),p&&p.m(n,null),t[6](n),o8(s,r,c),g&&g.m(s,c),o8(s,o,c),o8(s,a,c),l=!0},p(t,n){let[r]=n;t[1]?d?(d.p(t,r),2&r&&a_(d,1)):((d=mR(t)).c(),a_(d,1),d.m(e.parentNode,e)):d&&(aO(),aN(d,1,1,()=>{d=null}),az()),h&&h.p&&(!l||8&r)&&oZ(h,u,t,t[3],l?oX(u,t[3],r,mC):oY(t[3]),mM),t[2]?g?(g.p(t,r),4&r&&a_(g,1)):((g=mA(t)).c(),a_(g,1),g.m(o.parentNode,o)):g&&(aO(),aN(g,1,1,()=>{g=null}),az())},i(t){l||(a_(d),a_(p,t),a_(g),a_(!1),l=!0)},o(t){aN(d),aN(p,t),aN(g),aN(!1),l=!1},d(l){d&&d.d(l),l&&o7(e),l&&o7(n),p&&p.d(l),t[6](null),l&&o7(r),g&&g.d(l),l&&o7(o),l&&o7(a)}}}function mI(t,e,n){let{$$slots:r={},$$scope:o}=e,{hasHeader:a=!!e.$$slots.header}=e,{hasFooter:l=!!e.$$slots.footer}=e,{root:s}=e;return t.$$set=t=>{n(7,e=oD(oD({},e),oq(t))),"hasHeader"in t&&n(1,a=t.hasHeader),"hasFooter"in t&&n(2,l=t.hasFooter),"root"in t&&n(0,s=t.root),"$$scope"in t&&n(3,o=t.$$scope)},e=oq(e),[s,a,l,o,r,function(e){aw.call(this,t,e)},function(t){ak[t?"unshift":"push"](()=>{n(0,s=t)})}]}class mL extends a1{constructor(t){super(),aQ(this,t,mI,mE,oW,{hasHeader:1,hasFooter:2,root:0})}}function mF(t){let e,n;return{c(){ao(e=o9("div"),"class","PinturaRangeInputMeter"),ao(e,"style",n="transform: translateX(".concat(t[9].x-t[12].x,"px) translateY(").concat(t[9].y-t[12].y,"px)"))},m(n,r){o8(n,e,r),e.innerHTML=t[7]},p(t,r){128&r[0]&&(e.innerHTML=t[7]),512&r[0]&&n!==(n="transform: translateX(".concat(t[9].x-t[12].x,"px) translateY(").concat(t[9].y-t[12].y,"px)"))&&ao(e,"style",n)},d(t){t&&o7(e)}}}function mB(t){let e,n,r,o,a,l,s,c,d,u,h;let p=t[9]&&mF(t);return{c(){e=o9("div"),n=o9("span"),r=ai(),o=o9("button"),a=ae(t[1]),s=ai(),c=o9("div"),p&&p.c(),ao(n,"class","PinturaRangeInputValue"),ao(o,"class","PinturaRangeInputReset"),ao(o,"type","button"),o.disabled=l=t[0]===t[2],ao(c,"class","PinturaRangeInputInner"),ao(c,"style",t[8]),ao(c,"data-value-limited",t[5]),ao(e,"class","PinturaRangeInput"),ao(e,"tabindex","0")},m(l,g){o8(l,e,g),o3(e,n),n.innerHTML=t[3],o3(e,r),o3(e,o),o3(o,a),o3(e,s),o3(e,c),p&&p.m(c,null),u||(h=[ar(o,"click",t[17]),ar(c,"interactionstart",t[13]),ar(c,"interactionupdate",t[15]),ar(c,"interactionend",t[16]),ar(c,"interactionrelease",t[14]),oQ(d=dk.call(null,c,{inertia:t[6]})),ar(c,"measure",t[37]),oQ(cE.call(null,c)),ar(e,"wheel",t[19],{passive:!1}),ar(e,"nudge",t[20]),oQ(dC.call(null,e,{direction:"horizontal",preventDefault:!0}))],u=!0)},p(t,e){8&e[0]&&(n.innerHTML=t[3]),2&e[0]&&as(a,t[1]),5&e[0]&&l!==(l=t[0]===t[2])&&(o.disabled=l),t[9]?p?p.p(t,e):((p=mF(t)).c(),p.m(c,null)):p&&(p.d(1),p=null),256&e[0]&&ao(c,"style",t[8]),32&e[0]&&ao(c,"data-value-limited",t[5]),d&&oN(d.update)&&64&e[0]&&d.update.call(null,{inertia:t[6]})},i:oF,o:oF,d(t){t&&o7(e),p&&p.d(),u=!1,o_(h)}}}function mD(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,x;let{labelReset:b="Reset"}=e,{direction:v="x"}=e,{min:w=0}=e,{max:S=1}=e,{base:k=w}=e,{value:C=0}=e,{valueLabel:M=0}=e,{valueMin:T}=e,{valueMax:P}=e,{oninputstart:R=y}=e,{oninputmove:A=y}=e,{oninputend:E=y}=e,{elasticity:I=0}=e,{nudgeMultiplier:L}=e,{step:F=8}=e,B=av("isAnimated");oV(t,B,t=>n(6,u=t));let D=av("fixScrollDirection");oV(t,D,t=>n(43,h=t));let O=(t,e,n)=>Math.ceil((t-n)/e)*e+n,z={x:2,y:0},_=(t,e,n)=>"M ".concat(t-n," ").concat(e," a ").concat(n," ").concat(n," 0 1 0 0 -1"),N=!1,W={snap:!1,elastic:!1},j=(t,e,n)=>{let r=t[v]+e[v],o=lm(r,$[1][v],$[0][v]),a=I?o+dM(r-o,I):o,l=n.elastic?a:o,s=tB(0,0);return s[v]=l,H.set(s,{hard:n.snap}),lm(U(s,v),w,S)},H=cy();oV(t,H,t=>n(9,p=t));let V=(t,e)=>{let n=(g[e]-l[e])*.5-(hs(t,w,S)*l[e]-.5*l[e]);return{x:"x"===e?n:0,y:"y"===e?n:0}},U=(t,e)=>{let n=-((t[e]-.5*g[e])/l[e]);return w+n*r},G=H.subscribe(t=>{t&&x&&A(lm(U(t,v),w,S))}),X=t=>{let e=[V(null!=T?T:w,v),V(null!=P?P:S,v)],n=lm({x:"x"===v?p.x+t:0,y:"y"===v?p.y+t:0}[v],e[1][v],e[0][v]),r={...p,[v]:n};oJ(H,p=r,p);let o=lm(U(r,v),w,S);R(),A(o),E(o)};return ay(()=>{G()}),t.$$set=t=>{"labelReset"in t&&n(1,b=t.labelReset),"direction"in t&&n(21,v=t.direction),"min"in t&&n(22,w=t.min),"max"in t&&n(23,S=t.max),"base"in t&&n(2,k=t.base),"value"in t&&n(0,C=t.value),"valueLabel"in t&&n(3,M=t.valueLabel),"valueMin"in t&&n(24,T=t.valueMin),"valueMax"in t&&n(25,P=t.valueMax),"oninputstart"in t&&n(26,R=t.oninputstart),"oninputmove"in t&&n(27,A=t.oninputmove),"oninputend"in t&&n(28,E=t.oninputend),"elasticity"in t&&n(29,I=t.elasticity),"nudgeMultiplier"in t&&n(30,L=t.nudgeMultiplier),"step"in t&&n(31,F=t.step)},t.$$.update=()=>{if(12582912&t.$$.dirty[0]&&n(33,r=S-w),20971520&t.$$.dirty[0]&&n(35,o=null!=T?Math.max(T,w):w),41943040&t.$$.dirty[0]&&n(34,a=null!=P?Math.min(P,S):S),12582916&t.$$.dirty[0]&&n(36,s=hs(k,w,S)),16&t.$$.dirty[0]|32&t.$$.dirty[1]&&g){let t;let e=.5*g.y,r=40*s,o="",a=g.y,l="";for(let n=0;n<=40;n++){let a=z.x+10*n;o+=_(a,e,n%5==0?2:.75)+" ",t=a+z.x,n===r&&(l='<path d="M'.concat(a," ").concat(e-4,' l2 3 l-2 -1 l-2 1 z"/>'))}n(7,m='<svg width="'.concat(t,'" height="').concat(a,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ').concat(t," ").concat(a,'" aria-hidden="true" focusable="false">\n        ').concat(l,'\n        <rect rx="4" ry="4" y="').concat(e-4,'"" height="8"/>\n        <path fill-rule="evenodd" d="').concat(o.trim(),'"/></svg>')),n(32,f={x:t-2*z.x,y:a})}16&t.$$.dirty[0]|2&t.$$.dirty[1]&&(l=g&&f),12582912&t.$$.dirty[0]|24&t.$$.dirty[1]&&n(5,c=o!==w||a!==S),32&t.$$.dirty[0]|24&t.$$.dirty[1]&&n(8,d=c?function(t,e){let n=hs(t,w,S),r=hs(e,w,S),o=tE(O(n,.025,0)-.0125),a=tE(O(r,.025,0)-.0125);return"--range-mask-from:".concat(100*o,"%;--range-mask-to:").concat(100*a,"%")}(o,a):""),2097233&t.$$.dirty[0]|4&t.$$.dirty[1]&&r&&g&&g.x&&g.y&&H.set(V(C,v),{hard:!1===u})},[C,b,k,M,g,c,u,m,d,p,B,D,z,()=>{N=!1,x=oH(H),$=[V(null!=T?T:w,v),V(null!=P?P:S,v)],R()},()=>{N=!0},t=>{let{detail:e}=t;W.snap=!N,W.elastic=!N,j(x,e.translation,W)},t=>{let{detail:e}=t;W.snap=!1,W.elastic=!1;let n=j(x,e.translation,W);if(x=void 0,$=void 0,.01>Math.abs(n-k))return E(k);E(n)},()=>{n(0,C=lm(k,o,a)),R(),E(C)},H,t=>{t.preventDefault(),t.stopPropagation(),X(dA(t,{fixScrollDirection:h})*F)},t=>{let{detail:e}=t;X(e[v]*Math.abs(L||8))},v,w,S,T,P,R,A,E,I,L,F,f,r,a,o,s,t=>n(4,g=tD(t.detail))]}class mO extends a1{constructor(t){super(),aQ(this,t,mD,mB,oW,{labelReset:1,direction:21,min:22,max:23,base:2,value:0,valueLabel:3,valueMin:24,valueMax:25,oninputstart:26,oninputmove:27,oninputend:28,elasticity:29,nudgeMultiplier:30,step:31},null,[-1,-1])}}var mz={[tw]:t=>({x:t.x,y:t.y}),[tT]:t=>({x:t.x+t.width,y:t.y}),[tS]:t=>({x:t.x+t.width,y:t.y}),[tP]:t=>({x:t.x+t.width,y:t.y+t.height}),[tk]:t=>({x:t.x,y:t.y+t.height}),[tR]:t=>({x:t.x,y:t.y+t.height}),[tC]:t=>({x:t.x,y:t.y}),[tM]:t=>({x:t.x,y:t.y})};function m_(t,e,n){let r=t.slice();return r[14]=e[n].key,r[15]=e[n].translate,r[16]=e[n].scale,r[17]=e[n].type,r[18]=e[n].opacity,r}function mN(t,e){let n,r,o,a,l,s,c,d;return{key:t,first:null,c(){ao(n=o9("div"),"role","button"),ao(n,"aria-label",r="Drag ".concat(e[17]," ").concat(e[14])),ao(n,"tabindex",o="edge"===e[17]?-1:0),ao(n,"class","PinturaRectManipulator"),ao(n,"data-direction",a=e[14]),ao(n,"data-shape",l="".concat("edge"===e[17]?"edge":"".concat(e[0]))),ao(n,"style",s="--tx:".concat(e[15].x,";--ty:").concat(e[15].y,";--sx:").concat(e[16].x,";--sy:").concat(e[16].y,";opacity:").concat(e[18])),this.first=n},m(t,r){o8(t,n,r),c||(d=[ar(n,"nudge",function(){oN(e[6](e[14]))&&e[6](e[14]).apply(this,arguments)}),oQ(dC.call(null,n,{preventDefault:!0})),ar(n,"interactionstart",function(){oN(e[5]("resizestart",e[14]))&&e[5]("resizestart",e[14]).apply(this,arguments)}),ar(n,"interactionupdate",function(){oN(e[5]("resizemove",e[14]))&&e[5]("resizemove",e[14]).apply(this,arguments)}),ar(n,"interactionend",function(){oN(e[5]("resizeend",e[14]))&&e[5]("resizeend",e[14]).apply(this,arguments)}),oQ(dk.call(null,n))],c=!0)},p(t,c){e=t,2&c&&r!==(r="Drag ".concat(e[17]," ").concat(e[14]))&&ao(n,"aria-label",r),2&c&&o!==(o="edge"===e[17]?-1:0)&&ao(n,"tabindex",o),2&c&&a!==(a=e[14])&&ao(n,"data-direction",a),3&c&&l!==(l="".concat("edge"===e[17]?"edge":"".concat(e[0])))&&ao(n,"data-shape",l),2&c&&s!==(s="--tx:".concat(e[15].x,";--ty:").concat(e[15].y,";--sx:").concat(e[16].x,";--sy:").concat(e[16].y,";opacity:").concat(e[18]))&&ao(n,"style",s)},d(t){t&&o7(n),c=!1,o_(d)}}}function mW(t){let e,n=[],r=new Map,o=t[1],a=t=>t[14];for(let e=0;e<o.length;e+=1){let l=m_(t,o,e),s=a(l);r.set(s,n[e]=mN(s,l))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=an()},m(t,r){for(let e=0;e<n.length;e+=1)n[e].m(t,r);o8(t,e,r)},p(t,l){let[s]=l;99&s&&(o=t[1],n=aG(n,s,a,1,t,o,r,e.parentNode,aV,mN,e,m_))},i:oF,o:oF,d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&o7(e)}}}function mj(t,e,n){let r,o,a,l,s;let{rect:c=null}=e,{visible:d=!1}=e,{style:u}=e,h=av("isAnimated");oV(t,h,t=>n(11,l=t));let p=cy(void 0,{precision:1e-4,stiffness:.2,damping:.4});oV(t,p,t=>n(10,a=t));let g=cy(0,{precision:.001});oV(t,g,t=>n(9,o=t));let m=ax();return t.$$set=t=>{"rect"in t&&n(7,c=t.rect),"visible"in t&&n(8,d=t.visible),"style"in t&&n(0,u=t.style)},t.$$.update=()=>{2304&t.$$.dirty&&p.set(d?1:.5,{hard:!1===l}),2304&t.$$.dirty&&g.set(d?1:0,{hard:!1===l}),1664&t.$$.dirty&&n(1,r=Object.keys(tv).map((t,e)=>{let n=tv[t],r=mz[n](c),l=1===n.length?"edge":"corner",s="corner"===l;return{key:n,type:l,scale:{x:/^(t|b)$/.test(n)?c.width:s?lm(a,.5,1.25):1,y:/^(r|l)$/.test(n)?c.height:s?lm(a,.5,1.25):1},translate:{x:r.x,y:r.y},opacity:o}}))},[u,r,h,p,g,(t,e)=>n=>{let{detail:r}=n;s&&e!==s||"resizestart"!==t&&void 0===s||("resizestart"===t&&(s=e),"resizeend"===t&&(s=void 0),m(t,{direction:e,translation:r&&r.translation}))},t=>e=>{let{detail:n}=e;m("resizestart",{direction:t,translation:{x:0,y:0}}),m("resizemove",{direction:t,translation:n}),m("resizeend",{direction:t,translation:{x:0,y:0}})},c,d,o,a,l]}class mH extends a1{constructor(t){super(),aQ(this,t,mj,mW,oW,{rect:7,visible:8,style:0})}}var mV=t=>{function e(e,n){t.dispatchEvent(new CustomEvent(e,{detail:n}))}let n=n=>{n.preventDefault(),t.addEventListener("gesturechange",r),t.addEventListener("gestureend",o),e("gesturedown")},r=t=>{t.preventDefault(),e("gestureupdate",t.scale)},o=t=>{e("gestureup",t.scale),t.preventDefault(),a()},a=()=>{t.removeEventListener("gesturechange",r),t.removeEventListener("gestureend",o)};return t.addEventListener("gesturestart",n),{destroy:()=>{a(),t.removeEventListener("gesturestart",n)}}},mU={[tw]:tk,[tS]:tC,[tk]:tw,[tC]:tS,[tM]:tP,[tT]:tR,[tP]:tM,[tR]:tT},mG=t=>{let e=t===tC||t===tS,n=t===tw||t===tk;return[t===tS||t===tT||t===tP,t===tC||t===tR||t===tM,t===tw||t===tT||t===tM,t===tk||t===tP||t===tR,e,n,e||n]},mX=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{target:o,translate:a}=e,{aspectRatio:l,minSize:s,maxSize:c}=r,d=tA[mU[o]],u=tJ(tB(t.x,t.y),tB(d[0]*t.width,d[1]*t.height)),h=tA[o],p=tJ(ek(t),tB(h[0]*t.width,h[1]*t.height)),[g,m,f,$,y,x,b]=mG(o),v=a.x,w=a.y;y?w=0:x&&(v=0);let{inner:S,outer:k}=mZ(u,o,n,{aspectRatio:l,minSize:s,maxSize:c}),[C,M,T,P]=e1(t);if(g?P=u.x:m&&(M=u.x),$?C=u.y:f&&(T=u.y),g){let t=S.x+S.width,e=k.x+k.width;M=lm(p.x+v,t,e)}else if(m){let t=k.x,e=S.x;P=lm(p.x+v,t,e)}if($){let t=S.y+S.height,e=k.y+k.height;T=lm(p.y+w,t,e)}else if(f){let t=k.y,e=S.y;C=lm(p.y+w,t,e)}if(P>S.x&&(P=S.x),M<S.x+S.width&&(M=S.x+S.width),C>S.y&&(C=S.y),T<S.y+S.height&&(T=S.y+S.height),P<k.x){let t=k.x-P;P=k.x,M+=t}if(M>k.x+k.width){let t=M-(k.x+k.width);M=k.x+k.width,P-=t}if(C<k.y){let t=k.y-C;C=k.y,T+=t}if(T>k.y+k.height){let t=T-(k.y+k.height);T=k.y+k.height,C-=t}if(l){if(b){let t=M-P,e=T-C;y?(e=t/l,C=u.y-.5*e,T=u.y+.5*e):x&&(t=e*l,P=u.x-.5*t,M=u.x+.5*t)}else{let t=tB(p.x+v-u.x,p.y+w-u.y);o===tT?(t.x=Math.max(0,t.x),t.y=Math.min(0,t.y)):o===tP?(t.x=Math.max(0,t.x),t.y=Math.max(0,t.y)):o===tR?(t.x=Math.min(0,t.x),t.y=Math.max(0,t.y)):o===tM&&(t.x=Math.min(0,t.x),t.y=Math.min(0,t.y));let e=lm(tU(t),tU(tB(S.width,S.height)),tU(tB(k.width,k.height))),n=t0(tG(tB(l,1)),e);o===tT?(M=u.x+n.x,C=u.y-n.y):o===tP?(M=u.x+n.x,T=u.y+n.y):o===tR?(P=u.x-n.x,T=u.y+n.y):o===tM&&(P=u.x-n.x,C=u.y-n.y)}}return eL(P,C,M-P,T-C)};let mZ=(t,e,n,r)=>{let o,a,l,s;let{aspectRatio:c,minSize:d,maxSize:u}=r,h=e===tS||e===tT||e===tP,p=e===tC||e===tR||e===tM,g=e===tw||e===tT||e===tM,m=e===tk||e===tP||e===tR,f=e===tC||e===tS,$=e===tw||e===tk,y=ek(n);h?(y.x=t.x,y.width-=t.x):p&&(y.width=t.x),m?(y.y=t.y,y.height-=t.y):g&&(y.height=t.y);let x=eM(Math.min(y.width,u.width),Math.min(y.height,u.height));if(c){if(f){let e=Math.min(t.y,n.height-t.y);x.height=Math.min(2*e,x.height)}else if($){let e=Math.min(t.x,n.width-t.x);x.width=Math.min(2*e,x.width)}}let b=c?en(eq(eT(d),c)):d,v=c?en(eQ(x,c)):x;h?o=t.x:p&&(a=t.x),m?l=t.y:g&&(s=t.y),h?a=o+b.width:p&&(o=a-b.width),m?s=l+b.height:g&&(l=s-b.height),f?(l=t.y-.5*b.height,s=t.y+.5*b.height):$&&(o=t.x-.5*b.width,a=t.x+.5*b.width);let w=eA([tB(o,l),tB(a,s)]);return h?a=o+v.width:p&&(o=a-v.width),m?s=l+v.height:g&&(l=s-v.height),f?(l=t.y-.5*v.height,s=t.y+.5*v.height):$&&(o=t.x-.5*v.width,a=t.x+.5*v.width),o=Math.max(n.x,o),a=Math.min(n.x+n.width,a),l=Math.max(n.y,l),s=Math.min(n.y+n.height,s),{inner:w,outer:eA([tB(o,l),tB(a,s)])}};var mY=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{target:r,translate:o}=e,{aspectRatio:a,minSize:l}=n,s=tA[mU[r]],c=tJ(ek(t),tB(s[0]*t.width,s[1]*t.height)),d=tA[r],u=tJ(ek(t),tB(d[0]*t.width,d[1]*t.height)),[h,p,g,m,f,$,y]=mG(r),x=o.x,b=o.y;f?b=0:$&&(x=0);let[v,w,S,k]=e1(t);if(h?k=c.x:p&&(w=c.x),m?v=c.y:g&&(S=c.y),h?w=u.x+x:p&&(k=u.x+x),m?S=u.y+b:g&&(v=u.y+b),l&&f&&S-v<l.height){let t=l.height-(S-v);v-=.5*t,S+=.5*t}if(l&&$&&w-k<l.width){let t=l.width-(w-k);k-=.5*t,w+=.5*t}if(a){if(y){let t=w-k,e=S-v;f?(e=t/a,v=c.y-.5*e,S=c.y+.5*e):$&&(t=e*a,k=c.x-.5*t,w=c.x+.5*t)}else{let t=tB(u.x+x-c.x,u.y+b-c.y);r===tT?(t.x=Math.max(0,t.x),t.y=Math.min(0,t.y)):r===tP?(t.x=Math.max(0,t.x),t.y=Math.max(0,t.y)):r===tR?(t.x=Math.min(0,t.x),t.y=Math.max(0,t.y)):r===tM&&(t.x=Math.min(0,t.x),t.y=Math.min(0,t.y));let e=tU(t),n=t0(tG(tB(a,1)),e);r===tT?(w=c.x+n.x,v=c.y-n.y):r===tP?(w=c.x+n.x,S=c.y+n.y):r===tR?(k=c.x-n.x,S=c.y+n.y):r===tM&&(k=c.x-n.x,v=c.y-n.y)}}return eL(k,v,w-k,S-v)},mq=t=>180*t/Math.PI;function mK(t){let e,n,r;return n=new mO({props:{elasticity:t[5],min:t[9],max:t[10],value:t[11],valueMin:Math.max(t[9],t[0]),valueMax:Math.min(t[10],t[1]),labelReset:t[6],base:t[12],valueLabel:"".concat(Math.round(mq(t[11])),"&deg;"),oninputstart:t[2],oninputmove:t[17],oninputend:t[18]}}),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"class","PinturaImageRotator")},m(t,o){o8(t,e,o),aK(n,e,null),r=!0},p(t,e){let[r]=e,o={};32&r&&(o.elasticity=t[5]),512&r&&(o.min=t[9]),1024&r&&(o.max=t[10]),2048&r&&(o.value=t[11]),513&r&&(o.valueMin=Math.max(t[9],t[0])),1026&r&&(o.valueMax=Math.min(t[10],t[1])),64&r&&(o.labelReset=t[6]),4096&r&&(o.base=t[12]),2048&r&&(o.valueLabel="".concat(Math.round(mq(t[11])),"&deg;")),4&r&&(o.oninputstart=t[2]),392&r&&(o.oninputmove=t[17]),400&r&&(o.oninputend=t[18]),n.$set(o)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n)}}}function mJ(t,e,n){let r,o,a,l,s,c,d;let{rotation:u}=e,{valueMin:h}=e,{valueMax:p}=e,{oninputstart:g=y}=e,{oninputmove:m=y}=e,{oninputend:f=y}=e,{elasticity:$=0}=e,{labelReset:x}=e,{rotationMin:b}=e,{rotationMax:v}=e;return t.$$set=t=>{"rotation"in t&&n(13,u=t.rotation),"valueMin"in t&&n(0,h=t.valueMin),"valueMax"in t&&n(1,p=t.valueMax),"oninputstart"in t&&n(2,g=t.oninputstart),"oninputmove"in t&&n(3,m=t.oninputmove),"oninputend"in t&&n(4,f=t.oninputend),"elasticity"in t&&n(5,$=t.elasticity),"labelReset"in t&&n(6,x=t.labelReset),"rotationMin"in t&&n(14,b=t.rotationMin),"rotationMax"in t&&n(15,v=t.rotationMax)},t.$$.update=()=>{16384&t.$$.dirty&&n(9,r=b+1e-9),32768&t.$$.dirty&&n(10,o=v-1e-9),1536&t.$$.dirty&&n(12,a=r+(o-r)*.5),32768&t.$$.dirty&&n(16,l=2*v),8192&t.$$.dirty&&n(8,s=Math.sign(u)),73728&t.$$.dirty&&n(7,c=Math.round(Math.abs(u)/l)*l),8576&t.$$.dirty&&n(11,d=u-s*c)},[h,p,g,m,f,$,x,c,s,r,o,d,a,u,b,v,l,t=>m(s*c+t),t=>f(s*c+t)]}class mQ extends a1{constructor(t){super(),aQ(this,t,mJ,mK,oW,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function m1(t){let e,n,r,o,a;return{c(){e=o9("div"),n=o9("p"),r=ae(t[0]),o=ae(" \xd7 "),a=ae(t[1]),ao(e,"class","PinturaImageInfo")},m(t,l){o8(t,e,l),o3(e,n),o3(n,r),o3(n,o),o3(n,a)},p(t,e){let[n]=e;1&n&&as(r,t[0]),2&n&&as(a,t[1])},i:oF,o:oF,d(t){t&&o7(e)}}}function m0(t,e,n){let{width:r}=e,{height:o}=e;return t.$$set=t=>{"width"in t&&n(0,r=t.width),"height"in t&&n(1,o=t.height)},[r,o]}class m2 extends a1{constructor(t){super(),aQ(this,t,m0,m1,oW,{width:0,height:1})}}var m4=function(t){let e,n,r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{width:l=24,height:s=24,bounds:c=16,radius:d=3}=a,u=nn(t)?tm(t[0],t[1]):t,h=!!u;o=(r=(u=h?u:1)>1?c:u*c)/u,e=Math.round((l-r)*.5),n=Math.round((s-o)*.5);let p=[l/12,l/6].join(" ");return'<rect fill="'.concat(h?"currentColor":"none",'" stroke="').concat(h?"none":"currentColor",'" stroke-width="').concat(l/16,'" stroke-dasharray="').concat(p,'" x="').concat(e,'" y="').concat(n,'" width="').concat(r,'" height="').concat(o,'" rx="').concat(d,'"/>')};function m5(t){let e,n;return e=new uH({props:{class:"PinturaPresetListFilter",layout:"row",options:t[8],selectedIndex:t[7],onchange:t[10]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};256&n&&(r.options=t[8]),128&n&&(r.selectedIndex=t[7]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function m3(t){let e,n;return e=new hi({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[9],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[m5]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let[r]=n,o={};1&r&&(o.icon=t[0]),2&r&&(o.label=t[1]),4&r&&(o.labelClass=t[2]),8&r&&(o.hideLabel=t[3]),512&r&&(o.options=t[9]),16&r&&(o.selectedIndex=t[4]),32&r&&(o.onchange=t[5]),64&r&&(o.optionMapper=t[6]),262528&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}let m6='fill="none" stroke="currentColor"';function m8(t,e,n){let r,o,a;let{icon:l}=e,{label:s}=e,{labelClass:c}=e,{hideLabel:d}=e,{options:u}=e,{selectedIndex:h}=e,{onchange:p}=e,{optionMapper:g}=e,{filter:m="landscape"}=e,{onfilterchange:f=y}=e,$=(t,e,n,r,o)=>"\n    <rect ".concat(m6,' x="').concat(t,'" y="').concat(e,'" width="').concat(n,'" height="').concat(r,'" rx="').concat(o,'"/>'),x=(t,e)=>"<path ".concat(m6,' d="M').concat(t," ").concat(e,' l2 2 l3 -4"/>'),b=(t,e)=>(t||[]).map(t=>N(t[0])?(t[1]=t[1].map(e),t):e(t)),v=t=>e=>{let[n,r,o={}]=e;return nt(n)&&(o.hidden="landscape"===t?n<1:n>1),[n,r,o]};return t.$$set=t=>{"icon"in t&&n(0,l=t.icon),"label"in t&&n(1,s=t.label),"labelClass"in t&&n(2,c=t.labelClass),"hideLabel"in t&&n(3,d=t.hideLabel),"options"in t&&n(12,u=t.options),"selectedIndex"in t&&n(4,h=t.selectedIndex),"onchange"in t&&n(5,p=t.onchange),"optionMapper"in t&&n(6,g=t.optionMapper),"filter"in t&&n(11,m=t.filter),"onfilterchange"in t&&n(13,f=t.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&n(9,r=b(u,v(m))),2048&t.$$.dirty&&n(7,o="landscape"===m?0:1),128&t.$$.dirty&&n(8,a=[["landscape","Landscape",{hideLabel:!0,icon:$(2,6,19,12,2)+(0===o?x(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:$(5,3,13,18,2)+(1===o?x(9,12):"")}]])},[l,s,c,d,h,p,g,o,a,r,t=>{n(11,m=t.value),f(t.value)},m,u,f]}class m7 extends a1{constructor(t){super(),aQ(this,t,m8,m3,oW,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}let m9=t=>tq(t,t=>tE(t,6)),ft=t=>e2(t,t=>tE(t,6)),fe=t=>t.map(m9),fi=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(t-e)<n};var fn=function(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},{aspectRatio:a}=o;t=ft(t),r=fe(r);let l=ez(t,mU[n.target]),s=tq(l,t=>tE(t,6)),c=a?eq(o.minSize,a):o.minSize,d=a?eQ(o.maxSize,a):o.maxSize;1>t3(ez(e,n.target),l)&&eD(e=ek(t),Math.min(c.width/t.width,c.height/t.height),l),e=eO(ek(e),c,d,l);let u=ek(e);e=ft(e);let h=ii(r,1),p=e0(t),g=e0(e),m=p.findIndex(t=>tY(tq(t,t=>tE(t,6)),s)),f=t=>h.map(e=>e6(e,t)).filter(Boolean).pop();if(a){let e=g.map((t,e)=>{if(e===m)return;let n=tB(l.x-t.x,l.y-t.y);tG(n),t0(n,.5);let r=f(e$(tB(l.x-n.x,l.y-n.y),m9(t)));if(r)return{intersection:r,cornerDist:t3(l,p[e]),intersectionDist:t3(l,r)}}).filter(Boolean);if(e.length){let n=e.reduce((t,e)=>{let n=e.intersectionDist/e.cornerDist;return n<t?n:t},Number.MAX_SAFE_INTEGER);eD(u=ek(t),n,l)}}else{let t=1===n.target.length,o=!(r[0].y===r[1].y||r[0].x===r[1].x),a=p.map((e,n)=>{if(n===m)return;let r=g[n],a=!fi(r.x,s.x)&&!fi(r.y,s.y);if(!t&&!o&&a||t&&(fi(r.x,s.x)||fi(r.y,s.y)))return;let c=tN(t?e:l),d=tQ(tN(c),r);tG(d),t0(d,.5),t?tJ(c,d):tQ(c,d);let u=f(e$(c,r));if(u)return u}).filter(Boolean);if(a.length){let[t,r,o,c]=mG(n.target),[d,h,p,g]=e1(e);a.forEach(e=>{let{x:n,y:a}=e,l=tE(n,6),u=tE(a,6);o&&!fi(u,s.y)&&(d=Math.max(d,a)),t&&!fi(l,s.x)&&(h=Math.min(h,n)),c&&!fi(u,s.y)&&(p=Math.min(p,a)),r&&!fi(l,s.x)&&(g=Math.max(g,n))}),eD(u=eP([d,h,p,g]),.9999,l)}}return eO(u,c,d,l),u};function fr(t){let e,n;return e=new pr({props:{items:t[11]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};2048&n[0]&&(r.items=t[11]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function fo(t){let e,n,r;return n=new mx({props:{$$slots:{default:[fr]},$$scope:{ctx:t}}}),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"slot","header")},m(t,o){o8(t,e,o),aK(n,e,null),r=!0},p(t,e){let r={};2048&e[0]|4&e[7]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n)}}}function fa(t){let e,n;return e=new dv({props:{onclick:t[88],label:t[4].cropLabelButtonRecenter,icon:t[4].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!t[9],hideLabel:!0,style:"opacity: ".concat(t[29],"; transform: translate3d(").concat(t[30].x,"px, ").concat(t[30].y,"px, 0)")}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};16&n[0]&&(r.label=t[4].cropLabelButtonRecenter),16&n[0]&&(r.icon=t[4].cropIconButtonRecenter),512&n[0]&&(r.disabled=!t[9]),1610612736&n[0]&&(r.style="opacity: ".concat(t[29],"; transform: translate3d(").concat(t[30].x,"px, ").concat(t[30].y,"px, 0)")),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function fl(t){let e,n;return(e=new mH({props:{rect:t[8],visible:t[12],style:t[1]}})).$on("resizestart",t[68]),e.$on("resizemove",t[69]),e.$on("resizeend",t[70]),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};256&n[0]&&(r.rect=t[8]),4096&n[0]&&(r.visible=t[12]),2&n[0]&&(r.style=t[1]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function fs(t){let e,n;return e=new m2({props:{width:Math.round(t[13].width),height:Math.round(t[13].height)}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};8192&n[0]&&(r.width=Math.round(t[13].width)),8192&n[0]&&(r.height=Math.round(t[13].height)),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function fc(t){let e,n,r,o,a,l,s,c;let d=t[21]&&t[10]&&fa(t),u=t[21]&&fl(t),h=t[22]&&fs(t);return{c(){e=o9("div"),n=o9("div"),d&&d.c(),r=ai(),u&&u.c(),a=ai(),h&&h.c(),ao(n,"class","PinturaStage"),ao(e,"slot","main")},m(p,g){o8(p,e,g),o3(e,n),d&&d.m(n,null),o3(n,r),u&&u.m(n,null),t[162](n),o3(e,a),h&&h.m(e,null),l=!0,s||(c=[oQ(cE.call(null,n)),ar(n,"measure",t[160]),ar(n,"wheel",function(){oN(t[2]&&t[87])&&(t[2]&&t[87]).apply(this,arguments)},{passive:!1}),ar(n,"interactionstart",t[74]),ar(n,"interactionupdate",t[75]),ar(n,"interactionrelease",t[77]),ar(n,"interactionend",t[76]),oQ(o=dk.call(null,n,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:fx,getEventPosition:t[163]})),ar(n,"gesturedown",t[84]),ar(n,"gestureupdate",t[85]),ar(n,"gestureup",t[86]),oQ(mV.call(null,n))],s=!0)},p(a,l){(t=a)[21]&&t[10]?d?(d.p(t,l),2098176&l[0]&&a_(d,1)):((d=fa(t)).c(),a_(d,1),d.m(n,r)):d&&(aO(),aN(d,1,1,()=>{d=null}),az()),t[21]?u?(u.p(t,l),2097152&l[0]&&a_(u,1)):((u=fl(t)).c(),a_(u,1),u.m(n,null)):u&&(aO(),aN(u,1,1,()=>{u=null}),az()),o&&oN(o.update)&&16777220&l[0]&&o.update.call(null,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:fx,getEventPosition:t[163]}),t[22]?h?(h.p(t,l),4194304&l[0]&&a_(h,1)):((h=fs(t)).c(),a_(h,1),h.m(e,null)):h&&(aO(),aN(h,1,1,()=>{h=null}),az())},i(t){l||(a_(d),a_(u),a_(h),l=!0)},o(t){aN(d),aN(u),aN(h),l=!1},d(n){n&&o7(e),d&&d.d(),u&&u.d(),t[162](null),h&&h.d(),s=!1,o_(c)}}}function fd(t){let e,n,r,o;let a=[{class:"PinturaControlList"},{tabs:t[7]},t[18]],l={$$slots:{default:[fu,t=>{let{tab:e}=t;return{218:e}},t=>{let{tab:e}=t;return[0,0,0,0,0,0,0,e?2:0]}]},$$scope:{ctx:t}};for(let t=0;t<a.length;t+=1)l=oD(l,a[t]);(e=new c0({props:l})).$on("select",t[161]);let s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[17]},t[18]],c={$$slots:{default:[fg,t=>{let{panel:e}=t;return{217:e}},t=>{let{panel:e}=t;return[0,0,0,0,0,0,0,e?1:0]}]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)c=oD(c,s[t]);return r=new dn({props:c}),{c(){aq(e.$$.fragment),n=ai(),aq(r.$$.fragment)},m(t,a){aK(e,t,a),o8(t,n,a),aK(r,t,a),o=!0},p(t,n){let o=262272&n[0]?aX(a,[a[0],128&n[0]&&{tabs:t[7]},262144&n[0]&&aZ(t[18])]):{};6&n[7]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);let l=393216&n[0]?aX(s,[s[0],s[1],131072&n[0]&&{panels:t[17]},262144&n[0]&&aZ(t[18])]):{};511721496&n[0]|5&n[7]&&(l.$$scope={dirty:n,ctx:t}),r.$set(l)},i(t){o||(a_(e.$$.fragment,t),a_(r.$$.fragment,t),o=!0)},o(t){aN(e.$$.fragment,t),aN(r.$$.fragment,t),o=!1},d(t){aJ(e,t),t&&o7(n),aJ(r,t)}}}function fu(t){let e,n;let r=t[218].label+"";return{c(){e=o9("span"),n=ae(r)},m(t,r){o8(t,e,r),o3(e,n)},p(t,e){2&e[7]&&r!==(r=t[218].label+"")&&as(n,r)},d(t){t&&o7(e)}}}function fh(t){let e,n;return e=new mO({props:{elasticity:t[25]*t[44],base:fy,min:t[23],max:f$,valueMin:t[27][0],valueMax:t[27][1],value:t[28],labelReset:t[4].labelReset,valueLabel:"".concat(Math.round(100*t[28]),"%"),oninputstart:t[81],oninputmove:t[82],oninputend:t[83]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};33554432&n[0]&&(r.elasticity=t[25]*t[44]),8388608&n[0]&&(r.min=t[23]),134217728&n[0]&&(r.valueMin=t[27][0]),134217728&n[0]&&(r.valueMax=t[27][1]),268435456&n[0]&&(r.value=t[28]),16&n[0]&&(r.labelReset=t[4].labelReset),268435456&n[0]&&(r.valueLabel="".concat(Math.round(100*t[28]),"%")),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function fp(t){let e,n;return e=new mQ({props:{elasticity:t[25]*t[44],rotation:t[14],labelReset:t[4].labelReset,valueMin:t[26][0],valueMax:t[26][1],rotationMin:-t[3],rotationMax:t[3],oninputstart:t[71],oninputmove:t[72],oninputend:t[73]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};33554432&n[0]&&(r.elasticity=t[25]*t[44]),16384&n[0]&&(r.rotation=t[14]),16&n[0]&&(r.labelReset=t[4].labelReset),67108864&n[0]&&(r.valueMin=t[26][0]),67108864&n[0]&&(r.valueMax=t[26][1]),8&n[0]&&(r.rotationMin=-t[3]),8&n[0]&&(r.rotationMax=t[3]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function fg(t){let e,n,r,o;let a=[fp,fh],l=[];function s(t,e){return t[217]===t[93]+"-rotation"?0:t[217]===t[93]+"-zoom"?1:-1}return~(e=s(t))&&(n=l[e]=a[e](t)),{c(){n&&n.c(),r=an()},m(t,n){~e&&l[e].m(t,n),o8(t,r,n),o=!0},p(t,o){let c=e;(e=s(t))===c?~e&&l[e].p(t,o):(n&&(aO(),aN(l[c],1,1,()=>{l[c]=null}),az()),~e?((n=l[e])?n.p(t,o):(n=l[e]=a[e](t)).c(),a_(n,1),n.m(r.parentNode,r)):n=null)},i(t){o||(a_(n),o=!0)},o(t){aN(n),o=!1},d(t){~e&&l[e].d(t),t&&o7(r)}}}function fm(t){let e,n;let r=t[19]&&fd(t);return{c(){e=o9("div"),r&&r.c(),ao(e,"slot","footer"),ao(e,"style",t[16])},m(t,o){o8(t,e,o),r&&r.m(e,null),n=!0},p(t,o){t[19]?r?(r.p(t,o),524288&o[0]&&a_(r,1)):((r=fd(t)).c(),a_(r,1),r.m(e,null)):r&&(aO(),aN(r,1,1,()=>{r=null}),az()),(!n||65536&o[0])&&ao(e,"style",t[16])},i(t){n||(a_(r),n=!0)},o(t){aN(r),n=!1},d(t){t&&o7(e),r&&r.d()}}}function ff(t){let e,n,r;function o(e){t[164](e)}let a={hasHeader:t[20],$$slots:{footer:[fm],main:[fc],header:[fo]},$$scope:{ctx:t}};return void 0!==t[15]&&(a.root=t[15]),e=new mL({props:a}),ak.push(()=>aY(e,"root",o)),e.$on("measure",t[165]),{c(){aq(e.$$.fragment)},m(t,n){aK(e,t,n),r=!0},p(t,r){let o={};1048576&r[0]&&(o.hasHeader=t[20]),2146402302&r[0]|4&r[7]&&(o.$$scope={dirty:r,ctx:t}),!n&&32768&r[0]&&(n=!0,o.root=t[15],aE(()=>n=!1)),e.$set(o)},i(t){r||(a_(e.$$.fragment,t),r=!0)},o(t){aN(e.$$.fragment,t),r=!1},d(t){aJ(e,t)}}}let f$=1,fy=0,fx=(t,e)=>t.target===e;function fb(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,y,x,b,v,w,S,k,C,M,T,P,R,A,E,I,L,F,B,D,O,z,_,N,W,j,H,V,U,G,X,Y,q,K,J,Q,tt,te,ti,tn,tr,to,ta,tl,ts,tc,td,tu,th,tp,tg,t$,ty,tv,tw,tS,tk,tC,tM,tT,tP,tR,tA,tI,tL,tF;let tD,tO=oF,tz=()=>(tO(),tO=oj(t_,t=>n(12,tD=t)),t_);t.$$.on_destroy.push(()=>tO());let{isActive:t_}=e;tz();let{stores:tW}=e,{cropImageSelectionCornerStyle:tH="circle"}=e,{cropWillRenderImageSelectionGuides:tV=(t,e)=>{let n="rotate"==t;return{rows:n?5:3,cols:n?5:3,opacity:.25*e}}}=e,{cropAutoCenterImageSelectionTimeout:tG}=e,{cropEnableZoomMatchImageAspectRatio:tX=!0}=e,{cropEnableRotateMatchImageAspectRatio:tZ="never"}=e,{cropEnableRotationInput:tq=!0}=e,{cropEnableZoom:tK=!0}=e,{cropEnableZoomInput:t1=!0}=e,{cropEnableZoomAutoHide:t2=!0}=e,{cropEnableImageSelection:t4=!0}=e,{cropEnableInfoIndicator:t5=!1}=e,{cropEnableZoomTowardsWheelPosition:t3=!0}=e,{cropEnableLimitWheelInputToCropSelection:t6=!0}=e,{cropEnableCenterImageSelection:t8=!0}=e,{cropEnableButtonRotateLeft:t7=!0}=e,{cropEnableButtonRotateRight:t9=!1}=e,{cropEnableButtonFlipHorizontal:et=!0}=e,{cropEnableButtonFlipVertical:ei=!1}=e,{cropSelectPresetOptions:eo}=e,{cropEnableSelectPreset:ea=!0}=e,{cropEnableFilterMatchAspectRatio:es=!0}=e,{cropSelectPresetFilter:eh=!1}=e,{cropEnableButtonToggleCropLimit:em=!1}=e,{cropWillRenderTools:ef=tf}=e,{cropActiveTransformTool:e$="rotation"}=e,{cropMinimizeToolbar:ey="auto"}=e,{cropInteractionFocus:ex="image"}=e,{cropRotationRange:eb=tx}=e,{cropMaskOpacity:ev=.85}=e,{locale:ew={}}=e,eS=av("isAnimated");oV(t,eS,t=>n(139,I=t));let eC=av("elasticityMultiplier");oV(t,eC,t=>n(25,ty=t));let eM=av("redrawTrigger");oV(t,eM,t=>n(159,t$=t));let eP=av("imageIsStatic");oV(t,eP,t=>n(145,_=t));let eR=av("imageStaticVisualCorners");oV(t,eR,t=>n(181,tl=t));let eA=av("fixScrollDirection");oV(t,eA,t=>n(175,tt=t));let eE="idle",eO=a4();oV(t,eO,t=>n(156,th=t));let ez=()=>void 0===to,e_=t=>1/t,eN=t=>{es&&eh!==t&&(n(95,eh=t),to&&1!==to&&eW()&&oJ(iC,to=e_(to),to))},eW=()=>{if(1===to||!r)return!1;let t=e_(to);return!!ud(th).find(e=>{let[n]=e;return n===t})},ej=(t,e,n)=>tb(n)?e.width===Math.round(t.height)||e.height===Math.round(t.width):e.width===Math.round(t.width)||e.height===Math.round(t.height),eU=(t,e,n)=>tY(ed(eg(eu(ee(e),n),t=>Math.abs(Math.round(t)))),eF(t)),eG=()=>(ez()||"always"===tZ&&eW())&&eU(N,q,K)&&ej(N,q,K),eX=t=>{if("never"!==tZ&&eG()){oJ(iu,K+=t,K);let e=tb(K),n=e?q.height:q.width,r=e?q.width:q.height;oJ(iv,N=eL(0,0,n,r),N),ez()||oJ(iC,to=tm(n,r),to)}else oJ(iu,K+=t,K)},{history:eJ,env:e1,isInteracting:e0,isInteractingFraction:e4,isTransformingImage:e5,rootRect:e3,stageRect:e6,utilRect:e8,utilRectPadded:e7,rootLineColor:e9,allowPan:it,allowZoom:ie,allowPlayPause:ii,rangeInputElasticity:ir,presentationScalar:io,utilTools:ia,imagePreviewModifiers:il,imageOutlineOpacity:is,imageFlipX:ic,imageFlipY:id,imageRotation:iu,imageRotationRange:ih,imageOutputSize:ip,imageSelectionRect:ig,imageSelectionRectSnapshot:im,imageSelectionRectIntent:i$,imageSelectionRectPresentation:iy,imageCropRectIntent:ix,imageCropRectOrigin:ib,imageCropRect:iv,imageCropMinSize:iw,imageCropMaxSize:iS,imageCropRange:ik,imageCropAspectRatio:iC,imageCropLimitToImage:iM,imageSize:iT,imageScalar:iP,imageOverlayMarkup:iR,stagePadded:iA,stageRecenter:iE}=tW;oV(t,e1,t=>n(140,L=t)),oV(t,e0,t=>n(144,z=t)),oV(t,e5,t=>n(173,X=t)),oV(t,e3,t=>n(24,te=t)),oV(t,e6,t=>n(151,G=t)),oV(t,e7,t=>n(148,H=t)),oV(t,io,t=>n(147,j=t)),oV(t,ia,t=>n(183,tc=t)),oV(t,il,t=>n(172,D=t)),oV(t,ic,t=>n(158,tg=t)),oV(t,id,t=>n(157,tp=t)),oV(t,iu,t=>n(14,K=t)),oV(t,ih,t=>n(26,tv=t)),oV(t,ip,t=>n(184,td=t)),oV(t,ig,t=>n(150,U=t)),oV(t,im,t=>n(149,V=t)),oV(t,i$,t=>n(182,ts=t)),oV(t,iy,t=>n(143,O=t)),oV(t,ix,t=>n(176,ti=t)),oV(t,ib,t=>n(178,tr=t)),oV(t,iv,t=>n(13,N=t)),oV(t,iw,t=>n(154,Q=t)),oV(t,iS,t=>n(180,ta=t)),oV(t,ik,t=>n(177,tn=t)),oV(t,iC,t=>n(179,to=t)),oV(t,iM,t=>n(153,J=t)),oV(t,iT,t=>n(152,q=t)),oV(t,iP,t=>n(146,W=t)),oV(t,iA,t=>n(142,B=t));let iI=(t,e)=>{let n={target:t,translate:e},r=ec(ee(Q),j),o=ec(ee(ta),j),a=mX(V,n,{...H,x:0,y:0},{aspectRatio:to,minSize:r,maxSize:o});if(a=eK(a,{...H,x:0,y:0},to),!J)return{boundsLimited:a,boundsIntent:a};let l=fn(V,a,n,tl,{aspectRatio:to,minSize:r,maxSize:o});return{boundsLimited:l,boundsIntent:l}},iL=(t,e)=>{let n={target:t,translate:e},r=ec(ee(Q),j),o=ec(ee(ta),j),a=mY(V,n,{aspectRatio:to,minSize:r});return{boundsLimited:mX(V,n,{...H,x:0,y:0},{aspectRatio:to,minSize:r,maxSize:o}),boundsIntent:a}},iF=t=>{let e,{translation:n,scalar:r}=t;_&&(r=1,n=tj(tN(n)));let o=Math.min(U.width/N.width,U.height/N.height),a=t0(tN(n),1/o);if(tL){let t=tQ(tN(tL),n);tL=n,e=eB(ek(N),t)}else e=eB(ek(tI),tj(tN(a))),void 0!==r&&eD(e,1/r);oJ(ix,ti=e,ti),oJ(iv,N=e,N)},iB=(t,e,n)=>tb(n)?1-1/Math.min(t.height/e.width,t.width/e.height):1-1/Math.min(t.width/e.width,t.height/e.height),iD=a5([ik,iv],(t,e)=>{let[n,r]=t;if(!r)return;let[o,a]=n,l=eV(r);e([en(e2(eq(o,l),tE)),en(e2(eQ(a,l),tE))])});oV(t,iD,t=>n(174,Y=t));let iO=a5([iT,iM,iw,iS,ik,iu],(t,e)=>{let n,r,[o,a,l,s,c,d]=t;if(!o)return;let u=c[0],h=c[1];a?(n=iB(o,h,d),r=Math.min(u.width/l.width,u.height/l.height)):(n=-1,r=1),e([n,r].map(t=>tE(t)))});oV(t,iO,t=>n(27,tw=t));let iz=a5([iT,iv,ik,iu],(t,e)=>{let n,[r,o,a,l]=t;if(!r||!o)return e(0);let s=a[0],c=a[1],d=o.width,u=o.height,h=eV(o),p=eQ(tb(l)?el(r.height,r.width):r,h);if(d<=p.width||u<=p.height){let t=p.width-s.width,e=p.height-s.height;n=0===t||0===e?1:1-Math.min((d-s.width)/t,(u-s.height)/e)}else{let t=eQ({width:c.width-p.width,height:c.height-p.height},h);n=-Math.min((d-p.width)/t.width,(u-p.height)/t.height)}e(n)});oV(t,iz,t=>n(28,tS=t));let i_=()=>{tI=ek(N)},iN=t=>{let e,n,r;let o=eV(tI),a=eQ(tb(K)?el(q.height,q.width):q,o);if(t>=0){let l=a.width-tn[0].width,s=a.height-tn[0].height;r=eq({width:e=a.width-l*t,height:n=a.height-s*t},o)}else{let l=tn[1].width-a.width,s=tn[1].height-a.height;r=eQ({width:e=a.width+-(l*t),height:n=a.height+-(s*t)},o)}e=r.width,n=r.height,oJ(iv,N={x:tI.x+.5*tI.width-.5*e,y:tI.y+.5*tI.height-.5*n,width:e,height:n},N)},iW=t=>{let e=eD(ek(tT),1/t);oJ(ix,ti=e,ti),oJ(iv,N=e,N)},ij=()=>{iE.set({})},iH=cy(0,{precision:1e-4});oV(t,iH,t=>n(29,tk=t));let iV=cy();oV(t,iV,t=>n(30,tC=t));let iU=()=>{oJ(il,D.crop={maskOpacity:ev,maskMarkupOpacity:ev},D),il.set(D)},iG=()=>{delete D.crop,il.set(D)},iX=a5([iC,ip,eO],(t,e)=>{let[n,o,a]=t;if(!r)return;let l=ud(a),s=[...l].map(t=>t[0]).sort((t,e)=>nn(t[0])&&!nn(e[0])?1:-1).find(t=>{if(nn(t)&&o){let[e,r]=t,a=o.width===e&&o.height===r,l=n===tm(e,r);return a&&l}return t===n});if(!s)return e(void 0);e(l.map(t=>t[0]).findIndex(t=>nn(t)?lw(t,s):t===s))});oV(t,iX,t=>n(155,tu=t));let iZ=(t,e)=>{if(!r||-1===t||void 0===t)return;let n=ud(e)[t][0];return n?nn(n)?tm(n[0],n[1]):n:void 0},iY=a5([e9,iy,e4],(t,e)=>{let[n,r,o]=t,{rows:a,cols:l,opacity:s}=tV(eE,o);if(!r||s<=0)return e([]);let{x:c,y:d,width:u,height:h}=r,p=u/l,g=h/a,m=[];for(let t=1;t<=a-1;t++){let e=d+g*t;m.push({id:"image-selection-guide-row-".concat(t),points:[tB(c,e),tB(c+u,e)],opacity:s,strokeWidth:1,strokeColor:n})}for(let t=1;t<=l-1;t++){let e=c+p*t;m.push({id:"image-selection-guide-col-".concat(t),points:[tB(e,d),tB(e,d+h)],opacity:s,strokeWidth:1,strokeColor:n})}e(m)});oV(t,iY,t=>n(141,F=t));let iq=()=>{iR.update(t=>{let e=t.filter(t=>!/^image\-selection\-guide/.test(t.id));return tD?[...e,...F]:e})},iK="crop-".concat(Z()),iJ=iK+"-"+(tq?e$:"zoom"),iQ=iJ,i1=cy(I?20:0);return oV(t,i1,t=>n(138,E=t)),t.$$set=t=>{"isActive"in t&&tz(n(0,t_=t.isActive)),"stores"in t&&n(97,tW=t.stores),"cropImageSelectionCornerStyle"in t&&n(1,tH=t.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in t&&n(98,tV=t.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in t&&n(99,tG=t.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in t&&n(100,tX=t.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in t&&n(101,tZ=t.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in t&&n(102,tq=t.cropEnableRotationInput),"cropEnableZoom"in t&&n(2,tK=t.cropEnableZoom),"cropEnableZoomInput"in t&&n(103,t1=t.cropEnableZoomInput),"cropEnableZoomAutoHide"in t&&n(104,t2=t.cropEnableZoomAutoHide),"cropEnableImageSelection"in t&&n(105,t4=t.cropEnableImageSelection),"cropEnableInfoIndicator"in t&&n(106,t5=t.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in t&&n(107,t3=t.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in t&&n(108,t6=t.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in t&&n(109,t8=t.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in t&&n(110,t7=t.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in t&&n(111,t9=t.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in t&&n(112,et=t.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in t&&n(113,ei=t.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in t&&n(114,eo=t.cropSelectPresetOptions),"cropEnableSelectPreset"in t&&n(115,ea=t.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in t&&n(116,es=t.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in t&&n(95,eh=t.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in t&&n(117,em=t.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in t&&n(118,ef=t.cropWillRenderTools),"cropActiveTransformTool"in t&&n(119,e$=t.cropActiveTransformTool),"cropMinimizeToolbar"in t&&n(120,ey=t.cropMinimizeToolbar),"cropInteractionFocus"in t&&n(121,ex=t.cropInteractionFocus),"cropRotationRange"in t&&n(3,eb=t.cropRotationRange),"cropMaskOpacity"in t&&n(122,ev=t.cropMaskOpacity),"locale"in t&&n(4,ew=t.locale)},t.$$.update=()=>{4096&t.$$.dirty[0]|268435456&t.$$.dirty[3]&&eP.set("selection"===ex&&tD),2097152&t.$$.dirty[3]&&n(129,r=eo&&Array.isArray(eo)&&eo.length),2097152&t.$$.dirty[3]|32&t.$$.dirty[4]&&eO.set(r?eo:[]),4096&t.$$.dirty[0]|32768&t.$$.dirty[4]&&tD&&is.set(1,{hard:!I}),4096&t.$$.dirty[0]&&it.set(!tD),4096&t.$$.dirty[0]&&ie.set(!tD),4096&t.$$.dirty[0]&&tD&&ii.set(!0),65536&t.$$.dirty[4]&&n(124,g="overlay"===L.layoutMode),4194304&t.$$.dirty[3]|1&t.$$.dirty[4]&&n(128,w=ea&&!g),83886080&t.$$.dirty[4]&&n(137,c=H&&U&&eZ(H,U)),67117056&t.$$.dirty[4]&&n(135,d=!!(U&&c)),67119104&t.$$.dirty[4]&&n(133,u=d&&eH(U,c,t=>tE(t,5))),16400&t.$$.dirty[0]|52297732&t.$$.dirty[3]|1879114288&t.$$.dirty[4]|31&t.$$.dirty[5]&&n(11,o=t$&&ef([t7&&["Button","rotate-left",{label:ew.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:ew.cropIconButtonRotateLeft,onclick:()=>{eX(-Math.PI/2),eJ.write()}}],t9&&["Button","rotate-right",{label:ew.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:ew.cropIconButtonRotateRight,onclick:()=>{eX(Math.PI/2),eJ.write()}}],et&&["Button","flip-horizontal",{label:ew.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:ew.cropIconButtonFlipHorizontal,onclick:()=>{tb(K)?oJ(id,tp=!tp,tp):oJ(ic,tg=!tg,tg),eJ.write()}}],ei&&["Button","flip-vertical",{label:ew.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:ew.cropIconButtonFlipVertical,onclick:()=>{tb(K)?oJ(ic,tg=!tg,tg):oJ(id,tp=!tp,tp),eJ.write()}}],w&&r&&[!1===eh?"Dropdown":m7,"select-preset",{icon:ug(ew.cropIconSelectPreset,ew,iZ(tu,th)),label:ug(ew.cropLabelSelectPreset,ew,iZ(tu,th)),labelClass:"PinturaToolbarContentWide",options:th,filter:eh,onfilterchange:eN,selectedIndex:tu,onchange:t=>{let{value:e}=t;nn(e)?(oJ(iC,to=tm(e[0],e[1]),to),oJ(ip,td=er(e),td)):oJ(iC,to=e,to),u&&ij(),eJ.write()},optionMapper:t=>{let e=!1,n=nn(t.value)?t.value[0]/t.value[1]:t.value;if(n){let t=lu(q,K,n);e=t.width<Q.width||t.height<Q.height}return t.icon=m4(t.value,{bounds:14}),{...t,disabled:e}}}],em&&["Dropdown","select-crop-limit",{icon:ug(ew.cropIconCropBoundary,ew,J),label:ew.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:t=>{let{value:e}=t;oJ(iM,J=e,J),eJ.write()},options:[[!0,ew.cropLabelCropBoundaryEdge,{icon:ug(ew.cropIconCropBoundary,ew,!0)}],[!1,ew.cropLabelCropBoundaryNone,{icon:ug(ew.cropIconCropBoundary,ew,!1)}]]}]].filter(Boolean),L,()=>eM.set({})).filter(Boolean)),6144&t.$$.dirty[0]|134217728&t.$$.dirty[3]|65537&t.$$.dirty[4]&&oJ(ia,tc=tD&&"never"!==ey&&("always"===ey||"short"===L.verticalSpace||g)?o.map(t=>{let[e,n,r]=t;return Array.isArray(r)?[e,n,r]:[e,n,{...r,hideLabel:!0}]}):[],tc),536870912&t.$$.dirty[4]&&n(23,a=J?0:-1),150994944&t.$$.dirty[4]&&n(130,l=H&&tB(-(G.x-H.x),-(G.y-H.y))),524352&t.$$.dirty[4]&&n(131,s=O&&l&&tB(d1(O.x+.5*O.width+l.x),d1(O.y+.5*O.height+l.y))),33554432&t.$$.dirty[4]&&n(134,h=null!=V),16785408&t.$$.dirty[4]&&n(136,p=H&&c&&(c.height===H.height||c.width===H.width)),12587008&t.$$.dirty[4]&&n(132,m=!p&&j<1&&W<1),3840&t.$$.dirty[4]&&n(9,f=d&&!h&&(!u||m)),8192&t.$$.dirty[0]|8192&t.$$.dirty[3]|1&t.$$.dirty[4]&&n(22,$=t5&&!!N&&!g),524352&t.$$.dirty[4]&&n(8,b=O&&l&&{x:O.x+l.x,y:O.y+l.y,width:O.width,height:O.height}),256&t.$$.dirty[0]|4096&t.$$.dirty[3]|1&t.$$.dirty[4]&&n(21,y=t4&&!!b&&!g),65600&t.$$.dirty[3]|2097280&t.$$.dirty[4]&&n(10,x=t8&&!!s&&!tG&&!_),512&t.$$.dirty[0]|1073741888&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&f&&tG&&!z&&(clearTimeout(tR),n(123,tR=setTimeout(ij,tG))),1073741824&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&z&&clearTimeout(tR),1536&t.$$.dirty[0]|32768&t.$$.dirty[4]&&iH.set(x&&f?1:0,{hard:!1===I}),32896&t.$$.dirty[4]&&iV.set(s,{hard:!1===I}),4096&t.$$.dirty[0]|262144&t.$$.dirty[4]&&(tD&&!B?iU():iG()),131072&t.$$.dirty[4]&&F&&iq(),65536&t.$$.dirty[4]&&n(127,v="short"!==L.verticalSpace),134217728&t.$$.dirty[3]|9&t.$$.dirty[4]&&n(20,S="never"===ey&&!g||v&&"always"!==ey),4&t.$$.dirty[0]|1024&t.$$.dirty[3]&&n(126,k=tK&&t1),2048&t.$$.dirty[3]|12&t.$$.dirty[4]&&n(125,C=t2?v&&k:k),512&t.$$.dirty[3]|2&t.$$.dirty[4]&&n(19,M=tq||C),2&t.$$.dirty[4]&&!C&&n(5,iQ=iJ),32&t.$$.dirty[0]&&n(18,T={name:iK,selected:iQ}),16&t.$$.dirty[0]|512&t.$$.dirty[3]|2&t.$$.dirty[4]&&n(7,P=[tq&&{id:iK+"-rotation",label:ew.cropLabelTabRotation},C&&{id:iK+"-zoom",label:ew.cropLabelTabZoom}].filter(Boolean)),128&t.$$.dirty[0]&&n(17,R=P.map(t=>t.id)),64&t.$$.dirty[0]|1&t.$$.dirty[4]&&tA&&!tA.children.length&&g&&tA.dispatchEvent(new CustomEvent("measure",{detail:tA.rect})),4096&t.$$.dirty[0]|32768&t.$$.dirty[4]&&I&&i1.set(tD?0:20),16384&t.$$.dirty[4]&&n(16,A=E?"transform: translateY(".concat(E,"px)"):void 0)},[t_,tH,tK,eb,ew,iQ,tA,P,b,f,x,o,tD,N,K,tF,A,R,T,M,S,y,$,a,te,ty,tv,tw,tS,tk,tC,eS,eC,eM,eP,eR,eA,eO,e1,e0,e5,e3,e6,e7,ir,io,ia,il,ic,id,iu,ih,ip,ig,im,i$,iy,ix,ib,iv,iw,iS,ik,iC,iM,iT,iP,iA,()=>{eE="select",oJ(e0,z=!0,z),oJ(im,V=ek(U),V),tM=_?iI:iL},t=>{let{detail:e}=t,{boundsLimited:n,boundsIntent:r}=tM(e.direction,e.translation);oJ(e5,X=!0,X),oJ(i$,ts=r,ts),oJ(ig,U=n,U)},t=>{let{detail:e}=t,{boundsLimited:n}=tM(e.direction,e.translation);oJ(e5,X=!1,X),oJ(e0,z=!1,z),oJ(i$,ts=void 0,ts),tU(e.translation)&&(oJ(ig,U=n,U),eJ.write()),oJ(im,V=void 0,V),eE=void 0},()=>{eE="rotate",oJ(e0,z=!0,z),oJ(ib,tr=ek(N),tr)},t=>{oJ(e5,X=!0,X),oJ(iu,K=t,K)},t=>{oJ(e5,X=!1,X),oJ(e0,z=!1,z),oJ(iu,K=t,K),eJ.write(),oJ(ib,tr=void 0,tr)},()=>{eE="pan",tL=void 0,oJ(e0,z=!0,z),tI=ek(N)},t=>{let{detail:e}=t;oJ(e5,X=!0,X),iF(e)},t=>{let{detail:e}=t;oJ(e5,X=!1,X),oJ(e0,z=!1,z),(tU(e.translation)>0||0!==e.scalar)&&(iF(e),eJ.write()),oJ(ix,ti=void 0,ti),tI=void 0},t=>{let{detail:{translation:e}}=t;_&&(e=tj(tN(e))),tL=e,oJ(e0,z=!1,z)},iD,iO,iz,()=>{eE="zoom",oJ(e0,z=!0,z),i_()},t=>{oJ(e5,X=!1,X),iN(t)},t=>{iN(t),eJ.write(),oJ(e5,X=!1,X),oJ(e0,z=!1,z),tI=void 0},()=>{eE="zoom",tI||(tT=ek(N),oJ(e0,z=!0,z))},t=>{let{detail:e}=t;tT&&(oJ(e5,X=!0,X),iW(e))},t=>{let{detail:e}=t;tT&&(oJ(e5,X=!1,X),oJ(e0,z=!1,z),iW(e),oJ(ix,ti=void 0,ti),tT=void 0,eJ.write())},t=>{let e=pH(t,te,G);if(t6&&!eY(U,e))return;eE="zoom",oJ(e0,z=!0,z),oJ(e5,X=!0,X),t.preventDefault(),t.stopPropagation();let n=dA(t,{fixScrollDirection:tt}),r=ek(N),o=1===Math.min(N.width/Q.width,N.height/Q.height);if(tX&&J){let t=ej(N,q,K);if(ez()&&t&&n>0&&u){oJ(e0,z=!1,z),oJ(e5,X=!1,X);let t=tb(K)?eT({height:q.width,width:q.height}):eT(q);if(eH(r,t)||(clearTimeout(tP),eH(eJ.state.crop,t)))return;oJ(iv,N=t,N),eJ.write();return}}let a=eF(N);if(t3&&"selection"!==ex&&n<0&&!o){let t=tQ(tN(e),U),n=Math.min(U.width/N.width,U.height/N.height);a=eY(eD(ek(U),1.1),e)?tJ(ek(N),t0(t,1/n)):a}let l=eD(ek(N),1+n/100,a);if(ep(Y[1],l)||(l=eI(eF(l),Y[1])),ep(l,Y[0])||(l=eI(eF(l),Y[0])),eH(r,l,tE)){oJ(e0,z=!1,z),oJ(e5,X=!1,X);return}oJ(iv,N=e2(l,t=>tE(t,5)),N),oJ(e0,z=!1,z),oJ(e5,X=!1,X),clearTimeout(tP),tP=setTimeout(()=>{eJ.write()},500)},ij,iH,iV,iX,iY,iK,i1,eh,"crop",tW,tV,tG,tX,tZ,tq,t1,t2,t4,t5,t3,t6,t8,t7,t9,et,ei,eo,ea,es,em,ef,e$,ey,ex,ev,tR,g,C,k,v,w,r,l,s,m,u,h,d,p,c,E,I,L,F,B,O,z,_,W,j,H,V,U,G,q,J,Q,tu,th,tp,tg,t$,function(e){aw.call(this,t,e)},t=>{let{detail:e}=t;return n(5,iQ=e)},function(t){ak[t?"unshift":"push"](()=>{n(6,tA=t)})},t=>pj(t),function(t){n(15,tF=t)},function(e){aw.call(this,t,e)}]}class fv extends a1{get name(){return this.$$.ctx[96]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),aF()}get stores(){return this.$$.ctx[97]}set stores(t){this.$$set({stores:t}),aF()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$$set({cropImageSelectionCornerStyle:t}),aF()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[98]}set cropWillRenderImageSelectionGuides(t){this.$$set({cropWillRenderImageSelectionGuides:t}),aF()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[99]}set cropAutoCenterImageSelectionTimeout(t){this.$$set({cropAutoCenterImageSelectionTimeout:t}),aF()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableZoomMatchImageAspectRatio(t){this.$$set({cropEnableZoomMatchImageAspectRatio:t}),aF()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[101]}set cropEnableRotateMatchImageAspectRatio(t){this.$$set({cropEnableRotateMatchImageAspectRatio:t}),aF()}get cropEnableRotationInput(){return this.$$.ctx[102]}set cropEnableRotationInput(t){this.$$set({cropEnableRotationInput:t}),aF()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$$set({cropEnableZoom:t}),aF()}get cropEnableZoomInput(){return this.$$.ctx[103]}set cropEnableZoomInput(t){this.$$set({cropEnableZoomInput:t}),aF()}get cropEnableZoomAutoHide(){return this.$$.ctx[104]}set cropEnableZoomAutoHide(t){this.$$set({cropEnableZoomAutoHide:t}),aF()}get cropEnableImageSelection(){return this.$$.ctx[105]}set cropEnableImageSelection(t){this.$$set({cropEnableImageSelection:t}),aF()}get cropEnableInfoIndicator(){return this.$$.ctx[106]}set cropEnableInfoIndicator(t){this.$$set({cropEnableInfoIndicator:t}),aF()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[107]}set cropEnableZoomTowardsWheelPosition(t){this.$$set({cropEnableZoomTowardsWheelPosition:t}),aF()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[108]}set cropEnableLimitWheelInputToCropSelection(t){this.$$set({cropEnableLimitWheelInputToCropSelection:t}),aF()}get cropEnableCenterImageSelection(){return this.$$.ctx[109]}set cropEnableCenterImageSelection(t){this.$$set({cropEnableCenterImageSelection:t}),aF()}get cropEnableButtonRotateLeft(){return this.$$.ctx[110]}set cropEnableButtonRotateLeft(t){this.$$set({cropEnableButtonRotateLeft:t}),aF()}get cropEnableButtonRotateRight(){return this.$$.ctx[111]}set cropEnableButtonRotateRight(t){this.$$set({cropEnableButtonRotateRight:t}),aF()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[112]}set cropEnableButtonFlipHorizontal(t){this.$$set({cropEnableButtonFlipHorizontal:t}),aF()}get cropEnableButtonFlipVertical(){return this.$$.ctx[113]}set cropEnableButtonFlipVertical(t){this.$$set({cropEnableButtonFlipVertical:t}),aF()}get cropSelectPresetOptions(){return this.$$.ctx[114]}set cropSelectPresetOptions(t){this.$$set({cropSelectPresetOptions:t}),aF()}get cropEnableSelectPreset(){return this.$$.ctx[115]}set cropEnableSelectPreset(t){this.$$set({cropEnableSelectPreset:t}),aF()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[116]}set cropEnableFilterMatchAspectRatio(t){this.$$set({cropEnableFilterMatchAspectRatio:t}),aF()}get cropSelectPresetFilter(){return this.$$.ctx[95]}set cropSelectPresetFilter(t){this.$$set({cropSelectPresetFilter:t}),aF()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[117]}set cropEnableButtonToggleCropLimit(t){this.$$set({cropEnableButtonToggleCropLimit:t}),aF()}get cropWillRenderTools(){return this.$$.ctx[118]}set cropWillRenderTools(t){this.$$set({cropWillRenderTools:t}),aF()}get cropActiveTransformTool(){return this.$$.ctx[119]}set cropActiveTransformTool(t){this.$$set({cropActiveTransformTool:t}),aF()}get cropMinimizeToolbar(){return this.$$.ctx[120]}set cropMinimizeToolbar(t){this.$$set({cropMinimizeToolbar:t}),aF()}get cropInteractionFocus(){return this.$$.ctx[121]}set cropInteractionFocus(t){this.$$set({cropInteractionFocus:t}),aF()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(t){this.$$set({cropRotationRange:t}),aF()}get cropMaskOpacity(){return this.$$.ctx[122]}set cropMaskOpacity(t){this.$$set({cropMaskOpacity:t}),aF()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),aF()}constructor(t){super(),aQ(this,t,fb,ff,oW,{name:96,isActive:0,stores:97,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:98,cropAutoCenterImageSelectionTimeout:99,cropEnableZoomMatchImageAspectRatio:100,cropEnableRotateMatchImageAspectRatio:101,cropEnableRotationInput:102,cropEnableZoom:2,cropEnableZoomInput:103,cropEnableZoomAutoHide:104,cropEnableImageSelection:105,cropEnableInfoIndicator:106,cropEnableZoomTowardsWheelPosition:107,cropEnableLimitWheelInputToCropSelection:108,cropEnableCenterImageSelection:109,cropEnableButtonRotateLeft:110,cropEnableButtonRotateRight:111,cropEnableButtonFlipHorizontal:112,cropEnableButtonFlipVertical:113,cropSelectPresetOptions:114,cropEnableSelectPreset:115,cropEnableFilterMatchAspectRatio:116,cropSelectPresetFilter:95,cropEnableButtonToggleCropLimit:117,cropWillRenderTools:118,cropActiveTransformTool:119,cropMinimizeToolbar:120,cropInteractionFocus:121,cropRotationRange:3,cropMaskOpacity:122,locale:4},null,[-1,-1,-1,-1,-1,-1,-1,-1])}}function fw(t){let e,n,r,o;e=new dL({props:{elasticity:t[6]*t[9],class:"PinturaControlListScroller",$$slots:{default:[fk]},$$scope:{ctx:t}}});let a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[5]],l={$$slots:{default:[fC,t=>{let{panel:e}=t;return{42:e}},t=>{let{panel:e}=t;return[0,e?2048:0]}]},$$scope:{ctx:t}};for(let t=0;t<a.length;t+=1)l=oD(l,a[t]);return r=new dn({props:l}),{c(){aq(e.$$.fragment),n=ai(),aq(r.$$.fragment)},m(t,a){aK(e,t,a),o8(t,n,a),aK(r,t,a),o=!0},p(t,n){let o={};64&n[0]&&(o.elasticity=t[6]*t[9]),38&n[0]|8192&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);let l=48&n[0]?aX(a,[a[0],a[1],16&n[0]&&{panels:t[4]},32&n[0]&&aZ(t[5])]):{};128&n[0]|10240&n[1]&&(l.$$scope={dirty:n,ctx:t}),r.$set(l)},i(t){o||(a_(e.$$.fragment,t),a_(r.$$.fragment,t),o=!0)},o(t){aN(e.$$.fragment,t),aN(r.$$.fragment,t),o=!1},d(t){aJ(e,t),t&&o7(n),aJ(r,t)}}}function fS(t){let e,n;let r=t[43].label+"";return{c(){e=o9("span"),n=ae(r)},m(t,r){o8(t,e,r),o3(e,n)},p(t,e){4096&e[1]&&r!==(r=t[43].label+"")&&as(n,r)},d(t){t&&o7(e)}}}function fk(t){let e,n;let r=[{class:"PinturaControlList"},{tabs:t[1]},t[5]],o={$$slots:{default:[fS,t=>{let{tab:e}=t;return{43:e}},t=>{let{tab:e}=t;return[0,e?4096:0]}]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return(e=new c0({props:o})).$on("select",t[24]),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=34&n[0]?aX(r,[r[0],2&n[0]&&{tabs:t[1]},32&n[0]&&aZ(t[5])]):{};12288&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function fC(t){let e,n;let r=[t[7][t[42]]],o={};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return e=new mO({props:o}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=128&n[0]|2048&n[1]?aX(r,[aZ(t[7][t[42]])]):{};e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function fM(t){let e,n;let r=t[5]&&fw(t);return{c(){e=o9("div"),r&&r.c(),ao(e,"slot","footer"),ao(e,"style",t[3])},m(t,o){o8(t,e,o),r&&r.m(e,null),n=!0},p(t,o){t[5]?r?(r.p(t,o),32&o[0]&&a_(r,1)):((r=fw(t)).c(),a_(r,1),r.m(e,null)):r&&(aO(),aN(r,1,1,()=>{r=null}),az()),(!n||8&o[0])&&ao(e,"style",t[3])},i(t){n||(a_(r),n=!0)},o(t){aN(r),n=!1},d(t){t&&o7(e),r&&r.d()}}}function fT(t){let e,n;return(e=new mL({props:{$$slots:{footer:[fM]},$$scope:{ctx:t}}})).$on("measure",t[25]),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};254&n[0]|8192&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function fP(t,e,n){let r,o,a,l,s,c,d,u,h,p;let g,m=oF,f=()=>(m(),m=oj(y,t=>n(21,g=t)),y);t.$$.on_destroy.push(()=>m());let{stores:$}=e,{isActive:y}=e;f();let{locale:x={}}=e,{finetuneControlConfiguration:b}=e,{finetuneOptions:v}=e,{finetuneNudgePrecision:w}=e,{history:S,animation:k,scrollElasticity:C,rangeInputElasticity:M,imageColorMatrix:T,imageConvolutionMatrix:P,imageGamma:R,imageVignette:A,imageNoise:E,allowPan:I,allowZoom:L,allowZoomControls:F,allowPlayPause:B}=$;oV(t,k,t=>n(22,d=t));let D={imageColorMatrix:T,imageConvolutionMatrix:P,imageGamma:R,imageVignette:A,imageNoise:E},O=av("elasticityMultiplier");oV(t,O,t=>n(6,h=t));let z="finetune-".concat(Z()),_=a4({});oV(t,_,t=>n(23,u=t));let N=a4({});oV(t,N,t=>n(7,p=t));let j=()=>{oJ(N,p=Object.keys(u).reduce((t,e)=>{let{base:n,min:r,max:o,getLabel:a,getStore:l,setValue:s=(t,e)=>t.set(e)}=b[e],c=l(D),d=null!=u[e]?u[e]:n;return t[e]={base:n,min:r,max:o,value:d,valueLabel:a?a(d,r,o,o-r):Math.round(100*d),oninputmove:t=>{s(c,t)},oninputend:t=>{s(c,t),S.write()},elasticity:h*M,labelReset:x.labelReset,nudgeMultiplier:w},t},{}),p)},H=[],V=t=>{H&&H.forEach(t=>t()),H=l.map(e=>{let{getStore:n,getValue:r=tf}=t[e];return n(D).subscribe(t=>{let n=null!=t?r(t):t;oJ(_,u={...u,[e]:n},u)})})},U=cy(d?20:0);return oV(t,U,t=>n(20,c=t)),t.$$set=t=>{"stores"in t&&n(15,$=t.stores),"isActive"in t&&f(n(0,y=t.isActive)),"locale"in t&&n(16,x=t.locale),"finetuneControlConfiguration"in t&&n(17,b=t.finetuneControlConfiguration),"finetuneOptions"in t&&n(18,v=t.finetuneOptions),"finetuneNudgePrecision"in t&&n(19,w=t.finetuneNudgePrecision)},t.$$.update=()=>{2097152&t.$$.dirty[0]&&I.set(g),2097152&t.$$.dirty[0]&&L.set(g),2097152&t.$$.dirty[0]&&F.set(g),2097152&t.$$.dirty[0]&&g&&B.set(!0),327680&t.$$.dirty[0]&&n(1,r=v?v.map(t=>{let[e,n]=t;return{id:e,label:W(n)?n(x):n}}):[]),2&t.$$.dirty[0]&&n(2,o=r.length?r[0].id:void 0),4&t.$$.dirty[0]&&n(5,a=o&&{name:z,selected:o}),2&t.$$.dirty[0]&&n(4,l=r.map(t=>t.id)),131072&t.$$.dirty[0]&&b&&V(b),8519680&t.$$.dirty[0]&&b&&u&&j(),6291456&t.$$.dirty[0]&&d&&U.set(g?0:20),1048576&t.$$.dirty[0]&&n(3,s=c?"transform: translateY(".concat(c,"px)"):void 0)},[y,r,o,s,l,a,h,p,k,C,O,_,N,U,"finetune",$,x,b,v,w,c,g,d,u,t=>{let{detail:e}=t;return n(2,o=e)},function(e){aw.call(this,t,e)}]}class fR extends a1{get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(t){this.$$set({stores:t}),aF()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),aF()}get locale(){return this.$$.ctx[16]}set locale(t){this.$$set({locale:t}),aF()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(t){this.$$set({finetuneControlConfiguration:t}),aF()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(t){this.$$set({finetuneOptions:t}),aF()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(t){this.$$set({finetuneNudgePrecision:t}),aF()}constructor(t){super(),aQ(this,t,fP,fT,oW,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}}var fA=(t,e)=>{let n=e.length;return t<0?t%n+n:t>=n?t%n:t};function fE(t,e,n){let r=t.slice();return r[46]=e[n].key,r[47]=e[n].index,r[48]=e[n].translate,r[49]=e[n].scale,r[50]=e[n].selected,r[12]=e[n].rotate,r[51]=e[n].dir,r[52]=e[n].center,r[53]=e[n].type,r[2]=e[n].visible,r}function fI(t){let e,n;return{c(){ao(e=o9("div"),"class","PinturaShapeManipulator"),ao(e,"data-control","point"),ao(e,"style",n="pointer-events:none;transform: translate3d(".concat(t[52].x,"px, ").concat(t[52].y,"px, 0) scale(").concat(t[5],", ").concat(t[5],"); opacity: ").concat(t[4]))},m(t,n){o8(t,e,n)},p(t,r){56&r[0]&&n!==(n="pointer-events:none;transform: translate3d(".concat(t[52].x,"px, ").concat(t[52].y,"px, 0) scale(").concat(t[5],", ").concat(t[5],"); opacity: ").concat(t[4]))&&ao(e,"style",n)},d(t){t&&o7(e)}}}function fL(t,e){let n,r,o,a,l,s,c,d,u,h;function p(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[18](e[47],...n)}let g="edge"===e[53]&&e[2]&&fI(e);return{key:t,first:null,c(){n=o9("div"),c=ai(),g&&g.c(),d=an(),ao(n,"role","button"),ao(n,"aria-label",r="Drag ".concat(e[53]," ").concat(e[46])),ao(n,"tabindex",o="edge"===e[53]?-1:0),ao(n,"class","PinturaShapeManipulator"),ao(n,"data-control",a=e[53]),ao(n,"data-selected",l=e[50]),ao(n,"style",s="cursor:".concat(e[51]?e[51]+"-resize":"move",";opacity:").concat(e[4],";--tx:").concat(e[48].x,";--ty:").concat(e[48].y,";--r:").concat("edge"===e[53]?e[12]:0,"rad;--sx:").concat("point"===e[53]?e[5]:e[49].x,";--sy:").concat("point"===e[53]?e[5]:e[49].y,";")),this.first=n},m(t,r){o8(t,n,r),o8(t,c,r),g&&g.m(t,r),o8(t,d,r),u||(h=[ar(n,"nudge",p),oQ(dC.call(null,n,{preventDefault:!0})),ar(n,"interactionstart",function(){oN(e[9]("start",e[47]))&&e[9]("start",e[47]).apply(this,arguments)}),ar(n,"interactionupdate",function(){oN(e[9]("move",e[47]))&&e[9]("move",e[47]).apply(this,arguments)}),ar(n,"interactionend",function(){oN(e[9]("end",e[47]))&&e[9]("end",e[47]).apply(this,arguments)}),oQ(dk.call(null,n,{observeKeys:!0}))],u=!0)},p(t,c){e=t,8&c[0]&&r!==(r="Drag ".concat(e[53]," ").concat(e[46]))&&ao(n,"aria-label",r),8&c[0]&&o!==(o="edge"===e[53]?-1:0)&&ao(n,"tabindex",o),8&c[0]&&a!==(a=e[53])&&ao(n,"data-control",a),8&c[0]&&l!==(l=e[50])&&ao(n,"data-selected",l),56&c[0]&&s!==(s="cursor:".concat(e[51]?e[51]+"-resize":"move",";opacity:").concat(e[4],";--tx:").concat(e[48].x,";--ty:").concat(e[48].y,";--r:").concat("edge"===e[53]?e[12]:0,"rad;--sx:").concat("point"===e[53]?e[5]:e[49].x,";--sy:").concat("point"===e[53]?e[5]:e[49].y,";"))&&ao(n,"style",s),"edge"===e[53]&&e[2]?g?g.p(e,c):((g=fI(e)).c(),g.m(d.parentNode,d)):g&&(g.d(1),g=null)},d(t){t&&o7(n),t&&o7(c),g&&g.d(t),t&&o7(d),u=!1,o_(h)}}}function fF(t){let e,n,r,o;return{c(){ao(e=o9("div"),"role","button"),ao(e,"aria-label","Drag rotator"),ao(e,"tabindex","0"),ao(e,"class","PinturaShapeManipulator"),ao(e,"data-control","rotate"),ao(e,"style",n="transform: translate3d(".concat(t[0].x,"px, ").concat(t[0].y,"px, 0) scale(").concat(t[5],", ").concat(t[5],"); opacity: ").concat(t[4]))},m(n,a){o8(n,e,a),r||(o=[ar(e,"nudge",t[11]),oQ(dC.call(null,e,{preventDefault:!0})),ar(e,"interactionstart",t[12]("start")),ar(e,"interactionupdate",t[12]("move")),ar(e,"interactionend",t[12]("end")),oQ(dk.call(null,e,{observeKeys:!0}))],r=!0)},p(t,r){49&r[0]&&n!==(n="transform: translate3d(".concat(t[0].x,"px, ").concat(t[0].y,"px, 0) scale(").concat(t[5],", ").concat(t[5],"); opacity: ").concat(t[4]))&&ao(e,"style",n)},d(t){t&&o7(e),r=!1,o_(o)}}}function fB(t){let e,n,r=[],o=new Map,a=t[3],l=t=>t[46];for(let e=0;e<a.length;e+=1){let n=fE(t,a,e),s=l(n);o.set(s,r[e]=fL(s,n))}let s=t[1]&&fF(t);return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ai(),s&&s.c(),n=an()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);o8(t,e,o),s&&s.m(t,o),o8(t,n,o)},p(t,c){1592&c[0]&&(a=t[3],r=aG(r,c,l,1,t,a,o,e.parentNode,aV,fL,e,fE)),t[1]?s?s.p(t,c):((s=fF(t)).c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:oF,o:oF,d(t){for(let e=0;e<r.length;e+=1)r[e].d(t);t&&o7(e),s&&s.d(t),t&&o7(n)}}}function fD(t,e,n){let r,o,a,l;let s=ax(),c=.5*tx,d=ty-c,u=ty+c,h=-ty,p=h-c,g=h+c,m=t$-c,f=-t$+c,$=-c,y=ty-tx,x=y-c,b=y+c,v=t$-tx,w=v-c,S=v+c,k=h-tx,C=k+c,M=k-c,T=h+tx,P=T+c,R=T-c,{visible:A=!1}=e,{points:E=[]}=e,{rotatorPoint:I}=e,{selectedPoint:L}=e,{enableDragEdges:F=!0}=e,{enableDragPoints:B=!0}=e,{enableRotatePoints:D=!0}=e,O=av("isAnimated");oV(t,O,t=>n(17,o=t));let z=cy(.5,{precision:1e-4,stiffness:.3,damping:.7});oV(t,z,t=>n(5,l=t));let _=cy(0,{precision:.001,stiffness:.3,damping:.7});oV(t,_,t=>n(4,a=t));let N=t=>{let e="";return(t<=u&&t>=d||t>=p&&t<=g)&&(e="ns"),(t<=f||t>=m||t>=$&&t<=c)&&(e="ew"),(t>=w&&t<=S||t<=P&&t>=R)&&(e="nesw"),(t>=x&&t<=b||t<=C&&t>=M)&&(e="nwse"),e},W=(t,e)=>{let n=0,r=t8(t),o=[],a=t.length;for(;n<a;n++){let e=fA(n-1,t),a=fA(n+1,t),l=t[e],s=t[n],c=t[a],d=Math.atan2(c.y-s.y,c.x-s.x);if(B){let t=tG(tB(l.x-s.x,l.y-s.y)),e=tG(tB(c.x-s.x,c.y-s.y)),r=tB(t.x+e.x,t.y+e.y),a=F?B&&N(Math.atan2(r.y,r.x)):void 0;o.push({index:[n],key:"point-".concat(n),type:"point",selected:L===n,scale:{x:1,y:1},translate:{x:s.x,y:s.y},angle:void 0,rotate:D,center:s,dir:a})}if(!F||Array.isArray(F)&&!F.some(t=>{let[e,r]=t;return n===e&&a===r}))continue;let u=tB(s.x+(c.x-s.x)*.5,s.y+(c.y-s.y)*.5);o.push({index:[n,a],key:"edge-".concat(n),type:"edge",scale:{x:t3(s,c),y:1},translate:{x:s.x,y:s.y},angle:d,rotate:d,center:u,visible:Array.isArray(F),dir:N(Math.atan2(r.y-u.y,r.x-u.x))})}return o},j=(t,e)=>{s("resizestart",{indexes:t,translation:tF(),isNudge:!0}),s("resizemove",{indexes:t,translation:e,isNudge:!0}),s("resizeend",{indexes:t,translation:tF(),isNudge:!0})};return t.$$set=t=>{"visible"in t&&n(2,A=t.visible),"points"in t&&n(13,E=t.points),"rotatorPoint"in t&&n(0,I=t.rotatorPoint),"selectedPoint"in t&&n(14,L=t.selectedPoint),"enableDragEdges"in t&&n(15,F=t.enableDragEdges),"enableDragPoints"in t&&n(16,B=t.enableDragPoints),"enableRotatePoints"in t&&n(1,D=t.enableRotatePoints)},t.$$.update=()=>{131076&t.$$.dirty[0]&&z.set(A?1:.5,{hard:!1===o}),131076&t.$$.dirty[0]&&_.set(A?1:0,{hard:!1===o}),8192&t.$$.dirty[0]&&n(3,r=W(E))},[I,D,A,r,a,l,O,z,_,(t,e)=>n=>{let{detail:r}=n,o=r&&r.translation?r.translation:tB(0,0);s("resize".concat(t),{...r,indexes:e,translation:o})},j,t=>{let{detail:e}=t;s("rotatestart",{translation:tF(),isNudge:!0}),s("rotatemove",{translation:e,isNudge:!0}),s("rotateend",{translation:tF(),isNudge:!0})},t=>e=>{let{detail:n}=e,r=n&&n.translation?n.translation:tB(0,0);s("rotate".concat(t),{...n,translation:r})},E,L,F,B,o,(t,e)=>{let{detail:n}=e;return j(t,n)}]}class fO extends a1{constructor(t){super(),aQ(this,t,fD,fB,oW,{visible:2,points:13,rotatorPoint:0,selectedPoint:14,enableDragEdges:15,enableDragPoints:16,enableRotatePoints:1},null,[-1,-1])}}var fz=(t,e)=>tQ(pj(t),e),f_=t=>document.createTextNode(t),fN=t=>(ib()&&t.endsWith("<div><br></div>")?t.replace(/<div><br><\/div>$/,"<br><br>"):t).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function fW(t){let e,n;return{c(){ao(e=o9("pre"),"class","PinturaContentEditable"),ao(e,"style",n="".concat(t[7],";position:absolute;z-index:-1;pointer-events:none;"))},m(n,r){o8(n,e,r),e.innerHTML=t[0]},p(t,r){1&r[0]&&(e.innerHTML=t[0]),128&r[0]&&n!==(n="".concat(t[7],";position:absolute;z-index:-1;pointer-events:none;"))&&ao(e,"style",n)},d(t){t&&o7(e)}}}function fj(t){let e,n,r,o,a,l;let s=t[8]&&fW(t);return{c(){s&&s.c(),e=ai(),ao(n=o9("pre"),"class","PinturaContentEditable"),ao(n,"data-wrap-content",r=t[4]||t[5]?"wrap":"nowrap"),ao(n,"contenteditable",""),ao(n,"spellcheck",t[1]),ao(n,"autocorrect",t[2]),ao(n,"autocapitalize",t[3]),ao(n,"style",o=t[8]?t[15](t[7]):t[7])},m(r,o){s&&s.m(r,o),o8(r,e,o),o8(r,n,o),t[26](n),a||(l=[ar(n,"input",t[13]),ar(n,"compositionend",t[12]),ar(n,"paste",t[14]),ar(n,"keydown",t[10]),ar(n,"keyup",t[11]),ar(n,"blur",t[9])],a=!0)},p(t,a){t[8]?s?s.p(t,a):((s=fW(t)).c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),48&a[0]&&r!==(r=t[4]||t[5]?"wrap":"nowrap")&&ao(n,"data-wrap-content",r),2&a[0]&&ao(n,"spellcheck",t[1]),4&a[0]&&ao(n,"autocorrect",t[2]),8&a[0]&&ao(n,"autocapitalize",t[3]),384&a[0]&&o!==(o=t[8]?t[15](t[7]):t[7])&&ao(n,"style",o)},i:oF,o:oF,d(r){s&&s.d(r),r&&o7(e),r&&o7(n),t[26](null),a=!1,o_(l)}}}function fH(t,e,n){let r,o,a,l;let{spellcheck:s="false"}=e,{autocorrect:c="off"}=e,{autocapitalize:d="off"}=e,{wrapLines:u=!0}=e,{allowNewline:h=!0}=e,{textFormat:p="text"}=e,{formatInput:g=tf}=e,{formatPaste:m=tf}=e,{style:f}=e,{innerHTML:$}=e,{oninput:x=y}=e,{enableTextStyleShortcuts:b=!1}=e,v=()=>{if(!a)return;let t=document.createRange();t.selectNodeContents(a);let e=F();e.removeAllRanges(),e.addRange(t)},w=ax();document.execCommand("defaultParagraphSeparator",!1,"br");let S=t=>{t!==a.innerHTML&&(n(6,a.innerHTML=t,a),a===document.activeElement&&v())},k=t=>t.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),C=()=>{n(0,$=a.innerHTML);let t=fN($);w("input",t),x(t),requestAnimationFrame(()=>a&&a.scrollTo(0,0))},T=()=>{B(a);let t="html"===p?a.innerHTML:k(a.innerHTML);n(6,a.innerHTML=g(t),a),D(a),C()},P=()=>{w("confirm")},R=()=>{w("cancel")},A={b:"bold",i:"italic",u:"underline",s:"strikethrough"},E=t=>{let e=A[t];e&&document.execCommand(e)},I=t=>{let e=M("span");return e.dataset.bookmark=t,e},L=(t,e,n)=>{let r=I(n);if(t.nodeType===Node.TEXT_NODE){let o=t.textContent;if("start"===n){let n=f_(o.substring(0,e)),a=f_(o.substring(e));t.replaceWith(n,r,a)}else{let n=f_(o.substring(0,e)),a=f_(o.substring(e));t.replaceWith(n,r,a)}}else t.nodeType===Node.ELEMENT_NODE&&t.insertBefore(r,t.childNodes[e])},F=()=>{let t=a.getRootNode();return"getSelection"in t?t.getSelection():document.getSelection()},B=t=>{let e=F();if(!(e.getRangeAt&&e.rangeCount))return;let n=e.getRangeAt(0),{startOffset:r,endOffset:o,startContainer:a,endContainer:l}=n;if(t.contains(n.startContainer)&&t.contains(n.endContainer)){if(a.nodeType===Node.TEXT_NODE&&a===l){let t=a.textContent,e=t.substring(0,r),n=I("start"),l=o-r>0?t.substring(r,o):"",s=I("end"),c=t.substring(o);a.replaceWith(e,n,l,s,c)}else L(a,r,"start"),L(l,o+(a===l?1:0),"end")}},D=t=>{let e=O(t,"start"),n=O(t,"end");if(!e||!n)return;let r=document.createRange();r.setStart(e,0),r.setEnd(n,0);let o=F();o.removeAllRanges(),o.addRange(r),e.remove(),n.remove()},O=(t,e)=>{let n=t.children;for(let t=0;t<n.length;t++){let r=n[t];if(r.dataset.bookmark===e)return r;if(r.children.length){let t=O(r,e);if(t)return t}}};return t.$$set=t=>{"spellcheck"in t&&n(1,s=t.spellcheck),"autocorrect"in t&&n(2,c=t.autocorrect),"autocapitalize"in t&&n(3,d=t.autocapitalize),"wrapLines"in t&&n(4,u=t.wrapLines),"allowNewline"in t&&n(5,h=t.allowNewline),"textFormat"in t&&n(16,p=t.textFormat),"formatInput"in t&&n(17,g=t.formatInput),"formatPaste"in t&&n(18,m=t.formatPaste),"style"in t&&n(19,f=t.style),"innerHTML"in t&&n(0,$=t.innerHTML),"oninput"in t&&n(20,x=t.oninput),"enableTextStyleShortcuts"in t&&n(21,b=t.enableTextStyleShortcuts)},t.$$.update=()=>{if(64&t.$$.dirty[0]&&n(25,r=!!a),33554433&t.$$.dirty[0]&&r&&$&&S($),524336&t.$$.dirty[0]){if(!u&&h){let t=f.includes(":right")?"text-indent:-100px!important":f.includes(":center")?"":"min-width:calc(100% + 100px)!important";n(7,l=f+";overflow:visible;"+t)}else n(7,l=f)}524288&t.$$.dirty[0]&&n(8,o=f.includes("text-stroke"))},[$,s,c,d,u,h,a,l,o,()=>{w("blur")},t=>{if(/escape/i.test(t.code))return t.stopPropagation(),R();let e=t.ctrlKey||t.metaKey;if("html"===p&&e&&/b|i|u|s/.test(t.key)){b&&E(t.key),t.preventDefault();return}if(/enter/i.test(t.code)&&(t.stopPropagation(),!t.isComposing)){if(e)return P();h||t.preventDefault(),document.execCommand("insertLineBreak"),t.preventDefault()}},()=>{},t=>{""!==t.data&&T()},t=>{let{inputType:e}=t;"insertCompositionText"!==e&&"deleteCompositionText"!==e&&T()},t=>{t.preventDefault();let e=t.clipboardData.getData("text/plain"),n="html"===p?e:k(e),r=m(n);if(!r.length)return;let o=F().getRangeAt(0);o.deleteContents(),o.insertNode(document.createTextNode(r)),C()},t=>t.replace("-webkit-text-stroke","--text-stroke").replace("text-shadow","--text-shadow"),p,g,m,f,x,b,()=>T(),()=>a&&a.focus(),v,r,function(t){ak[t?"unshift":"push"](()=>{n(6,a=t)})}]}class fV extends a1{get spellcheck(){return this.$$.ctx[1]}set spellcheck(t){this.$$set({spellcheck:t}),aF()}get autocorrect(){return this.$$.ctx[2]}set autocorrect(t){this.$$set({autocorrect:t}),aF()}get autocapitalize(){return this.$$.ctx[3]}set autocapitalize(t){this.$$set({autocapitalize:t}),aF()}get wrapLines(){return this.$$.ctx[4]}set wrapLines(t){this.$$set({wrapLines:t}),aF()}get allowNewline(){return this.$$.ctx[5]}set allowNewline(t){this.$$set({allowNewline:t}),aF()}get textFormat(){return this.$$.ctx[16]}set textFormat(t){this.$$set({textFormat:t}),aF()}get formatInput(){return this.$$.ctx[17]}set formatInput(t){this.$$set({formatInput:t}),aF()}get formatPaste(){return this.$$.ctx[18]}set formatPaste(t){this.$$set({formatPaste:t}),aF()}get style(){return this.$$.ctx[19]}set style(t){this.$$set({style:t}),aF()}get innerHTML(){return this.$$.ctx[0]}set innerHTML(t){this.$$set({innerHTML:t}),aF()}get oninput(){return this.$$.ctx[20]}set oninput(t){this.$$set({oninput:t}),aF()}get enableTextStyleShortcuts(){return this.$$.ctx[21]}set enableTextStyleShortcuts(t){this.$$set({enableTextStyleShortcuts:t}),aF()}get confirm(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}get select(){return this.$$.ctx[24]}constructor(t){super(),aQ(this,t,fH,fj,oW,{spellcheck:1,autocorrect:2,autocapitalize:3,wrapLines:4,allowNewline:5,textFormat:16,formatInput:17,formatPaste:18,style:19,innerHTML:0,oninput:20,enableTextStyleShortcuts:21,confirm:22,focus:23,select:24},null,[-1,-1])}}let fU=["i","b","u","strike"].map(t=>({tag:t,tagOpen:RegExp("<".concat(t,">"),"g"),tagClose:RegExp("</".concat(t,">"),"g"),placeholderOpen:RegExp("___".concat(t,"O___"),"g"),placeholderClose:RegExp("___".concat(t,"C___"),"g")})),fG=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fU;return e.forEach(e=>{let{tag:n,tagOpen:r,tagClose:o}=e;t=t.replace(r,"___".concat(n,"O___")).replace(o,"___".concat(n,"C___"))}),t},fX=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fU;return e.forEach(e=>{let{tag:n,placeholderOpen:r,placeholderClose:o}=e;t=t.replace(r,"<".concat(n,">")).replace(o,"</".concat(n,">"))}),t};var fZ=t=>t=fX(t=(t=fG(t)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split("\n").join("<br>")),fY=t=>fN(t).split(/<br>|<br\/>/g).join("\n").replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&amp;/g,"&"),fq=(t,e)=>N(t)?parseFloat(t)/100*e:t,fK=(t,e)=>({x:np(t.x,e.width),y:np(t.y,e.height)});function fJ(t,e,n){let r=t.slice();return r[299]=e[n],r[301]=n,r}function fQ(t,e){let n,r,o,a,l,s,c,d,u,h,p;let g=e[299].name+"";function m(){return e[189](e[301])}return o=new hL({props:{color:e[299].color}}),{key:t,first:null,c(){n=o9("li"),r=o9("button"),aq(o.$$.fragment),a=ai(),l=o9("span"),s=ae(g),d=ai(),ao(r,"class","PinturaShapeListItem"),ao(r,"type","button"),ao(r,"aria-label",c="Select shape "+e[299].name),this.first=n},m(t,e){o8(t,n,e),o3(n,r),aK(o,r,null),o3(r,a),o3(r,l),o3(l,s),o3(n,d),u=!0,h||(p=ar(r,"click",m),h=!0)},p(t,n){e=t;let a={};2097152&n[0]&&(a.color=e[299].color),o.$set(a),(!u||2097152&n[0])&&g!==(g=e[299].name+"")&&as(s,g),(!u||2097152&n[0]&&c!==(c="Select shape "+e[299].name))&&ao(r,"aria-label",c)},i(t){u||(a_(o.$$.fragment,t),u=!0)},o(t){aN(o.$$.fragment,t),u=!1},d(t){t&&o7(n),aJ(o),h=!1,p()}}}function f1(t){let e,n;return(e=new fO({props:{visible:!0,points:t[12],rotatorPoint:t[27],selectedPoint:t[16],enableDragEdges:t[17],enableDragPoints:t[29],enableRotatePoints:t[14]}})).$on("resizestart",t[38]),e.$on("resizemove",t[39]),e.$on("resizeend",t[40]),e.$on("rotatestart",t[41]),e.$on("rotatemove",t[42]),e.$on("rotateend",t[43]),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};4096&n[0]&&(r.points=t[12]),134217728&n[0]&&(r.rotatorPoint=t[27]),65536&n[0]&&(r.selectedPoint=t[16]),131072&n[0]&&(r.enableDragEdges=t[17]),536870912&n[0]&&(r.enableDragPoints=t[29]),16384&n[0]&&(r.enableRotatePoints=t[14]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function f0(t){let e,n,r,o;let a=[f4,f2],l=[];function s(t,e){return"modal"===t[4]?0:"inline"===t[4]?1:-1}return~(e=s(t))&&(n=l[e]=a[e](t)),{c(){n&&n.c(),r=an()},m(t,n){~e&&l[e].m(t,n),o8(t,r,n),o=!0},p(t,o){let c=e;(e=s(t))===c?~e&&l[e].p(t,o):(n&&(aO(),aN(l[c],1,1,()=>{l[c]=null}),az()),~e?((n=l[e])?n.p(t,o):(n=l[e]=a[e](t)).c(),a_(n,1),n.m(r.parentNode,r)):n=null)},i(t){o||(a_(n),o=!0)},o(t){aN(n),o=!1},d(t){~e&&l[e].d(t),t&&o7(r)}}}function f2(t){let e,n,r,o,a;return n=new fV({props:{formatInput:t[45],wrapLines:!!t[13].width,textFormat:t[13].format,enableTextStyleShortcuts:t[5],allowNewline:t[28],style:t[26]}}),t[192](n),n.$on("input",t[46]),n.$on("keyup",t[49]),n.$on("cancel",t[51]),n.$on("confirm",t[50]),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"class","PinturaInlineInput"),ao(e,"style",t[25])},m(l,s){o8(l,e,s),aK(n,e,null),r=!0,o||(a=ar(e,"focusout",t[193]),o=!0)},p(t,o){let a={};8192&o[0]&&(a.wrapLines=!!t[13].width),8192&o[0]&&(a.textFormat=t[13].format),32&o[0]&&(a.enableTextStyleShortcuts=t[5]),268435456&o[0]&&(a.allowNewline=t[28]),67108864&o[0]&&(a.style=t[26]),n.$set(a),(!r||33554432&o[0])&&ao(e,"style",t[25])},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(r){r&&o7(e),t[192](null),aJ(n),o=!1,a()}}}function f4(t){let e,n;return e=new pp({props:{panelOffset:t[2],onconfirm:t[50],oncancel:t[51],buttonCancel:{icon:t[6].shapeIconInputCancel,label:t[6].shapeLabelInputCancel},buttonConfirm:{icon:t[6].shapeIconInputConfirm,label:t[6].shapeLabelInputConfirm,hideLabel:!0},$$slots:{default:[f5]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};4&n[0]&&(r.panelOffset=t[2]),64&n[0]&&(r.buttonCancel={icon:t[6].shapeIconInputCancel,label:t[6].shapeLabelInputCancel}),64&n[0]&&(r.buttonConfirm={icon:t[6].shapeIconInputConfirm,label:t[6].shapeLabelInputConfirm,hideLabel:!0}),83886336&n[0]|8388608&n[9]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function f5(t){let e,n,r;return{c(){ao(e=o9("textarea"),"spellcheck","false"),ao(e,"autocorrect","off"),ao(e,"autocapitalize","off"),ao(e,"style",t[26])},m(o,a){o8(o,e,a),t[190](e),ac(e,t[24]),n||(r=[ar(e,"keydown",t[48]),ar(e,"keypress",t[47]),ar(e,"keyup",t[49]),ar(e,"input",t[46]),ar(e,"input",t[191])],n=!0)},p(t,n){67108864&n[0]&&ao(e,"style",t[26]),16777216&n[0]&&ac(e,t[24])},d(o){o&&o7(e),t[190](null),n=!1,o_(r)}}}function f3(t){let e,n,r,o,a;return n=new pr({props:{items:t[22],key:t[10]}}),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"class","PinturaShapeControls"),ao(e,"style",t[23])},m(l,s){o8(l,e,s),aK(n,e,null),r=!0,o||(a=[ar(e,"measure",t[194]),oQ(cE.call(null,e))],o=!0)},p(t,o){let a={};4194304&o[0]&&(a.items=t[22]),1024&o[0]&&(a.key=t[10]),n.$set(a),(!r||8388608&o[0])&&ao(e,"style",t[23])},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n),o=!1,o_(a)}}}function f6(t){let e,n,r,o,a,l,s,c,d,u;let h=[],p=new Map,g=t[21],m=t=>t[299].id;for(let e=0;e<g.length;e+=1){let n=fJ(t,g,e),r=m(n);p.set(r,h[e]=fQ(r,n))}let f=t[15]&&f1(t),$=t[11]&&f0(t),x=t[18]>0&&f3(t);return{c(){e=o9("div"),n=o9("nav"),r=o9("ul");for(let t=0;t<h.length;t+=1)h[t].c();o=ai(),f&&f.c(),a=ai(),$&&$.c(),l=ai(),x&&x.c(),ao(n,"class","PinturaShapeList"),ao(n,"data-visible",t[19]),ao(e,"class","PinturaShapeEditor"),ao(e,"tabindex","0")},m(p,g){o8(p,e,g),o3(e,n),o3(n,r);for(let t=0;t<h.length;t+=1)h[t].m(r,null);o3(e,o),f&&f.m(e,null),o3(e,a),$&&$.m(e,null),o3(e,l),x&&x.m(e,null),t[195](e),c=!0,d||(u=[ar(n,"focusin",t[54]),ar(n,"focusout",t[55]),ar(e,"keydown",function(){oN(t[0]?y:t[44])&&(t[0]?y:t[44]).apply(this,arguments)}),ar(e,"nudge",function(){oN(t[0]?y:t[53])&&(t[0]?y:t[53]).apply(this,arguments)}),ar(e,"measure",t[188]),ar(e,"pointermove",function(){oN(t[0]?y:t[56])&&(t[0]?y:t[56]).apply(this,arguments)}),ar(e,"pointerleave",function(){oN(t[0]?y:t[57])&&(t[0]?y:t[57]).apply(this,arguments)}),ar(e,"interactionstart",function(){oN(t[0]?y:t[32])&&(t[0]?y:t[32]).apply(this,arguments)}),ar(e,"interactionupdate",function(){oN(t[0]?y:t[34])&&(t[0]?y:t[34]).apply(this,arguments)}),ar(e,"interactioncancel",function(){oN(t[0]?y:t[33])&&(t[0]?y:t[33]).apply(this,arguments)}),ar(e,"interactionrelease",function(){oN(t[0]?y:t[35])&&(t[0]?y:t[35]).apply(this,arguments)}),ar(e,"interactionend",function(){oN(t[0]?y:t[36])&&(t[0]?y:t[36]).apply(this,arguments)}),oQ(cE.call(null,e)),oQ(dC.call(null,e)),oQ(s=dk.call(null,e,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:f7,getEventPosition:t[196]}))],d=!0)},p(o,d){t=o,2097282&d[0]&&(g=t[21],aO(),h=aG(h,d,m,1,t,g,p,r,aU,fQ,null,fJ),az()),(!c||524288&d[0])&&ao(n,"data-visible",t[19]),t[15]?f?(f.p(t,d),32768&d[0]&&a_(f,1)):((f=f1(t)).c(),a_(f,1),f.m(e,a)):f&&(aO(),aN(f,1,1,()=>{f=null}),az()),t[11]?$?($.p(t,d),2048&d[0]&&a_($,1)):(($=f0(t)).c(),a_($,1),$.m(e,l)):$&&(aO(),aN($,1,1,()=>{$=null}),az()),t[18]>0?x?(x.p(t,d),262144&d[0]&&a_(x,1)):((x=f3(t)).c(),a_(x,1),x.m(e,null)):x&&(aO(),aN(x,1,1,()=>{x=null}),az()),s&&oN(s.update)&&8&d[0]&&s.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:f7,getEventPosition:t[196]})},i(t){if(!c){for(let t=0;t<g.length;t+=1)a_(h[t]);a_(f),a_($),a_(x),c=!0}},o(t){for(let t=0;t<h.length;t+=1)aN(h[t]);aN(f),aN($),aN(x),c=!1},d(n){n&&o7(e);for(let t=0;t<h.length;t+=1)h[t].d();f&&f.d(),$&&$.d(),x&&x.d(),t[195](null),d=!1,o_(u)}}}let f8="markup-hover",f7=(t,e)=>t.target===e;function f9(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,x,b,v,w,S,k,C,M,T,P,R,A,E,I,L,F,B,D,O,z,_,W,j,H,V,U,G,X,Y,q,K,J,Q,te,ti,tn,tr,to,ta,tl,ts,tc,td,tu,th,tp,tg,tm,t$,ty,tx,tb,tv,tw,tS,tk,tC,tM,tT,tP,tR;let tA,tI=oF,tD=()=>(tI(),tI=oj(tW,t=>n(184,tA=t)),tW);t.$$.on_destroy.push(()=>tI());let{uid:tO=Z()}=e,{ui:tz}=e,{disabled:t_=!1}=e,{shapes:tW}=e;tD();let{selection:tj}=e,{offset:tH}=e,{contextRotation:tU=0}=e,{contextFlipX:tX=!1}=e,{contextFlipY:tK=!1}=e,{contextZoom:t1=1}=e,{active:t2=!1}=e,{opacity:t4=1}=e,{parentRect:t6}=e,{rootRect:et}=e,{utilRect:ee}=e,{hoverColor:en}=e,{caretColor:er}=e,{gridColor:eo}=e,{snapColor:ea}=e,{textInputMode:es="inline"}=e,{oninteractionstart:ec=y}=e,{oninteractionupdate:ed=y}=e,{oninteractionrelease:eu=y}=e,{oninteractionend:eh=y}=e,{oninteractioncancel:ep=y}=e,{onaddshape:em=y}=e,{onupdateshape:ef=y}=e,{onselectshape:ey=y}=e,{onblurshape:eb=y}=e,{onremoveshape:ew=y}=e,{ontapshape:eS=y}=e,{onhovershape:ek=y}=e,{ontriggerhistorywrite:eC=y}=e,{onhovercanvas:eM=y}=e,{ontapcanvas:eT=y}=e,{onleavecanvas:eP=y}=e,{beforeSelectShape:eI=()=>!0}=e,{beforeDeselectShape:eB=()=>!0}=e,{beforeRemoveShape:eD=()=>!0}=e,{beforeUpdateShape:eO=(t,e,n)=>e}=e,{willRenderShapeControls:ez=tf}=e,{willRenderShapeTextControls:e_=tf}=e,{willStartInteraction:eN=(t,e)=>!0}=e,{mapEditorPointToImagePoint:eW}=e,{mapImagePointToEditorPoint:ej}=e,{eraseRadius:eH}=e,{selectRadius:eV}=e,{enableButtonFlipVertical:eU=!1}=e,{enableTapToAddText:eG=!0}=e,{enableMultiSelect:eZ=!1}=e,{enableTextStyleControls:eY=!0}=e,{locale:eq}=e,{snapThreshold:eK=0}=e,{snapPointer:eJ=!0}=e,{enableSnapToContext:e2=!0}=e,{gridSize:e4=0}=e,e5=t=>{let e;return 0===eK?[]:(e2&&(e={...t6,x:0,y:0}),[...tA.filter(e=>e!==t).filter(t=>!rc(t)).filter(t=>rw(t)).map(t=>r3({...t},t6)),e].filter(Boolean))},e3=(t,e,n,r)=>0===t?{snapTargets:[]}:{snapThreshold:t,gridSize:e,gridRect:n,snapTargets:e5(r)},e6=av("isAnimated");oV(t,e6,t=>n(185,th=t));let e8=t=>t.set(oH(t)),e9=t=>oH(t).find(rc),ie=(t,e)=>{if(!e9(e))return rx(t),ih(t,e)},ii=t=>{e9(t)&&t.update(t=>t.filter(t=>!rc(t)))},id=t=>{let e=e9(t);if(e)return rb(e),e8(t),e},iu=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>({...t,...e});e9(e)&&e.update(e=>e.map(e=>rc(e)?n(e,t):e))},ih=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tW;return e.update(e=>[...e,t]),t},ip=(t,e,n)=>{let r=eO({...t},e,{...n});return ot(t,r,n),t},ig=(t,e)=>{let n=t3(t,e),r=tZ(t,e),o=Math.PI/8,a=o*Math.round(r/o)-tU%o;e.x=t.x+n*Math.cos(a),e.y=t.y+n*Math.sin(a)},im=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(rt(t))return eX(t,t.rotation,eF(t));if(n8(t)){let e=i6(t);return eX(e,t.rotation,eF(e))}return re(t)?ir(tB(t.x,t.y),t.rx,t.ry,t.rotation,t.flipX,t.flipY,e):[]},i$=av("keysPressed");oV(t,i$,t=>n(186,tp=t));let iy=(t,e,n)=>0===t||e&&n?t:e||n?-t:t,ix=t=>{if(null===t.x&&null===t.y)return ib();t.x&&n(140,iv=eW({x:t.x,y:0}).x),t.y&&n(141,iw=eW({x:0,y:t.y}).y)},ib=()=>{n(140,iv=null),n(141,iw=null)},iv=null,iw=null,iS=(t,e)=>{let n=ej(t);return eW(tJ(n,e))},ik=(t,e,n)=>Array.from({length:(n-e)/t+1},(n,r)=>e+r*t),iC=t=>{let e=[],n=[],r=t.points;if(void 0!==t.x1&&(r=[{x:t.x1,y:t.y1},{x:t.x2,y:t.y2}]),r){let t=r.map(ej),o=eA(t),a=t[0],l=t[t.length-1];e=[o.x,o.x+.5*o.width,o.x+o.width,a.x,l.x],n=[o.y,o.y+.5*o.height,o.y+o.height,a.y,l.y]}else if(t.text||void 0!==t.width||void 0!==t.rx){let r;if(t.text&&void 0===t.height){let e=nL(t.text,t);r=eL(t.x,t.y,e.width,e.height)}else r=void 0!==t.width?eR(t):eR({x:t.x-t.rx,y:t.y-t.ry,width:2*t.rx,height:2*t.ry});let o=e0(r).map(ej),a=eA(Math.abs(t.rotation)>0?eX(r,t.rotation).map(ej):o),l=eF(a),s=a.width,c=a.height,d=.5*s,u=.5*c;e=[l.x-d,l.x,l.x+d],n=[l.y-u,l.y,l.y+u]}else if(void 0!==t.x){let r=ej(t);e=[r.x],n=[r.y]}return{x:e,y:n}},iM=(t,e,n)=>{let r,o,a;let l=Number.Infinity,s=null,c=null;for(let d=0;d<t.length;d++){o=t[d];for(let t=0;t<e.length;t++)(r=Math.abs(o-(a=e[t])))<n&&(null===c||r<l)&&(l=r,s=o,c=a)}return{origin:s,target:c}},iT=(t,e,n)=>{let r={x:null,y:null},o={x:null,y:null},a=iM(t.x,e.x,n);null!==a.target&&(r.x=a.target,o.x=a.target-a.origin);let l=iM(t.y,e.y,n);return null!==l.target&&(r.y=l.target,o.y=l.target-l.origin),{snapTranslation:o,snapLine:r}},iP=(t,e,n,r,o)=>{let a={x:null,y:null},l={x:null,y:null},s=e.map(iC);if(r>0){let t=ej({x:0,y:0}),e=ej({x:r,y:r}),n=ej({x:o.width,y:o.height}),a=e.x-t.x,l=ik(a,t.x,n.x),c=ik(a,t.y,n.y);s.push({x:l,y:c})}return s.forEach(e=>{let{snapTranslation:r,snapLine:o}=iT(t,e,n);null!==r.x&&(null===l.x||Math.abs(r.x)<Math.abs(l.x))&&(l.x=r.x||0,a.x=o.x),null!==r.y&&(null===l.y||Math.abs(r.y)<Math.abs(l.y))&&(l.y=r.y||0,a.y=o.y)}),{snapTranslation:l,snapLines:a}},iR=(t,e)=>(null!==e.x&&(t.x+=e.x),null!==e.y&&(t.y+=e.y),t),iA=(t,e,n,r)=>{let{snapThreshold:o=0,gridSize:a=0,gridRect:l,snapTargets:s=[]}=r||{},c=null;if(ri(t)){if(o){let r=r3({...t},t6),c=iS(n3(e),n),d=iS(n6(e),n),{snapTranslation:u,snapLines:h}=iP(iC({...r,x1:c.x,y1:c.y,x2:d.x,y2:d.y}),s,o,a,l);iR(n,u),ix(h)}let r=iS(n3(e),n),d=iS(n6(e),n);c={x1:r.x,y1:r.y,x2:d.x,y2:d.y}}else if(t.points){if(rA(tC)&&iH(tC,{selectedPoint:void 0}),o){let{snapTranslation:r,snapLines:c}=iP(iC({...r3({...t},t6),points:e.points.map(t=>iS(t,n))}),s,o,a,l);iR(n,r),ix(c)}c={points:e.points.map(t=>iS(t,n))}}else if(rt(t)||n8(t)||re(t)){if(o){let r=r3({...t},t6),c=iS(e,n),{snapTranslation:d,snapLines:u}=iP(iC({...r,...c}),s,o,a,l);iR(n,d),ix(u)}c=iS(e,n)}c&&(ip(t,c,t6),iW())},iE={0:1,1:0,2:3,3:2},iI={0:3,1:2,2:1,3:0},iL=(t,e,n,r,o)=>{let{shiftKey:a,snapThreshold:l=0,gridSize:s=0,gridRect:c,snapTargets:d=[]}=o||{},u=l?(t,e,n)=>{let{snapTranslation:r,snapLines:o}=iP(iC(t),d,l,s,c);iR(e,r),ix(o);let a=iS(n(),e);t.x=a.x,t.y=a.y}:y;if(ri(t)||rn(t)&&ni(t,"pathClose")){let o,l,s;let[c]=n,d=a?ig:(t,e)=>e;if(ri(t))0===c?(o=()=>n3(e),l=t=>d(n6(e),t),s=(t,e)=>{t.x1=e.x,t.y1=e.y}):1===c&&(o=()=>n6(e),l=t=>d(n3(e),t),s=(t,e)=>{t.x2=e.x,t.y2=e.y});else{let t=e.points;o=()=>({...t[c]}),l=e=>{let n=t[fA(c-1,t)],r=t[fA(c+1,t)];d(n,e),d(r,e)},s=(t,e)=>t.points=t.points.map((t,n)=>c===n?e:t)}let h=iS(o(),r);u(h,r,o),l(h),s(t,h)}else if(rd(t)||re(t)||n9(t)){let a,l,s=!1;if(re(t))a=eE(e);else if(rd(t))a=eR(e);else{s=!0,a=eR(e);let t=nL(e.text,e);a.height=t.height}t.aspectRatio?l=t.aspectRatio:o.shiftKey&&!s&&(l=a.width/a.height);let c=eR(a),d=eF(c),h=t.rotation,p=e0(c),g=eX(c,h);if(1===n.length){let e,o=n[0];t.flipX&&(o=iE[o]),t.flipY&&(o=iI[o]);let[a,s,c,m]=p,f=ej(g[o]),$=tJ({...f},r),y=eW($);u(y,r,()=>eW(f));let x=tV(tN(tB(y.x-g[o].x,y.y-g[o].y)),-h),b=tB(p[o].x+x.x,p[o].y+x.y);0===o&&(e=c),1===o&&(e=m),2===o&&(e=a),3===o&&(e=s);let v=eA([e,b]);if(l){let{width:t,height:n}=eQ(v,l),[r,o,a,s]=e1(v);v.width=t,v.height=n,b.y<e.y&&(v.y=a-n),b.x<e.x&&(v.x=o-t)}let w=eX(v,h,d),S=t8(w),k=eA([tV(w[0],-h,S),tV(w[2],-h,S)]);ip(t,re(t)?tL(k):k,t6)}else{let e;let[o,a]=(n=n.map(e=>(t.flipX&&(e=iE[e]),t.flipY&&(e=iI[e]),e))).map(t=>g[t]),c={x:o.x+(a.x-o.x)*.5,y:o.y+(a.y-o.y)*.5},[m,f]=n.map(t=>p[t]),[$,y]=n.map(t=>{let e=t+2;return e<4?p[e]:p[e-4]}),x={x:$.x+(y.x-$.x)*.5,y:$.y+(y.y-$.y)*.5},b=ej(c),v=tJ({...b},r),w=eW(v);u(w,r,()=>eW(b));let S=tV(tN(tB(w.x-c.x,w.y-c.y)),-h),k=tq(tQ(tN(m),f),t=>1-Math.abs(Math.sign(t))),C=tB(S.x*k.x,S.y*k.y);tJ(m,C),tJ(f,C);let M=eA(p);if(l){let t=M.width,e=M.height;0===k.y?e=t/l:t=e*l,M.width=t,M.height=e,0===k.y?M.y=x.y-.5*e:M.x=x.x-.5*t}let T=eX(M,h,d),P=t8(T),R=eA([tV(T[0],-h,P),tV(T[2],-h,P)]);re(t)?e=tL(R):rd(t)?e=R:s&&(e={x:R.x,y:R.y,width:R.width}),ip(t,e,t6)}}iW()},iF=(t,e,n,r)=>{let o=eF(i6(r3(n1(t),t6))),a=tZ(iS(tm,n),o)+Math.PI/2;if(r.shiftKey){let t=Math.PI/16;a=t*Math.round(a/t)-tU%t}ip(t,{rotation:a},t6),iW()},iB=(t,e)=>{let n;let r=t.points,o=[];for(let t=0;t<r.length-1;t++)o.push([r[t],r[t+1]]);o.push([r[r.length-1],r[0]]);let a=o.findIndex(t=>{let[n,r]=t;return io(e,6,n,r)}),l=[];for(let t=0;t<o.length;t++)l.push(o[t][0]),t===a&&(n=t+1,l.push(e));iH(t,{points:l,selectedPoint:n})},iD=(t,e)=>{let n=t.points.filter((t,n)=>n!==e);iH(t,{points:n,selectedPoint:void 0})},iO=()=>{if(tA.length)return tA.find(rc)},iz=()=>{if(tA.length)return tA.findIndex(rc)},i_=()=>{let t=iO();if(t)return rb(t),iW(),t},iN=()=>{if(!iO())return;let t=[...tA];t.splice(iz(),1),tW.set(t)},iW=()=>{tW.set(tA)},ij=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];e.filter(Boolean).forEach(e=>delete t[e]),n&&iW()},iH=function(t,e){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];t=Object.assign(t,e),n&&iW()},iV=function(t,e,n){let r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];t[e]=n,r&&iW()},iU=function(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];tA.forEach(e=>iH(e,t,!1)),e&&iW()},iG=()=>[...tA].reverse().filter(rl),iX=()=>[...tA].reverse().find(rl),iZ=()=>!!iX(),iY=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!eD(t))return!1;tW.set(tA.filter(e=>e!==t)),e||ew(t)},iq=function(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=tA.filter(t=>rk(t)&&rS(t)),o=r.findIndex(e=>e===t);if(!1===iY(t,n))return;if(tv=t,r.length-1<=0)return iJ();if(!e)return!0;let a=o-1<0?r.length-1:o-1;return i1(r[a]),!0},iK=()=>{if(l){let t=[];a.forEach((e,n)=>{rk(e)&&iq(e,n===a.length-1,!0)&&t.push(e)}),t.length&&eC();return}let t=iX();t&&iq(t)},iJ=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{storePrevious:e=!0}=t;Object.keys(n5).forEach(t=>n5[t]={});let n=iQ();e&&(tv=n),iU({isSelected:!1,isEditing:!1,_prerender:!1}),n&&eb(n)},iQ=()=>tA.find(rl),i1=function(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(rc(t))return;let r=iQ()||tv,o=rl(t);tv=void 0,eI(r,t)&&(n||iJ(),ry(t),o||ey(t),e&&iW())},i0=t=>{ty&&ty.confirm&&t.isEditing&&ty.confirm();let e={isSelected:!1,isEditing:!1,_prerender:!1};t.selectedPoint>-1&&(e.selectedPoint=void 0),iH(t,e),eb(t)},i2=t=>{iH(t,{isSelected:!0,isEditing:!0,_prerender:"inline"===es})},i4=t=>{iH(t,{isSelected:!0,isEditing:!1,_prerender:!1})},i5=t=>{if(!t.length)return[];let e=t.filter(eD);return tW.set(tA.filter(t=>!e.includes(t))),e},i3=t=>{let e=nL(t.text,t);return eL(t.x,t.y,t.width?Math.min(t.width,e.width):e.width,t.height?Math.min(t.height,e.height):e.height)},i6=t=>{if(rd(t))return eR(t);if(re(t))return eE(t);let e=i3(t);return e.width=Math.max(10,t.width||e.width),e},i8=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0;return[...t].reverse().filter(r).map(t=>({shape:t,priority:1})).filter(t=>{let{shape:r}=t,o=r3(n1(r),t6),a=n+.5*(o.strokeWidth||0);if(rt(o))return ic(e,a,o,r.rotation);if(n8(o)){let n=i6(o),l=ic(e,a,n,r.rotation);if(l&&!rl(r)){let l=i3(o);"right"!==r.textAlign||r.flipX||(l.x=n.x+n.width-l.width),"center"===r.textAlign&&(l.x=n.x+.5*n.width-.5*l.width),ic(e,a,l,r.rotation,eF(n))||(t.priority=-1)}return l}return re(o)?is(e,a,o,r.rotation,r.flipX,r.flipY):ri(o)?io(e,Math.max(16,a),n3(o),n6(o)):rn(o)&&o.pathClose?il(e,a,o.points):!!rn(o)&&(1===o.points.length?t5(e,o.points[0])<a*a:ia(e,Math.max(16,a),o.points))}).sort((t,e)=>t.priority<e.priority?1:t.priority>e.priority?-1:0).map(t=>t.shape)},i7=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=Math.abs(r),a=ex(e$(e,n),o),l=ev(a,o);return t.filter(t=>{let e=r3(n1(t),t6);return ri(e)||rn(e)?!!e7(a,e.points?[...e.points]:[n3(e),n6(e)]):it(l,im(e))})},i9=!1,ne=!1,nn=!1,nr=t=>{tP=t.map(t=>({shape:t,shapeOrigin:n1(t),shapeOriginComputed:r3(n1(t),t6)}))},no=()=>{clearTimeout(tS),tS=void 0,n(143,nn=!1),ib()},na=null,nl=t=>e0(eA(t.map(t=>ns(r3(t,t6))).flat())),ns=t=>{let e=nt(t.rotation)&&0!==t.rotation;if(rt(t)){if(t.width<1&&t.height<1)return;let n=eF(t),r=e0(t);return(t.flipX||t.flipY)&&t7(r,t.flipX,t.flipY,n.x,n.y),e?t9(r,t.rotation,n.x,n.y):r}if(re(t)){if(t.rx<1&&t.ry<1)return;let n=e0(eE(t));return(t.flipX||t.flipY)&&t7(n,t.flipX,t.flipY,t.x,t.y),e?t9(n,t.rotation,t.x,t.y):n}if(ri(t))return[n3(t),n6(t)];if(rn(t)){if(t.bitmap&&!t.pathClose){let e=eA(t.points);return e.x-=.5*t.strokeWidth,e.y-=.5*t.strokeWidth,e.width+=t.strokeWidth,e.height+=t.strokeWidth,ns({...t,...e})}return[...t.points]}if(n8(t)){if(t.width<5&&t.height<5)return;let n=i6(t);n.width=Math.max(10,n.width);let r=eF(n),o=e0(n);return(t.flipX||t.flipY)&&t7(o,t.flipX,t.flipY,r.x,r.y),e?t9(o,t.rotation,r.x,r.y):o}return[]},nc=t=>{let e,n;let r=ns(t);return t.flipY?(e=t8([r[0],r[1]]),n=tG(tB(r[1].x-r[2].x,r[1].y-r[2].y))):(e=t8([r[2],r[3]]),n=tG(tB(r[2].x-r[1].x,r[2].y-r[1].y))),t0(n,20/t1),{origin:e,dir:n}},nd=t=>{let e=nc(t),n=ej({x:e.origin.x+e.dir.x,y:e.origin.y+e.dir.y});return{origin:ej(e.origin),position:n}},nu=t=>e=>!t(e),nh=t=>e=>e.id===t,nm=t=>{let e=nh(t);return t=>t.filter(nu(e))},nf=t=>{let e=nh(t),n=nm(t);return()=>tz.update(t=>t.some(e)?n(t):t)},n$=t=>{let e=nm(t);return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];tz.update(t=>[...e(t),...n.filter(Boolean)])}},ny=nf(f8),nx=n$(f8),nb=t=>{let e=ns(r3(n1(t),t6));if(!e)return;let n=e.map(ej),r=!!t.pathClose||!(!t.bitmap&&(rn(t)||ri(t))),o="hook"===t.selectionStyle;nx(...o?n.map((t,e,n)=>({id:f8,points:nk(n,e),strokeColor:[0,0,0,.1],strokeWidth:2})):[{id:f8,points:n.map(t=>tB(t.x+1,t.y+1)),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:r}],...o?n.map((t,e,n)=>({id:f8,points:nk(n,e),strokeColor:en,strokeWidth:2})):[{id:f8,points:n,strokeColor:en,strokeWidth:2,pathClose:r}])},nv="markup-manipulator-segment-"+tO,nw=nf(nv),nS=n$(nv),nk=(t,e)=>{let n=t[e],r=e-1<0?t[t.length-1]:t[e-1],o=e+1<t.length?t[e+1]:t[0],a=tQ(tN(r),n);tG(a);let l=tJ(t0(a,10),n),s=tQ(tN(o),n);tG(s);let c=tJ(t0(s,10),n);return[l,n,c]},nC=(t,e,n)=>{if(!rS(e))return;let r=rn(e),o=r&&ni(e,"pathClose"),a=o&&r$(e),l=rc(e),s=ro(e),c="hook"===e.selectionStyle,d=!0!==e.disableShowPoints,{selectionOpacity:u=1}=e;if(l&&r&&!o)return;let h=[],p=[...S],m=p[p.length-1],f=p[0],$=(s?.05:.1)*t*u,y=$>0,x=(s?.5:1)*t*u,b=x>0,v=[0,0,0],w=[1,1,1],k=s?1:1.5;tp.includes(16)&&m&&n&&ig(m,n);let C=p.length&&o&&l&&n?t5(f,n):1/0,M=p.length&&o&&l&&n?t5(m,n):1/0,T=C<=256,P=M<=256;!T&&n&&p.push(n);let A=p.length>1,E=!!e.pathClose||!(!e.bitmap&&(rn(e)||ri(e)))||p.length>2&&T;A&&y&&(c?h.push(...p.map((t,e,n)=>({id:nv,points:nk(n,e),strokeColor:v,opacity:$}))):h.push({id:nv,points:p.map(t=>tB(t.x+1,t.y+1)),pathClose:E,strokeColor:v,strokeWidth:2,opacity:$})),o&&y&&d&&h.push(...p.map(t=>({id:nv,...t,rx:2*k,ry:2*k,backgroundColor:v,opacity:$}))),R&&y&&h.push({id:nv,points:[tB(R.origin.x+1,R.origin.y+1),tB(R.position.x+1,R.position.y+1)],strokeColor:v,strokeWidth:2,opacity:$}),A&&b&&(c?h.push(...p.map((t,e,n)=>({id:nv,points:nk(n,e),strokeColor:w,strokeWidth:k,opacity:x}))):h.push({id:nv,points:p,pathClose:E,strokeColor:w,strokeWidth:k,backgroundColor:l&&o&&e.backgroundColor&&e.backgroundColor[3]>0?e.backgroundColor:[0,0,0,0],opacity:x})),o&&d&&h.push(...p.map(t=>({id:nv,...t,rx:3*k,ry:3*k,backgroundColor:[.5,.5,.5],strokeWidth:k,strokeColor:w}))),o&&l&&d&&S.length>=3&&h.push({...f,id:nv,rx:k*(T?5:4),ry:k*(T?5:4),backgroundColor:T?en:[.5,.5,.5],strokeWidth:k,strokeColor:w}),o&&l&&a&&d&&!T&&g.length>=2&&h.push({...m,id:nv,rx:k*(P?5:4),ry:k*(P?5:4),backgroundColor:P?en:[.5,.5,.5],strokeWidth:k,strokeColor:w}),R&&b&&!c&&h.push({id:nv,points:[{x:R.origin.x,y:R.origin.y},{x:R.position.x,y:R.position.y}],strokeColor:w,strokeWidth:k,opacity:x}),nS(...h)},nM=()=>{o===t$&&nT()},nT=()=>{n(144,t$=void 0),ny()},nP="markup-multi-selection-segment-"+tO,nR=nf(nP),nA=n$(nP),nE=(t,e)=>{if(eK<=0)return t;if(e)return ib(),t;let n=eW(t),o=e5(),{snapTranslation:a,snapLines:l}=iP(iC(n),o,eK,e4,r);return ix(l),iR(t,a),t},nI=cy(0);oV(t,nI,t=>n(187,tg=t));let nF="markup-grid-line-".concat(tO),nB=nf(nF),nD=n$(nF),nO=(t,e,n,r)=>{let o=ej({x:0,y:0}),a=ej({x:t,y:t}),l=ej({x:e.width,y:e.height}),s=a.x-o.x;if(nI.set(s>6?1:0),r<=0)return nB();let c=ik(s,o.x,l.x).map(t=>({id:nF,opacity:r,points:[{x:t,y:o.y},{x:t,y:l.y}],strokeWidth:1,strokeColor:n}));nD(...ik(s,o.y,l.y).map(t=>({id:nF,opacity:r,points:[{x:o.x,y:t},{x:l.x,y:t}],strokeWidth:1,strokeColor:n})),...c)},nz="markup-snap-line",n_=nf(nz),nN=n$(nz),nW=(t,e,n)=>{let r,o;if(null===t&&null===e)return n_();null!==t&&(r={id:nz,strokeColor:n,strokeWidth:1.5,points:[ej({x:t,y:0}),ej({x:t,y:t6.height})]}),null!==e&&(o={id:nz,strokeColor:n,strokeWidth:1.5,points:[ej({x:0,y:e}),ej({x:t6.width,y:e})]}),nN(r,o)},nj=t=>{if(!t)return iU({_prerender:!1});let e=tA.find(t=>t.isEditing);e&&iH(e,{_prerender:"inline"===es})},nH=()=>{let[t]=tp;if((8===t||46===t)&&iZ()&&!o.isEditing){if(rn(o)&&nt(o.selectedPoint)){setTimeout(()=>iD(o,o.selectedPoint),0);return}setTimeout(()=>iK(),0)}},nV=()=>({...o}),nU=(t,e)=>{let{textAlign:n="left",fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:a="normal",letterSpacing:l="normal",textShadowX:s=0,textShadowY:c=0,textShadowBlur:d=0,textShadowColor:u,textOutlineWidth:h=0,textOutlineColor:p}=t,g="!important",m="caret-color:".concat(G,";text-align:").concat(n).concat(g,";font-family:").concat(r).concat(g,";font-weight:").concat(o).concat(g,";font-style:").concat(a).concat(g,";letter-spacing:").concat(nt(l)?l+"px":"normal").concat(g);if("modal"===e)return m;let f=h?";-webkit-text-stroke:".concat(2*h,"px ").concat(ng(p)," ").concat(g):"",$=d||s||c?";text-shadow:".concat(s,"px ").concat(c,"px ").concat(d,"px ").concat(ng(u)," ").concat(g):"",y=t.fontSize,x=1,b="";y>1e3&&tt()&&(x=y/1e3,b="transform-origin:0 0;transform:scale(".concat(x,")"),y=1e3);let v=t.lineHeight/x,w=ng(t.color),S=.5*Math.max(0,y-v);return"--font-scalar:".concat(x,";--bottom-inset:").concat(S,"px;padding:").concat(S,"px 0 0").concat(g,";color:").concat(w).concat(g,";font-size:").concat(y,"px").concat(g,";line-height:").concat(v,"px").concat(g,";").concat(m,";").concat(b).concat(f).concat($)},nG=(t,e,n,r)=>{let a,l;t.width&&t.height?(a=eF(t),l=ei(t)):((l=nL(o.text,h)).width=h.width||l.width,a=tB(t.x+.5*l.width,t.y+.5*l.height));let s=Math.max(0,t.fontSize-t.lineHeight)+t.lineHeight,c=ej(a),d=c.x-e.x-.5*l.width,u=c.y-e.y-.5*l.height,p=t.flipX,g=t.flipY,m=t.rotation;tX&&tK?(p=!p,g=!g):tX?(p=!p,m=-m):tK&&(g=!g,m=-m),m+=r;let f=n*(p?-1:1),$=n*(g?-1:1);return"--line-height:".concat(s,"px;width:").concat(l.width,"px;height:").concat(l.height,"px;transform:translate(").concat(d,"px,").concat(u,"px) rotate(").concat(m,"rad) scale(").concat(f,", ").concat($,")")},nX=()=>nZ(j),nZ=t=>{n(8,ty.innerHTML=fZ(t),ty)},nY=t=>{let e=t.split(/[\n\r]/g);return e.length>1?e.map(t=>t.trim()).filter(t=>t.length).join(" "):e[0]},nq=t=>{let e=void 0===t.value?t.innerHTML:t.value,n="text"===o.format?fY(e):e;return n7(o)&&!1!==o.disableNewline?nY(n):n},nK=()=>{let t=nq(ty),e=rP(o,t),n=!0===e?t:e,r=z.x,a=z.y;if(!o.height){let t=eX({...W},o.rotation),e=eX({x:r,y:a,...nL(n,h)},o.rotation),[l,,s]=t,[c,,d]=e,u=l,p=c;o.flipX&&(u=s,p=d);let g=tQ(tN(u),p);r+=g.x,a+=g.y}iH(o,{x:N(O.x)?np(r,t6.width):r,y:N(O.y)?np(a,t6.height):a,text:n})},nJ=()=>{d&&i_(),ty&&ty.confirm&&ty.confirm(),nK(),i4(o),ef(o)},n0=()=>{d?iN():(iH(o,{text:O.text,x:O.x,y:O.y}),i4(o))},n2=function(t,e,n){let r,o,{flipX:a,flipY:l,rotation:s}=n,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top left",[d,u,h,p]=eX(t,s),[g,m,f,$]=eX(e,s);if("top center"===c){let t=t8(l?[p,h]:[d,u]),e=t8(l?[$,f]:[g,m]);r=t,o=e}else"top right"===c&&!a||"top left"===c&&a?(r=l?h:u,o=l?f:m):(r=l?p:d,o=l?$:g);return tQ(tN(r),o)},n4=(t,e,n)=>tB(N(t.x)?np(e.x+n.x,t6.width):e.x+n.x,N(t.y)?np(e.y+n.y,t6.height):e.y+n.y),n5={},rr=()=>iD(o,o.selectedPoint),ra=()=>i2(o),rs=()=>{let t=eg(nL(o.text,h),t=>Math.ceil(t)),e=ni(o,"height"),n=!e&&ni(o,"width"),r=o.id,a=n5[r];a||(n5[r]={},a=n5[r]);let l=t=>{let{width:e,...n}=h,r=nL(o.text,n),a=n2(eL(h.x,h.y,t.width,t.height),eL(h.x,h.y,r.width,r.height),h,"top ".concat(o.textAlign)),l=!1!==h.disableNewline;ij(o,["width","height",l&&"textAlign"]),iH(o,{...n4(o,h,a)})},s=e=>{let n=el(a.width||h.width||t.width,t.height),r=a.textAlign||"left",l=n2(eL(h.x,h.y,e.width,e.height),eL(h.x,h.y,n.width,n.height),h,"top ".concat(r));ij(o,["height"]),iH(o,{...n4(o,h,l),width:N(o.width)?np(n.width,t6.width):n.width,textAlign:r})},c=e=>{let n=el(a.width||t.width,a.height||t.height),r=a.textAlign||"left",l=n2(eL(h.x,h.y,e.width,e.height),eL(h.x,h.y,n.width,n.height),h,"top ".concat(r));iH(o,{...n4(o,h,l),width:N(o.width)?np(n.width,t6.width):n.width,height:N(o.width)?np(n.height,t6.height):n.height,textAlign:r})};if(e){a.textAlign=o.textAlign,a.width=h.width,a.height=h.height;let t=el(h.width,h.height);rR(o,"auto-height")?s(t):rR(o,"auto-width")&&l(t)}else if(n){a.textAlign=o.textAlign,a.width=h.width;let e=el(h.width,t.height);rR(o,"auto-width")?l(e):rR(o,"fixed-size")&&c(e)}else{a.textAlign=o.textAlign;let e=el(Math.ceil(t.width),Math.ceil(t.height));rR(o,"fixed-size")?c(e):rR(o,"auto-height")&&s(e)}},ru=t=>{t.stopPropagation();let e=o.flipX||!1;iV(o,"flipX",!e),ef(o)},rh=t=>{t.stopPropagation();let e=o.flipY||!1;iV(o,"flipY",!e),ef(o)},rp=t=>{iV(o,"opacity",t)},rg=t=>{rp(t),ef(o)},rm=t=>{t.stopPropagation(),t.target.blur(),iK()},rf=t=>{t.stopPropagation(),tA.findIndex(t=>t===o)!==tA.length-1&&(tW.set(tA.filter(t=>t!==o).concat([o])),ef(o))},rI=t=>{t.stopPropagation(),rD()},rD=()=>{let t=(l?a:[o]).filter(rC).map(t=>{let e=n1(t);e.id=Z();let n=tB(50,-50);if(ni(e,"points")){let t=r9(e,["points"],t6);t.points.forEach(t=>{t.x+=n.x,t.y+=n.y}),ot(e,t,t6)}else if(ri(e)){let t=r9(e,["x1","y1","x2","y2"],t6);t.x1+=n.x,t.y1+=n.y,t.x2+=n.x,t.y2+=n.y,ot(e,t,t6)}else{let t=r9(e,["x","y"],t6);t.x+=50,t.y-=50,ot(e,t,t6)}return tW.set([...tA,e]),em(e),e});if(t.length>1){iJ(),t.forEach(t=>{i1(t,!0,!0)});return}i1(t[0])},rO=cy(0,{stiffness:.2,damping:.7});oV(t,rO,t=>n(18,tu=t));let rz=t=>tq(tB(t.x+.5*t.width,t.y),d1),r_=(t,e,n,r)=>{let o=t.x,a=t.y,l=o+t.width,s=Math.max(e.x-.5*n.width,o),c=Math.max(e.y-n.height+r,a);return s+n.width>l&&(s=l-n.width),tB(s,c)},rN=(t,e)=>{let{disableTextLayout:n=[]}=e;return"height"in e?n.includes("auto-height")?t.shapeIconButtonTextLayoutAutoWidth:t.shapeIconButtonTextLayoutAutoHeight:"width"in e?n.includes("auto-width")?t.shapeIconButtonTextLayoutFixedSize:t.shapeIconButtonTextLayoutAutoWidth:n.includes("fixed-size")?t.shapeIconButtonTextLayoutAutoHeight:t.shapeIconButtonTextLayoutFixedSize},rW=(t,e)=>{let{disableTextLayout:n=[]}=e;return"height"in e?n.includes("auto-height")?t.shapeTitleButtonTextLayoutAutoWidth:t.shapeTitleButtonTextLayoutAutoHeight:"width"in e?n.includes("auto-width")?t.shapeTitleButtonTextLayoutFixedSize:t.shapeTitleButtonTextLayoutAutoWidth:n.includes("fixed-size")?t.shapeTitleButtonTextLayoutAutoHeight:t.shapeTitleButtonTextLayoutFixedSize},rj=!1,rH=tF(),rV=t=>{ek(t),n(144,t$=t)};return ay(()=>{n_(),nB(),nw(),ny()}),t.$$set=t=>{"uid"in t&&n(58,tO=t.uid),"ui"in t&&n(59,tz=t.ui),"disabled"in t&&n(0,t_=t.disabled),"shapes"in t&&tD(n(1,tW=t.shapes)),"selection"in t&&n(60,tj=t.selection),"offset"in t&&n(2,tH=t.offset),"contextRotation"in t&&n(61,tU=t.contextRotation),"contextFlipX"in t&&n(62,tX=t.contextFlipX),"contextFlipY"in t&&n(63,tK=t.contextFlipY),"contextZoom"in t&&n(64,t1=t.contextZoom),"active"in t&&n(65,t2=t.active),"opacity"in t&&n(66,t4=t.opacity),"parentRect"in t&&n(67,t6=t.parentRect),"rootRect"in t&&n(3,et=t.rootRect),"utilRect"in t&&n(68,ee=t.utilRect),"hoverColor"in t&&n(69,en=t.hoverColor),"caretColor"in t&&n(70,er=t.caretColor),"gridColor"in t&&n(71,eo=t.gridColor),"snapColor"in t&&n(72,ea=t.snapColor),"textInputMode"in t&&n(4,es=t.textInputMode),"oninteractionstart"in t&&n(73,ec=t.oninteractionstart),"oninteractionupdate"in t&&n(74,ed=t.oninteractionupdate),"oninteractionrelease"in t&&n(75,eu=t.oninteractionrelease),"oninteractionend"in t&&n(76,eh=t.oninteractionend),"oninteractioncancel"in t&&n(77,ep=t.oninteractioncancel),"onaddshape"in t&&n(78,em=t.onaddshape),"onupdateshape"in t&&n(79,ef=t.onupdateshape),"onselectshape"in t&&n(80,ey=t.onselectshape),"onblurshape"in t&&n(81,eb=t.onblurshape),"onremoveshape"in t&&n(82,ew=t.onremoveshape),"ontapshape"in t&&n(83,eS=t.ontapshape),"onhovershape"in t&&n(84,ek=t.onhovershape),"ontriggerhistorywrite"in t&&n(85,eC=t.ontriggerhistorywrite),"onhovercanvas"in t&&n(86,eM=t.onhovercanvas),"ontapcanvas"in t&&n(87,eT=t.ontapcanvas),"onleavecanvas"in t&&n(88,eP=t.onleavecanvas),"beforeSelectShape"in t&&n(89,eI=t.beforeSelectShape),"beforeDeselectShape"in t&&n(90,eB=t.beforeDeselectShape),"beforeRemoveShape"in t&&n(91,eD=t.beforeRemoveShape),"beforeUpdateShape"in t&&n(92,eO=t.beforeUpdateShape),"willRenderShapeControls"in t&&n(93,ez=t.willRenderShapeControls),"willRenderShapeTextControls"in t&&n(94,e_=t.willRenderShapeTextControls),"willStartInteraction"in t&&n(95,eN=t.willStartInteraction),"mapEditorPointToImagePoint"in t&&n(96,eW=t.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in t&&n(97,ej=t.mapImagePointToEditorPoint),"eraseRadius"in t&&n(98,eH=t.eraseRadius),"selectRadius"in t&&n(99,eV=t.selectRadius),"enableButtonFlipVertical"in t&&n(100,eU=t.enableButtonFlipVertical),"enableTapToAddText"in t&&n(101,eG=t.enableTapToAddText),"enableMultiSelect"in t&&n(102,eZ=t.enableMultiSelect),"enableTextStyleControls"in t&&n(5,eY=t.enableTextStyleControls),"locale"in t&&n(6,eq=t.locale),"snapThreshold"in t&&n(103,eK=t.snapThreshold),"snapPointer"in t&&n(104,eJ=t.snapPointer),"enableSnapToContext"in t&&n(105,e2=t.enableSnapToContext),"gridSize"in t&&n(106,e4=t.gridSize)},t.$$.update=()=>{32&t.$$.dirty[2]|8192&t.$$.dirty[3]&&n(172,r=e4>0?{x:0,y:0,...t6}:void 0),1&t.$$.dirty[0]|536870912&t.$$.dirty[5]&&n(148,o=!t_&&tA&&(iO()||iX())),512&t.$$.dirty[3]|536870912&t.$$.dirty[5]&&n(164,a=eZ?tA.filter(rl):[]),512&t.$$.dirty[5]&&n(163,l=a.length>1),32&t.$$.dirty[2]|768&t.$$.dirty[5]&&n(183,s=l?a.map(t=>r3(n1(t),t6)):[]),16777216&t.$$.dirty[4]&&n(180,c=!!o),16777216&t.$$.dirty[4]&&n(166,d=o&&rc(o)),16777216&t.$$.dirty[4]|2048&t.$$.dirty[5]&&n(10,u=o&&!d?o.id:void 0),8&t.$$.dirty[0]|32&t.$$.dirty[2]|16777216&t.$$.dirty[4]&&n(13,h=et&&o&&r3(n1(o),t6)),16777216&t.$$.dirty[4]|2048&t.$$.dirty[5]&&n(146,p=!!(o&&d)),8192&t.$$.dirty[0]|16&t.$$.dirty[2]|16777216&t.$$.dirty[4]&&n(179,g=o&&t4&&ns(h)||[]),268435712&t.$$.dirty[5]&&n(176,m=l?s.map(ns):[]),16777216&t.$$.dirty[4]|256&t.$$.dirty[5]&&n(182,f=!l&&o&&rF(o)&&!ro(o)),16777216&t.$$.dirty[4]|256&t.$$.dirty[5]&&n(14,$=!l&&o&&rB(o)&&!ro(o)),16777216&t.$$.dirty[4]|134217728&t.$$.dirty[5]&&n(17,x=f&&ni(o,"text")&&!o.height?[[1,2],[3,0]]:!(o&&(ri(o)||rn(o)))&&f),131072&t.$$.dirty[0]|16777216&t.$$.dirty[4]|134217728&t.$$.dirty[5]&&n(29,b=!!o&&!Array.isArray(x)&&f),768&t.$$.dirty[5]&&n(181,v=l?nl(a):[]),16777216&t.$$.dirty[4]|16777472&t.$$.dirty[5]&&n(15,w=o&&g.length>1||l),16&t.$$.dirty[3]|83886336&t.$$.dirty[5]&&n(177,S=l?v.map(ej):g.map(ej)),4&t.$$.dirty[0]|4194304&t.$$.dirty[5]&&n(12,k=S.map(t=>tB(t.x-tH.x,t.y-tH.y))),16777216&t.$$.dirty[4]&&n(16,C=o&&o.points&&nt(o.selectedPoint)?o.selectedPoint:-1),65536&t.$$.dirty[0]&&n(156,M=C>=0),69632&t.$$.dirty[0]|2&t.$$.dirty[5]&&n(161,T=M?k[C]:void 0),16777216&t.$$.dirty[4]|33554432&t.$$.dirty[5]&&n(28,P=c&&(n9(o)?!ni(o,"disableNewline")||!o.disableNewline:!1===o.disableNewline)),16&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&(t$&&ej&&!rl(t$)&&rS(t$)?nb(t$):ny()),61440&t.$$.dirty[0]|16&t.$$.dirty[2]&&n(178,R=w&&$&&t4&&k?nd(h):void 0),4&t.$$.dirty[0]|8388608&t.$$.dirty[5]&&n(27,A=R&&tB(R.position.x-tH.x,R.position.y-tH.y)),1&t.$$.dirty[6]&&n(171,F=!!(tp||[]).find(t=>[91,93,17].includes(t))),2048&t.$$.dirty[3]|65536&t.$$.dirty[5]&&n(173,E=!(F||!eJ)),16&t.$$.dirty[2]|18874368&t.$$.dirty[4]|4458496&t.$$.dirty[5]&&o&&S&&t4>0&&(nM(),nC(t4,o,d&&rn(o)?nE({...tR},!E):void 0)),16777216&t.$$.dirty[4]&&!o&&(nT(),nw()),16&t.$$.dirty[3]|2097152&t.$$.dirty[5]&&(m.length?(nR(),nA(...m.map(t=>({id:nP,points:t.map(ej),strokeWidth:1,strokeColor:[1,1,1,.5],pathClose:!0})))):nR()),1048576&t.$$.dirty[4]&&n(174,I=!!t$),262144&t.$$.dirty[4]&&n(175,L=!!tC),2097152&t.$$.dirty[4]|1835008&t.$$.dirty[5]&&tR&&!L&&!I&&nE({...tR},!E),512&t.$$.dirty[2]|8208&t.$$.dirty[3]|131072&t.$$.dirty[5]|2&t.$$.dirty[6]&&e4>0&&r&&ej&&nO(e4,r,eo,tg),1024&t.$$.dirty[2]|16&t.$$.dirty[3]|196608&t.$$.dirty[4]|65536&t.$$.dirty[5]&&ej&&(F?n_():nW(iv,iw,ea)),8&t.$$.dirty[2]&&nj(t2),1&t.$$.dirty[6]&&tp&&tp.length&&nH(),272&t.$$.dirty[0]&&ty&&"inline"===es&&ty.focus(),16777216&t.$$.dirty[4]&&n(170,B=o&&n8(o)),16777216&t.$$.dirty[4]|32768&t.$$.dirty[5]&&n(11,D=B&&!1!==rP(o)&&ro(o)),2048&t.$$.dirty[0]&&n(165,O=D?nV():void 0),32&t.$$.dirty[2]|1024&t.$$.dirty[5]&&n(167,z=O&&r3({...O},t6)),4096&t.$$.dirty[5]&&n(169,_=z&&nL(z.text,z)),20480&t.$$.dirty[5]&&(W=z&&eL(z.x,z.y,_.width,_.height)),2048&t.$$.dirty[0]|16777216&t.$$.dirty[4]&&n(24,j=D?o.text:""),2056&t.$$.dirty[0]|32&t.$$.dirty[2]|16777216&t.$$.dirty[4]&&n(168,H=et&&o&&D&&r3({...n1(o),width:nt(o.width)?Math.floor(o.width):void 0,height:nt(o.height)?Math.floor(o.height):void 0},t6)),2064&t.$$.dirty[0]|8192&t.$$.dirty[5]&&n(26,V=D&&nU(H,es)),2052&t.$$.dirty[0]|1073741824&t.$$.dirty[1]|4&t.$$.dirty[2]|8192&t.$$.dirty[5]&&n(25,U=D&&nG(H,tH,t1,tU)),256&t.$$.dirty[2]&&(G=er?ng(er):"auto"),2320&t.$$.dirty[0]&&D&&ty&&"inline"===es&&nX(),289406976&t.$$.dirty[4]&&n(152,X=o&&!p?o:X),268435456&t.$$.dirty[4]&&n(154,Y=X&&rT(X)),268435456&t.$$.dirty[4]&&n(149,q=X&&rR(X)),268435456&t.$$.dirty[4]&&n(151,K=X&&rC(X)),268435456&t.$$.dirty[4]&&n(150,J=X&&rk(X)),268435456&t.$$.dirty[4]|256&t.$$.dirty[5]&&n(153,Q=!l&&X&&rM(X)),268435456&t.$$.dirty[4]&&n(147,te=X&&!1!==rP(X)),268435456&t.$$.dirty[4]&&n(155,ti=X&&ni(X,"backgroundImage")&&rv(X,"opacity")),16777216&t.$$.dirty[4]&&n(158,tn=o&&"html"===o.format),20971520&t.$$.dirty[4]|8&t.$$.dirty[5]&&n(162,tr=o&&(!p||tn)),524288&t.$$.dirty[4]|1073741952&t.$$.dirty[5]&&rO.set(tr&&!nn?1:0,{hard:!1===th}),4096&t.$$.dirty[0]|160&t.$$.dirty[5]&&n(160,to=tr&&k.length?rz(eA(k)):to),512&t.$$.dirty[0]|64&t.$$.dirty[2]|96&t.$$.dirty[5]&&n(159,ta=(T||to)&&tx&&ee&&r_(ee,T||to,tx,-16)),262144&t.$$.dirty[0]|16&t.$$.dirty[5]&&n(23,tl=ta&&"transform: translate(".concat(ta.x,"px, ").concat(ta.y,"px);opacity:").concat(tu)),2048&t.$$.dirty[0]&&n(157,ts=D?"text":"shape"),1088&t.$$.dirty[0]|131&t.$$.dirty[3]|2139095040&t.$$.dirty[4]|536870927&t.$$.dirty[5]&&n(22,tc="text"===ts&&e_&&tn?p_(()=>e_([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map(t=>{let[e,n]=t;return["Button","style-"+e,{onclick:()=>document.execCommand(e),...n,style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+n.style}]})]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400;",label:'<span style="font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline;">T</span><span style="position:relative;top:.175rem;">&times;</span>',title:"Remove styles"}]]]],u)):"shape"===ts&&ez&&u?p_(()=>ez(M?[["div","epsilon",{class:"PinturaShapeControlsGroup"},[["Button","remove-point",{onclick:rr,label:eq.shapeTitleButtonRemove,icon:eq.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]]]]:[ti&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:rg,onchange:rp,step:.01,value:ni(o,"opacity")?o.opacity:1,label:(t,e,n)=>"".concat(Math.round(t/n*100),"%"),min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[Y&&["Button","flip-horizontal",{onclick:ru,label:eq.shapeTitleButtonFlipHorizontal,icon:eq.shapeIconButtonFlipHorizontal,hideLabel:!0}],Y&&eU&&["Button","flip-vertical",{onclick:rh,label:eq.shapeTitleButtonFlipVertical,icon:eq.shapeIconButtonFlipVertical,hideLabel:!0}],Q&&["Button","to-front",{onclick:rf,label:eq.shapeTitleButtonMoveToFront,icon:eq.shapeIconButtonMoveToFront,hideLabel:!0,disabled:tA[tA.length-1]===X}],K&&["Button","duplicate",{onclick:rI,label:eq.shapeTitleButtonDuplicate,icon:eq.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],J&&["Button","remove",{onclick:rm,label:eq.shapeTitleButtonRemove,icon:eq.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],te&&q&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:rs,label:ug(rW,eq,o),icon:ug(rN,eq,o),hideLabel:!0}]]],te&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:eq.shapeLabelInputText,onclick:ra}]]]].filter(Boolean),u)):[]),64&t.$$.dirty[0]|536870912&t.$$.dirty[5]&&n(21,td=tA.filter(rS).filter(t=>t.id).filter(t=>!rc(t)).map(t=>({id:t.id,color:n8(t)?t.color:ri(t)?t.strokeColor:t.backgroundColor,name:t.name||eq["shapeLabelTool".concat(lo(rK(t)))]})))},[t_,tW,tH,et,es,eY,eq,i1,ty,tx,u,D,k,h,$,w,C,x,tu,rj,tb,td,tc,tl,j,U,V,A,P,b,e6,i$,t=>{let{origin:e}=t.detail,r=eZ&&tp.includes(16);tP=void 0,n(142,tC=void 0),tM=void 0,tT=void 0,i9=!1,tk=void 0,ne=!1,ib(),clearTimeout(tS),tS=setTimeout(()=>n(143,nn=!0),250);let s=iO();if(s&&!(rn(s)&&ni(s,"pathClose"))&&i_(),tw=eW(tN(e)),s&&rn(s)&&ni(s,"pathClose"))return ec(t);let c=i8(tA,tw,eV,t=>rS(t)),d=c.length&&c.shift();if(o&&ro(o)&&(nJ(),eG&&(ne=!0)),!d&&o&&ro(o)&&i0(o),eN(e)){if(d&&rl(d)){if(i9=!0,n(142,tC=d),l){r&&i0(d),nr(a);return}tM=n1(tC),tT=r3(n1(tC),t6);return}if(tk=d||void 0,!ec(t)&&d){if(i1(d,!0,r),n(142,tC=d),l)return nr(a);tM=n1(tC),tT=r3(n1(tC),t6)}}},t=>{no(),ep(t)},t=>{let{translation:e,ctrlKey:n,metaKey:o,shiftKey:l,position:s}=t.detail;if(tC){if(!rL(tC)||ro(tC))return;if(l){let t=Math.abs(e.x),n=Math.abs(e.y);"x"===na&&(n-=64),"y"===na&&(t-=64),t>n?(e.y=0,na="x"):n>t&&(e.x=0,na="y")}else na=null;if(tP){if(!a.every(rL))return;tP.forEach(t=>{let{shape:n,shapeOriginComputed:o}=t;iA(n,o,e,{...e3(0,e4,r,n)})});return}return iA(tC,tT,e,{...e3(n||o?0:eK,e4,r,tC)})}ed(t)},t=>{if(no(),tC){if(l)return;if(ro(tC)&&n0(),t.detail.isTap&&rn(tC)&&rE(tC)){let{position:e}=t.detail,n=eW(tN(e));iB(tC,n)}else t.detail.isTap&&i9&&n8(tC)&&!1!==rP(tC)&&i2(tC);return}eu(t)},t=>{let e=tk&&t.detail.isTap,r=eZ&&tp.includes(16);if(t.detail.isTap&&setTimeout(()=>{eT({target:tC||tk,position:tw},0)}),tC){eS(tC),nQ(tC,tM)||ef(tC),n(142,tC=void 0);return}let o=!0;if(!r){let t=iQ();(o=!t||eB(t,tk||void 0))&&iJ({storePrevious:!1})}eh(t),o&&e&&i1(tk,!0,r)},nI,t=>{n(143,nn=!0),n(142,tC=o),tT=h},t=>{if(!tC){n(143,nn=!1);return}let{translation:e,indexes:o,shiftKey:a,ctrlKey:l,metaKey:s,isNudge:c}=t.detail;iL(tC,tT,o,e,{shiftKey:!c&&a,...e3(l||s?0:eK,e4,r,tC)}),rA(tC)&&t5(e)>16&&iH(tC,{selectedPoint:void 0})},t=>{if(!tC){n(143,nn=!1);return}i1(tC);let{isTap:e,translation:r,indexes:a}=t.detail;e&&(rA(tC)&&iH(tC,{selectedPoint:tC.selectedPoint===a[0]?void 0:a[0]}),eS(tC)),n(142,tC=void 0),n(143,nn=!1),ef(o)},t=>{tm=nc(h).origin,n(143,nn=!0),n(142,tC=o),tT=h},t=>{if(!tC){n(143,nn=!1);return}let{translation:e,shiftKey:r}=t.detail;iF(tC,tT,e,{shiftKey:r})},()=>{if(!tC){n(143,nn=!1);return}i1(tC),n(142,tC=void 0),n(143,nn=!1),ef(o)},t=>{let{key:e}=t,n=/escape/i.test(e);if(iZ()){if(n)return t.preventDefault(),t.stopPropagation(),i0(o);K&&"d"===e&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),t.stopPropagation(),rD())}},t=>{let e=rP(o,t);return!0===e?t:e},nK,t=>{let{target:e,key:n}=t,r=e.value||e.innerText,a=e.selectionStart||0,l=e.selectionEnd||r.length,s=r.substring(0,a)+n+r.substring(l);if(rP(o,s)!==s)return t.preventDefault()},t=>n7(o)&&/enter/i.test(t.code)&&!1!==o.disableNewline?t.preventDefault():/arrow/i.test(t.code)?t.stopPropagation():/escape/i.test(t.key)?n0():void 0,t=>{let{key:e,ctrlKey:n,altKey:r}=t;if(/enter/i.test(e)&&(n||r))return nJ()},nJ,n0,rO,t=>{let e=iG();!(!e||e.find(ro))&&(e.find(t=>!rL(t))||e.forEach(e=>{n(142,tC=e),tT=r3(n1(tC),t6),iA(tC,tT,t.detail)}))},t=>{n(19,rj=!0)},t=>{let{relatedTarget:e}=t;e&&e.classList.contains("shape-selector__button")||n(19,rj=!1)},t=>{if("touch"===t.pointerType||"PinturaShapeEditor"!==t.target.className){eP();return}(nn||tS)&&rV(void 0);let e=fz(t,et);n(145,tR=tN(e));let r=tq(eW(e),t=>Math.round(t));if(tY(r,rH)||(rH=tN(r),eM(nn,e,r),nn||tS||p))return;let[o]=i8(tA,r,0,rS);o&&rc(o)||rV(o)},t=>{"touch"!==t.pointerType&&eP()},tO,tz,tj,tU,tX,tK,t1,t2,t4,t6,ee,en,er,eo,ea,ec,ed,eu,eh,ep,em,ef,ey,eb,ew,eS,ek,eC,eM,eT,eP,eI,eB,eD,eO,ez,e_,eN,eW,ej,eH,eV,eU,eG,eZ,eK,eJ,e2,e4,e8,e9,ie,ii,id,iu,ih,function(t){let e,n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=re(t),s=n8(t),c="relative"===a.position,d=e5(),u=t=>{if(!eK)return t;let{snapTranslation:e,snapLines:n}=iP(iC(eW(t)),d,eK,e4,r);return iR(t,e),ix(n),t},h=!!iQ(),p=a.isSelection?tj:tW,g="step"===a.inputMode;if(rn(t)){if(g){let r=!1,a=(t,e)=>{let n=e9(p),o=t&&tB(fq(t.x,t6.width),fq(t.y,t6.height)),a=o&&ej(o);tp.includes(16)&&a&&ig(a,e);let l=eW(e),s=n.points.length?n.points[0]:l,d=tB(fq(s.x,t6.width),fq(s.y,t6.height)),u=t5(ej(d),e);if(!r&&1===n.points.length&&u<36)return ii(p);if(n.points.length>2&&u<=256){n.pathClose=!0,rS(n)&&i1(n);let t=id(p);em(t);return}let h=n.strokeWidth&&n.strokeColor&&(void 0===n.strokeColor[3]||n.strokeColor[3]>0),g=t5(a,e);if(h&&n.points.length>1&&g<256){n.pathClose=!1,n.backgroundColor=[0,0,0,0],rS(n)&&i1(n);let t=id(p);em(t);return}if(!(n.points.length>0)||!(g<100))return c?fK(l,t6):l};return{start:t=>{let l=e9(p),{origin:s}=t.detail;if(n=4,e=u(tN(s)),o=tN(e),l){let t=a(l.points[l.points.length-1],e);t&&(l.points=[...l.points,t]),iu({points:l.points},p);return}r=!0},update:t=>{if(!r)return;let n=e9(p);if(!n)return;let o=a(n.points[0],tB(e.x+t.detail.translation.x,e.y+t.detail.translation.y));o&&(n.points[1]=o,iu({points:n.points},p))},release:t=>t.detail.preventInertia(),cancel:()=>{ii(p)},end:n=>{if(!r)return;let o=eW(e),a=c?fK(o,t6):o,{isTap:l}=n.detail;if(l&&i8(tA,o,0,rS).length)return ii(p);ie({...t,points:[a]},p)}}}return{start:r=>{let{origin:a}=r.detail;n=4,e=tN(a),o=tN(e);let l=eW(e),s=c?fK(l,t6):l;ie({...t,points:[s]},p)},update:t=>{let r=e9(p);if(!r)return;let{translation:a}=t.detail,l=tB(e.x+a.x,e.y+a.y),s=t3(o,l);if(tE(s,5)<=n)return;let d=tZ(l,o),u=n-s;o.x+=u*Math.cos(d),o.y+=u*Math.sin(d);let h=eW(o),g=c?fK(h,t6):h;iu({points:r.points.concat(g)},p)},release:t=>t.detail.preventInertia(),cancel:()=>{ii(p)},end:t=>{let e=e9(p);if(!e)return;if(t.detail.isTap){let t=!1;if(e.bitmap?(tk&&(t=!0),h&&(t=!0)):t=!0,t)return ii(p)}let n=id(p);em(n)}}}return l||s||rt(t)?{start:n=>{let{origin:r}=n.detail;e=u(tN(r));let o=eW(e),a=c?fK(o,t6):o,s=-1*iy(tU,tX,tK),d={...t,rotation:s,...a};d.flipX=tX,d.flipY=tK,delete d.position,d.opacity=0,(l?["rx","ry"]:["width","height"]).forEach(t=>{d[t]=c?"0%":0}),ie(d,p)},update:t=>{let n=e9(p);if(!n)return;n.opacity=1;let{aspectRatio:r}=n,{translation:o,shiftKey:a,ctrlKey:s}=t.detail;!r&&a&&(r=1);let c=u(tB(e.x+o.x,e.y+o.y)),d=eW(e),h=eW(c);if(r){let t=eQ(eA([d,h]),r),e=h.x<d.x?-1:1,n=h.y<d.y?-1:1;h.x=d.x+t.width*e,h.y=d.y+t.height*n}let g={x:d.x+(h.x-d.x)*.5,y:d.y+(h.y-d.y)*.5},m=iy(tU,tX,tK);tV(d,m,g),tV(h,m,g);let f=Math.min(d.x,h.x),$=Math.min(d.y,h.y),y=Math.max(d.x,h.x),x=Math.max(d.y,h.y),b=y-f,v=x-$,w={};l?(s?(w.x=d.x,w.y=d.y):(w.x=f+.5*b,w.y=$+.5*v),w.rx=.5*b,w.ry=.5*v):(s?(w.x=d.x-.5*b,w.y=d.y-.5*v):(w.x=f,w.y=$),w.width=b,w.height=v),iu(w,p,(t,e)=>ip(t,e,t6))},release:t=>{t.detail.preventInertia()},cancel:()=>{ii(p)},end:t=>{let n=e9(p);if(n){if(t.detail.isTap){if(n8(n)&&eG&&ne||!n8(n)||!eG||tk)return ii(p);delete n.width,delete n.height,!1!==n.disableNewline&&delete n.textAlign;let t=r3({...n},t6),r=nL(n.text,t),o=eW({x:e.x,y:e.y-.5*r.height}),a=eW({x:e.x+r.width,y:e.y+.5*r.height}),l={x:o.x+(a.x-o.x)*.5,y:o.y+(a.y-o.y)*.5},s=iy(tU,tX,tK);tV(o,s,l),tV(a,s,l);let c=Math.min(o.x,a.x),d=Math.min(o.y,a.y);c<0&&(c=0),d<0&&(d=0),c+r.width>t6.width&&(c=t6.width-r.width),d+r.height>t6.height&&(d=t6.height-r.height),n.x=N(n.x)?np(c,t6.width):c,n.y=N(n.y)?np(d,t6.height):d}if(n.opacity=1,n8(n))em(n);else{let t=id(p);em(t)}rS(n)&&i1(n),n8(n)&&i2(n)}}}:ri(t)?{start:n=>{let{origin:r}=n.detail,o=tq(eW(u(r)),d1);e=tN(r),ie({...t,x1:c?np(o.x,t6.width):o.x,y1:c?np(o.y,t6.height):o.y,x2:c?np(o.x,t6.width):o.x,y2:c?np(o.y,t6.height):o.y,opacity:0},p)},update:t=>{if(!e9(p))return;let{translation:n}=t.detail,r=u(tJ(tN(e),n));if(tp.includes(16)){let t=t3(e,r),n=tZ(e,r),o=Math.PI/4,a=o*Math.round(n/o);r.x=e.x+t*Math.cos(a),r.y=e.y+t*Math.sin(a)}let o=eW(r);iu({x2:c?np(o.x,t6.width):o.x,y2:c?np(o.y,t6.height):o.y,opacity:1},p)},release:t=>t.detail.preventInertia(),cancel:()=>{ii(p)},end:t=>{let e=e9(p);if(!e)return;if(t.detail.isTap)return ii(p);e.opacity=1;let n=id(p);em(n),rS(e)&&i1(n)}}:void 0},()=>{let t,e;let n=eH*eH,r=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t5(t,e);if(!r&&o<2)return!1;let a=tA.filter(t=>!t.disableErase);return i5(o<n?i8(tA,eW(e),eH):i7(a,eW(t),eW(e),eH)).forEach(ew),!0};return{start:n=>{r(t=tB(Math.round(n.detail.origin.x),Math.round(n.detail.origin.y)),t,!0),e=t},update:n=>{let{translation:o}=n.detail,a=tB(Math.round(t.x+o.x),Math.round(t.y+o.y));r(e,a)&&(e=tN(a))},release:t=>t.detail.preventInertia(),cancel:()=>{ii(collection)},end:()=>{}}},iO,iz,t=>{if(!iO())return rx(t),ih(t)},i_,iN,function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:Z(),...t}},iW,ij,iH,iV,function(t,e){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];tA.forEach(n=>iV(n,t,e,!1)),n&&iW()},iU,iG,iX,iZ,iJ,i0,i2,i4,i5,i3,i6,i8,i7,iv,iw,tC,nn,t$,tR,p,te,o,q,J,K,X,Q,Y,ti,M,ts,tn,ta,to,T,tr,l,a,O,d,z,H,_,B,F,r,E,I,L,m,S,R,g,c,v,f,s,tA,th,tp,tg,function(e){aw.call(this,t,e)},t=>i1(tW[t]),function(t){ak[t?"unshift":"push"](()=>{n(8,ty=t)})},function(){n(24,j=this.value),n(11,D),n(148,o),n(170,B),n(0,t_),n(184,tA)},function(t){ak[t?"unshift":"push"](()=>{n(8,ty=t)})},()=>{tb&&tb.focus()},t=>n(9,tx=t.detail),function(t){ak[t?"unshift":"push"](()=>{n(20,tb=t)})},t=>fz(t,et)]}class $t extends a1{get syncShapeCollection(){return this.$$.ctx[107]}get getShapeDraft(){return this.$$.ctx[108]}get addShapeDraft(){return this.$$.ctx[109]}get discardShapeDraft(){return this.$$.ctx[110]}get confirmShapeDraft(){return this.$$.ctx[111]}get updateShapeDraft(){return this.$$.ctx[112]}get addShape(){return this.$$.ctx[113]}get createShape(){return this.$$.ctx[114]}get eraseShape(){return this.$$.ctx[115]}get getMarkupItemDraft(){return this.$$.ctx[116]}get getMarkupItemDraftIndex(){return this.$$.ctx[117]}get addMarkupItemDraft(){return this.$$.ctx[118]}get confirmMarkupItemDraft(){return this.$$.ctx[119]}get discardMarkupItemDraft(){return this.$$.ctx[120]}get createMarkupItem(){return this.$$.ctx[121]}get syncShapes(){return this.$$.ctx[122]}get removeMarkupShapeProps(){return this.$$.ctx[123]}get updateMarkupShape(){return this.$$.ctx[124]}get updateMarkupShapeProperty(){return this.$$.ctx[125]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[126]}get updateMarkupShapeItems(){return this.$$.ctx[127]}get getActiveMarkupItems(){return this.$$.ctx[128]}get getActiveMarkupItem(){return this.$$.ctx[129]}get hasActiveMarkupItem(){return this.$$.ctx[130]}get blurShapes(){return this.$$.ctx[131]}get selectShape(){return this.$$.ctx[7]}get deselectMarkupItem(){return this.$$.ctx[132]}get editMarkupItem(){return this.$$.ctx[133]}get finishEditMarkupItem(){return this.$$.ctx[134]}get removeMarkupItems(){return this.$$.ctx[135]}get getTextShapeRect(){return this.$$.ctx[136]}get getMarkupShapeRect(){return this.$$.ctx[137]}get getShapesNearPosition(){return this.$$.ctx[138]}get getShapesBetweenPoints(){return this.$$.ctx[139]}constructor(t){super(),aQ(this,t,f9,f6,oW,{uid:58,ui:59,disabled:0,shapes:1,selection:60,offset:2,contextRotation:61,contextFlipX:62,contextFlipY:63,contextZoom:64,active:65,opacity:66,parentRect:67,rootRect:3,utilRect:68,hoverColor:69,caretColor:70,gridColor:71,snapColor:72,textInputMode:4,oninteractionstart:73,oninteractionupdate:74,oninteractionrelease:75,oninteractionend:76,oninteractioncancel:77,onaddshape:78,onupdateshape:79,onselectshape:80,onblurshape:81,onremoveshape:82,ontapshape:83,onhovershape:84,ontriggerhistorywrite:85,onhovercanvas:86,ontapcanvas:87,onleavecanvas:88,beforeSelectShape:89,beforeDeselectShape:90,beforeRemoveShape:91,beforeUpdateShape:92,willRenderShapeControls:93,willRenderShapeTextControls:94,willStartInteraction:95,mapEditorPointToImagePoint:96,mapImagePointToEditorPoint:97,eraseRadius:98,selectRadius:99,enableButtonFlipVertical:100,enableTapToAddText:101,enableMultiSelect:102,enableTextStyleControls:5,locale:6,snapThreshold:103,snapPointer:104,enableSnapToContext:105,gridSize:106,syncShapeCollection:107,getShapeDraft:108,addShapeDraft:109,discardShapeDraft:110,confirmShapeDraft:111,updateShapeDraft:112,addShape:113,createShape:114,eraseShape:115,getMarkupItemDraft:116,getMarkupItemDraftIndex:117,addMarkupItemDraft:118,confirmMarkupItemDraft:119,discardMarkupItemDraft:120,createMarkupItem:121,syncShapes:122,removeMarkupShapeProps:123,updateMarkupShape:124,updateMarkupShapeProperty:125,updateMarkupItemsShapeProperty:126,updateMarkupShapeItems:127,getActiveMarkupItems:128,getActiveMarkupItem:129,hasActiveMarkupItem:130,blurShapes:131,selectShape:7,deselectMarkupItem:132,editMarkupItem:133,finishEditMarkupItem:134,removeMarkupItems:135,getTextShapeRect:136,getMarkupShapeRect:137,getShapesNearPosition:138,getShapesBetweenPoints:139},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}}function $e(t){let e,n,r;return n=new pr({props:{items:t[2]}}),{c(){e=o9("ul"),aq(n.$$.fragment),ao(e,"class","PinturaShapeStyleList")},m(t,o){o8(t,e,o),aK(n,e,null),r=!0},p(t,e){let r={};4&e&&(r.items=t[2]),n.$set(r)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n)}}}function $i(t){let e,n;return e=new dL({props:{class:"PinturaShapeStyles",elasticity:t[0],$$slots:{default:[$n]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};1&n&&(r.elasticity=t[0]),131076&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $n(t){let e,n,r;return n=new pr({props:{items:t[2]}}),{c(){e=o9("ul"),aq(n.$$.fragment),ao(e,"class","PinturaShapeStyleList")},m(t,o){o8(t,e,o),aK(n,e,null),r=!0},p(t,e){let r={};4&e&&(r.items=t[2]),n.$set(r)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n)}}}function $r(t){let e,n,r,o;let a=[$i,$e],l=[];return r=l[n=t[1]?0:1]=a[n](t),{c(){e=o9("div"),r.c(),ao(e,"style",t[3])},m(t,r){o8(t,e,r),l[n].m(e,null),o=!0},p(t,s){let[c]=s,d=n;(n=t[1]?0:1)===d?l[n].p(t,c):(aO(),aN(l[d],1,1,()=>{l[d]=null}),az(),(r=l[n])?r.p(t,c):(r=l[n]=a[n](t)).c(),a_(r,1),r.m(e,null)),(!o||8&c)&&ao(e,"style",t[3])},i(t){o||(a_(r),o=!0)},o(t){aN(r),o=!1},d(t){t&&o7(e),l[n].d()}}}function $o(t,e,n){let r,o,a,l,s,c;let{isActive:d=!1}=e,{controls:u=[]}=e,{locale:h}=e,{scrollElasticity:p}=e,{scrollEnable:g=!0}=e,{hideTitles:m=!1}=e,{willRenderControls:f=tf}=e,$=av("redrawTrigger");oV(t,$,t=>n(14,l=t));let y=av("env");oV(t,y,t=>n(13,a=t));let x=av("isAnimated");oV(t,x,t=>n(16,c=t));let b=cy(0,{stiffness:.25,damping:.9});return oV(t,b,t=>n(15,s=t)),t.$$set=t=>{"isActive"in t&&n(8,d=t.isActive),"controls"in t&&n(9,u=t.controls),"locale"in t&&n(10,h=t.locale),"scrollElasticity"in t&&n(0,p=t.scrollElasticity),"scrollEnable"in t&&n(1,g=t.scrollEnable),"hideTitles"in t&&n(11,m=t.hideTitles),"willRenderControls"in t&&n(12,f=t.willRenderControls)},t.$$.update=()=>{65792&t.$$.dirty&&b.set(d?1:0,{hard:!1===c}),33024&t.$$.dirty&&n(3,r="opacity:".concat(s,";").concat(d?"":"pointer-events:none;").concat(s<=0?"visibility:hidden":"")),32256&t.$$.dirty&&n(2,o=l&&f(u.map(t=>["ShapeStyle",t.id,{title:t.componentProps.title,locale:h,hideTitle:m,items:[[t.component,t.id,t.componentProps]]}]),a,()=>$.set({})))},[p,g,o,r,$,y,x,b,d,u,h,m,f,a,l,s,c]}class $a extends a1{constructor(t){super(),aQ(this,t,$o,$r,oW,{isActive:8,controls:9,locale:10,scrollElasticity:0,scrollEnable:1,hideTitles:11,willRenderControls:12})}}function $l(t,e,n){let r=t.slice();return r[15]=e[n].key,r[6]=e[n].controls,r[16]=e[n].isActive,r}function $s(t,e){let n,r,o;return r=new $a({props:{isActive:e[16],controls:e[6],locale:e[1],scrollElasticity:e[2],scrollEnable:e[3],hideTitles:e[4],willRenderControls:e[5]}}),{key:t,first:null,c(){n=an(),aq(r.$$.fragment),this.first=n},m(t,e){o8(t,n,e),aK(r,t,e),o=!0},p(t,n){e=t;let o={};128&n&&(o.isActive=e[16]),128&n&&(o.controls=e[6]),2&n&&(o.locale=e[1]),4&n&&(o.scrollElasticity=e[2]),8&n&&(o.scrollEnable=e[3]),16&n&&(o.hideTitles=e[4]),32&n&&(o.willRenderControls=e[5]),r.$set(o)},i(t){o||(a_(r.$$.fragment,t),o=!0)},o(t){aN(r.$$.fragment,t),o=!1},d(t){t&&o7(n),aJ(r,t)}}}function $c(t){let e,n,r;let o=[],a=new Map,l=t[7],s=t=>t[15];for(let e=0;e<l.length;e+=1){let n=$l(t,l,e),r=s(n);a.set(r,o[e]=$s(r,n))}return{c(){e=o9("div");for(let t=0;t<o.length;t+=1)o[t].c();ao(e,"class",n=cX(["PinturaShapeStyleEditor",!t[3]&&"PinturaShapeStyleEditorOverflow",t[0]]))},m(t,n){o8(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);r=!0},p(t,c){let[d]=c;190&d&&(l=t[7],aO(),o=aG(o,d,s,1,t,l,a,e,aU,$s,null,$l),az()),(!r||9&d&&n!==(n=cX(["PinturaShapeStyleEditor",!t[3]&&"PinturaShapeStyleEditorOverflow",t[0]])))&&ao(e,"class",n)},i(t){if(!r){for(let t=0;t<l.length;t+=1)a_(o[t]);r=!0}},o(t){for(let t=0;t<o.length;t+=1)aN(o[t]);r=!1},d(t){t&&o7(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function $d(t,e,n){let r,o,a;let{class:l}=e,{controls:s={}}=e,{shapeProps:c}=e,{onchange:d}=e,{locale:u}=e,{scrollElasticity:h}=e,{scrollEnable:p=!0}=e,{hideTitles:g=!1}=e,{willRenderControls:m}=e,f=t=>r.filter(e=>e.split("_").every(e=>ni(t,e)&&rv(t,e))).map(e=>{let n=(t.settings&&t.settings[e]||{}).control||e,r=e.split("_"),o=r.length>1?r.map(e=>t[e]):t[e];if(W(s[n])){let{title:r,component:a}=s[n](o,t=>{d({[e]:t})},{selectedShapeId:t.id});return{id:n,component:pr,componentProps:{title:r,items:a}}}let[a,l]=s[n];if(N(a)&&s[a]){let t={...l};[a,l]=s[a],l={...l,...t}}let c=W(l.options)?l.options(t):l.options;return"RadioGroup"===a&&(l.selectedIndex=-1),{id:n,component:a,componentProps:{...l,options:c,locale:u,value:o,optionLabelClass:"PinturaButtonLabel",onchange:n=>{let o=O(n)&&!nn(n)?n.value:n;l.onchange&&l.onchange(o,t);let a=r.length>1?r.reduce((t,e,n)=>({...t,[e]:Array.isArray(o)?o[n]:o}),{}):{[e]:o};d(a)}}}}).filter(Boolean),$=[],y=(t,e)=>{let n=$.find(e=>e.key===t);return n||(n={key:t,controls:e},$.push(n)),$.forEach(t=>t.isActive=!1),n.controls=e,n.isActive=!0,$};return t.$$set=t=>{"class"in t&&n(0,l=t.class),"controls"in t&&n(6,s=t.controls),"shapeProps"in t&&n(8,c=t.shapeProps),"onchange"in t&&n(9,d=t.onchange),"locale"in t&&n(1,u=t.locale),"scrollElasticity"in t&&n(2,h=t.scrollElasticity),"scrollEnable"in t&&n(3,p=t.scrollEnable),"hideTitles"in t&&n(4,g=t.hideTitles),"willRenderControls"in t&&n(5,m=t.willRenderControls)},t.$$.update=()=>{64&t.$$.dirty&&n(11,r=Object.keys(s).filter(t=>s[t])),2304&t.$$.dirty&&n(10,o=c&&Object.keys(c).length&&r&&rv(c)?f(c):[]),1280&t.$$.dirty&&n(7,a=y(c&&Object.keys(c).length?Object.keys(c).join("_"):"none",o||[]))},[l,u,h,p,g,m,s,a,c,d,o,r]}class $u extends a1{constructor(t){super(),aQ(this,t,$d,$c,oW,{class:0,controls:6,shapeProps:8,onchange:9,locale:1,scrollElasticity:2,scrollEnable:3,hideTitles:4,willRenderControls:5})}}var $h=t=>/<svg /.test(t);function $p(t){let e,n;return e=new pr({props:{items:t[10]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};1024&n&&(r.items=t[10]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $g(t){let e,n,r,o;let a=[$f,$m],l=[];return n=l[e=t[8]?0:1]=a[e](t),{c(){n.c(),r=an()},m(t,n){l[e].m(t,n),o8(t,r,n),o=!0},p(t,o){let s=e;(e=t[8]?0:1)===s?l[e].p(t,o):(aO(),aN(l[s],1,1,()=>{l[s]=null}),az(),(n=l[e])?n.p(t,o):(n=l[e]=a[e](t)).c(),a_(n,1),n.m(r.parentNode,r))},i(t){o||(a_(n),o=!0)},o(t){aN(n),o=!1},d(t){l[e].d(t),t&&o7(r)}}}function $m(t){let e,n,r,o;let a=t[10]&&$$(t);return r=new dL({props:{scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[$y]},$$scope:{ctx:t}}}),{c(){e=o9("div"),a&&a.c(),n=ai(),aq(r.$$.fragment),ao(e,"class","PinturaShapePresetsFlat")},m(t,l){o8(t,e,l),a&&a.m(e,null),o3(e,n),aK(r,e,null),o=!0},p(t,o){t[10]?a?(a.p(t,o),1024&o&&a_(a,1)):((a=$$(t)).c(),a_(a,1),a.m(e,n)):a&&(aO(),aN(a,1,1,()=>{a=null}),az());let l={};512&o&&(l.scrollAutoCancel=t[9]),1&o&&(l.elasticity=t[0]),536871070&o&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){o||(a_(a),a_(r.$$.fragment,t),o=!0)},o(t){aN(a),aN(r.$$.fragment,t),o=!1},d(t){t&&o7(e),a&&a.d(),aJ(r)}}}function $f(t){let e,n,r,o,a;n=new dL({props:{elasticity:t[0],class:"PinturaShapePresetsGroups",$$slots:{default:[$k]},$$scope:{ctx:t}}});let l=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[11]},t[12]],s={$$slots:{default:[$M,t=>{let{panel:e,panelIsActive:n}=t;return{26:e,27:n}},t=>{let{panel:e,panelIsActive:n}=t;return(e?67108864:0)|(n?134217728:0)}]},$$scope:{ctx:t}};for(let t=0;t<l.length;t+=1)s=oD(s,l[t]);return o=new dn({props:s}),{c(){e=o9("div"),aq(n.$$.fragment),r=ai(),aq(o.$$.fragment),ao(e,"class","PinturaShapePresetsGrouped")},m(t,l){o8(t,e,l),aK(n,e,null),o3(e,r),aK(o,e,null),a=!0},p(t,e){let r={};1&e&&(r.elasticity=t[0]),536876128&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);let a=6144&e?aX(l,[l[0],l[1],2048&e&&{panels:t[11]},4096&e&&aZ(t[12])]):{};738206239&e&&(a.$$scope={dirty:e,ctx:t}),o.$set(a)},i(t){a||(a_(n.$$.fragment,t),a_(o.$$.fragment,t),a=!0)},o(t){aN(n.$$.fragment,t),aN(o.$$.fragment,t),a=!1},d(t){t&&o7(e),aJ(n),aJ(o)}}}function $$(t){let e,n;return e=new pr({props:{items:t[10]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};1024&n&&(r.items=t[10]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $y(t){let e,n;return e=new dK({props:{items:t[7],onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};128&n&&(r.items=t[7]),2&n&&(r.onclickitem=t[1]),4&n&&(r.ongrabitem=t[2]),8&n&&(r.ondragitem=t[3]),16&n&&(r.ondropitem=t[4]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $x(t){let e,n;return e=new pr({props:{items:t[10]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};1024&n&&(r.items=t[10]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $b(t){let e,n;return e=new dh({props:{$$slots:{default:[$v]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};805306368&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $v(t){let e;let n=t[28].icon+"";return{c(){e=at("g")},m(t,r){o8(t,e,r),e.innerHTML=n},p(t,r){268435456&r&&n!==(n=t[28].icon+"")&&(e.innerHTML=n)},d(t){t&&o7(e)}}}function $w(t){let e,n;let r=t[28].label+"";return{c(){e=o9("span"),n=ae(r)},m(t,r){o8(t,e,r),o3(e,n)},p(t,e){268435456&e&&r!==(r=t[28].label+"")&&as(n,r)},d(t){t&&o7(e)}}}function $S(t){let e,n,r;let o=t[28].icon&&$b(t),a=!t[28].hideLabel&&$w(t);return{c(){o&&o.c(),e=ai(),a&&a.c(),n=an()},m(t,l){o&&o.m(t,l),o8(t,e,l),a&&a.m(t,l),o8(t,n,l),r=!0},p(t,r){t[28].icon?o?(o.p(t,r),268435456&r&&a_(o,1)):((o=$b(t)).c(),a_(o,1),o.m(e.parentNode,e)):o&&(aO(),aN(o,1,1,()=>{o=null}),az()),t[28].hideLabel?a&&(a.d(1),a=null):a?a.p(t,r):((a=$w(t)).c(),a.m(n.parentNode,n))},i(t){r||(a_(o),r=!0)},o(t){aN(o),r=!1},d(t){o&&o.d(t),t&&o7(e),a&&a.d(t),t&&o7(n)}}}function $k(t){let e,n,r;let o=t[10]&&$x(t),a=[{class:"PinturaControlList"},{tabs:t[5]},t[12],{layout:"compact"}],l={$$slots:{default:[$S,t=>{let{tab:e}=t;return{28:e}},t=>{let{tab:e}=t;return e?268435456:0}]},$$scope:{ctx:t}};for(let t=0;t<a.length;t+=1)l=oD(l,a[t]);return(n=new c0({props:l})).$on("select",t[18]),{c(){o&&o.c(),e=ai(),aq(n.$$.fragment)},m(t,a){o&&o.m(t,a),o8(t,e,a),aK(n,t,a),r=!0},p(t,r){t[10]?o?(o.p(t,r),1024&r&&a_(o,1)):((o=$x(t)).c(),a_(o,1),o.m(e.parentNode,e)):o&&(aO(),aN(o,1,1,()=>{o=null}),az());let l=4128&r?aX(a,[a[0],32&r&&{tabs:t[5]},4096&r&&aZ(t[12]),a[3]]):{};805306368&r&&(l.$$scope={dirty:r,ctx:t}),n.$set(l)},i(t){r||(a_(o),a_(n.$$.fragment,t),r=!0)},o(t){aN(o),aN(n.$$.fragment,t),r=!1},d(t){o&&o.d(t),t&&o7(e),aJ(n,t)}}}function $C(t){let e,n;return e=new dK({props:{items:t[13][t[26]].items,disabled:t[13][t[26]].disabled,onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};67117056&n&&(r.items=t[13][t[26]].items),67117056&n&&(r.disabled=t[13][t[26]].disabled),2&n&&(r.onclickitem=t[1]),4&n&&(r.ongrabitem=t[2]),8&n&&(r.ondragitem=t[3]),16&n&&(r.ondropitem=t[4]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $M(t){let e,n;return e=new dL({props:{scroll:t[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[$C]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};134217728&n&&(r.scroll=t[27]?{scrollOffset:0,animate:!1}:void 0),512&n&&(r.scrollAutoCancel=t[9]),1&n&&(r.elasticity=t[0]),603987998&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $T(t){let e,n,r,o;let a=[$g,$p],l=[];function s(t,e){return t[9]?0:t[10]?1:-1}return~(n=s(t))&&(r=l[n]=a[n](t)),{c(){e=o9("div"),r&&r.c(),ao(e,"class","PinturaShapePresetsPalette")},m(t,r){o8(t,e,r),~n&&l[n].m(e,null),o=!0},p(t,o){let[c]=o,d=n;(n=s(t))===d?~n&&l[n].p(t,c):(r&&(aO(),aN(l[d],1,1,()=>{l[d]=null}),az()),~n?((r=l[n])?r.p(t,c):(r=l[n]=a[n](t)).c(),a_(r,1),r.m(e,null)):r=null)},i(t){o||(a_(r),o=!0)},o(t){aN(r),o=!1},d(t){t&&o7(e),~n&&l[n].d()}}}function $P(t,e,n){let r,o,a,l,s,c,d,u,h;let{locale:p}=e,{presets:g}=e,{scrollElasticity:m}=e,{enableSelectImage:f=!0}=e,{willRenderPresetToolbar:$=tf}=e,{onaddpreset:x=y}=e,{ongrabpreset:b}=e,{ondragpreset:v}=e,{ondroppreset:w}=e,S="presets-".concat(Z()),k=t=>nn(t)&&N(t[0])&&nn(t[1]),C=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return $h(t)?t:ne(t)?nd(t,e):'<img src="'.concat(t,'" alt="').concat(e,'"/>')},M=t=>ts(ig(t)),T=["src","alt","thumb","shape","id","mount","disabled"],P=t=>{let e,n,r,o,a,l,s;return N(t)?ne(t)?o=C(e=t,a=t):(a=M(e=t),o=C(e,a)):(e=t.src,a=t.alt||(N(e)?M(e):N(t.thumb)?M(t.thumb):void 0),o=C(t.thumb||e,a),n=t.shape,l=t.mount,s=t.disabled,r=Object.keys(t).reduce((e,n)=>(T.includes(n)||(e[n]=t[n]),e),{})),{id:t,src:e,thumb:o,shape:n,shapeProps:r,alt:a,title:a,mount:l,disabled:s}},R=t=>t.map(t=>k(t)?{...t[2],id:"".concat(S,"-").concat(t[0].toLowerCase()),label:t[0],items:R(t[1])}:P(t));return t.$$set=t=>{"locale"in t&&n(14,p=t.locale),"presets"in t&&n(15,g=t.presets),"scrollElasticity"in t&&n(0,m=t.scrollElasticity),"enableSelectImage"in t&&n(16,f=t.enableSelectImage),"willRenderPresetToolbar"in t&&n(17,$=t.willRenderPresetToolbar),"onaddpreset"in t&&n(1,x=t.onaddpreset),"ongrabpreset"in t&&n(2,b=t.ongrabpreset),"ondragpreset"in t&&n(3,v=t.ondragpreset),"ondroppreset"in t&&n(4,w=t.ondroppreset)},t.$$.update=()=>{32768&t.$$.dirty&&n(7,r=R(g)),128&t.$$.dirty&&n(9,o=r.length),640&t.$$.dirty&&n(8,a=o&&r.some(t=>!!t.items)),384&t.$$.dirty&&n(5,l=a&&r),384&t.$$.dirty&&n(13,s=a&&r.reduce((t,e)=>(t[e.id]=e,t),{})),96&t.$$.dirty&&n(6,c=c||l&&(l.find(t=>!t.disabled)||{}).id),64&t.$$.dirty&&n(12,d={name:S,selected:c}),32&t.$$.dirty&&n(11,u=l&&l.map(t=>t.id)),212994&t.$$.dirty&&n(10,h=p&&$([f&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{pz().then(t=>{t&&x(t)})}}]]))},[m,x,b,v,w,l,c,r,a,o,h,u,d,s,p,g,f,$,t=>{let{detail:e}=t;return n(6,c=e)}]}class $R extends a1{constructor(t){super(),aQ(this,t,$P,$T,oW,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}var $A=t=>(e,n)=>{t.dispatchEvent(pb(e,n))};function $E(t){let e,n,r,o;return e=new pr({props:{items:t[30]}}),r=new $u({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[165]}}),{c(){aq(e.$$.fragment),n=ai(),aq(r.$$.fragment)},m(t,a){aK(e,t,a),o8(t,n,a),aK(r,t,a),o=!0},p(t,n){let o={};1073741824&n[0]&&(o.items=t[30]),e.$set(o);let a={};16&n[0]&&(a.locale=t[4]),262144&n[1]&&(a.shapeProps=t[49]),512&n[0]&&(a.controls=t[9]),r.$set(a)},i(t){o||(a_(e.$$.fragment,t),a_(r.$$.fragment,t),o=!0)},o(t){aN(e.$$.fragment,t),aN(r.$$.fragment,t),o=!1},d(t){aJ(e,t),t&&o7(n),aJ(r,t)}}}function $I(t){let e,n,r;return n=new mx({props:{$$slots:{default:[$E]},$$scope:{ctx:t}}}),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"slot","header")},m(t,o){o8(t,e,o),aK(n,e,null),r=!0},p(t,e){let r={};1073742352&e[0]|262144&e[1]|67108864&e[6]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n)}}}function $L(t){let e,n;let r=[{locale:t[4]},{ui:t[69]},{shapes:t[5]},{selection:t[58]},{uid:t[20]},{parentRect:t[37]},{rootRect:t[55]},{utilRect:t[39]},{offset:t[50]},{disabled:t[38]},{contextRotation:t[23]},{contextFlipX:t[24]},{contextFlipY:t[25]},{contextZoom:t[36]?t[36].scale:void 0},{active:t[35]},{opacity:t[56]},{hoverColor:t[57]},{caretColor:t[57]},{snapColor:t[57]},{gridColor:[1,1,1,.125]},{eraseRadius:t[47]},{selectRadius:t[6]},{enableButtonFlipVertical:t[10]},{enableMultiSelect:t[14]},{mapEditorPointToImagePoint:t[21]},{mapImagePointToEditorPoint:t[22]},{enableTapToAddText:t[13]},{textInputMode:t[8]},{snapThreshold:t[16]},{snapPointer:!t[48]},{enableSnapToContext:t[17]},{gridSize:t[15]},{willStartInteraction:t[95]},{oninteractionstart:t[79]},{oninteractionupdate:t[80]},{oninteractionrelease:t[81]},{oninteractionend:t[83]},{oninteractioncancel:t[82]},{onleavecanvas:t[87]},{onhovercanvas:t[86]},{onhovershape:t[89]},{ontapcanvas:t[88]},{onaddshape:t[156]},{onselectshape:t[157]},{onblurshape:t[158]},{ontapshape:t[159]},{onupdateshape:t[160]},{onremoveshape:t[161]},{ontriggerhistorywrite:t[162]},t[42]],o={};for(let t=0;t<r.length;t+=1)o=oD(o,r[t]);return e=new $t({props:o}),t[163](e),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let o=66315632&n[0]|252381681&n[1]|255721600&n[2]|12&n[3]?aX(r,[16&n[0]&&{locale:t[4]},128&n[2]&&{ui:t[69]},32&n[0]&&{shapes:t[5]},134217728&n[1]&&{selection:t[58]},1048576&n[0]&&{uid:t[20]},64&n[1]&&{parentRect:t[37]},16777216&n[1]&&{rootRect:t[55]},256&n[1]&&{utilRect:t[39]},524288&n[1]&&{offset:t[50]},128&n[1]&&{disabled:t[38]},8388608&n[0]&&{contextRotation:t[23]},16777216&n[0]&&{contextFlipX:t[24]},33554432&n[0]&&{contextFlipY:t[25]},32&n[1]&&{contextZoom:t[36]?t[36].scale:void 0},16&n[1]&&{active:t[35]},33554432&n[1]&&{opacity:t[56]},67108864&n[1]&&{hoverColor:t[57]},67108864&n[1]&&{caretColor:t[57]},67108864&n[1]&&{snapColor:t[57]},r[19],65536&n[1]&&{eraseRadius:t[47]},64&n[0]&&{selectRadius:t[6]},1024&n[0]&&{enableButtonFlipVertical:t[10]},16384&n[0]&&{enableMultiSelect:t[14]},2097152&n[0]&&{mapEditorPointToImagePoint:t[21]},4194304&n[0]&&{mapImagePointToEditorPoint:t[22]},8192&n[0]&&{enableTapToAddText:t[13]},256&n[0]&&{textInputMode:t[8]},65536&n[0]&&{snapThreshold:t[16]},131072&n[1]&&{snapPointer:!t[48]},131072&n[0]&&{enableSnapToContext:t[17]},32768&n[0]&&{gridSize:t[15]},4&n[3]&&{willStartInteraction:t[95]},131072&n[2]&&{oninteractionstart:t[79]},262144&n[2]&&{oninteractionupdate:t[80]},524288&n[2]&&{oninteractionrelease:t[81]},2097152&n[2]&&{oninteractionend:t[83]},1048576&n[2]&&{oninteractioncancel:t[82]},33554432&n[2]&&{onleavecanvas:t[87]},16777216&n[2]&&{onhovercanvas:t[86]},134217728&n[2]&&{onhovershape:t[89]},67108864&n[2]&&{ontapcanvas:t[88]},1&n[1]|8&n[3]&&{onaddshape:t[156]},1&n[1]&&{onselectshape:t[157]},1&n[1]&&{onblurshape:t[158]},1&n[1]&&{ontapshape:t[159]},1&n[1]|8&n[3]&&{onupdateshape:t[160]},1&n[1]|8&n[3]&&{onremoveshape:t[161]},8&n[3]&&{ontriggerhistorywrite:t[162]},2048&n[1]&&aZ(t[42])]):{};e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(n){t[163](null),aJ(e,n)}}}function $F(t){let e,n,r,o,a;let l=t[51]&&$L(t);return{c(){e=o9("div"),l&&l.c(),ao(e,"slot","main"),ao(e,"style",n="cursor:".concat(t[46]))},m(n,s){o8(n,e,s),l&&l.m(e,null),t[164](e),r=!0,o||(a=[ar(e,"keydown",t[84]),oQ(cB.call(null,e)),ar(e,"dropfiles",function(){oN(t[12]?t[94]:y)&&(t[12]?t[94]:y).apply(this,arguments)}),oQ(cE.call(null,e)),ar(e,"measure",t[152])],o=!0)},p(o,a){(t=o)[51]?l?(l.p(t,a),1048576&a[1]&&a_(l,1)):((l=$L(t)).c(),a_(l,1),l.m(e,null)):l&&(aO(),aN(l,1,1,()=>{l=null}),az()),(!r||32768&a[1]&&n!==(n="cursor:".concat(t[46])))&&ao(e,"style",n)},i(t){r||(a_(l),r=!0)},o(t){aN(l),r=!1},d(n){n&&o7(e),l&&l.d(),t[164](null),o=!1,o_(a)}}}function $B(t){let e,n;return e=new $R({props:{locale:t[4],presets:t[19],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[93],ongrabpreset:t[90],ondragpreset:t[91],ondroppreset:t[92],scrollElasticity:t[44]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};16&n[0]&&(r.locale=t[4]),524288&n[0]&&(r.presets=t[19]),2048&n[0]&&(r.enableSelectImage=t[11]),4096&n[1]&&(r.willRenderPresetToolbar=t[43]),8192&n[1]&&(r.scrollElasticity=t[44]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $D(t){let e,n,r;let o="stack"===t[7]&&$O(t),a=(t[53]&&t[34]||"row"===t[7])&&$N(t);return{c(){o&&o.c(),e=ai(),a&&a.c(),n=an()},m(t,l){o&&o.m(t,l),o8(t,e,l),a&&a.m(t,l),o8(t,n,l),r=!0},p(t,r){"stack"===t[7]?o?(o.p(t,r),128&r[0]&&a_(o,1)):((o=$O(t)).c(),a_(o,1),o.m(e.parentNode,e)):o&&(aO(),aN(o,1,1,()=>{o=null}),az()),t[53]&&t[34]||"row"===t[7]?a?(a.p(t,r),128&r[0]|4194312&r[1]&&a_(a,1)):((a=$N(t)).c(),a_(a,1),a.m(n.parentNode,n)):a&&(aO(),aN(a,1,1,()=>{a=null}),az())},i(t){r||(a_(o),a_(a),r=!0)},o(t){aN(o),aN(a),r=!1},d(t){o&&o.d(t),t&&o7(e),a&&a.d(t),t&&o7(n)}}}function $O(t){let e,n,r,o;let a=[$_,$z],l=[];return r=l[n=t[45]?0:1]=a[n](t),{c(){e=o9("div"),r.c(),ao(e,"class","PinturaControlPanels")},m(t,r){o8(t,e,r),l[n].m(e,null),o=!0},p(t,o){let s=n;(n=t[45]?0:1)===s?l[n].p(t,o):(aO(),aN(l[s],1,1,()=>{l[s]=null}),az(),(r=l[n])?r.p(t,o):(r=l[n]=a[n](t)).c(),a_(r,1),r.m(e,null))},i(t){o||(a_(r),o=!0)},o(t){aN(r),o=!1},d(t){t&&o7(e),l[n].d()}}}function $z(t){let e,n,r;return n=new $u({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollElasticity:t[44],willRenderControls:t[18]}}),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"class","PinturaControlPanel")},m(t,o){o8(t,e,o),aK(n,e,null),r=!0},p(t,e){let r={};16&e[0]&&(r.locale=t[4]),262144&e[1]&&(r.shapeProps=t[49]),512&e[0]&&(r.controls=t[9]),8192&e[1]&&(r.scrollElasticity=t[44]),262144&e[0]&&(r.willRenderControls=t[18]),n.$set(r)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n)}}}function $_(t){let e,n,r;return n=new $R({props:{locale:t[4],presets:t[19],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[93],ongrabpreset:t[90],ondragpreset:t[91],ondroppreset:t[92],scrollElasticity:t[44]}}),{c(){e=o9("div"),aq(n.$$.fragment),ao(e,"class","PinturaControlPanel")},m(t,o){o8(t,e,o),aK(n,e,null),r=!0},p(t,e){let r={};16&e[0]&&(r.locale=t[4]),524288&e[0]&&(r.presets=t[19]),2048&e[0]&&(r.enableSelectImage=t[11]),4096&e[1]&&(r.willRenderPresetToolbar=t[43]),8192&e[1]&&(r.scrollElasticity=t[44]),n.$set(r)},i(t){r||(a_(n.$$.fragment,t),r=!0)},o(t){aN(n.$$.fragment,t),r=!1},d(t){t&&o7(e),aJ(n)}}}function $N(t){let e,n;return e=new dL({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[$X]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};8192&n[1]&&(r.elasticity=t[44]),262801&n[0]|262154&n[1]|67108864&n[6]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $W(t){let e,n;return e=new uH({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[32],selectedIndex:t[32].findIndex(t[153]),onchange:t[78],$$slots:{option:[$U,t=>{let{option:e}=t;return{211:e}},t=>{let{option:e}=t;return[0,0,0,0,0,0,e?33554432:0]}]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};16&n[0]&&(r.locale=t[4]),2&n[1]&&(r.options=t[32]),1&n[0]|2&n[1]&&(r.selectedIndex=t[32].findIndex(t[153])),16&n[0]|100663296&n[6]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $j(t){let e,n;return e=new dh({props:{$$slots:{default:[$H]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};16&n[0]|100663296&n[6]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $H(t){let e;let n=(W(t[211].icon)?t[211].icon(t[4]):t[211].icon)+"";return{c(){e=at("g")},m(t,r){o8(t,e,r),e.innerHTML=n},p(t,r){16&r[0]|33554432&r[6]&&n!==(n=(W(t[211].icon)?t[211].icon(t[4]):t[211].icon)+"")&&(e.innerHTML=n)},d(t){t&&o7(e)}}}function $V(t){let e,n;let r=(W(t[211].label)?t[211].label(t[4]):t[211].label)+"";return{c(){e=o9("span"),n=ae(r)},m(t,r){o8(t,e,r),o3(e,n)},p(t,e){16&e[0]|33554432&e[6]&&r!==(r=(W(t[211].label)?t[211].label(t[4]):t[211].label)+"")&&as(n,r)},d(t){t&&o7(e)}}}function $U(t){let e,n,r;let o=t[211].icon&&$j(t),a=!t[211].hideLabel&&$V(t);return{c(){e=o9("div"),o&&o.c(),n=ai(),a&&a.c(),ao(e,"slot","option")},m(t,l){o8(t,e,l),o&&o.m(e,null),o3(e,n),a&&a.m(e,null),r=!0},p(t,r){t[211].icon?o?(o.p(t,r),33554432&r[6]&&a_(o,1)):((o=$j(t)).c(),a_(o,1),o.m(e,n)):o&&(aO(),aN(o,1,1,()=>{o=null}),az()),t[211].hideLabel?a&&(a.d(1),a=null):a?a.p(t,r):((a=$V(t)).c(),a.m(e,null))},i(t){r||(a_(o),r=!0)},o(t){aN(o),r=!1},d(t){t&&o7(e),o&&o.d(),a&&a.d()}}}function $G(t){let e,n;return e=new $u({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[154]}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};16&n[0]&&(r.locale=t[4]),262144&n[1]&&(r.shapeProps=t[49]),512&n[0]&&(r.controls=t[9]),262144&n[0]&&(r.willRenderControls=t[154]),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $X(t){let e,n,r;let o=t[34]&&$W(t),a="row"===t[7]&&$G(t);return{c(){o&&o.c(),e=ai(),a&&a.c(),n=an()},m(t,l){o&&o.m(t,l),o8(t,e,l),a&&a.m(t,l),o8(t,n,l),r=!0},p(t,r){t[34]?o?(o.p(t,r),8&r[1]&&a_(o,1)):((o=$W(t)).c(),a_(o,1),o.m(e.parentNode,e)):o&&(aO(),aN(o,1,1,()=>{o=null}),az()),"row"===t[7]?a?(a.p(t,r),128&r[0]&&a_(a,1)):((a=$G(t)).c(),a_(a,1),a.m(n.parentNode,n)):a&&(aO(),aN(a,1,1,()=>{a=null}),az())},i(t){r||(a_(o),a_(a),r=!0)},o(t){aN(o),aN(a),r=!1},d(t){o&&o.d(t),t&&o7(e),a&&a.d(t),t&&o7(n)}}}function $Z(t){let e,n;return e=new dL({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[$J]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};8192&n[1]&&(r.elasticity=t[44]),134217744&n[0]|8388608&n[1]|67108864&n[6]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $Y(t){let e,n;return e=new dh({props:{$$slots:{default:[$q]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};16&n[0]|100663296&n[6]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $q(t){let e;let n=(W(t[211].icon)?t[211].icon(t[4]):t[211].icon)+"";return{c(){e=at("g")},m(t,r){o8(t,e,r),e.innerHTML=n},p(t,r){16&r[0]|33554432&r[6]&&n!==(n=(W(t[211].icon)?t[211].icon(t[4]):t[211].icon)+"")&&(e.innerHTML=n)},d(t){t&&o7(e)}}}function $K(t){let e,n,r,o,a;let l=(W(t[211].label)?t[211].label(t[4]):t[211].label)+"",s=t[211].icon&&$Y(t);return{c(){e=o9("div"),s&&s.c(),n=ai(),r=o9("span"),o=ae(l),ao(e,"slot","option")},m(t,l){o8(t,e,l),s&&s.m(e,null),o3(e,n),o3(e,r),o3(r,o),a=!0},p(t,r){t[211].icon?s?(s.p(t,r),33554432&r[6]&&a_(s,1)):((s=$Y(t)).c(),a_(s,1),s.m(e,n)):s&&(aO(),aN(s,1,1,()=>{s=null}),az()),(!a||16&r[0]|33554432&r[6])&&l!==(l=(W(t[211].label)?t[211].label(t[4]):t[211].label)+"")&&as(o,l)},i(t){a||(a_(s),a=!0)},o(t){aN(s),a=!1},d(t){t&&o7(e),s&&s.d()}}}function $J(t){let e,n;return e=new uH({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[54],selectedIndex:t[54].findIndex(t[155]),onchange:t[77],$$slots:{option:[$K,t=>{let{option:e}=t;return{211:e}},t=>{let{option:e}=t;return[0,0,0,0,0,0,e?33554432:0]}]},$$scope:{ctx:t}}}),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};16&n[0]&&(r.locale=t[4]),8388608&n[1]&&(r.options=t[54]),134217728&n[0]|8388608&n[1]&&(r.selectedIndex=t[54].findIndex(t[155])),16&n[0]|100663296&n[6]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $Q(t){let e,n,r,o,a;let l=[$D,$B],s=[];function c(t,e){return t[52]?0:t[45]?1:-1}~(n=c(t))&&(r=s[n]=l[n](t));let d=t[33]&&$Z(t);return{c(){e=o9("div"),r&&r.c(),o=ai(),d&&d.c(),ao(e,"slot","footer"),ao(e,"style",t[40])},m(t,r){o8(t,e,r),~n&&s[n].m(e,null),o3(e,o),d&&d.m(e,null),a=!0},p(t,u){let h=n;(n=c(t))===h?~n&&s[n].p(t,u):(r&&(aO(),aN(s[h],1,1,()=>{s[h]=null}),az()),~n?((r=s[n])?r.p(t,u):(r=s[n]=l[n](t)).c(),a_(r,1),r.m(e,o)):r=null),t[33]?d?(d.p(t,u),4&u[1]&&a_(d,1)):((d=$Z(t)).c(),a_(d,1),d.m(e,null)):d&&(aO(),aN(d,1,1,()=>{d=null}),az()),(!a||512&u[1])&&ao(e,"style",t[40])},i(t){a||(a_(r),a_(d),a=!0)},o(t){aN(r),aN(d),a=!1},d(t){t&&o7(e),~n&&s[n].d(),d&&d.d()}}}function $1(t){let e,n;return(e=new mL({props:{hasHeader:t[41],$$slots:{footer:[$Q],main:[$F],header:[$I]},$$scope:{ctx:t}}})).$on("measure",t[166]),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let r={};1024&n[1]&&(r.hasHeader=t[41]),2080374769&n[0]|134216703&n[1]|67108864&n[6]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function $0(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,y,x,b,v,w,S,k,C,M,T,P,R,A,E,I,L,F,B,D,O,z,_,W,j,H,V,U,G,X,Z,Y,q,K,J,Q,tt,te,ti,tn,tr,to,ta,tl,ts,tc,td,tu,th,tp,tg,tm,t$,ty,tx,tb,tv,tw,tS;let tk,tC=oF,tM=()=>(tC(),tC=oj(tN,t=>n(35,tk=t)),tN),tT,tP=oF,tR=()=>(tP(),tP=oj(tU,t=>n(145,tT=t)),tU),tA,tE=oF,tI=()=>(tE(),tE=oj(e$,t=>n(37,tA=t)),e$),tL,tF=oF,tD=()=>(tF(),tF=oj(tj,t=>n(151,tL=t)),tj),tO,tz=oF,t_=()=>(tz(),tz=oj(tW,t=>n(56,tO=t)),tW);t.$$.on_destroy.push(()=>tC()),t.$$.on_destroy.push(()=>tP()),t.$$.on_destroy.push(()=>tE()),t.$$.on_destroy.push(()=>tF()),t.$$.on_destroy.push(()=>tz());let{isActive:tN}=e;tM();let{isActiveFraction:tW}=e;t_();let{isVisible:tj}=e;tD();let{stores:tH}=e,{locale:tV={}}=e,{shapes:tU}=e;tR();let{toolbar:tG=[]}=e,{toolShapes:tX={}}=e,{toolActive:tZ}=e,{toolSelectRadius:tY}=e,{toolRetainStyles:tq=!1}=e,{toolbarLayout:tJ="stack"}=e,{textInputMode:tQ}=e,{shapeControls:t1={}}=e,{enableButtonFlipVertical:t0=!1}=e,{enablePresetSelectImage:t2=!0}=e,{enablePresetDropImage:t4=!0}=e,{enableSelectToolToAddShape:t5=!1}=e,{enableAutoSelectMoveTool:t6=["line","arrow","path","rectangle","ellipse","text"]}=e,{enableTapToAddText:t7=!1}=e,{enableMoveTool:t9=!1}=e,{enableViewTool:et=!1}=e,{enableToolShareStyles:ee=!0}=e,{enableMultiSelect:ei=!1}=e,{gridSize:en=0}=e,{snapThreshold:er=0}=e,{enableSnapToContext:eo=!0}=e,{willRenderHeaderTools:ea=tf}=e,{willRenderPresetToolbar:el}=e,{willRenderShapeStyleControls:es}=e,{willStartInteraction:ec}=e,{shapePresets:ed=[]}=e,{utilKey:eu}=e,{mapScreenPointToImagePoint:eh}=e,{mapImagePointToScreenPoint:ep}=e,{imageRotation:eg=0}=e,{imageFlipX:em=!1}=e,{imageFlipY:ef=!1}=e,{parentRect:e$}=e;tI();let{hooks:ey={}}=e,ex=av("selection");oV(t,ex,t=>n(150,ts=t));let eb=av("isAnimated");oV(t,eb,t=>n(142,Y=t));let ev=av("elasticityMultiplier");oV(t,ev,t=>n(146,J=t));let ew=av("ui");oV(t,ew,t=>n(176,tc=t));let eS=av("keysPressed");oV(t,eS,t=>n(149,tl=t));let{env:ek,history:eC,rootRect:eM,rootColorSecondary:eT,enablePanInput:eP,enablePanInputStatus:eR,enableZoomInput:eA,stageRect:eE,utilRectPadded:eI,scrollElasticity:eL,imageOverlayMarkup:eB,imagePreviewModifiers:eD,imageCropRect:eO,shapePreprocessor:ez,stageScalar:e_,imageSelectionRect:eN,imageTransformsInterpolated:eW,imageSelectionPan:ej,imageSize:eH,allowPan:eV,allowZoom:eU,allowZoomControls:eG,allowPlayPause:eX}=tH;oV(t,ek,t=>n(143,q=t)),oV(t,eM,t=>n(55,th=t)),oV(t,eT,t=>n(57,tp=t)),oV(t,eR,t=>n(38,to=t)),oV(t,eE,t=>n(147,Q=t)),oV(t,eI,t=>n(39,td=t)),oV(t,eD,t=>n(177,tu=t)),oV(t,eO,t=>n(175,tr=t)),oV(t,e_,t=>n(173,ti=t)),oV(t,eN,t=>n(174,tn=t)),oV(t,eW,t=>n(36,tt=t)),oV(t,ej,t=>n(172,te=t)),oV(t,eH,t=>n(148,ta=t));let eZ=(t,e)=>{let{willRenderPresetToolbar:n,shapePresets:r,enableViewTool:a,enableMoveTool:l}=e,s=0!==r.length||n?t:t.filter(t=>"preset"!==t[0]);return o&&(s=[["move",t=>t.shapeLabelToolMove,{icon:t=>t.shapeIconToolMove}],["view",t=>t.shapeLabelToolView,{icon:t=>t.shapeIconToolView}],...s]),s=l?s:s.filter(t=>"move"!==t[0]),a?s:s.filter(t=>"view"!==t[0])},eq=0,eK={},eJ=t=>{let e,n;let[r,o]=tg[t],a="relative"===o.position,l=a?"0%":0,s=a?"0%":0;rt(r)||n8(r)?(n=a?"20%":.2*tA.width,(e=n1(r)).x=l,e.y=s,ot(e,{width:n,height:n},tA)):re(r)?(n=a?"10%":.1*tA.width,(e=n1(r)).x=l,e.y=s,ot(e,{rx:n,ry:n},tA)):ri(r)&&(n=a?"10%":.1*tA.width,(e=n1(r)).x1=l,e.y1=s,e.x2=l,e.y2=s),e&&Promise.resolve().then(()=>{ic(il(e,void 0,n))})},eQ=t=>eh(fz(t,th)),e1={},e0=()=>{oJ(eD,tu[eu]={maskMarkupOpacity:.85},tu)},e2=()=>{delete tu[eu]},e4=t=>{if(!tm)return;let e=tm.getShapeDraft(ex);e&&(t&&(t$=e.drawMode),tm.updateShapeDraft({drawMode:t?"subtract":t$},ex))},e5=t=>{if(!(rn(t)&&ni(t,"pathClose")))return;let e=[...t.strokeColor];e[3]=1,tm.updateMarkupShape(t,{pathClose:!1,strokeColor:e},!1),tm.removeMarkupShapeProps(t,["backgroundColor"],!1),tm.confirmMarkupItemDraft(),tm.selectShape(t),W("addshape",t),eC.write()},e3=()=>{tm&&"move"!==tZ&&tm.blurShapes()},e6=()=>tc[eu]?tc[eu][tZ]:{},e8=()=>{n(115,e1={})},e7=(t,e,n)=>{let r=tc[t],o=r?r[e]:{};ew.set({...tc,[t]:{...r,[e]:{...o,...n}}})},e9=t=>{ew.set({[t]:{}})},it=(t,e)=>{let n={};return Object.entries(t).forEach(t=>{let[r,o]=t;ni(e,r)&&(n[r]=o)}),n},ie=(t,e)=>nt(t)?t:t.endsWith("%")?parseFloat(t)/100*e.width:void 0,ii=t=>{eB.update(e=>[...e.filter(t=>t.id!=="cursor-".concat(eu)),...t])},ir=()=>{eB.update(t=>t.filter(t=>t.id!=="cursor-".concat(eu)))},io=(t,e,n)=>{let r,{cursorStyle:o,cursorSize:a}=t,l=e[a];if(void 0===l?r=ie(a,n):nt(l)?r=l:N(l)&&(r=r0(a,e[a],n),"strokeWidth"===a&&(r*=.5)),!(r<=0)&&void 0!==r)return{size:r,style:o}},ia=(t,e,n,r,o,a)=>{if(r)return o?"grabbing":"grab";if(t&&!e)return"none";if(!e)return"move"===a?"default":"crosshair";let l=e||n;return rl(l)?rs(l)?"modal"===tQ?"default":"text":rL(l)&&(!v||b.every(rL))?"move":"default":"default"},il=(t,e,n)=>{let r=!1;e||(r=!0,e=_?eh(eF(Q)):eF(tr)),e.x-=tA.x||0,e.y-=tA.y||0,(em||ef)&&(t.flipX=em,t.flipY=ef);let o=tm.getShapesNearPosition(tT,e);if(r&&o.length){let t=.1*Math.min(tr.width,tr.height);e.x+=Math.round(-t+Math.random()*t*2),e.y+=Math.round(-t+Math.random()*t*2)}if(0!==eg&&(em&&ef?t.rotation=-eg:em?t.rotation=eg:ef?t.rotation=eg:t.rotation=-eg),ni(t,"width")&&ni(t,"height")){let{width:n,height:r}=r9(t,["width","height"],tA);ot(t,{x:e.x-.5*n,y:e.y-.5*r},tA)}else if(re(t))ot(t,{x:e.x,y:e.y},tA);else if(ri(t)){let{x1:r,y1:o,x2:a,y2:l}=r9(t,["x1","y1","x2","y2"],tA),s=t3(tB(r,o),tB(a,l)),c=N(n)?rJ(n,tA.width):s;ot(t,{x1:e.x-c,y1:e.y+c,x2:e.x+c,y2:e.y-c},tA)}else if(rn(t)){let{points:n}=r9(t,["points"],tA),r=t8(n);ot(t,{points:n.map(t=>({x:t.x+e.x-r.x,y:t.y+e.y-r.y}))},tA)}return t},is=(t,e)=>{let n=il(n5(t,tr),e);return t.shape&&(ni(t.shape,"x")&&(n.x=t.shape.x),ni(t.shape,"y")&&(n.y=t.shape.y)),ic(n)},ic=t=>{let{beforeAddShape:e=()=>!0}=ey;if(e(t))return tm.addShape(t),tm.selectShape(t),W("addshape",t),eC.write(),t},id=!1,iu=(t,e)=>t.forEach(t=>is(t,e)),ih=()=>{eC.write()},ip=av("redrawTrigger");oV(t,ip,t=>n(144,K=t));let ig=t=>{tT&&tU.update(e=>e.map(e=>(e._prerender=!!t&&rs(e),e)))},im=[],i$=cy(Y?20:0);return oV(t,i$,t=>n(141,Z=t)),t.$$set=t=>{"isActive"in t&&tM(n(1,tN=t.isActive)),"isActiveFraction"in t&&t_(n(2,tW=t.isActiveFraction)),"isVisible"in t&&tD(n(3,tj=t.isVisible)),"stores"in t&&n(100,tH=t.stores),"locale"in t&&n(4,tV=t.locale),"shapes"in t&&tR(n(5,tU=t.shapes)),"toolbar"in t&&n(101,tG=t.toolbar),"toolShapes"in t&&n(102,tX=t.toolShapes),"toolActive"in t&&n(0,tZ=t.toolActive),"toolSelectRadius"in t&&n(6,tY=t.toolSelectRadius),"toolRetainStyles"in t&&n(103,tq=t.toolRetainStyles),"toolbarLayout"in t&&n(7,tJ=t.toolbarLayout),"textInputMode"in t&&n(8,tQ=t.textInputMode),"shapeControls"in t&&n(9,t1=t.shapeControls),"enableButtonFlipVertical"in t&&n(10,t0=t.enableButtonFlipVertical),"enablePresetSelectImage"in t&&n(11,t2=t.enablePresetSelectImage),"enablePresetDropImage"in t&&n(12,t4=t.enablePresetDropImage),"enableSelectToolToAddShape"in t&&n(104,t5=t.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in t&&n(105,t6=t.enableAutoSelectMoveTool),"enableTapToAddText"in t&&n(13,t7=t.enableTapToAddText),"enableMoveTool"in t&&n(106,t9=t.enableMoveTool),"enableViewTool"in t&&n(107,et=t.enableViewTool),"enableToolShareStyles"in t&&n(108,ee=t.enableToolShareStyles),"enableMultiSelect"in t&&n(14,ei=t.enableMultiSelect),"gridSize"in t&&n(15,en=t.gridSize),"snapThreshold"in t&&n(16,er=t.snapThreshold),"enableSnapToContext"in t&&n(17,eo=t.enableSnapToContext),"willRenderHeaderTools"in t&&n(109,ea=t.willRenderHeaderTools),"willRenderPresetToolbar"in t&&n(110,el=t.willRenderPresetToolbar),"willRenderShapeStyleControls"in t&&n(18,es=t.willRenderShapeStyleControls),"willStartInteraction"in t&&n(111,ec=t.willStartInteraction),"shapePresets"in t&&n(19,ed=t.shapePresets),"utilKey"in t&&n(20,eu=t.utilKey),"mapScreenPointToImagePoint"in t&&n(21,eh=t.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in t&&n(22,ep=t.mapImagePointToScreenPoint),"imageRotation"in t&&n(23,eg=t.imageRotation),"imageFlipX"in t&&n(24,em=t.imageFlipX),"imageFlipY"in t&&n(25,ef=t.imageFlipY),"parentRect"in t&&tI(n(26,e$=t.parentRect)),"hooks"in t&&n(112,ey=t.hooks)},t.$$.update=()=>{if(33554432&t.$$.dirty[4]&&n(124,r=tl.includes(18)),1049088&t.$$.dirty[3]&&(!tg||tX!==tg)&&n(113,tg=tX),16&t.$$.dirty[1]&&eV.set(tk),16&t.$$.dirty[1]&&eU.set(tk),16&t.$$.dirty[1]&&eG.set(tk),256&t.$$.dirty[3]&&n(33,o=Array.isArray(tG)&&tG.length>1&&Array.isArray(tG[0][1])),4&t.$$.dirty[1]|256&t.$$.dirty[3]&&n(54,a=o?tG.map((t,e)=>[e,t[0]]):[]),134217728&t.$$.dirty[0]|4&t.$$.dirty[1]|256&t.$$.dirty[3]&&n(140,l=o?tG[eq][1]:tG),524288&t.$$.dirty[0]|155648&t.$$.dirty[3]|65536&t.$$.dirty[4]&&n(32,s=eZ(l,{willRenderPresetToolbar:el,shapePresets:ed,enableMoveTool:t9,enableViewTool:et})),2&t.$$.dirty[1]&&n(138,u=!!s.length),1&t.$$.dirty[0]|2&t.$$.dirty[1]|16384&t.$$.dirty[4]&&u&&void 0===tZ&&n(0,tZ=s[0][0]),134217729&t.$$.dirty[0]|4&t.$$.dirty[1]|2097152&t.$$.dirty[3]|65536&t.$$.dirty[4]&&o&&n(114,eK={...eK,[eq]:l.map(t=>{let[e]=t;return e}).includes(tZ)?tZ:eK[eq]||l[0][0]}),512&t.$$.dirty[0]&&n(137,c=!!Object.keys(t1).length),2&t.$$.dirty[1]&&n(34,d=s.length>1),12&t.$$.dirty[1]&&n(53,h=d||o),1&t.$$.dirty[0]&&n(139,p=void 0!==tZ),57344&t.$$.dirty[4]&&n(52,g=(!p||u)&&c),536870912&t.$$.dirty[0]&&n(31,W=tb&&$A(tb)),1&t.$$.dirty[0]|17&t.$$.dirty[1]&&tk&&W&&W("selectcontrol",tZ),16&t.$$.dirty[1]&&(tk?e0():e2()),1&t.$$.dirty[0]|1048576&t.$$.dirty[3]&&n(136,m=tZ&&tg[tZ]?tg[tZ][1]:void 0),4096&t.$$.dirty[4]&&n(125,f=m&&m.isSelection?"selection":"shapes"),3&t.$$.dirty[4]&&e4("selection"===f&&r),268435457&t.$$.dirty[0]&&tZ&&tm){let t=tm.getMarkupItemDraft();t&&e5(t)}if(1&t.$$.dirty[0]&&tZ&&e3(),16&t.$$.dirty[1]|134217728&t.$$.dirty[4]&&n(51,$=tL&&tk),256&t.$$.dirty[1]|8388608&t.$$.dirty[4]&&n(50,y=td&&tB(Q.x-td.x,Q.y-td.y)),512&t.$$.dirty[0]&&n(135,x=Object.keys(t1)),16384&t.$$.dirty[0]|16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(122,b=ei?tk&&tT.filter(rl):[]),536870912&t.$$.dirty[3]&&n(123,v=b.length>1),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(119,w=tk&&tT.filter(rl)[0]),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(130,S=tk&&tT.find(t=>rs(t))),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(133,k=tk&&tT.find(t=>rc(t))),1&t.$$.dirty[0]|16&t.$$.dirty[1]|1048576&t.$$.dirty[3]&&n(127,C=tk&&tg[tZ]?rq(n1({...tg[tZ][0],...e6()})):{}),1048576&t.$$.dirty[3]&&tg&&e8(),1&t.$$.dirty[0]|4227072&t.$$.dirty[3]|2056&t.$$.dirty[4]&&n(126,M=C&&Object.keys(C).reduce((t,e)=>{let n="disableStyle"===e,r="settings"===e,o=!!x.find(t=>t.split("_").includes(e));if(!n&&!r&&!o||void 0===C[e]||!0===C.disableStyle||C.disableStyle&&C.disableStyle.includes(e))return t;if("strokeWidth"===e&&Object.keys(e1).includes("strokeWidth")&&void 0===e1[e]&&ni(C,"points"))return t[e]=C[e],t;let{share:a=!0}=C.settings&&C.settings[e]||{},l=ee&&a?e1:e1[tZ]||{};return t[e]=ni(l,e)?l[e]:C[e],t},{})),1048577&t.$$.dirty[0]|1024&t.$$.dirty[3]|4&t.$$.dirty[4]&&(tq?e7(eu,tZ,M):e9(eu)),16&t.$$.dirty[1]|67108864&t.$$.dirty[3]|67108868&t.$$.dirty[4]&&n(134,T=ts&&tk?w||M:void 0),1610612736&t.$$.dirty[3]|1536&t.$$.dirty[4]&&n(49,P=v?function(t){let e={};return t.forEach(t=>{Object.entries(t).filter(t=>{let[e]=t;return!e.startsWith("_")}).forEach(t=>{let[n,r]=t;if(ni(e,n)){"disableStyle"===n&&e[n].push(...r);return}e[n]=r})}),e}(b):T||k),1&t.$$.dirty[0]|8&t.$$.dirty[4]&&n(48,R=ni(C,"eraseRadius")||ni(C,"points")&&!ni(C,"pathClose")||"move"===tZ||"view"===tZ),64&t.$$.dirty[1]|8&t.$$.dirty[4]&&n(47,A=C&&void 0!==C.eraseRadius?ie(C.eraseRadius,tA):void 0),16&t.$$.dirty[1]|33554432&t.$$.dirty[4]&&n(131,E=tk&&tl.includes(32)),1&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(132,I=tk&&"view"===tZ),384&t.$$.dirty[4]&&n(129,L=I||E),96&t.$$.dirty[4]&&n(128,F=!!L&&(!!S||d5(document.activeElement))),16&t.$$.dirty[1]|48&t.$$.dirty[4]&&eP.set(!tk||L&&!F),16&t.$$.dirty[1]|16&t.$$.dirty[4]&&eA.set(!tk||!F),64&t.$$.dirty[1]|12&t.$$.dirty[4]&&n(120,B=C.cursorStyle?io(C,{...C,...M},tA):void 0),33554432&t.$$.dirty[3]|16777216&t.$$.dirty[4]&&n(121,D=tS&&tK(tS,ta)),1048576&t.$$.dirty[0]|160&t.$$.dirty[1]|427819008&t.$$.dirty[3]|3&t.$$.dirty[4]){if(D&&!tv&&B&&!to){let t=B.size*tt.scale,e={id:"cursor-".concat(eu),x:tw.x,y:tw.y,strokeWidth:.5,strokeColor:[0,0,0]};"ellipse"===B.style&&(e.rx=t,e.ry=t);let n={strokeWidth:2.5,strokeColor:[1,1,1],opacity:.75},o=[{...e,...n},e];if("selection"===f&&r){let e=tw.x+t,r=tw.y+t+4,a={id:"cursor-".concat(eu),strokeWidth:.75,strokeColor:[0,0,0],points:[{x:e,y:r},{x:e+4,y:r}]};o.push({...a,...n,strokeWidth:2,points:[{x:e-.5,y:r},{x:e+4.5,y:r}]},a)}ii(o)}else ir()}1&t.$$.dirty[0]|128&t.$$.dirty[1]|478150656&t.$$.dirty[3]&&n(46,O=D?ia(B,tv,w,to,!1,tZ):"default"),526337&t.$$.dirty[0]|131072&t.$$.dirty[3]&&n(45,z="preset"===tZ&&(ed.length>0||t2||el)),64&t.$$.dirty[1]&&(_=!ni(tA,"x")&&!ni(tA,"y")),4194304&t.$$.dirty[4]&&n(44,j=J*eL),131072&t.$$.dirty[3]|1572864&t.$$.dirty[4]&&n(43,H=K&&el?t=>p_(()=>el(t,is,{...q},()=>ip.set({}))):tf),524288&t.$$.dirty[3]&&n(42,V=Object.keys(ey).reduce((t,e)=>("beforeAddShape"===e||void 0===ey[e]||(t[e]=ey[e]),t),{})),16&t.$$.dirty[1]&&ig(tk),65536&t.$$.dirty[3]|1572864&t.$$.dirty[4]&&n(30,U=K&&ea([],q,()=>ip.set({}))),1073742336&t.$$.dirty[0]&&n(41,G=!!U.length||!!Object.keys(t1).some(t=>im.includes(t))),16&t.$$.dirty[1]|262144&t.$$.dirty[4]&&Y&&i$.set(tk?0:20),131072&t.$$.dirty[4]&&n(40,X=Z?"transform: translateY(".concat(Z,"px)"):void 0)},eX.set(!1),[tZ,tN,tW,tj,tV,tU,tY,tJ,tQ,t1,t0,t2,t4,t7,ei,en,er,eo,es,ed,eu,eh,ep,eg,em,ef,e$,eq,tm,tb,U,W,s,o,d,tk,tt,tA,to,td,X,G,V,H,j,z,O,A,R,P,y,$,g,h,a,th,tO,tp,ex,eb,ev,ew,eS,ek,eM,eT,eR,eE,eI,eB,eD,eO,e_,eN,eW,ej,eH,(t,e)=>{let{index:r}=t;n(27,eq=r),n(0,tZ=eK[r])},(t,e)=>{let{value:r}=t;n(0,tZ=r),(t5||/enter/i.test(e.key))&&eJ(r)},t=>{if("eraser"===tZ)ty=tm.eraseShape();else if(tZ&&tg[tZ]){let[t,e={}]=tg[tZ],{drawMode:n}=T;"selection"===f&&"new"===n&&ex.set([]);let o={};"selection"===f&&(W("selectiondown",[...ts]),r&&(t$=t.drawMode,o.drawMode="subtract")),ty=tm.createShape({...t,...M,...o},e)}else ty=void 0;return!!ty&&(ty.start(t),!0)},t=>!!ty&&(ty.update(t),!0),t=>!!ty&&(ty.release(t),!0),t=>!!ty&&(ty.cancel(t),ty=void 0,!0),t=>{if(!ty)return!1;if(ty.end(t),ty=void 0,"selection"===f){if(t.detail.isTap){let[t]=tg[tZ];t.bitmap||ex.set([])}W("selectionup",[...ts])}let e=tm.getMarkupItemDraft(),r=t9&&(!0===t6||Array.isArray(t6)&&t6.includes(tZ));return(!e||e.isEditing)&&r&&n(0,tZ="move"),!0},t=>{let{key:e}=t,n=tm.getMarkupItemDraft();/escape/i.test(e)&&n&&(t.preventDefault(),t.stopPropagation(),tm.discardMarkupItemDraft(),ty=void 0),/enter/i.test(e)&&n&&(t.preventDefault(),t.stopPropagation(),e5(n),ty=void 0)},function(t){Object.keys(t).forEach(e=>{let{retain:r=!0,share:o=!0}=C.settings&&C.settings[e]||{};if(r){if(ee&&o){n(115,e1[e]=t[e],e1);return}e1[tZ]||n(115,e1[tZ]={},e1),n(115,e1[tZ][e]=t[e],e1)}}),W("selectstyle",t),w&&(v?b.forEach(e=>{tm.updateMarkupShape(e,it(t,e))}):tm.updateMarkupShape(w,t),clearTimeout(tx),tx=setTimeout(()=>{ih()},200))},(t,e,r)=>{n(117,tw=e),n(118,tS=r)},()=>{n(118,tS=void 0),n(117,tw=void 0)},t=>{W("markuptap",t)},t=>n(116,tv=t),()=>{id=!1},(t,e)=>{if(id)return;let{beforeAddShape:n=()=>!0}=ey,r=eQ(e),o=tm.getMarkupItemDraft(),a=eY(tr,{x:r.x+(tA.x||0),y:r.y+(tA.y||0)});if(o&&!a&&tm.discardMarkupItemDraft(),a){if(!o){let o=il(n5(t,tr),r);if(!n(o)){id=!0,e.preventDefault();return}rx(o),tm.addShape(o);return}rt(o)&&(r.x-=.5*o.width,r.y-=.5*o.height),t.shape&&(ni(t.shape,"x")&&(r.x=t.shape.x),ni(t.shape,"y")&&(r.y=t.shape.y)),tm.updateMarkupShape(o,r)}},(t,e)=>{if(id)return;let n=eQ(e);if(!eY(tr,{x:n.x+(tA.x||0),y:n.y+(tA.y||0)})){tm.discardMarkupItemDraft();return}let r=tm.confirmMarkupItemDraft();tm.selectShape(r),W("addshape",r),eC.write()},t=>is(t),t=>iu(t.detail.resources,eQ(t.detail.event)),t=>{if(!ec)return!0;let e=rectClone(tn);return rectScale(e,1/ti),rectTranslate(e,te),rectScale(e,tt.scale),ec(t,{...e,x:e.x+Q.x,y:e.y+Q.y})},ih,ip,im,i$,tH,tG,tX,tq,t5,t6,t9,et,ee,ea,el,ec,ey,tg,eK,e1,tv,tw,tS,w,B,D,b,v,r,f,M,C,F,L,S,E,I,k,T,x,m,c,u,p,l,Z,Y,q,K,tT,J,Q,ta,tl,ts,tL,function(e){aw.call(this,t,e)},t=>t[0]===tZ,(t,e,n)=>{let r=t.filter(t=>{let[,e]=t;return!im.includes(e)});return es?es(r,e,n):r},t=>t[0]===eq,t=>{Promise.resolve().then(()=>{W("addshape",t),ih()})},t=>{W("selectshape",t)},t=>{Promise.resolve().then(()=>{W("blurshape",t)})},t=>{W("tapshape",t)},t=>{W("updateshape",t),ih()},t=>{W("removeshape",t),ih()},()=>{ih()},function(t){ak[t?"unshift":"push"](()=>{n(28,tm=t)})},function(t){ak[t?"unshift":"push"](()=>{n(29,tb=t)})},t=>t.filter(t=>{let[,e]=t;return im.includes(e)}),function(e){aw.call(this,t,e)}]}class $2 extends a1{get isActive(){return this.$$.ctx[1]}set isActive(t){this.$$set({isActive:t}),aF()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),aF()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$$set({isVisible:t}),aF()}get stores(){return this.$$.ctx[100]}set stores(t){this.$$set({stores:t}),aF()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),aF()}get shapes(){return this.$$.ctx[5]}set shapes(t){this.$$set({shapes:t}),aF()}get toolbar(){return this.$$.ctx[101]}set toolbar(t){this.$$set({toolbar:t}),aF()}get toolShapes(){return this.$$.ctx[102]}set toolShapes(t){this.$$set({toolShapes:t}),aF()}get toolActive(){return this.$$.ctx[0]}set toolActive(t){this.$$set({toolActive:t}),aF()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(t){this.$$set({toolSelectRadius:t}),aF()}get toolRetainStyles(){return this.$$.ctx[103]}set toolRetainStyles(t){this.$$set({toolRetainStyles:t}),aF()}get toolbarLayout(){return this.$$.ctx[7]}set toolbarLayout(t){this.$$set({toolbarLayout:t}),aF()}get textInputMode(){return this.$$.ctx[8]}set textInputMode(t){this.$$set({textInputMode:t}),aF()}get shapeControls(){return this.$$.ctx[9]}set shapeControls(t){this.$$set({shapeControls:t}),aF()}get enableButtonFlipVertical(){return this.$$.ctx[10]}set enableButtonFlipVertical(t){this.$$set({enableButtonFlipVertical:t}),aF()}get enablePresetSelectImage(){return this.$$.ctx[11]}set enablePresetSelectImage(t){this.$$set({enablePresetSelectImage:t}),aF()}get enablePresetDropImage(){return this.$$.ctx[12]}set enablePresetDropImage(t){this.$$set({enablePresetDropImage:t}),aF()}get enableSelectToolToAddShape(){return this.$$.ctx[104]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),aF()}get enableAutoSelectMoveTool(){return this.$$.ctx[105]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),aF()}get enableTapToAddText(){return this.$$.ctx[13]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),aF()}get enableMoveTool(){return this.$$.ctx[106]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),aF()}get enableViewTool(){return this.$$.ctx[107]}set enableViewTool(t){this.$$set({enableViewTool:t}),aF()}get enableToolShareStyles(){return this.$$.ctx[108]}set enableToolShareStyles(t){this.$$set({enableToolShareStyles:t}),aF()}get enableMultiSelect(){return this.$$.ctx[14]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),aF()}get gridSize(){return this.$$.ctx[15]}set gridSize(t){this.$$set({gridSize:t}),aF()}get snapThreshold(){return this.$$.ctx[16]}set snapThreshold(t){this.$$set({snapThreshold:t}),aF()}get enableSnapToContext(){return this.$$.ctx[17]}set enableSnapToContext(t){this.$$set({enableSnapToContext:t}),aF()}get willRenderHeaderTools(){return this.$$.ctx[109]}set willRenderHeaderTools(t){this.$$set({willRenderHeaderTools:t}),aF()}get willRenderPresetToolbar(){return this.$$.ctx[110]}set willRenderPresetToolbar(t){this.$$set({willRenderPresetToolbar:t}),aF()}get willRenderShapeStyleControls(){return this.$$.ctx[18]}set willRenderShapeStyleControls(t){this.$$set({willRenderShapeStyleControls:t}),aF()}get willStartInteraction(){return this.$$.ctx[111]}set willStartInteraction(t){this.$$set({willStartInteraction:t}),aF()}get shapePresets(){return this.$$.ctx[19]}set shapePresets(t){this.$$set({shapePresets:t}),aF()}get utilKey(){return this.$$.ctx[20]}set utilKey(t){this.$$set({utilKey:t}),aF()}get mapScreenPointToImagePoint(){return this.$$.ctx[21]}set mapScreenPointToImagePoint(t){this.$$set({mapScreenPointToImagePoint:t}),aF()}get mapImagePointToScreenPoint(){return this.$$.ctx[22]}set mapImagePointToScreenPoint(t){this.$$set({mapImagePointToScreenPoint:t}),aF()}get imageRotation(){return this.$$.ctx[23]}set imageRotation(t){this.$$set({imageRotation:t}),aF()}get imageFlipX(){return this.$$.ctx[24]}set imageFlipX(t){this.$$set({imageFlipX:t}),aF()}get imageFlipY(){return this.$$.ctx[25]}set imageFlipY(t){this.$$set({imageFlipY:t}),aF()}get parentRect(){return this.$$.ctx[26]}set parentRect(t){this.$$set({parentRect:t}),aF()}get hooks(){return this.$$.ctx[112]}set hooks(t){this.$$set({hooks:t}),aF()}constructor(t){super(),aQ(this,t,$0,$1,oW,{isActive:1,isActiveFraction:2,isVisible:3,stores:100,locale:4,shapes:5,toolbar:101,toolShapes:102,toolActive:0,toolSelectRadius:6,toolRetainStyles:103,toolbarLayout:7,textInputMode:8,shapeControls:9,enableButtonFlipVertical:10,enablePresetSelectImage:11,enablePresetDropImage:12,enableSelectToolToAddShape:104,enableAutoSelectMoveTool:105,enableTapToAddText:13,enableMoveTool:106,enableViewTool:107,enableToolShareStyles:108,enableMultiSelect:14,gridSize:15,snapThreshold:16,enableSnapToContext:17,willRenderHeaderTools:109,willRenderPresetToolbar:110,willRenderShapeStyleControls:18,willStartInteraction:111,shapePresets:19,utilKey:20,mapScreenPointToImagePoint:21,mapImagePointToScreenPoint:22,imageRotation:23,imageFlipX:24,imageFlipY:25,parentRect:26,hooks:112},null,[-1,-1,-1,-1,-1,-1,-1])}}var $4=(t,e,n,r,o,a,l,s,c)=>{let d=tN(t),u=.5*n.width,h=.5*n.height,p=.5*e.width,g=.5*e.height,m=o.x+r.x,f=o.y+r.y;s&&(d.x=n.width-d.x),c&&(d.y=n.height-d.y);let $=Math.cos(a),y=Math.sin(a);d.x-=u,d.y-=h;let x=d.x*$-d.y*y,b=d.x*y+d.y*$;d.x=u+x,d.y=h+b,d.x*=l,d.y*=l,d.x+=p,d.y+=g,d.x+=m,d.y+=f,d.x-=u*l,d.y-=h*l;let v=(o.x-m)*l,w=(o.y-f)*l;return d.x+=v*$-w*y,d.y+=v*y+w*$,d},$5=(t,e,n,r,o,a,l,s,c)=>{let d=tN(t),u=ed(n),h=ed(e),p=tB(o.x+r.x,o.y+r.y),g=Math.cos(a),m=Math.sin(a);d.x-=h.x,d.y-=h.y;let f=(o.x-p.x)*l,$=(o.y-p.y)*l;d.x-=f*g-$*m,d.y-=f*m+$*g,d.x-=p.x,d.y-=p.y,d.x/=l,d.y/=l;let y=d.x*g+d.y*m,x=d.x*m-d.y*g;return d.x=y,d.y=-x,d.x+=u.x,d.y+=u.y,s&&(d.x=n.width-d.x),c&&(d.y=n.height-d.y),d},$3=t=>"boolean"==typeof t;function $6(t){let e,n,r;function o(e){t[60](e)}let a={utilKey:t[1],stores:t[5],locale:t[6],isActive:t[2],isActiveFraction:t[3],isVisible:t[4],mapScreenPointToImagePoint:t[46],mapImagePointToScreenPoint:t[45],imageRotation:t[47],imageFlipX:t[44],imageFlipY:t[43],shapes:t[49],toolbar:t[21]||t[7],toolShapes:t[22]||t[8],toolRetainStyles:t[9],enableSelectToolToAddShape:t[31],enableTapToAddText:t[32],enableViewTool:t[30],enableMoveTool:t[34],enableAutoSelectMoveTool:t[33],enableMultiSelect:t[35],snapThreshold:t[16],gridSize:nt(t[18])?t[18]:t[15],enableSnapToContext:$3(t[19])?t[19]:t[17],enableToolShareStyles:t[13],shapeControls:t[23]||t[10],shapePresets:t[27],enableButtonFlipVertical:t[24],parentRect:t[50],enablePresetDropImage:t[26],enablePresetSelectImage:t[25],toolSelectRadius:t[11],textInputMode:t[12],willStartInteraction:t[14],willRenderPresetToolbar:t[28]||t[20],willRenderShapeStyleControls:t[29],hooks:{willRenderShapeControls:t[36],willRenderShapeTextControls:t[37],beforeAddShape:t[38],beforeRemoveShape:t[39],beforeDeselectShape:t[40],beforeSelectShape:t[41],beforeUpdateShape:t[42]}};return void 0!==t[0]&&(a.toolActive=t[0]),e=new $2({props:a}),ak.push(()=>aY(e,"toolActive",o)),e.$on("measure",t[61]),{c(){aq(e.$$.fragment)},m(t,n){aK(e,t,n),r=!0},p(t,r){let o={};32&r[0]&&(o.stores=t[5]),64&r[0]&&(o.locale=t[6]),4&r[0]&&(o.isActive=t[2]),8&r[0]&&(o.isActiveFraction=t[3]),16&r[0]&&(o.isVisible=t[4]),32768&r[1]&&(o.mapScreenPointToImagePoint=t[46]),16384&r[1]&&(o.mapImagePointToScreenPoint=t[45]),65536&r[1]&&(o.imageRotation=t[47]),8192&r[1]&&(o.imageFlipX=t[44]),4096&r[1]&&(o.imageFlipY=t[43]),2097280&r[0]&&(o.toolbar=t[21]||t[7]),4194560&r[0]&&(o.toolShapes=t[22]||t[8]),512&r[0]&&(o.toolRetainStyles=t[9]),1&r[1]&&(o.enableSelectToolToAddShape=t[31]),2&r[1]&&(o.enableTapToAddText=t[32]),1073741824&r[0]&&(o.enableViewTool=t[30]),8&r[1]&&(o.enableMoveTool=t[34]),4&r[1]&&(o.enableAutoSelectMoveTool=t[33]),16&r[1]&&(o.enableMultiSelect=t[35]),65536&r[0]&&(o.snapThreshold=t[16]),294912&r[0]&&(o.gridSize=nt(t[18])?t[18]:t[15]),655360&r[0]&&(o.enableSnapToContext=$3(t[19])?t[19]:t[17]),8192&r[0]&&(o.enableToolShareStyles=t[13]),8389632&r[0]&&(o.shapeControls=t[23]||t[10]),134217728&r[0]&&(o.shapePresets=t[27]),16777216&r[0]&&(o.enableButtonFlipVertical=t[24]),67108864&r[0]&&(o.enablePresetDropImage=t[26]),33554432&r[0]&&(o.enablePresetSelectImage=t[25]),2048&r[0]&&(o.toolSelectRadius=t[11]),4096&r[0]&&(o.textInputMode=t[12]),16384&r[0]&&(o.willStartInteraction=t[14]),269484032&r[0]&&(o.willRenderPresetToolbar=t[28]||t[20]),536870912&r[0]&&(o.willRenderShapeStyleControls=t[29]),4064&r[1]&&(o.hooks={willRenderShapeControls:t[36],willRenderShapeTextControls:t[37],beforeAddShape:t[38],beforeRemoveShape:t[39],beforeDeselectShape:t[40],beforeSelectShape:t[41],beforeUpdateShape:t[42]}),!n&&1&r[0]&&(n=!0,o.toolActive=t[0],aE(()=>n=!1)),e.$set(o)},i(t){r||(a_(e.$$.fragment,t),r=!0)},o(t){aN(e.$$.fragment,t),r=!1},d(t){aJ(e,t)}}}function $8(t,e,n){let r,o,a,l,s,c,d,u,h;let{isActive:p}=e,{isActiveFraction:g}=e,{isVisible:m}=e,{stores:f}=e,{locale:$={}}=e,{markupEditorToolbar:y}=e,{markupEditorToolStyles:x}=e,{markupEditorToolRetainStyles:b}=e,{markupEditorShapeStyleControls:v}=e,{markupEditorToolSelectRadius:w}=e,{markupEditorTextInputMode:S}=e,{markupEditorToolShareStyles:k}=e,{markupEditorWillStartInteraction:C}=e,{markupEditorGridSize:M=0}=e,{markupEditorSnapThreshold:T=0}=e,{markupEditorSnapToContext:P=!1}=e,{annotateGridSize:R}=e,{annotateSnapToContext:A}=e,{willRenderShapePresetToolbar:E}=e,{annotateTools:I}=e,{annotateToolShapes:L}=e,{annotateShapeControls:F}=e,{annotateActiveTool:B}=e,{annotateEnableButtonFlipVertical:D=!1}=e,{annotateEnableSelectImagePreset:O=!1}=e,{annotateEnableDropImagePreset:z=!0}=e,{annotatePresets:_=[]}=e,{annotateWillRenderShapePresetToolbar:N}=e,{annotateWillRenderShapeStyleControls:W}=e,{enableViewTool:j}=e,{enableSelectToolToAddShape:H}=e,{enableTapToAddText:V}=e,{enableAutoSelectMoveTool:U}=e,{enableMoveTool:G}=e,{enableMultiSelect:X}=e,{willRenderShapeControls:Z}=e,{willRenderShapeTextControls:Y}=e,{beforeAddShape:q}=e,{beforeRemoveShape:K}=e,{beforeDeselectShape:J}=e,{beforeSelectShape:Q}=e,{beforeUpdateShape:tt}=e,{rootRect:te,imageAnnotation:ti,imageSize:tn,imageRotation:tr,imageFlipX:to,imageFlipY:ta,imageTransforms:tl,imageTransformsInterpolated:ts}=f;return oV(t,te,t=>n(59,u=t)),oV(t,tn,t=>n(58,d=t)),oV(t,tr,t=>n(47,h=t)),oV(t,to,t=>n(44,l=t)),oV(t,ta,t=>n(43,a=t)),oV(t,tl,t=>n(57,c=t)),oV(t,ts,t=>n(56,s=t)),t.$$set=t=>{"isActive"in t&&n(2,p=t.isActive),"isActiveFraction"in t&&n(3,g=t.isActiveFraction),"isVisible"in t&&n(4,m=t.isVisible),"stores"in t&&n(5,f=t.stores),"locale"in t&&n(6,$=t.locale),"markupEditorToolbar"in t&&n(7,y=t.markupEditorToolbar),"markupEditorToolStyles"in t&&n(8,x=t.markupEditorToolStyles),"markupEditorToolRetainStyles"in t&&n(9,b=t.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in t&&n(10,v=t.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in t&&n(11,w=t.markupEditorToolSelectRadius),"markupEditorTextInputMode"in t&&n(12,S=t.markupEditorTextInputMode),"markupEditorToolShareStyles"in t&&n(13,k=t.markupEditorToolShareStyles),"markupEditorWillStartInteraction"in t&&n(14,C=t.markupEditorWillStartInteraction),"markupEditorGridSize"in t&&n(15,M=t.markupEditorGridSize),"markupEditorSnapThreshold"in t&&n(16,T=t.markupEditorSnapThreshold),"markupEditorSnapToContext"in t&&n(17,P=t.markupEditorSnapToContext),"annotateGridSize"in t&&n(18,R=t.annotateGridSize),"annotateSnapToContext"in t&&n(19,A=t.annotateSnapToContext),"willRenderShapePresetToolbar"in t&&n(20,E=t.willRenderShapePresetToolbar),"annotateTools"in t&&n(21,I=t.annotateTools),"annotateToolShapes"in t&&n(22,L=t.annotateToolShapes),"annotateShapeControls"in t&&n(23,F=t.annotateShapeControls),"annotateActiveTool"in t&&n(0,B=t.annotateActiveTool),"annotateEnableButtonFlipVertical"in t&&n(24,D=t.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in t&&n(25,O=t.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in t&&n(26,z=t.annotateEnableDropImagePreset),"annotatePresets"in t&&n(27,_=t.annotatePresets),"annotateWillRenderShapePresetToolbar"in t&&n(28,N=t.annotateWillRenderShapePresetToolbar),"annotateWillRenderShapeStyleControls"in t&&n(29,W=t.annotateWillRenderShapeStyleControls),"enableViewTool"in t&&n(30,j=t.enableViewTool),"enableSelectToolToAddShape"in t&&n(31,H=t.enableSelectToolToAddShape),"enableTapToAddText"in t&&n(32,V=t.enableTapToAddText),"enableAutoSelectMoveTool"in t&&n(33,U=t.enableAutoSelectMoveTool),"enableMoveTool"in t&&n(34,G=t.enableMoveTool),"enableMultiSelect"in t&&n(35,X=t.enableMultiSelect),"willRenderShapeControls"in t&&n(36,Z=t.willRenderShapeControls),"willRenderShapeTextControls"in t&&n(37,Y=t.willRenderShapeTextControls),"beforeAddShape"in t&&n(38,q=t.beforeAddShape),"beforeRemoveShape"in t&&n(39,K=t.beforeRemoveShape),"beforeDeselectShape"in t&&n(40,J=t.beforeDeselectShape),"beforeSelectShape"in t&&n(41,Q=t.beforeSelectShape),"beforeUpdateShape"in t&&n(42,tt=t.beforeUpdateShape)},t.$$.update=()=>{503328768&t.$$.dirty[1]&&n(46,r=t=>$5(t,u,d,s.origin,s.translation,c.rotation.z,s.scale,l,a)),503328768&t.$$.dirty[1]&&n(45,o=t=>$4(t,u,d,s.origin,s.translation,c.rotation.z,s.scale,l,a))},[B,"annotate",p,g,m,f,$,y,x,b,v,w,S,k,C,M,T,P,R,A,E,I,L,F,D,O,z,_,N,W,j,H,V,U,G,X,Z,Y,q,K,J,Q,tt,a,l,o,r,h,te,ti,tn,tr,to,ta,tl,ts,s,c,d,u,function(t){n(0,B=t)},function(e){aw.call(this,t,e)}]}class $7 extends a1{get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(t){this.$$set({isActive:t}),aF()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),aF()}get isVisible(){return this.$$.ctx[4]}set isVisible(t){this.$$set({isVisible:t}),aF()}get stores(){return this.$$.ctx[5]}set stores(t){this.$$set({stores:t}),aF()}get locale(){return this.$$.ctx[6]}set locale(t){this.$$set({locale:t}),aF()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),aF()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),aF()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),aF()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),aF()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),aF()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),aF()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),aF()}get markupEditorWillStartInteraction(){return this.$$.ctx[14]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),aF()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),aF()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),aF()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),aF()}get annotateGridSize(){return this.$$.ctx[18]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),aF()}get annotateSnapToContext(){return this.$$.ctx[19]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),aF()}get willRenderShapePresetToolbar(){return this.$$.ctx[20]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),aF()}get annotateTools(){return this.$$.ctx[21]}set annotateTools(t){this.$$set({annotateTools:t}),aF()}get annotateToolShapes(){return this.$$.ctx[22]}set annotateToolShapes(t){this.$$set({annotateToolShapes:t}),aF()}get annotateShapeControls(){return this.$$.ctx[23]}set annotateShapeControls(t){this.$$set({annotateShapeControls:t}),aF()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(t){this.$$set({annotateActiveTool:t}),aF()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[24]}set annotateEnableButtonFlipVertical(t){this.$$set({annotateEnableButtonFlipVertical:t}),aF()}get annotateEnableSelectImagePreset(){return this.$$.ctx[25]}set annotateEnableSelectImagePreset(t){this.$$set({annotateEnableSelectImagePreset:t}),aF()}get annotateEnableDropImagePreset(){return this.$$.ctx[26]}set annotateEnableDropImagePreset(t){this.$$set({annotateEnableDropImagePreset:t}),aF()}get annotatePresets(){return this.$$.ctx[27]}set annotatePresets(t){this.$$set({annotatePresets:t}),aF()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[28]}set annotateWillRenderShapePresetToolbar(t){this.$$set({annotateWillRenderShapePresetToolbar:t}),aF()}get annotateWillRenderShapeStyleControls(){return this.$$.ctx[29]}set annotateWillRenderShapeStyleControls(t){this.$$set({annotateWillRenderShapeStyleControls:t}),aF()}get enableViewTool(){return this.$$.ctx[30]}set enableViewTool(t){this.$$set({enableViewTool:t}),aF()}get enableSelectToolToAddShape(){return this.$$.ctx[31]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),aF()}get enableTapToAddText(){return this.$$.ctx[32]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),aF()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),aF()}get enableMoveTool(){return this.$$.ctx[34]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),aF()}get enableMultiSelect(){return this.$$.ctx[35]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),aF()}get willRenderShapeControls(){return this.$$.ctx[36]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),aF()}get willRenderShapeTextControls(){return this.$$.ctx[37]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),aF()}get beforeAddShape(){return this.$$.ctx[38]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),aF()}get beforeRemoveShape(){return this.$$.ctx[39]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),aF()}get beforeDeselectShape(){return this.$$.ctx[40]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),aF()}get beforeSelectShape(){return this.$$.ctx[41]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),aF()}get beforeUpdateShape(){return this.$$.ctx[42]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),aF()}constructor(t){super(),aQ(this,t,$8,$6,oW,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,markupEditorWillStartInteraction:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,annotateGridSize:18,annotateSnapToContext:19,willRenderShapePresetToolbar:20,annotateTools:21,annotateToolShapes:22,annotateShapeControls:23,annotateActiveTool:0,annotateEnableButtonFlipVertical:24,annotateEnableSelectImagePreset:25,annotateEnableDropImagePreset:26,annotatePresets:27,annotateWillRenderShapePresetToolbar:28,annotateWillRenderShapeStyleControls:29,enableViewTool:30,enableSelectToolToAddShape:31,enableTapToAddText:32,enableAutoSelectMoveTool:33,enableMoveTool:34,enableMultiSelect:35,willRenderShapeControls:36,willRenderShapeTextControls:37,beforeAddShape:38,beforeRemoveShape:39,beforeDeselectShape:40,beforeSelectShape:41,beforeUpdateShape:42},null,[-1,-1])}}function $9(t){let e,n;return(e=new $2({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[10],mapImagePointToScreenPoint:t[9],enableMultiSelect:t[6],utilKey:"redact",imageRotation:t[11],imageFlipX:t[8],imageFlipY:t[7],shapes:t[12],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:t[14],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:t[5],hooks:{willRenderShapeControls:t[25]}}})).$on("measure",t[26]),{c(){aq(e.$$.fragment)},m(t,r){aK(e,t,r),n=!0},p(t,n){let[r]=n,o={};8&r&&(o.stores=t[3]),16&r&&(o.locale=t[4]),1&r&&(o.isActive=t[0]),2&r&&(o.isActiveFraction=t[1]),4&r&&(o.isVisible=t[2]),1024&r&&(o.mapScreenPointToImagePoint=t[10]),512&r&&(o.mapImagePointToScreenPoint=t[9]),64&r&&(o.enableMultiSelect=t[6]),2048&r&&(o.imageRotation=t[11]),256&r&&(o.imageFlipX=t[8]),128&r&&(o.imageFlipY=t[7]),32&r&&(o.willStartInteraction=t[5]),e.$set(o)},i(t){n||(a_(e.$$.fragment,t),n=!0)},o(t){aN(e.$$.fragment,t),n=!1},d(t){aJ(e,t)}}}function yt(t,e,n){let r,o,a,l,s,c,d,u,h;let{isActive:p}=e,{isActiveFraction:g}=e,{isVisible:m}=e,{stores:f}=e,{locale:$={}}=e,{markupEditorWillStartInteraction:y}=e,{enableMultiSelect:x}=e,{imageRedaction:b,rootRect:v,imageSize:w,imageRotation:S,imageFlipX:k,imageFlipY:C,imageTransforms:M,imageTransformsInterpolated:T}=f;return oV(t,v,t=>n(24,u=t)),oV(t,w,t=>n(23,d=t)),oV(t,S,t=>n(11,h=t)),oV(t,k,t=>n(8,l=t)),oV(t,C,t=>n(7,a=t)),oV(t,M,t=>n(22,c=t)),oV(t,T,t=>n(21,s=t)),t.$$set=t=>{"isActive"in t&&n(0,p=t.isActive),"isActiveFraction"in t&&n(1,g=t.isActiveFraction),"isVisible"in t&&n(2,m=t.isVisible),"stores"in t&&n(3,f=t.stores),"locale"in t&&n(4,$=t.locale),"markupEditorWillStartInteraction"in t&&n(5,y=t.markupEditorWillStartInteraction),"enableMultiSelect"in t&&n(6,x=t.enableMultiSelect)},t.$$.update=()=>{31457664&t.$$.dirty&&n(10,r=t=>$5(t,u,d,s.origin,s.translation,c.rotation.z,s.scale,l,a)),31457664&t.$$.dirty&&n(9,o=t=>$4(t,u,d,s.origin,s.translation,c.rotation.z,s.scale,l,a))},[p,g,m,f,$,y,x,a,l,o,r,h,b,v,w,S,k,C,M,T,"redact",s,c,d,u,t=>(gT("to-front",gk(t[0])),t),function(e){aw.call(this,t,e)}]}class ye extends a1{get name(){return this.$$.ctx[20]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),aF()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),aF()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),aF()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),aF()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),aF()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),aF()}get enableMultiSelect(){return this.$$.ctx[6]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),aF()}constructor(t){super(),aQ(this,t,yt,$9,oW,{name:20,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5,enableMultiSelect:6})}}let yi='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',yn='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var yr=(t,e)=>{let n=Object.getOwnPropertyDescriptors(t);Object.keys(n).forEach(r=>{n[r].get?Object.defineProperty(e,r,{get:()=>t[r],set:e=>t[r]=e}):e[r]=t[r]})},yo=()=>w()&&null!==document.doctype,ya=t=>{let e={},{sub:n,pub:r}=nw();yo()||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");let o=l_();yr(o,e);let a=gx(t,o.stores);yr(a,e);let l=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(t=>a.on(t,e=>{let n=o[t](e&&e.detail);n instanceof Promise&&n.catch(y)})),s=(t,e)=>{let r=n(t,e),l=o.on(t,e),s=a.on(t,e);return()=>{r(),l(),s()}};e.handleEvent=y;let c=gb.map(t=>s(t,n=>e.handleEvent(t,n)));return la(e,{on:s,updateImage:t=>new Promise((n,r)=>{let a=e.history.get(),l=e.history.index,s=e.imageState;o.loadImage(t).then(t=>{e.history.set(a),e.history.index=l,e.imageState=s,n(t)}).catch(r)}),close:()=>{r("close")},destroy:()=>{[...l,...c].forEach(t=>t()),a.destroy(),o.destroy(),r("destroy")}}),setTimeout(()=>r("init",e),0),e};w()&&HTMLElement;let yl="pintura-editor";var ys=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=N(t)?document.querySelector(t):t;if(iu(n))return e.class=e.class?"".concat(yl," ").concat(e.class):yl,Object.assign(ya(n),e)};let{document:yc,window:yd}=aH;function yu(t){let e,n,r,o;return aA(t[27]),{c(){e=ai(),ao(n=o9("div"),"class",t[4]),ao(n,"style",t[5])},m(a,l){o8(a,e,l),o8(a,n,l),t[28](n),r||(o=[ar(yd,"keydown",t[10]),ar(yd,"orientationchange",t[11]),ar(yd,"resize",t[27]),ar(yc.body,"focusin",function(){oN(!t[1]&&t[7])&&(!t[1]&&t[7]).apply(this,arguments)}),ar(yc.body,"focusout",function(){oN(t[2]&&t[8])&&(t[2]&&t[8]).apply(this,arguments)}),ar(n,"wheel",t[9],{passive:!1})],r=!0)},p(e,r){t=e,16&r[0]&&ao(n,"class",t[4]),32&r[0]&&ao(n,"style",t[5])},i:oF,o:oF,d(a){a&&o7(e),a&&o7(n),t[28](null),r=!1,o_(o)}}}function yh(t,e,n){let r,o,a,l,s,c,d,u,h,p,g,m,f,$,y,x,b;let v=ax(),{root:S}=e,{preventZoomViewport:k=!0}=e,{preventScrollBodyIfNeeded:C=!0}=e,{preventFooterOverlapIfNeeded:T=!0}=e,{class:P}=e,R=!0,A=!1,E=!1,I=w()&&document.documentElement,L=w()&&document.body,F=w()&&document.head,B=cy(0,{precision:.001,damping:.5});oV(t,B,t=>n(26,u=t));let D=B.subscribe(t=>{E&&t>=1?(n(19,E=!1),n(1,R=!1),v("show")):A&&t<=0&&(n(18,A=!1),n(1,R=!0),v("hide"))}),O=!1,z=()=>document.querySelector("meta[name=viewport]"),_=()=>Array.from(document.querySelectorAll("meta[name=theme-color]")),N=(t,e)=>{let n=()=>{if(t()){e();return}requestAnimationFrame(n)};requestAnimationFrame(n)},W=0,j=()=>{m||(m=M("div",{style:"position:fixed;height:100vh;top:0"}),L.append(m))};af(()=>{T&&iV()&&j()}),a$(()=>{m&&(n(21,x=m.offsetHeight),m.remove(),m=void 0)});let H=()=>I.style.setProperty("--pintura-document-height","".concat(window.innerHeight,"px")),V=t=>{t?(b=window.scrollY,I.classList.add("PinturaDocumentLock"),H(),window.addEventListener("resize",H)):(window.removeEventListener("resize",H),I.classList.remove("PinturaDocumentLock"),nt(b)&&window.scrollTo(0,b),b=void 0)};return ay(()=>{I.classList.remove("PinturaModalBodyLock"),D()}),t.$$set=t=>{"root"in t&&n(0,S=t.root),"preventZoomViewport"in t&&n(12,k=t.preventZoomViewport),"preventScrollBodyIfNeeded"in t&&n(13,C=t.preventScrollBodyIfNeeded),"preventFooterOverlapIfNeeded"in t&&n(14,T=t.preventFooterOverlapIfNeeded),"class"in t&&n(15,P=t.class)},t.$$.update=()=>{67895298&t.$$.dirty[0]&&n(25,r=E||A?u:R?0:1),4096&t.$$.dirty[0]&&(o="width=device-width,height=device-height,initial-scale=1"+(k?",maximum-scale=1,user-scalable=0":"")),786434&t.$$.dirty[0]&&n(22,a=!E&&!R&&!A),12&t.$$.dirty[0]&&!O&&n(20,g=W),2097160&t.$$.dirty[0]&&n(24,l=nt(x)?"--viewport-pad-footer:".concat(x>W?0:1):""),51380224&t.$$.dirty[0]&&n(5,s="opacity:".concat(r,";height:").concat(g,"px;--editor-modal:1;").concat(l)),32768&t.$$.dirty[0]&&n(4,c=cX(["pintura-editor","PinturaModal",P])),8192&t.$$.dirty[0]&&n(23,d=C&&iV()&&/15_/.test(navigator.userAgent)),12582912&t.$$.dirty[0]&&d&&V(a)},[S,R,O,W,c,s,B,t=>{d5(t.target)&&(n(2,O=!0),p=W)},t=>{if(d5(t.target)){if(clearTimeout(h),p===W)n(2,O=!1);else{let t=W;N(()=>W!==t,()=>n(2,O=!1))}}},t=>{t.target&&/PinturaStage/.test(t.target.className)&&t.preventDefault()},t=>{let{key:e}=t;if(!/escape/i.test(e))return;let n=t.target;if(n&&/input|textarea/i.test(n.nodeName))return;let r=document.querySelectorAll(".PinturaModal");r[r.length-1]===S&&v("close")},j,k,C,T,P,()=>{if(E||!R)return;n(19,E=!0);let t=z()||M("meta",{name:"viewport"});f=!f&&t.getAttribute("content"),t.setAttribute("content",o+(/cover/.test(f)?",viewport-fit=cover":"")),t.parentNode||F.append(t);let e=getComputedStyle(S).getPropertyValue("--color-background"),r=_();if(r.length)$=r.map(t=>t.getAttribute("content"));else{let t=M("meta",{name:"theme-color"});F.append(t),r.push(t)}r.forEach(t=>t.setAttribute("content","rgb(".concat(e,")"))),clearTimeout(y),y=setTimeout(()=>B.set(1),250)},()=>{if(A||R)return;clearTimeout(y),n(18,A=!0);let t=z();f?t.setAttribute("content",f):t.remove();let e=_();$?e.forEach((t,e)=>{t.setAttribute("content",$[e])}):e.forEach(t=>t.remove()),B.set(0)},A,E,g,x,a,d,l,r,u,function(){n(3,W=yd.innerHeight)},function(t){ak[t?"unshift":"push"](()=>{n(0,S=t)})}]}class yp extends a1{get root(){return this.$$.ctx[0]}set root(t){this.$$set({root:t}),aF()}get preventZoomViewport(){return this.$$.ctx[12]}set preventZoomViewport(t){this.$$set({preventZoomViewport:t}),aF()}get preventScrollBodyIfNeeded(){return this.$$.ctx[13]}set preventScrollBodyIfNeeded(t){this.$$set({preventScrollBodyIfNeeded:t}),aF()}get preventFooterOverlapIfNeeded(){return this.$$.ctx[14]}set preventFooterOverlapIfNeeded(t){this.$$set({preventFooterOverlapIfNeeded:t}),aF()}get class(){return this.$$.ctx[15]}set class(t){this.$$set({class:t}),aF()}get show(){return this.$$.ctx[16]}get hide(){return this.$$.ctx[17]}constructor(t){super(),aQ(this,t,yh,yu,oW,{root:0,preventZoomViewport:12,preventScrollBodyIfNeeded:13,preventFooterOverlapIfNeeded:14,class:15,show:16,hide:17},null,[-1,-1])}}var yg=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new yp({target:e||document.body,props:{class:t.class,preventZoomViewport:t.preventZoomViewport,preventScrollBodyIfNeeded:t.preventScrollBodyIfNeeded,preventFooterOverlapIfNeeded:t.preventFooterOverlapIfNeeded}})};let ym=(t,e,n,r)=>{let o;let a=tG(tB(e.x-t.x,e.y-t.y)),l=5*n;o=r?.5*l:Math.ceil((l-1)*.5);let s=t0(tN(a),o);return{anchor:tN(t),offset:s,normal:a,solid:r,size:l,sizeHalf:o}},yf=(t,e,n)=>{let{strokeWidth:r,strokeColor:o,strokeJoin:a,strokeCap:l,...s}=t,{anchor:c,offset:d,normal:u,solid:h,size:p,sizeHalf:g}=e,m=c.x,f=c.y,$=t0(tN(u),p),y=tB(m+$.x,f+$.y);if(t0($,.55),h){tJ(n,d);let t=t0(tN(u),.5*g);return[{...s,points:[tB(m-t.x,f-t.y),tB(y.x-$.y,y.y+$.x),tB(y.x+$.y,y.y-$.x)],pathClose:!0,backgroundColor:o}]}{let t=t0(tH(tN(u)),.5),e=tB(m-t.x,f-t.y),n=tB(m+t.x,f+t.y);return[{...s,points:[tB(y.x+$.y,y.y-$.x),e,tB(m,f),n,tB(y.x-$.y,y.y+$.x)],pathClose:!1,strokeWidth:r,strokeColor:o,strokeJoin:a,strokeCap:l}]}},y$=(t,e,n)=>{let{strokeWidth:r,strokeColor:o,...a}=t,{anchor:l,solid:s,offset:c,normal:d,sizeHalf:u}=e;return tJ(n,c),s&&tJ(n,tj(tN(d))),[{...a,x:l.x,y:l.y,rx:u,ry:u,backgroundColor:s?o:void 0,strokeWidth:s?void 0:r,strokeColor:s?void 0:o}]},yy=(t,e)=>{let{strokeWidth:n,strokeColor:r,strokeJoin:o,strokeCap:a,...l}=t,{anchor:s,offset:c}=e;return[{...l,points:[tB(s.x-c.y,s.y+c.x),tB(s.x+c.y,s.y-c.x)],strokeWidth:n,strokeColor:r,strokeJoin:o,strokeCap:a}]},yx=(t,e,n)=>{let{strokeWidth:r,strokeColor:o,...a}=t,{anchor:l,solid:s,offset:c,normal:d,sizeHalf:u}=e;return tJ(n,c),[{...a,x:l.x-u,y:l.y-u,width:2*u,height:2*u,rotation:tX(d),backgroundColor:s?o:void 0,strokeWidth:s?void 0:r,strokeColor:s?void 0:o}]},yb=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=>{if(!e.lineStart&&!e.lineEnd)return;let n=[],{x1:r,y1:o,x2:a,y2:l,lineStart:s,lineEnd:c,strokeWidth:d,strokeColor:u,strokeJoin:h,strokeCap:p,strokeDash:g,bitmap:m,aboveFrame:f,opacity:$}=e,y=tB(r,o),x=tB(a,l),b=[y,x],v={bitmap:m,aboveFrame:f,opacity:$,strokeColor:u,strokeWidth:d,strokeJoin:h,strokeCap:p};if(s){let[e,r]=s.split("-"),o=t[e];if(o){let t=ym(y,x,d,!!r);n.push(...o(v,t,y))}}if(c){let[e,r]=c.split("-"),o=t[e];if(o){let t=ym(x,y,d,!!r);n.push(...o(v,t,x))}}return[{...v,strokeDash:g,points:b},...n]}},yv=()=>({arrow:yf,circle:y$,square:yx,bar:yy}),yw=(t,e)=>{let n=parseFloat(t)*e;return N(t)?"".concat(n,"%"):n},yS=(t,e)=>N(t)?rJ(t,e):t,yk=t=>[{...t,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?yw(t.frameSize,2):"2.5%",frameRadius:t.frameRound?yw(t.frameSize,2):0}],yC=(t,e)=>{let{width:n,height:r,frameImage:o,frameSize:a="15%",frameOutset:l=0,frameSlices:s={x1:.15,y1:.15,x2:.85,y2:.85}}=t,{isPreview:c}=e;if(!o)return[];let d=Math.sqrt(n*r),u=yS(a,d),h=c?u:Math.round(u),p=yS(l,d),g=2*p,{x1:m,x2:f,y1:$,y2:y}=s,x={x0:0,y0:0,x1:h,y1:h,x2:n-h,y2:r-h,cw:h,ch:h,ew:n-h-h,eh:r-h-h},b=c?1:0,v=2*b,w=p>0,S={expandsCanvas:w,width:x.cw,height:x.ch,backgroundImage:o};return[{expandsCanvas:w,x:x.x1-b-p,y:x.y0-p,width:x.ew+v+g,height:x.ch,backgroundCorners:[{x:m,y:0},{x:f,y:0},{x:f,y:$},{x:m,y:$}],backgroundImage:o},{expandsCanvas:w,x:x.x1-b-p,y:x.y2+p,width:x.ew+v+g,height:x.ch,backgroundCorners:[{x:m,y:y},{x:f,y:y},{x:f,y:1},{x:m,y:1}],backgroundImage:o},{expandsCanvas:w,x:x.x0-p,y:x.y1-b-p,width:x.cw,height:x.eh+v+g,backgroundCorners:[{x:0,y:$},{x:m,y:$},{x:m,y:y},{x:0,y:y}],backgroundImage:o},{expandsCanvas:w,x:x.x2+p,y:x.y1-b-p,width:x.cw,height:x.eh+v+g,backgroundCorners:[{x:f,y:$},{x:1,y:$},{x:1,y:y},{x:f,y:y}],backgroundImage:o},{...S,x:x.x0-p,y:x.y0-p,backgroundCorners:[{x:0,y:0},{x:m,y:0},{x:m,y:$},{x:0,y:$}]},{...S,x:x.x2+p,y:x.y0-p,backgroundCorners:[{x:f,y:0},{x:1,y:0},{x:1,y:$},{x:f,y:$}]},{...S,x:x.x2+p,y:x.y2+p,backgroundCorners:[{x:f,y:y},{x:1,y:y},{x:1,y:1},{x:f,y:1}]},{...S,x:x.x0-p,y:x.y2+p,backgroundCorners:[{x:0,y:y},{x:m,y:y},{x:m,y:1},{x:0,y:1}]}]},yM=(t,e)=>{let{x:n,y:r,width:o,height:a,frameInset:l="3.5%",frameSize:s=".25%",frameColor:c=[1,1,1],frameOffset:d="5%",frameAmount:u=1,frameRadius:h=0,expandsCanvas:p=!1}=t,{isPreview:g}=e,m=Math.sqrt(o*a),f=yS(s,m),$=yS(l,m),y=yS(d,m),x=0;g||(x=(f=Math.max(1,Math.round(f)))%2==0?0:.5);let b=yS(yw(h,u),m);return Array(u).fill(void 0).map((t,e)=>{let l=y*e,s=n+$+l,d=r+$+l,u=n+o-$-l,h=r+a-$-l;return g||(s=Math.round(s),d=Math.round(d),u=Math.round(u),h=Math.round(h)),{x:s+x,y:d+x,width:u-s,height:h-d,cornerRadius:b>0?b-l:0,strokeWidth:f,strokeColor:c,expandsCanvas:p}})},yT=(t,e)=>{let{x:n,y:r,width:o,height:a,frameSize:l=".25%",frameOffset:s=0,frameInset:c="2.5%",frameColor:d=[1,1,1]}=t,{isPreview:u}=e,h=Math.sqrt(o*a),p=yS(l,h),g=yS(c,h),m=yS(s,h),f=0;u||(p=Math.max(1,Math.round(p)),g=Math.round(g),m=Math.round(m),f=p%2==0?0:.5);let $=m-g,y=n+g+f,x=r+g+f,b=n+o-g-f,v=r+a-g-f;return[{points:[tB(y+$,x),tB(b-$,x)]},{points:[tB(b,x+$),tB(b,v-$)]},{points:[tB(b-$,v),tB(y+$,v)]},{points:[tB(y,v-$),tB(y,x+$)]}].map(t=>(t.strokeWidth=p,t.strokeColor=d,t))},yP=(t,e)=>{let{x:n,y:r,width:o,height:a,frameSize:l=".25%",frameInset:s="2.5%",frameLength:c="2.5%",frameColor:d=[1,1,1]}=t,{isPreview:u}=e,h=Math.sqrt(o*a),p=yS(l,h),g=yS(s,h),m=yS(c,h),f=0;u||(p=Math.max(1,Math.round(p)),g=Math.round(g),m=Math.round(m),f=p%2==0?0:.5);let $=n+g+f,y=r+g+f,x=n+o-g-f,b=r+a-g-f;return[{points:[tB($,y+m),tB($,y),tB($+m,y)]},{points:[tB(x-m,y),tB(x,y),tB(x,y+m)]},{points:[tB(x,b-m),tB(x,b),tB(x-m,b)]},{points:[tB($+m,b),tB($,b),tB($,b-m)]}].map(t=>(t.strokeWidth=p,t.strokeColor=d,t))},yR=(t,e)=>{let{x:n,y:r,width:o,height:a,frameColor:l=[1,1,1]}=t,{isPreview:s}=e,c=Math.sqrt(o*a),d=.1*c,u=.2*c,h=0,p=.5*d;return s?h=1:u=Math.ceil(u),l.length=3,[{id:"border",x:n-p+h,y:r-p+h,width:o+d-2*h,height:a+u-2*h,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:d,frameColor:l,expandsCanvas:!0},{id:"chin",x:n-p,y:a-h,width:o+d,height:u,backgroundColor:l,expandsCanvas:!0}].filter(Boolean)},yA=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e,n)=>{if(!ni(e,"frameStyle"))return;let r=t[e.frameStyle];if(!r)return;let{frameStyle:o,...a}=e;return r(a,n)}},yE=()=>({solid:yk,hook:yP,line:yM,edge:yT,polaroid:yR,nine:yC}),yI=()=>yb(yv()),yL=()=>yA(yE()),yF=()=>[yL(),yI()],yB=t=>{let e=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isPreview:!0},o=t.map(t=>{let o=t(n,r);if(o)return o.map(t=>e(t,r))}).filter(Boolean).flat();return o.length?o.flat().map((t,e)=>(t.id=n.id+"_"+e,t)):n};return e},yD=sw,yO=sk,yz=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{blurAmount:e,dataSizeScalar:n,scrambleAmount:r,backgroundColor:o}=t;return(t,a)=>cg(t,{blurAmount:e,scrambleAmount:r,backgroundColor:o,...a,dataSizeScalar:n||a.dataSizeScalar})},y_=gU,yN=gH,yW={markupEditorToolbar:gU(),markupEditorToolStyles:gH(),markupEditorShapeStyleControls:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={...mf,...t},n={};return Object.entries(e).forEach(t=>{let[r,o]=t;if(!/Options$/.test(r)){if(mf[r]&&O(o)&&!nn(o)){let{component:t,factory:o,items:a,options:l={}}=e[r];if(N(o))n[r]=[o,l];else{let s=mf[r].items,c=N(s)?e[s]||mu[s]():void 0;N(a)&&mu[a]?c=e[a]?e[a].every(t=>!Array.isArray(t))?e[a].map(t=>[t,t]):e[a]:mu[a]():(a||l.items)&&(c=a||l.items);let d=o||mf[r].factory;W(d)?n[r]=c?d(c,l):d(l):t&&(n[r]=[t,{...l,items:a}])}}else n[r]=o}}),n}()},yj=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e.filter(t=>!!t.util).forEach(t=>{let[e,n,r=()=>!0]=t.util;gy.has(e)||(gy.set(e,{Component:n,isSupported:r}),dr(n).filter(t=>!gp.includes(t)).forEach(t=>{if(gf.add(t),g$[t]){g$[t].push(e);return}g$[t]=[e]}))})},yH={util:["crop",fv]},yV={util:["finetune",fR]},yU={util:["annotate",$7]},yG={util:["redact",ye,t=>{let{src:e}=t;return e&&!l0(e)}]},yX={finetuneControlConfiguration:{gamma:{base:1,min:.15,max:4,getLabel:t=>t<1?pW((t-.15)/.85-1):pW((t-1)/3),getStore:t=>{let{imageGamma:e}=t;return e}},brightness:{base:0,min:-.25,max:.25,getLabel:t=>pW(t/.25),getStore:t=>{let{imageColorMatrix:e}=t;return e},getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update(t=>({...t,brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]}))},contrast:{base:1,min:.5,max:1.5,getLabel:t=>pW(-1+(t-.5)*2),getStore:t=>{let{imageColorMatrix:e}=t;return e},getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update(t=>({...t,contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]}))},saturation:{base:1,min:0,max:2,getLabel:t=>pW(t-1),getStore:t=>{let{imageColorMatrix:e}=t;return e},getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update(t=>({...t,saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]}))},exposure:{base:1,min:.5,max:1.5,getLabel:t=>pW(-1+(t-.5)*2),getStore:t=>{let{imageColorMatrix:e}=t;return e},getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update(t=>({...t,exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]}))},temperature:{base:0,min:-1,max:1,getStore:t=>{let{imageColorMatrix:e}=t;return e},getValue:t=>{if(!t.temperature)return;let e=t.temperature[0];return e>=1?(e-1)/.1:-((1-e)/.15)},setValue:(t,e)=>t.update(t=>({...t,temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+-(.1*e),0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+-(.15*e),0,0,0,0,0,1,0]}))},clarity:{base:0,min:-1,max:1,getStore:t=>{let{imageConvolutionMatrix:e}=t;return e},getValue:t=>{if(t.clarity)return 0===t.clarity[0]?-(t.clarity[1]/1):-(t.clarity[1]/2)},setValue:(t,e)=>{t.update(t=>({...t,clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]}))}},vignette:{base:0,min:-1,max:1,getStore:t=>{let{imageVignette:e}=t;return e}}},finetuneOptions:gR},yZ={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:t=>"".concat(t.join(", ")," not supported on this browser"),labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:yi,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:yi,statusLabelLoadImage:t=>t&&t.task?t.error?"IMAGE_TOO_SMALL"===t.error.code?"Minimum image size is {minWidth} &times; {minHeight}":"Error loading image":"blob-to-bitmap"===t.task?"Preparing image&hellip;":"Loading image&hellip;":"Waiting for image",statusLabelProcessImage:t=>{if(t&&t.task)return"store"===t.task?t.error?"Error uploading image":"Uploading image&hellip;":t.error?"Error processing image":"Processing image&hellip;"}},yY={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:"".concat(yn),shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'.concat(yn),shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'.concat(yn),shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextOutline:"Text outline",shapeTitleTextOutlineWidth:"Width",shapeTitleTextShadow:"Text shadow",shapeTitleTextShadowBlur:"Blur",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:"Selection mode",shapeTitleBrushSize:"Brush size",shapeLabelSelectionModeNew:"New",shapeLabelSelectionModeAdd:"Add",shapeLabelSelectionModeSubtract:"Remove",shapeLabelToolSelectionBrush:"Brush",shapeLabelToolSelectionLassoo:"Lassoo",shapeLabelToolSelectionRectangle:"Rectangle marquee",shapeLabelToolSelectionEllipse:"Ellipse marquee",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'},yq={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(t,e)=>{let[n,r,o]=e?[e<1?1:.3,1===e?.85:.5,e>1?1:.3]:[.2,.3,.4];return'<g fill="currentColor">\n            <rect opacity="'.concat(n,'" x="2" y="4" width="10" height="18" rx="1"/>\n            <rect opacity="').concat(r,'" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="').concat(o,'" x="6" y="12" width="17" height="10" rx="1"/>\n        </g>')},cropIconCropBoundary:(t,e)=>{let[n,r,o,a]=e?[.3,1,0,0]:[0,0,.3,1];return'<g fill="currentColor">\n            <rect opacity="'.concat(n,'" x="2" y="3" width="20" height="20" rx="1"/>\n            <rect opacity="').concat(r,'" x="7" y="8" width="10" height="10" rx="1"/>\n            <rect opacity="').concat(o,'" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="').concat(a,'" x="12" y="4" width="10" height="10" rx="1"/>\n        </g>')},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},yK={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},yJ={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},yQ={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},y1=ys,y0=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,{sub:n,pub:r}=nw(),o={},a=yg(t,e),l=()=>{a.hide&&a.hide()},s=()=>{a.show&&a.show()},c=ya(a.root);yr(c,o),o.handleEvent=y,c.handleEvent=(t,e)=>{if("init"===t)return o.handleEvent(t,o);o.handleEvent(t,e)},c.on("close",async()=>{let{willClose:e}=t;if(!e)return l();await e()&&l()});let d=(t,e)=>/show|hide/.test(t)?n(t,e):c.on(t,e),u=["show","hide"].map(t=>d(t,e=>o.handleEvent(t,e))),h=()=>{u.forEach(t=>t()),l(),a.$destroy(),c.destroy()};return la(o,{on:d,destroy:h,hide:l,show:s}),Object.defineProperty(o,"modal",{get:()=>a.root,set:()=>void 0}),a.$on("close",c.close),a.$on("show",()=>r("show")),a.$on("hide",()=>{r("hide"),!1!==t.enableAutoDestroy&&h()}),!1!==t.enableAutoHide&&c.on("process",l),c.on("loadstart",s),!1!==t.enableButtonClose&&(t.enableButtonClose=!0),delete t.class,Object.assign(o,t),o},y2=(t,e)=>ys(t,{...e,layout:"overlay"}),y4=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return yB([...yF(),...t])}}}]);