"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51],{63879:function(e,t,n){n.d(t,{UW:function(){return c},Nn:function(){return f},He:function(){return v},Pj:function(){return h},lj:function(){return x},rP:function(){return u}});var i=n(24246),l=n(83469),a=n(94033),s=n(81067),o=n(27378),r=n(48407),d=n(35286);let c=e=>(0,i.jsx)(s.fC,{...e}),u=o.forwardRef((e,t)=>(0,i.jsx)(s.xz,{ref:t,...e})),m=s.Eh,p=s.x8,x=e=>{let{title:t,icon:n}=e;return(0,i.jsxs)("div",{className:"mb-3 flex items-center text-white",children:[n&&(0,i.jsx)("div",{className:"mr-2",children:(0,i.jsx)(a.G,{icon:n})}),(0,i.jsx)("div",{className:"text-base font-semibold",children:t})]})},h=e=>{let{children:t}=e;return(0,i.jsx)("div",{className:"popover-img mb-3 overflow-hidden rounded leading-[0]",children:t})},v=e=>{let{children:t}=e;return(0,i.jsx)("div",{className:"popover-description text-sm text-white/[85] [&>a]:text-indigo-200",children:t})},f=o.forwardRef((e,t)=>{let{className:n,align:o="center",showCloseButton:c=!1,children:u,primaryAction:x,primaryActionText:h,secondaryAction:v,secondaryActionText:f,sideOffset:g=10,withArrow:b=!1,portalContainer:_,onCloseAction:w,...j}=e;return(0,i.jsx)(s.h_,{container:_,children:(0,i.jsxs)(s.VY,{ref:t,align:o,sideOffset:g,className:(0,d.cn)("bg-brand text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-[304px] rounded-lg p-4 shadow-[0_24px_24px_-12px_#3C2EDD40] outline-none",n),...j,children:[c&&(0,i.jsx)(p,{className:"absolute right-2 top-2 h-6 w-6 cursor-pointer bg-transparent text-white/50","aria-label":"Close",onClick:w,children:(0,i.jsx)(a.G,{icon:l.YIN,size:"lg",title:"close"})}),u,(!!x||!!v)&&(0,i.jsxs)("div",{className:"mt-4",children:[!!v&&(0,i.jsx)(r.z,{size:"small",variant:"secondary",onClick:v,darkMode:!0,className:"mr-2.5 outline-white/25 hover:outline-white/50 focus:outline-white/50",children:f}),!!x&&(0,i.jsx)(r.z,{size:"small",variant:"secondary",onClick:x,className:"shadow-white outline-white ring-white hover:shadow-white hover:outline-white focus:outline-white",children:h})]}),b&&(0,i.jsx)(m,{asChild:!0,children:(0,i.jsx)("svg",{width:"15",height:"7",viewBox:"0 0 15 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"rotate-180 transform",children:(0,i.jsx)("path",{d:"M8.69339 0.555122C8.08158 -0.185042 6.91842 -0.18504 6.30661 0.555123L1.59118 6.25984C1.20448 6.72766 0.619023 7 0 7L15 7C14.381 7 13.7955 6.72766 13.4088 6.25984L8.69339 0.555122Z",fill:"#3C2EDD"})})})]})})})},22730:function(e,t,n){n.d(t,{J2:function(){return r},tW:function(){return d},yk:function(){return m},xo:function(){return c}});var i=n(24246);n(94033);var l=n(81067),a=n(47404),s=n(27378),o=n(35286);let r=l.fC,d=l.ee,c=l.xz,u=(0,a.j)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-auto rounded-lg outline-none text-sm font-medium max-w-full",{variants:{theme:{dark:"bg-slate-800 text-slate-100 shadow-popover",light:"bg-white text-slate-800 shadow-popoverLight"},variant:{simple:"px-4 py-3 text-center",complex:"p-4 min-w-[240px]"}},defaultVariants:{theme:"dark",variant:"simple"}}),m=s.forwardRef((e,t)=>{let{className:n,sideOffset:a=14,theme:s="dark",variant:r="simple",align:d="center",container:c,...m}=e;return(0,i.jsx)(l.h_,{container:c,children:(0,i.jsx)(l.VY,{ref:t,align:d,className:(0,o.cn)(u({variant:r,theme:s}),n),sideOffset:a,...m})})})},33240:function(e,t,n){n.d(t,{Ph:function(){return d},Bw:function(){return h},DI:function(){return c},Ql:function(){return v},i4:function(){return m},ki:function(){return u}});var i=n(24246),l=n(22107),a=n(94033),s=n(25707),o=n(27378),r=n(35286);let d=s.fC,c=s.ZA,u=s.B4,m=o.forwardRef((e,t)=>{let{className:n,children:o,showDirectionArrow:d=!0,...c}=e;return(0,i.jsxs)(s.xz,{ref:t,className:(0,r.cn)("border-input bg-background ring-offset-background placeholder:text-muted-foreground flex h-10 w-full items-center justify-between rounded-md border border-slate-300 px-3  py-2 text-sm focus:border-indigo-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...c,children:[o,d?(0,i.jsx)(s.JO,{asChild:!0,children:(0,i.jsx)(a.G,{icon:l.mTx,className:"h-4 w-4 opacity-50"})}):null]})}),p=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,i.jsx)(s.u_,{ref:t,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",n),...o,children:(0,i.jsx)(a.G,{icon:l.mTx,className:"h-4 w-4"})})}),x=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,i.jsx)(s.$G,{ref:t,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",n),...o,children:(0,i.jsx)(a.G,{icon:l.ptq,className:"h-4 w-4"})})}),h=o.forwardRef((e,t)=>{let{className:n,children:l,position:a="popper",...o}=e;return(0,i.jsx)(s.h_,{children:(0,i.jsxs)(s.VY,{ref:t,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-300 shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:a,...o,children:[(0,i.jsx)(p,{}),(0,i.jsx)(s.l_,{className:(0,r.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,i.jsx)(x,{})]})})}),v=o.forwardRef((e,t)=>{let{className:n,children:o,...d}=e;return(0,i.jsxs)(s.ck,{ref:t,className:(0,r.cn)("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none hover:bg-slate-50 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...d,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(s.wU,{children:(0,i.jsx)(a.G,{icon:l.nZ9,className:"h-4 w-4"})})}),(0,i.jsx)(s.eT,{children:o})]})})},61688:function(e,t,n){n.d(t,{q:function(){return a}});var i=n(56552),l=n(3267);let a=e=>{let{teamId:t,includeDeactivatedUsers:n}=e;return(0,i.useQuery)({queryKey:["team-creators",t,n],queryFn:async()=>await l.Z.getTeamCreators(t,n),enabled:!!t,staleTime:3e6,cacheTime:3e6})}},77253:function(e,t,n){n.d(t,{II:function(){return s},av:function(){return a},nH:function(){return i},qX:function(){return l}});let i=250,l=550,a="https://support.scribehow.com/hc/en-us/requests/new?ticket_form_id=5712781140509",s={FREE:"free",PRO:"pro",ENTERPRISE:"enterprise",BASE:"base",BUSINESS:"business",CORE:"core",GRID:"grid"}},51907:function(e,t,n){var i=n(54062),l=n(17654);t.Z=()=>{let{data:e,...t}=(0,i.ZP)(),n=(0,l.By)(null==e?void 0:e.active_organization.super_organization),a=(0,l.Du)(null==e?void 0:e.active_organization.super_organization);return{isEnterpriseAccount:n,isProAccount:a,isFreeAccount:!(n||a),...t}}},21352:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(54062),l=n(56552),a=n(80140),s=()=>{let e=(0,l.useQueryClient)(),{data:t}=(0,i.ZP)();return(0,l.useMutation)({mutationFn:async e=>a.Z.updateUserCustomization({id:null==t?void 0:t.id,bodyParams:e}),onSuccess:()=>{e.invalidateQueries(i.qA)}})},o=n(27378);function r(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,[n,i]=(0,o.useState)(e);return[n,()=>{i(!n),null==t||t(!n)}]}var d=n(62136),c=()=>{var e,t,n,l,a,c,u,m,p;let{data:x}=(0,i.ZP)(),h=s(),[v,f]=(0,o.useState)(null!==(p=null==x?void 0:null===(e=x.smart_embed_customizations)||void 0===e?void 0:e.experience)&&void 0!==p?p:(null==x?void 0:null===(t=x.smart_embed_customizations)||void 0===t?void 0:t.scrollable)?d.Ct.Scroll:d.Ct.Slides),g=(e,t)=>{h.mutateAsync({[e]:t})},[b,_]=r((null==x?void 0:null===(n=x.smart_embed_customizations)||void 0===n?void 0:n.size)===d.wk.Fixed,e=>g("is_smart_embed_size_fixed",e)),[w,j]=r(!!(null==x?void 0:null===(l=x.smart_embed_customizations)||void 0===l?void 0:l.skip_intro),e=>g("is_smart_embed_skip_intro",e)),[y,N]=r((null==x?void 0:null===(a=x.smart_embed_customizations)||void 0===a?void 0:a.remove_logo)===!0,e=>g("is_smart_embed_remove_logo",e)),[C,k]=r((null==x?void 0:null===(c=x.smart_embed_customizations)||void 0===c?void 0:c.video_unmuted)===void 0||(null==x?void 0:null===(u=x.smart_embed_customizations)||void 0===u?void 0:u.video_unmuted),e=>g("is_smart_embed_video_unmuted",e));return(0,o.useEffect)(()=>{var e;(null==x?void 0:null===(e=x.smart_embed_customizations)||void 0===e?void 0:e.video_unmuted)===!1&&C&&k()},[null==x?void 0:null===(m=x.smart_embed_customizations)||void 0===m?void 0:m.video_unmuted]),{isSizeFixed:b,toggleFixedSize:_,skipIntroduction:w,toggleSkipIntroduction:j,removeLogo:y,toggleRemoveLogo:N,isVideoUnmuted:C,toggleVideoUnmuted:k,embedView:v,onEmbedViewChange:e=>{f(e),h.mutateAsync({embed_experience:e})}}}},15057:function(e,t,n){n.d(t,{Lb:function(){return r},_q:function(){return o}});var i=n(54062),l=n(27378),a=n(31928),s=n(62136);let o="934",r="640";t.ZP=e=>{var t,n,d;let{document:c,embedView:u,queryParams:m={}}=e,{data:p}=(0,i.ZP)(),x=(null==c?void 0:c.type)===s.rZ.KnowledgePage,h=null==p?void 0:null===(t=p.smart_embed_customizations)||void 0===t?void 0:t.skip_intro,v=null==p?void 0:null===(n=p.smart_embed_customizations)||void 0===n?void 0:n.remove_logo,f=(null==p?void 0:null===(d=p.smart_embed_customizations)||void 0===d?void 0:d.size)==="fixed",g=(0,l.useMemo)(()=>{let e={...m};return x||(h&&(e={...e,skipIntro:h}),v&&(e={...e,removeLogo:v}),(u===s.Ct.Scroll||u===s.Ct.Movie)&&(e={...e,as:null!=u?u:"scrollable"})),new URLSearchParams(Object.entries(e).reduce((e,t)=>{let[n,i]=t;return void 0!==i&&(e[n]=i.toString()),e},{})).toString()},[m,h,v,x,u]),b=(0,l.useMemo)(()=>{if(!(null==c?void 0:c.id))return"";let e=(null==c?void 0:c.type)===s.rZ.Scribe,t=(0,a.Zk)(null==c?void 0:c.id,null==c?void 0:c.name,null==c?void 0:c.type),n=e?t.replace("shared/","embed/"):t.replace("page/","page-embed/");return"".concat(n).concat(g.length?"?":"").concat(g)},[null==c?void 0:c.id,null==c?void 0:c.name,null==c?void 0:c.type,g]),_=(0,l.useMemo)(()=>{if(!b)return"";let e=new URL(b),t=u!==s.Ct.Movie||x?r:o;return e.searchParams.delete("modalPreview"),'<iframe src="'.concat(e.toString(),'" width="').concat(f?t:"100%",'" height="640" allowfullscreen frameborder="0"></iframe>')},[f,b,u,x]);return{iframeSrc:b,embedView:u,removeLogo:v,skipIntroduction:h,isSizeFixed:f,embedSnippet:_}}},99006:function(e,t,n){n.d(t,{g:function(){return d},t:function(){return r}});var i=n(80125),l=n(56552),a=n(16125),s=n(10965),o=n(81488);let r=()=>(0,l.useMutation)({mutationFn:e=>{let{documentId:t,bodyParams:n}=e;return s.Z.updateDocumentMetadata(t,n)}}),d=()=>{let e=(0,a.I0)(),t=(0,i.IV)();return(0,l.useMutation)({mutationFn:e=>{let{documentId:t}=e;return s.Z.archiveDocumentMetadata(t)},onSuccess:(n,i)=>{e(o.Tz.fulfilled({id:i.documentId},null,i.documentId)),t(e=>({...e,pages:e.pages.map(e=>({...e,total_files:e.total_files-1,documents:e.documents.filter(e=>e.id!==i.documentId)}))}))}})}},84139:function(e,t,n){n.d(t,{D:function(){return x},k:function(){return l}});var i,l,a=n(1048),s=n(80125),o=n(56552),r=n(16125),d=n(98753),c=n(31928),u=n(15597),m=n(42171),p=n(28895);(i=l||(l={})).WORKSPACE="workspace",i.EDITOR="editor";let x=()=>{let e=(0,r.I0)(),t=(0,s.IV)();return(0,o.useMutation)({mutationFn:async e=>{let{id:t,orgId:n,isRetry:i=!1}=e;return{...i?await d.Z.retryDuplicateScribeDocument(t):await d.Z.duplicateScribeDocument(t,n),actions:[]}},onSuccess:(n,i)=>{let{id:l,isRetry:s,context:o}=i;"workspace"===o?(e(p.wX.fulfilled(n,null,{id:l,retry:s})),t(e=>({...e,pages:[{...e.pages[0],total_files:s?e.pages[0].total_files:e.pages[0].total_files+1,documents:[...s?[]:[n],...e.pages[0].documents]},...e.pages.slice(1)]}))):e(a.y3.fulfilled({id:n.id,url:"".concat((0,c.W0)(n.id,n.name),"?back_to=browser"),status:n.duplicate_status},null,l)),(0,m.L9)(s?"retry_duplicate_scribe":"duplicate_scribe",{sourceScribeId:l})},onError:(e,t)=>{let{isRetry:n}=t;(0,u.l)(e,{tags:{location:"useDuplicateFileMutation",action:n?"scribeDocumentService.retryDuplicateScribeDocument":"scribeDocumentService.duplicateScribeDocument"}})},retry:!1})}},73174:function(e,t,n){var i=n(56552),l=n(16125),a=n(78376),s=n(77425);t.ZP=function(e){let t=(0,l.I0)(),{data:n,isLoading:o,isError:r,error:d,refetch:c}=(0,i.useQuery)(["sharing_permissions",e],async()=>{t(s.L.pending(e,null,null));try{let n=await a.Y(e);return t(s.L.fulfilled(n,null,{documentId:e})),n}catch(e){throw t(s.L.rejected(e,null,null)),e}});return{permissions:n,isLoadingPermissions:o,errorFetchingPermissions:r,permissionsError:d,refetchPermissions:c}}},44659:function(e,t,n){var i=n(56552),l=n(16125),a=n(3267),s=n(1381);t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=["team_invites",e,t,n],r=(0,i.useQueryClient)(),d=(0,l.I0)(),{data:c=[],isLoading:u,refetch:m}=(0,i.useQuery)(o,async()=>{if(!e)return[];try{let i=await a.Z.getTeamInvites(e,t,n);return d(s.ml.fulfilled(i)),i}catch(e){return d(s.ml.rejected(e)),[]}},{enabled:!!e});return{invites:c,isLoadingInvites:u,refetchInvites:m,invalidateInvites:()=>{r.invalidateQueries(o)}}}},55260:function(e,t,n){n.d(t,{R2:function(){return s},ZP:function(){return o}});var i=n(24246),l=n(27378);let a=(0,l.createContext)(null),s=e=>{let{children:t}=e,[n,s]=(0,l.useState)(null);return(0,i.jsx)(a.Provider,{value:{bulkEditorContext:n,setBulkEditorContext:s},children:t})};var o=()=>{let e=(0,l.useContext)(a);if(void 0===e)throw Error("useBulkEditorContext must be used within a BulkEditorContextProvider");return e}},84149:function(e,t,n){n.d(t,{u$:function(){return s},c6:function(){return a},IX:function(){return p},KJ:function(){return x},q1:function(){return h},Ps:function(){return b},SC:function(){return f},ik:function(){return g},Rx:function(){return v}});var i,l,a,s,o=n(60074),r=n(56552),d=n(45719),c={disableConfluence:async e=>(0,d.Z)("integrations/confluence/disable/?org_id=".concat(encodeURIComponent(e)),"POST",!0),enableConfluence:async e=>(0,d.Z)("integrations/confluence/enable/?org_id=".concat(encodeURIComponent(e)),"POST",!0),getConfluenceInfo:async e=>{let{organizationId:t,limit:n}=e;return(0,d.Z)("integrations/confluence/info/?org_id=".concat(encodeURIComponent(t),"&").concat(n?"limit=".concat(n):""),"GET",!0)},exportScribeDocumentToConfluence:async(e,t)=>(0,d.Z)("scribe_documents/".concat(e,"/export/confluence/"),"POST",!0,{space_key:t}),setConfluenceDomain:async(e,t,n)=>(0,d.Z)("integrations/confluence/domains/?org_id=".concat(encodeURIComponent(e)),"POST",!0,{id:t,name:n})},u=n(3267),m=n(42171);let p=e=>["confluence_info",e],x=e=>{let{organizationId:t,limit:n}=e;return(0,r.useQuery)({queryKey:p(t),queryFn:()=>c.getConfluenceInfo({organizationId:t,limit:n}),onError:e=>{o.Tb(e)},enabled:!!t})},h=()=>(0,r.useMutation)({mutationFn:async e=>{let{id:t,spaceKey:n}=e;return c.exportScribeDocumentToConfluence(t,n)},onSuccess:e=>{let{id:t}=e;(0,m.L9)("exported_to_confluence",{scribe_id:t})},onError:e=>{o.Tb(e)}});(i=a||(a={})).ENABLE="enable",i.DISABLE="disable";let v=()=>{let e=(0,r.useQueryClient)(),t=e=>"enable"===e?e=>c.enableConfluence(e):e=>c.disableConfluence(e);return(0,r.useMutation)({mutationFn:async e=>{let{organizationId:n,toggleAction:i}=e;return t(i)(n)},onMutate:t=>{let{organizationId:n,toggleAction:i}=t;e.setQueryData(p(n),e=>({...e,enabled:"enable"===i}))},onSuccess:(e,t)=>{let{toggleAction:n}=t;(0,m.L9)("enable"===n?"enabled_confluence":"disabled_confluence")},onError:(t,n)=>{let{organizationId:i,toggleAction:l}=n;o.Tb(t),e.setQueryData(p(i),e=>({...e,enabled:"disable"===l}))},onSettled:(t,n,i)=>{let{organizationId:l}=i;e.invalidateQueries(p(l))}})},f=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>{let{organizationId:t,domainId:n,domainName:i}=e;return c.setConfluenceDomain(t,n,i)},onSuccess:(t,n)=>{let{organizationId:i,domainName:l}=n;e.invalidateQueries(p(i)),(0,m.L9)("confluence_domain_changed",{team_id:i,new_domain:l})},onError:e=>{o.Tb(e)}})};(l=s||(s={})).smart_embed="smart_embed",l.embed_scrollable="embed_scrollable",l.html="html";let g=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>{let{organizationId:t,confluenceExportType:n}=e;return u.Z.editTeam(t,{confluence_export_type:n})},onSuccess:(t,n)=>{let{organizationId:i,confluenceExportType:l}=n;e.invalidateQueries(p(i)),(0,m.L9)("confluence_export_type_changed",{team_id:i,new_type:l})},onError:e=>{o.Tb(e)}})},b=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>{let{organizationId:t}=e;return u.Z.editTeam(t,{confluence_auth:null})},onSuccess:(t,n)=>{let{organizationId:i}=n;e.invalidateQueries(p(i)),(0,m.L9)("confluence_disconnected",{team_id:i})},onError:e=>{o.Tb(e)}})}},48365:function(e,t,n){n.d(t,{N:function(){return o}});var i=n(54062),l=n(56552),a=n(23042);let s=async e=>a.Sl.patch("users/",e,!0);function o(){let e=(0,l.useQueryClient)(),{mutateAsync:t}=(0,l.useMutation)(s,{onSuccess:()=>{e.invalidateQueries(i.qA)},onError:e=>{console.error("Error updating growth state:",e)}});return{updateGrowthState:t}}},63065:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(58109);let l=e=>e.includes("insights")&&e.includes("documents")?"top_documents":e.includes("insights")&&e.includes("users")?"top_users":e.includes("documents")?"all_docs":e.includes("tasks")?"tasks":"teams"===e?"team_directory":"review"===e?"review_queue":e.split("__")[0];function a(){return l((0,i.Z)().slice(1).toLowerCase().trim())}},40129:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(16125),l=n(67787),a=n(10975),s=n(54062);function o(){var e;let{data:t}=(0,s.BP)(),{userDocumentsInActiveTeam:n}=(0,i.v9)(l.bk),o=null==t?void 0:t.usage_limits_enabled;return{isHardUsageLimitReached:o&&(0,a.TV)(null==t?void 0:null===(e=t.active_organization)||void 0===e?void 0:e.super_organization)&&(null==n?void 0:n.length)>10,isHardUsageLimitEnabled:o}}},18378:function(e,t,n){n.d(t,{F:function(){return l}});var i=n(3228);let l=(0,i.P1)(e=>e.flagsmith.flags,e=>e);(0,i.P1)(e=>e.flagsmith,e=>e)},18575:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(16125),l=n(24304);function a(e){return(0,i.v9)(t=>(0,l.Rf)(t,{document:e}))}},4941:function(e,t,n){var i=n(24246),l=n(21947),a=n(94033),s=n(65801),o=n(94513);t.Z=e=>{let{onCancel:t,onConfirm:n,message:r}=e;return(0,i.jsx)(o.Z,{visible:!0,onCancel:t,className:"overflow-hidden",children:(0,i.jsxs)("div",{className:"-mt-4 flex flex-col items-start",children:[(0,i.jsxs)("div",{className:"flex flex-row",children:[(0,i.jsx)(a.G,{className:"mr-4 h-12 w-12 flex-none text-yellow-500",icon:l.ik8}),(0,i.jsxs)("div",{className:"text-left",children:[(0,i.jsx)("h1",{className:"mb-2 mt-0 text-xl font-semibold text-slate-900",children:"Confirm Owner Change"}),(0,i.jsx)("p",{className:"mb-6 mt-0 text-left text-sm text-slate-600",children:null!=r?r:"After you change the owner, you may no longer have access to this document. Are you sure you'd like to change the owner?"})]})]}),(0,i.jsxs)("div",{className:"-mx-6 -mb-6 flex w-[calc(100%_+_48px)] justify-end bg-slate-50 px-6 py-4",children:[(0,i.jsx)(s.Z,{variant:"secondary",size:"small",className:"mr-2",onClick:t,children:"Cancel"}),(0,i.jsx)(s.Z,{variant:"danger",size:"small",onClick:n,children:"Confirm Change"})]})]})})}},42364:function(e,t,n){n.d(t,{Z:function(){return tU}});var i,l,a,s,o,r,d=n(24246),c=n(28509),u=n(46519),m=n(22107),p=n(63879),x=n(22967),h=e=>{let{isVisible:t,onContinue:n,onClose:i}=e;return(0,d.jsxs)(p.UW,{open:!0,children:[(0,d.jsx)(p.rP,{asChild:!0,children:(0,d.jsx)("div",{className:"fixed -right-2 top-4 h-0 w-0"})}),(0,d.jsxs)(p.Nn,{className:(0,x.cn)("fixed !z-[10000000] w-[350px] transition duration-300 ease-out motion-reduce:transition-none",{"right-0 translate-x-full opacity-0":!t,"right-6 translate-x-0":t}),sideOffset:-40,align:"center",withArrow:!0,primaryAction:()=>null==n?void 0:n(),primaryActionText:"View Sidekick",secondaryActionText:"Got it!",secondaryAction:()=>null==i?void 0:i(),showCloseButton:!0,onCloseAction:()=>null==i?void 0:i(),children:[(0,d.jsx)(p.lj,{title:"Added to Sidekick!",icon:m.JyM}),(0,d.jsx)(p.He,{children:(0,d.jsx)("div",{className:"!mb-4",children:"Access Scribe Sidekick through the Scribe extension"})}),(0,d.jsx)(p.Pj,{children:(0,d.jsx)("img",{src:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/SidekickCalloutImage.png",width:"100%",height:"auto",alt:"Sidekick extension location is in the toolbar of the browser",className:"!rounded-lg"})})]})]})},v=n(54062),f=n(21352),g=n(56552),b=n(16125),_=n(22172),w=n(56985),j=e=>{let t=["document_candidates",e],n=(0,g.useQueryClient)(),i=(0,b.I0)(),{data:l=[],isLoading:a,refetch:s}=(0,g.useQuery)(t,async()=>{try{let t=await _.Z.getCandidatesWithPermission(e);return i(w.T_.fulfilled(t)),t}catch(e){return i(w.T_.rejected(e)),[]}},{enabled:!!e});return{candidates:l,isLoadingCandidates:a,refetch:s,invalidate:()=>{n.invalidateQueries(t)}}},y=n(99006),N=n(4910),C=n(73174),k=n(62136),S=e=>{let t=["document_users_permission",e],n=(0,g.useQueryClient)(),i=(0,b.I0)(),{data:l=[],isLoading:a,refetch:s}=(0,g.useQuery)(t,async()=>{try{let t=await _.Z.getUsersWithPermission(e);return i(w.Zh.fulfilled(t)),t}catch(e){return i(w.Zh.rejected(e)),[]}},{enabled:!!e});return{users:Array.isArray(l)?l.map(e=>({...e,permission_level:200===e.permission_level?k.yz.Write:k.yz.Read})):[],isLoadingUsersWithPermission:a,refetch:s,invalidate:()=>{n.invalidateQueries(t)}}},L=n(48365),P=n(40129),z=n(66729),E=n(27378),Z=n(561),I=n(8022),T=n(12068),M=n(18575),F=e=>{var t;let[n,i]=(0,E.useState)(null),[l,a]=(0,E.useState)(!1),{data:s}=(0,v.BP)(),o=(0,M.Z)(e),{visibleActions:r,initialClientSideActionLoadComplete:d}=(0,b.v9)(I.JR),c=d?r:[];(0,E.useEffect)(()=>{!async function(){try{let[e,t]=await Promise.all([(0,T.PZ)(),(0,T.LB)()]);i(e),a(t)}catch(e){i(null),a(!1)}}()},[]);let u=l&&(0,T.Hu)(n,"2.2.35"),m=Z.un||Z.i7,p=(null==s?void 0:s.shared_first_scribe)&&(null==s?void 0:s.first_created_scribe_id)&&(null==s?void 0:s.first_created_scribe_id.length),x=null==c?void 0:null===(t=c.find(e=>!!(null==e?void 0:e.url)))||void 0===t?void 0:t.url;return{isEligibleForSidekickIntroduction:m&&u&&!!p&&(null==o?void 0:o.can_edit)&&!!x,firstStepURL:x}},D=n(80125),A=n(86677),O=n(41127),R=n(12320),B=n(62889),V=n(10975),G=n(17654),q=n(42171),Q=n(94513),W=n(29582),U=n(19973),H=n(38579),K=n.n(H),J=n(48407),Y=n(7131),$=n(1581);let X=e=>{let{onClick:t,formatName:n,disabled:i,buttonName:l}=e,a=(0,d.jsx)(J.z,{className:"bg-white",variant:"secondary",onClick:t,disabled:i,children:l||"Export"});return i?(0,d.jsx)($.pn,{children:(0,d.jsxs)($.u,{children:[(0,d.jsx)($.aJ,{children:(0,d.jsx)("div",{children:a})}),(0,d.jsxs)($._v,{side:"top",className:"h-auto p-4",children:[n," export is disabled for this organization."]})]})}):a};var ee=e=>{let{showPdfExport:t,onPdfExport:n,showDocxExport:i,onDocxExport:l,showHtmlExport:a,onHtmlExport:s,showMarkdownExport:o,onMarkdownExport:r,showConfluenceExport:c,onConfluenceExport:u,isFree:m,isPdfExportUnavailable:p}=e;return(0,d.jsxs)("div",{className:"space-y-6 bg-white pb-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(K(),{height:51,width:24,src:"/images/fileShareModal/pdf.svg",alt:"PDF logo"}),(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("p",{className:"m-0 text-sm text-slate-900",children:"Export to PDF"}),p&&(0,d.jsx)(Y.g,{className:"ml-1.5 cursor-pointer",variant:"light",onClick:n})]})}),(0,d.jsx)(X,{onClick:n,buttonName:p&&"Preview",disabled:!t,formatName:"PDF"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(K(),{height:51,width:24,src:"/images/fileShareModal/html.svg",alt:"HTML logo"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("p",{className:"m-0 text-sm text-slate-900",children:"Export to HTML"}),m&&(0,d.jsx)(Y.g,{className:"ml-1.5 cursor-pointer",variant:"light",onClick:s})]}),(0,d.jsx)("p",{className:"m-0 text-xs text-slate-400",children:"Works well with Microsoft Word, Google Docs and other apps."})]}),(0,d.jsx)(X,{onClick:s,disabled:!a,formatName:"HTML"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(K(),{height:51,width:24,src:"/images/fileShareModal/markdown.svg",alt:"Markdown logo"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("p",{className:"m-0 text-sm text-slate-900",children:"Export to Markdown"}),m&&(0,d.jsx)(Y.g,{className:"ml-1.5 cursor-pointer",variant:"light",onClick:r})]}),(0,d.jsx)("p",{className:"m-0 text-xs text-slate-400",children:"Works well with Notion, GitHub and other apps."})]}),(0,d.jsx)(X,{onClick:r,disabled:!o,formatName:"Markdown"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(K(),{height:51,width:24,src:"/images/fileShareModal/docx.svg",alt:"Word logo"}),(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("p",{className:"m-0 text-sm text-slate-900",children:"Export to Microsoft Word"}),m&&(0,d.jsx)(Y.g,{className:"ml-1.5 cursor-pointer",variant:"light",onClick:l})]})}),(0,d.jsx)(X,{onClick:l,disabled:!i,formatName:"Docx"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(K(),{height:51,width:24,src:"/images/fileShareModal/confluence.svg",alt:"Confluence logo"}),(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("p",{className:"m-0 text-sm text-slate-900",children:"Export to Confluence"}),m&&(0,d.jsx)(Y.g,{className:"ml-1.5 cursor-pointer",variant:"light",onClick:u})]})}),(0,d.jsx)(X,{onClick:u,disabled:!c,formatName:"Confluence"})]})]})},et=n(43044),en=n(87846),ei=n(35286),el=(0,E.memo)(e=>{let{title:t,description:n,image:i,blurredBg:l,showBadge:a,badgeTitle:s,className:o,onClick:r}=e,[c,u]=(0,E.useState)(!1),m="string"==typeof i?(0,d.jsx)("div",{style:{backgroundImage:"url(".concat(l,")")},className:"relative overflow-hidden bg-cover bg-no-repeat object-cover ".concat(c?"!blur-none":"animate-pulse blur-md"),children:(0,d.jsx)("img",{src:i,className:"flex w-full transform overflow-hidden object-cover transition-all duration-200 ease-out group-hover:scale-105",alt:"".concat(t," Share Option"),width:280,height:381,loading:"lazy",onLoad:()=>{u(!0)}})}):(0,d.jsx)("div",{className:"flex flex-1 transform overflow-hidden transition-all duration-100 ease-out group-hover:scale-105 group-hover:opacity-80",children:i});return(0,d.jsxs)("button",{onClick:r,style:{boxShadow:"0px 1px 3px 0px rgba(15, 23, 42, 0.10), 0px 1px 2px -1px rgba(15, 23, 42, 0.10)"},className:(0,ei.cn)("group flex h-[493px] w-[280px] cursor-pointer flex-col overflow-hidden rounded-md bg-transparent p-0 transition-all duration-200 ease-out hover:bg-slate-50","focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2",o),children:[(0,d.jsx)("div",{className:"flex overflow-hidden",children:m}),(0,d.jsxs)("div",{className:"flex flex-col p-4 pb-6",children:[(0,d.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,d.jsx)("span",{className:"text-base text-slate-800",children:t}),a?(0,d.jsx)(en.C,{variant:"success",className:"ml-2",children:s||"Recommended"}):null]}),(0,d.jsx)("span",{className:"text-left text-sm text-slate-500",children:n})]})]})});let ea=e=>{let{onSelectOption:t}=e;return(0,E.useEffect)(()=>{(0,q.L9)("viewed_first_share_modal")},[]),(0,d.jsx)(et.Vq,{open:!0,children:(0,d.jsx)(et.cZ,{scrollable:!1,className:"flex max-h-dvh min-h-max min-w-max items-center justify-center rounded-none bg-transparent shadow-none",children:(0,d.jsxs)("div",{className:"flex w-auto flex-col",children:[(0,d.jsx)("h3",{className:"mb-4 mt-0 font-sans text-2xl font-extrabold text-white drop-shadow-lg",children:"Select how you’d like to share"}),(0,d.jsxs)("div",{className:"flex min-w-max space-x-4 rounded-2xl bg-white p-4 shadow-xl",children:[(0,d.jsx)(el,{title:"Send a Link",description:"Share with anyone — or update settings so your team has access",showBadge:!0,image:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/features/first-share/link.png",blurredBg:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/features/first-share/link-small.jpg",onClick:()=>{(0,q.L9)("selected_first_share_option",{option:"people"}),t("people")}}),(0,d.jsx)(el,{title:"Add to a platform",description:"Embed in SharePoint, HubSpot, Notion, other wikis and help centers",image:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/features/first-share/embed.png",blurredBg:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/features/first-share/embed-small.jpg",showBadge:!0,onClick:()=>{t("smart-embed"),(0,q.L9)("selected_first_share_option",{option:"smart-embed"})}}),(0,d.jsx)(el,{title:"Export your content",description:"Get a PDF to print or export to a Word doc, HTML, and more",image:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/features/first-share/export.png",blurredBg:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/features/first-share/export-small.jpg",onClick:()=>{t("export"),(0,q.L9)("selected_first_share_option",{option:"export"})}})]})]})})})};var es=e=>{let{open:t,onPrimaryActionClick:n,onSecondaryActionClick:i,onClose:l,children:a}=e;return(0,d.jsxs)(p.UW,{open:t,children:[(0,d.jsx)(p.rP,{className:"inline-grid bg-inherit p-0 focus-visible:outline-none",children:a}),(0,d.jsxs)(p.Nn,{"data-testid":"interactive-embed-callout",className:"!z-[1000000]",showCloseButton:!0,primaryAction:()=>{n(),(0,q.L9)("click_embed_callout_try_now")},primaryActionText:"Try Now!",secondaryAction:()=>{i(),(0,q.L9)("click_embed_callout_maybe_later")},secondaryActionText:"Maybe Later",withArrow:!0,side:"right",onCloseAction:()=>{l(),(0,q.L9)("click_embed_callout_x")},children:[(0,d.jsx)(p.lj,{title:"Lights, camera, action!",icon:m.IyC}),(0,d.jsx)(p.Pj,{children:(0,d.jsx)(K(),{src:"/images/fileShareModal/MovieinAction.gif",width:272,height:214,alt:"Placeholder for Embed GIF",className:"!rounded-lg"})}),(0,d.jsx)(p.He,{children:"Embed your Scribe as a movie! Perfect for demonstrating a process from start to finish. Optional audio narration included."})]})]})},eo=n(15057),er=n(4238),ed=n(8187),ec=n(83469),eu=n(22730);let em=e=>{let{href:t,appName:n,children:i}=e;return(0,d.jsx)(J.z,{href:t,target:"_blank",variant:"ghost","data-testid":"embed-".concat(n,"-button"),darkMode:!0,className:"flex h-12 flex-1 items-center justify-center gap-2 rounded-lg p-5",onClick:()=>{(0,q.L9)("click_app_embed_instructions",{app_instructions_name:n})},children:i})};var ep=e=>{let{onPopoverOpen:t}=e,[n,i]=(0,E.useState)(!1),l=e=>{i(e),t(e)};return(0,d.jsxs)(eu.J2,{open:n,onOpenChange:l,children:[(0,d.jsx)(eu.xo,{onMouseEnter:()=>l(!0),asChild:!0,onClick:()=>{(0,q.L9)("click_how_to_embed_link")},children:(0,d.jsx)("div",{className:"cursor-pointer select-none pl-2 font-normal",children:(0,d.jsx)("div",{className:"text-sm text-slate-600 underline",children:"Learn How"})})}),(0,d.jsx)(eu.yk,{asChild:!0,side:"bottom",align:"start",alignOffset:-85,onFocusOutside:e=>{e.preventDefault()},children:(0,d.jsxs)("div",{className:"z-[1000000] flex !w-[248px] min-w-[150px] max-w-[400px] flex-col content-center items-start gap-4 py-1",children:[(0,d.jsx)("div",{className:"flex flex-col content-center items-start gap-2 self-stretch",children:(0,d.jsx)("div",{className:"self-stretch text-start text-sm font-semibold leading-5 text-slate-100",children:"Select your platform to access a step-by-step guide to embeds"})}),(0,d.jsxs)("div",{className:"flex flex-col items-start gap-3 self-stretch",children:[(0,d.jsxs)("div",{className:"flex flex-wrap content-start items-start gap-3 self-stretch",children:[(0,d.jsx)(em,{href:"https://support.scribehow.com/hc/en-us/articles/7006767958429-Setting-up-and-using-the-Confluence-integration",appName:"confluence",children:(0,d.jsx)(K(),{width:20,height:18,src:"/images/fileShareModal/embedLogos/confluenceLogo.svg",alt:"Confluence Logo"})}),(0,d.jsx)(em,{href:"https://support.scribehow.com/hc/en-us/articles/7006552612637-Zendesk",appName:"zendesk",children:(0,d.jsx)(K(),{width:16,height:16,src:"/images/fileShareModal/embedLogos/zendeskLogo.svg",alt:"Zendesk Logo"})}),(0,d.jsx)(em,{href:"https://support.scribehow.com/hc/en-us/articles/17143619189789-Salesforce-Knowledge",appName:"salesforce",children:(0,d.jsx)(K(),{width:24,height:18,src:"/images/fileShareModal/embedLogos/salesforceLogo.svg",alt:"Salesforce Logo"})})]}),(0,d.jsxs)("div",{className:"flex flex-wrap content-start items-start gap-3 self-stretch",children:[(0,d.jsx)(em,{href:"https://support.scribehow.com/hc/en-us/articles/7005733928349-Hubspot",appName:"hubspot",children:(0,d.jsx)(K(),{width:18,height:18,src:"/images/fileShareModal/embedLogos/hubspotLogo.svg",alt:"Hubspot Logo"})}),(0,d.jsx)(em,{href:"https://support.scribehow.com/hc/en-us/articles/7006750518557-WordPress",appName:"wordpress",children:(0,d.jsx)(K(),{width:24,height:24,src:"/images/fileShareModal/embedLogos/wordpressLogo.svg",alt:"Wordpress Logo"})}),(0,d.jsx)(em,{href:"https://support.scribehow.com/hc/en-us/articles/7005641026077-SharePoint",appName:"sharepoint",children:(0,d.jsx)(K(),{width:24,height:24,src:"/images/fileShareModal/embedLogos/sharepointLogo.svg",alt:"Sharepoint Logo"})})]})]}),(0,d.jsx)("div",{children:(0,d.jsx)(J.z,{variant:"link",href:"https://support.scribehow.com/hc/en-us/sections/7004770413853-Smart-Embed",target:"_blank",darkMode:!0,iconProps:{className:"text-slate-400"},icon:ec.wlW,onClick:()=>{(0,q.L9)("click_app_embed_instructions",{app_instructions_name:"view_more_platforms"})},children:"View more platforms"})})]})})]})},ex=n(94033),eh=n(49159),ev=e=>{let{view:t,onSelectView:n}=e;return(0,d.jsxs)("div",{className:"pb-6 pt-4",children:[(0,d.jsx)("div",{className:"mb-4 flex items-center justify-between gap-2 self-stretch",children:(0,d.jsx)("div",{className:(0,x.cn)("select-none bg-transparent pl-1 font-sans text-[11px] font-medium uppercase leading-4 tracking-[.22px] text-slate-500"),children:"Viewing Mode"})}),(0,d.jsx)("div",{className:"flex items-start gap-4 self-stretch px-1",children:Object.keys(k.Ct).map(e=>(0,d.jsxs)("button",{className:(0,x.cn)("flex w-full cursor-pointer items-center justify-center gap-2 rounded-md px-4 py-3",{"bg-indigo-50 shadow-[0px_0px_0px_2px_rgba(114,121,248,0.25),0px_0px_0px_1px_#FFF_inset,0px_0px_0px_1px_#A2A8FB]":t===k.Ct[e],"bg-slate-50 shadow-[0px_0px_0px_1px_#FFF_inset,0px_0px_0px_1px_rgba(128,150,173,0.20)]":t!==k.Ct[e]}),onClick:()=>{n(k.Ct[e]),(0,q.L9)("click_embed_view_format",{view_format:k.Ct[e]})},children:[t===k.Ct[e]&&(0,d.jsx)(ex.G,{icon:ec.LEp}),e,"Movie"===e&&(0,d.jsx)(eh.Z,{className:"bg-brand-100",textClassName:"text-brand-700"})]}))})]})};let ef=e=>"Embed ".concat(e?"Pages":"Scribes"," directly into my team's favorite tools."),eg=()=>(0,d.jsxs)("div",{className:"mb-2 flex h-[400px] w-full flex-col items-start justify-center rounded border border-slate-700 border-opacity-10 bg-gradient-to-r from-white to-slate-50 p-8 shadow",children:[(0,d.jsx)(ed.O,{className:"mb-5 h-16 w-16 !rounded-full"}),(0,d.jsx)(ed.O,{className:"mb-2 h-14 w-full rounded-lg"}),(0,d.jsx)(ed.O,{className:"mb-2 h-5 w-40 rounded-lg"}),(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)(ed.O,{className:"mb-2 mr-2 h-5 w-24 rounded-lg"}),(0,d.jsx)(ed.O,{className:"h-5 w-24 rounded-lg"})]})]}),eb=()=>(0,d.jsxs)("div",{className:"mb-2 flex h-[400px] w-full flex-col items-center justify-center rounded border border-slate-700 border-opacity-10 bg-gradient-to-r from-white to-slate-50 p-8 shadow",children:[(0,d.jsx)(ed.O,{className:"mb-5 h-10 w-10 !rounded-full"}),(0,d.jsx)(ed.O,{className:"mb-3 h-10 w-full rounded-lg"}),(0,d.jsxs)("div",{className:"flex-start flex gap-2",children:[(0,d.jsx)(ed.O,{className:"h-4 w-[70px] rounded-lg"}),(0,d.jsx)(ed.O,{className:"h-4 w-[70px] rounded-lg"}),(0,d.jsx)(ed.O,{className:"h-4 w-[70px] rounded-lg"})]})]}),e_=e=>{let{iframeSrc:t,embedView:n,isKnowledgePage:i}=e,[l,a]=(0,E.useState)(!1),s=n===k.Ct.Movie&&!i;return(0,E.useEffect)(()=>{a(!1)},[t]),(0,d.jsxs)(d.Fragment,{children:[!l&&(s?(0,d.jsx)(eb,{}):(0,d.jsx)(eg,{})),(0,d.jsx)("div",{className:"rounded-md border border-slate-950 border-opacity-10 bg-white shadow",style:{overflow:"hidden",width:"100%",height:s?"358px":"370px",margin:"auto",display:l?"block":"none",marginBottom:"8px"},children:(0,d.jsx)("iframe",{src:t,className:"h-full w-full bg-white",title:"Embed Preview",style:{transform:s?"scale(0.65)":"scale(0.7)",width:s?"153.85%":"142.86%",height:s?"153.85%":"142.86%",transformOrigin:"top left"},onLoad:()=>a(!0)})})]})};var ew=e=>{let{document:t,setEmbedSnippet:n,embedView:i,onEmbedViewChange:l,onPopoverOpen:a}=e,{iframeSrc:s,embedSnippet:o}=(0,eo.ZP)({document:t,embedView:i,queryParams:{modalPreview:!0}}),r=(null==t?void 0:t.type)===k.rZ.KnowledgePage,{enabled:m,ready:p}=(0,u.Z)(c.E5);(0,E.useEffect)(()=>{n&&n(o)},[o,n]);let{updateScribeFile:h}=(0,er.c)(null==t?void 0:t.id,{enabled:!r}),v=(0,E.useCallback)(e=>{r||e!==k.Ct.Movie||(null==t?void 0:t.is_video_embed_enabled)||h({is_video_embed_enabled:!0})},[t,r,h]);return(0,E.useEffect)(()=>{v(i)},[i,v]),(0,d.jsxs)("div",{"data-testid":"interactive-embed-tab",children:[(0,d.jsxs)("div",{className:(0,x.cn)("mb-6 flex items-center self-stretch pl-1 text-sm font-normal text-slate-600"),"data-testid":"embed-tab-header-text",children:[ef(r),p&&!m&&(0,d.jsx)(ep,{onPopoverOpen:a})]}),(0,d.jsxs)("div",{className:(0,x.cn)("overflow-hidden bg-white",{"mb-4":r}),children:[(0,d.jsx)(e_,{iframeSrc:s,embedView:i,isKnowledgePage:r}),!r&&(0,d.jsx)(ev,{view:i,onSelectView:e=>{l(e),v(e)}})]})]})},ej=n(39011),ey=n(51907),eN=n(83449),eC=n(53924);let ek="/images/fileShareModal/embedLogos",eS="https://support.scribehow.com/hc/en-us/articles";(i=s||(s={})).Confluence="Confluence",i.Hubspot="Hubspot",i.Notion="Notion",i.Salesforce="Salesforce",i.ServiceNow="ServiceNow",i.SharePoint="SharePoint",i.Teams="Teams",i.Wordpress="Wordpress",i.Zendesk="Zendesk",i.Other="Embed in most tools",(l=o||(o={})).CopyEmbedCode="Copy Embed Code",l.CopyEmbedLink="Copy Embed Link";let eL=e=>e&&"Embed in most tools"!==e?"How to embed in ".concat(e):"How to embed",eP={Confluence:{name:"Confluence",copyButtonText:"Copy Embed Code",helpButtonText:eL("Confluence"),helpArticleLink:"".concat(eS,"/7006767958429-Setting-up-and-using-the-Confluence-integration"),iconPath:"".concat(ek,"/confluenceLogo.svg")},Hubspot:{name:"Hubspot",copyButtonText:"Copy Embed Code",helpButtonText:eL("Hubspot"),helpArticleLink:"".concat(eS,"/7005733928349-Hubspot"),iconPath:"".concat(ek,"/hubspotLogo.svg")},Notion:{name:"Notion",copyButtonText:"Copy Embed Link",helpButtonText:eL("Notion"),helpArticleLink:"".concat(eS,"/7005654563997-Notion"),iconPath:"".concat(ek,"/notionLogo.svg")},Salesforce:{name:"Salesforce",copyButtonText:"Copy Embed Code",helpButtonText:eL("Salesforce"),helpArticleLink:"".concat(eS,"/17143619189789-Salesforce-Knowledge"),iconPath:"".concat(ek,"/salesforceLogo.svg")},ServiceNow:{copyButtonText:"Copy Embed Code",name:"ServiceNow",helpButtonText:eL("ServiceNow"),helpArticleLink:"https://scribehow.com/shared/Embedding_a_Scribe_in_ServiceNow__ixHJyEDqTNqmmFzQhRCJ1w",iconPath:"".concat(ek,"/servicenowLogo.svg")},SharePoint:{name:"SharePoint",copyButtonText:"Copy Embed Code",helpButtonText:eL("SharePoint"),helpArticleLink:"".concat(eS,"/7005641026077-SharePoint"),iconPath:"".concat(ek,"/sharepointLogo.svg")},Teams:{name:"Teams",copyButtonText:"Copy Embed Link",helpButtonText:eL("Teams"),helpArticleLink:"".concat(eS,"/9885086046365-Microsoft-Teams"),iconPath:"".concat(ek,"/teamsLogo.svg")},Wordpress:{name:"Wordpress",copyButtonText:"Copy Embed Code",helpButtonText:eL("Wordpress"),helpArticleLink:"".concat(eS,"/7006750518557-WordPress"),iconPath:"".concat(ek,"/wordpressLogo.svg")},Zendesk:{name:"Zendesk",copyButtonText:"Copy Embed Link",helpButtonText:eL("Zendesk"),helpArticleLink:"".concat(eS,"/7006552612637-Zendesk"),iconPath:"".concat(ek,"/zendeskLogo.svg")},"Embed in most tools":{name:"Other",copyButtonText:"Copy Embed Code",dropdownSubheader:"Any tool that accepts iframes",helpButtonText:eL("Embed in most tools"),helpArticleLink:"".concat(eS,"/22104504889245-How-to-Embed-a-Scribe-into-your-website-or-Knowledge-base")}},ez=(e,t)=>{let n=e===k.Ct.Movie;return[{label:"Flexible (100% wide)",value:k.wk.Flexible},{label:"Fixed (".concat(n&&!t?eo._q:eo.Lb,"px wide)"),value:k.wk.Fixed}]};var eE=e=>{let{isKnowledgePage:t,embedCode:n,onProTagClick:i,onMenuOpen:l,onClick:a,embedView:s,buttonText:r=o.CopyEmbedCode}=e,{isFreeAccount:c}=(0,ey.Z)(),{isSizeFixed:u,toggleFixedSize:m,skipIntroduction:p,toggleSkipIntroduction:x,removeLogo:h,toggleRemoveLogo:v}=(0,f.Z)(),g=ez(s,t);return(0,d.jsxs)("div",{className:"flex w-full items-center self-stretch",children:[(0,d.jsx)(eC.u,{className:"w-full rounded-r-none",onClick:e=>{a(e)},url:n,buttonText:r,showIcon:!1}),(0,d.jsxs)(eN.h_,{modal:!1,onOpenChange:e=>{l(e)},children:[(0,d.jsx)(eN.$F,{asChild:!0,children:(0,d.jsx)(J.z,{"data-testid":"embed-customization-settings-button",className:"rounded-l-none",icon:ec.cRF,onClick:()=>(0,q.L9)("click_embed_settings")})}),(0,d.jsxs)(eN.AW,{sideOffset:12,onFocusOutside:e=>e.preventDefault(),className:"z-[1000000] w-auto min-w-[27px]",children:[(0,d.jsx)(eN.Ju,{children:"Size"}),(0,d.jsx)(eN._x,{value:u?k.wk.Fixed:k.wk.Flexible,children:g.map(e=>(0,d.jsx)(eN.qB,{value:e.value,onSelect:t=>{t.preventDefault(),(u&&e.value===k.wk.Flexible||!u&&e.value===k.wk.Fixed)&&m()},children:e.label},e.value))}),!t&&(0,d.jsx)(eN.VD,{}),!t&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eN.Ju,{children:"Appearance"}),(0,d.jsx)(eN.bO,{checked:p,onSelect:e=>e.preventDefault(),onCheckedChange:()=>x(),children:"Skip introduction"}),(0,d.jsx)(eN.bO,{checked:h,onSelect:e=>{e.preventDefault()},onCheckedChange:()=>{c||v()},showTag:c,tagComponent:(0,d.jsx)(Y.g,{className:"cursor-pointer",onClick:()=>{i()}}),children:"Remove logo"})]})]})]})]})},eZ=n(80011);(a=r||(r={})).CopyEmbedCode="copy_embed_code",a.LearnHowClicked="learn_how_clicked",a.DropdownScrolled="dropdown_scrolled",a.PlatformSelected="platform_selected",a.PlatformDropdownOpen="platform_dropdown_open";let eI={trackPlatformDropdownOpen:()=>{(0,q.L9)("platform_dropdown_open")},trackPlatformSelected:e=>{(0,q.L9)("platform_selected",{platform:e})},trackCopyEmbedCode(e){(0,q.L9)("copy_embed_code",e)},trackLearnHowClicked:e=>{(0,q.L9)("learn_how_clicked",{platform:e})},trackDropdownScrolled:()=>{(0,q.L9)("dropdown_scrolled")}},eT=(0,E.memo)(e=>{let{name:t}=e,{iconPath:n}=eP[t];return(0,d.jsxs)("div",{className:"flex items-center gap-2 font-normal",children:[n?(0,d.jsx)(K(),{width:20,height:18,src:n,alt:t,className:(0,x.cn)("size-4",t===s.Wordpress&&"rounded-full bg-slate-800")}):(0,d.jsx)(ex.G,{icon:ec.g4A,className:"size-4 text-slate-400"}),t]})});var eM=e=>{let{onMenuOpen:t,selectedPlatform:n,onSelectPlatform:i}=e,l=(0,E.useRef)(!1);return(0,d.jsxs)(eN.h_,{modal:!1,onOpenChange:t,children:[(0,d.jsx)(eN.$F,{asChild:!0,children:(0,d.jsx)(J.z,{"aria-label":"Select an embed platform",variant:"secondary",icon:ec.gc2,iconPosition:"right",className:"flex w-1/2 justify-between","data-testid":"embed-platform-picker-trigger",onClick:()=>eI.trackPlatformDropdownOpen(),children:(0,d.jsx)(eT,{name:n})})}),(0,d.jsx)(eN.AW,{side:"top",align:"start",className:"z-[1000000] w-72",onFocusOutside:e=>e.preventDefault(),onScrollCapture:()=>{l.current||(l.current=!0,eI.trackDropdownScrolled())},children:(0,d.jsx)(eZ.x,{theme:"dark",type:"auto",className:"h-72",onScrollCapture:()=>{l.current||(l.current=!0,eI.trackDropdownScrolled())},children:(0,d.jsx)(eN._x,{value:n,onValueChange:e=>{i(e),eI.trackPlatformSelected(eP[e].name)},children:Object.entries(eP).map(e=>{let[t,{dropdownSubheader:n}]=e;return(0,d.jsxs)(eN.qB,{className:(0,x.cn)("w-full space-y-1 text-ellipsis",{"h-10 [&>div]:items-start":!!n}),value:t,children:[(0,d.jsx)(eT,{name:t}),n&&(0,d.jsx)("div",{className:"pl-6 text-xs text-slate-400",children:n})]},t)})})})})]})},eF=e=>{let{onMenuOpen:t,selectedPlatform:n,onSelectPlatform:i}=e,{helpArticleLink:l,helpButtonText:a}=eP[n];return(0,d.jsxs)("div",{"data-testid":"embed-platform-picker",className:"flex w-full items-center justify-between gap-4 self-stretch",children:[(0,d.jsx)(eM,{onMenuOpen:t,selectedPlatform:n,onSelectPlatform:i}),(0,d.jsxs)(J.z,{variant:"secondary",href:l,target:"_blank","aria-label":"How to embed",className:"relative flex w-1/2 items-center gap-1","data-testid":"how-to-embed-button",onClick:()=>eI.trackLearnHowClicked(eP[n].name),children:[(0,d.jsx)("span",{className:"flex-shrink-0",children:(0,d.jsx)(ex.G,{icon:ec.wlW})}),(0,d.jsx)("span",{className:"truncate",children:a})]})]})},eD=e=>{let{document:t,embedSnippet:n,embedView:i,onProTagClick:l,onMenuOpen:a}=e,{updateGrowthState:r}=(0,L.N)(),{enabled:m,ready:p}=(0,u.Z)(c.E5),{skipIntroduction:x,removeLogo:h,isSizeFixed:v,iframeSrc:f}=(0,eo.ZP)({document:t,embedView:i,queryParams:{modalPreview:!0}}),g=(null==t?void 0:t.type)==="knowledge_page",[b,_]=(0,E.useState)(s.Other),{buttonText:w,urlOrSnippet:j}=(0,E.useMemo)(()=>p&&m?{buttonText:eP[b].copyButtonText,urlOrSnippet:eP[b].copyButtonText===o.CopyEmbedCode?n:f}:{buttonText:o.CopyEmbedCode,urlOrSnippet:n},[p,m,b,n,f]);return(0,d.jsx)("div",{className:"sticky bottom-0 flex border-slate-200 bg-slate-50 px-4 py-4",style:{borderTop:"1px solid rgba(2, 6, 23, 0.05)",boxShadow:"0px 2px 2px 0px rgba(15, 23, 42, 0.05)"},children:(0,d.jsxs)("div",{className:"flex w-full flex-col content-center items-start gap-3 px-2",children:[(0,d.jsx)(eE,{isKnowledgePage:g,onProTagClick:l,onClick:()=>{eI.trackCopyEmbedCode({platform:b,id:t.id,script:n,format:i,customization:{intro_skipped:x,logo_removed:h,size:v?"fixed":"flexible"}}),r({hasEmbeddedScribe:!0});try{ej.Z.trackCopyEmbed(t.id,i)}catch(e){}},embedCode:j,onMenuOpen:a,embedView:i,buttonText:w}),!p&&(0,d.jsx)("div",{className:"px-4 pb-4",children:(0,d.jsx)(ed.O,{className:"h-[34px] rounded-md"})}),m&&(0,d.jsx)(eF,{onMenuOpen:a,selectedPlatform:b,onSelectPlatform:_})]})})},eA=n(78483),eO=e=>{let{open:t,url:n,onCancel:i,onAction:l}=e;return(0,d.jsx)(et.Vq,{open:t,children:(0,d.jsx)(et.cZ,{className:"z-[1000000] max-h-screen max-w-full",children:(0,d.jsxs)("div",{className:"flex h-screen w-screen flex-col",children:[(0,d.jsxs)(eA.j,{className:"fixed !rounded-none",childrenClassName:" flex justify-between pl-4 pr-4",variant:"dark",onClose:i,showClose:!0,children:[(0,d.jsx)(K(),{height:29,width:95,className:"h-6 w-[70px]",src:"/logo-white.svg",alt:"Scribe logo"}),(0,d.jsx)("span",{className:"text-sm font-medium leading-5",children:"This is just a preview. Upgrade to Pro to unlock PDF exports and custom branding options"}),(0,d.jsx)(J.z,{onClick:()=>l(),icon:ec.eFW,size:"small",variant:"primary",darkMode:!0,children:"Upgrade to Pro"})]}),(0,d.jsx)("iframe",{src:"".concat(n,"#toolbar=0&navpanes=0&scrollbar=0"),className:"h-full w-full",title:"PDF Preview"})]})})})},eR=n(84149),eB=n(23505),eV=n(98753);let eG=e=>["exportedDocument",e],eq=e=>{let{fileId:t,enabled:n}=e,i=E.useRef(0),[l,a]=E.useState(!1),s=async()=>(i.current+=1,await eV.Z.getScreenshotsPublicStatus(t));return{...(0,g.useQuery)({queryKey:eG(t),queryFn:s,refetchInterval:e=>(null==e?void 0:e.percentage)!==100&&(i.current>=60?(a(!0),!1):1e3),enabled:!!t&&n,refetchOnMount:!0,onSettled:(e,n)=>{(null==e?void 0:e.percentage)<100&&n?eB.Tb("".concat(n," FileId ").concat(t,", percentage ").concat(null==e?void 0:e.percentage)):(null==e?void 0:e.percentage)<100&&l&&eB.Tb("Maximum retries exceeded for getting screenshot public status. FileId ".concat(t,", percentage ").concat(null==e?void 0:e.percentage))}}),maxRetriesExceeded:l}};var eQ=n(43879),eW=n(63688),eU=n(77253),eH=n(60940),eK=n(67349),eJ=n(35391);let eY=(e,t)=>(0,eJ.u)({url:"/api/integrations/confluence/spaces/",method:"get",...e,signal:t}),e$=(e,t)=>{let{fetcherOptions:n,queryOptions:i,queryKeyFn:l}=(0,eK.V)(t);return g.useQuery({queryKey:l({path:"/api/integrations/confluence/spaces/",operationId:"apiIntegrationsConfluenceSpacesList",variables:e}),queryFn:t=>{let{signal:i}=t;return eY({...n,...e},i)},...t,...i})};var eX=n(37827),e0=e=>{let{hasMoreSpaces:t,organizationOwnerId:n,confluenceSpaces:i,selectedSpace:l,setSelectedSpace:a}=e,[s,o]=(0,E.useState)(""),[r,c]=(0,E.useState)(s);(0,eX.Z)(()=>{c(s)},eU.nH,[s]);let[u,p]=(0,E.useState)(!1),h=e$({queryParams:{query:r,org_id:n},isAuthenticated:!0},{enabled:""!==r&&""!==n&&t}),v=(0,E.useMemo)(()=>{let e=t&&h.data?h.data:i;return h.isLoading||t&&s!==r?e:!s&&l&&e&&!e.find(e=>e.id===l.id)?[l,...e]:""===s?e:e.filter(e=>{let{name:t}=e;return t.toLowerCase().includes(s.toLowerCase())})},[i,h.isLoading,h.data,l,s]);return(0,d.jsx)(eW.hQ,{value:null==l?void 0:l.id,onChange:e=>{a(v.find(t=>t.id===e))},children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("div",{className:"relative mb-6 box-border flex h-11 w-full cursor-default rounded-lg border border-zinc-200 bg-white text-left focus-within:border-indigo-500",children:[(0,d.jsx)("label",{className:(0,x.cn)("z-1 absolute -top-[11px] left-3 origin-0 rounded-lg bg-white px-1 py-0 text-[12.5px] leading-[18px] text-slate-400 transition-all duration-300",{"!text-indigo-500":u}),children:"Space"}),(0,d.jsx)(eW.hQ.Input,{className:"w-full appearance-none rounded-lg bg-transparent px-6 py-3 font-sans text-sm focus:text-blueGray-900 focus:outline-none",displayValue:e=>null==l?void 0:l.name,onChange:e=>o(e.target.value),onFocus:e=>{p(!0),e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},onBlur:()=>p(!1)}),(0,d.jsx)(eW.hQ.Button,{className:"absolute inset-y-0 right-2 flex cursor-pointer items-center bg-transparent pr-2 text-slate-400 transition-all ease-in-out hover:scale-110 hover:text-indigo-500",children:(0,d.jsx)(ex.G,{className:"h-5 w-5",icon:m.eEm,"aria-hidden":"true"})})]}),(0,d.jsx)(eW.uT,{as:E.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,d.jsxs)(eW.hQ.Options,{className:"absolute left-0 top-9 z-10 max-h-60 w-full overflow-auto rounded-lg bg-white px-0 py-1 text-base outline outline-1 outline-zinc-200 focus:outline-none sm:text-sm",children:[(null==h?void 0:h.isLoading)&&(0,d.jsx)("div",{className:"relative cursor-default select-none px-4 py-4 text-center",children:(0,d.jsx)(eH.aN,{size:"sm"})}),!(null==h?void 0:h.isLoading)&&(0===v.length&&""!==s?(0,d.jsx)("div",{className:"relative cursor-default select-none px-4 py-2 text-gray-700",children:"Nothing found."}):v.map(e=>(0,d.jsx)(eW.hQ.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-9 pr-4 ".concat(t?"bg-indigo-400 text-white":"text-slate-700")},value:e.id,children:t=>{let{selected:n,active:i}=t;return(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("span",{className:"block truncate ".concat(n?"font-bold":"font-normal"),children:e.name}),(0,d.jsx)("span",{className:"ml-4 block truncate text-xs ".concat(i?"text-white-200":"text-gray-400"),children:e.key}),n?(0,d.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 ".concat(i?"text-white":"text-indigo-500"),children:(0,d.jsx)(ex.G,{icon:m.LEp,className:"h-5 w-5","aria-hidden":"true"})}):null]})}})))]})})]})})},e1=e=>{let{message:t}=e,[n,i]=(0,E.useState)(1);(0,E.useEffect)(()=>{let e=setInterval(()=>{i(e=>e%4+1)},500);return()=>clearInterval(e)},[]);let l=".".repeat(n);return(0,d.jsxs)("div",{children:[t,l]})},e2=n(65801),e4=e=>{let{title:t,disableOnAction:n,description:i,loading:l,onCancel:a,onAction:s,actionText:o,style:r,className:c,contentClassName:u,children:m}=e;return(0,d.jsx)("div",{className:(0,x.cn)("absolute left-0 top-0 flex h-full w-full flex-1 flex-row items-center justify-center bg-blueGray-400 bg-opacity-50",c),...r&&{style:r},children:(0,d.jsxs)("div",{className:(0,x.cn)("flex flex-shrink-0 flex-col rounded-md bg-white p-4",{"h-[60%] w-[75%]":!u},u),children:[(0,d.jsx)("div",{className:"flex w-full flex-row justify-between",children:t&&(0,d.jsx)("h3",{className:"m-0\xa0mr-4 text-xl font-bold text-blueGray-900",children:t})}),i&&(0,d.jsx)("p",{className:"mb-4 mt-0 text-xl text-blueGray-600",children:i}),(0,d.jsx)("div",{className:"flex flex-1 flex-col items-center justify-center",children:m}),(0,d.jsxs)("div",{className:"mt-4 flex flex-row items-center justify-between justify-self-end",style:{justifyContent:a?"space-between":"flex-end"},children:[a&&(0,d.jsx)(e2.Z,{size:"small",variant:"secondary",onClick:a,children:"Cancel"}),(0,d.jsx)(e2.Z,{disabled:l||n,variant:"primary",size:"small",onClick:()=>s&&s(),children:o||"OK"})]})]})})},e5=e=>{var t;let{scribeDocumentId:n,onClose:i,organizationOwner:l}=e,{data:a,isLoading:s,isError:o,error:r}=(0,eR.KJ)({organizationId:null==l?void 0:l.id,limit:1e4}),{mutateAsync:c}=(0,eR.q1)(),[u,m]=(0,E.useState)(""),p=(null==a?void 0:a.confluence_export_type)===eR.u$.html,{data:x,isLoading:h,maxRetriesExceeded:v}=eq({fileId:n,enabled:p&&!!u}),f=p&&u&&(null==x?void 0:x.percentage)!==100&&!v||h,[g,b]=(0,E.useState)(null),[_,w]=(0,E.useState)(!1);(0,E.useEffect)(()=>{(null==a?void 0:a.spaces)&&!g&&(b(a.spaces[0]),w(a.spaces.length<a.total_spaces))},[null==a?void 0:a.spaces,g]);let j=()=>{m(""),i()},y=!!(null==a?void 0:a.enabled)&&!!(null==a?void 0:a.authorized),N=""===u?"Export":"Open in Confluence";return(0,d.jsxs)(e4,{title:y||s?"Export to Confluence":"Confluence Not Authorized",actionText:N,contentClassName:"w-[95%] h-[95%]",className:"flex flex-1",onAction:()=>{""===u?c({id:n,spaceKey:g.key},{onSuccess:e=>{let{page_url:t}=e;m(t)}}):(window.open(u),j())},onCancel:()=>{j()},loading:s||f,disableOnAction:!g,children:[y&&(0,d.jsxs)("div",{className:"flex w-full flex-1 flex-col",children:[(0,d.jsx)("p",{className:"m-0 mt-2 text-base text-blueGray-900",children:"Export this Scribe to the specified space in Confluence."}),(0,d.jsx)("p",{className:"m-0 mb-5 mt-1 text-xs text-blueGray-700",children:"Select a space from the dropdown or type in the exact space key"}),f?(0,d.jsx)(e1,{message:"Loading"}):(0,d.jsx)(e0,{hasMoreSpaces:_,organizationOwnerId:null==l?void 0:l.id,confluenceSpaces:a.spaces,selectedSpace:g,setSelectedSpace:b})]}),!y&&(0,d.jsx)("p",{className:"m-0 my-2 text-base text-blueGray-900",children:s?(0,d.jsx)(e1,{message:"Fetching spaces"}):"An admin of ".concat(null==l?void 0:l.name," team must first authorize and connect to Confluence before Scribes can be exported. Please contact a admin to do so.")}),o&&(0,d.jsxs)("div",{className:"mb-2 h-8 w-full",children:[(0,d.jsx)(eQ.Z,{title:r instanceof Error?(null===(t=r.detail)||void 0===t?void 0:t.message)||r.message:"There was an issue exporting your Scribe to Confluence. Please try again later.",variant:"error",className:"w-full"}),v&&(0,d.jsx)(eQ.Z,{title:"Some of the screenshots may not have exported correctly. Please try again.",variant:"error",className:"w-full"})]})]})},e9=n(36012),e3=n.n(e9),e6=n(55461),e8=n(16010),e7=e=>{let t=(0,b.I0)(),{exported:n,isExporting:i}=(0,b.v9)(e8.Px),{scribeDocumentId:l,format:a,onClose:s}=e,[o,r]=(0,E.useState)(!1),{data:c,isError:u,isLoading:m,maxRetriesExceeded:p}=eq({fileId:l,enabled:!0});return(0,E.useEffect)(()=>{(async function(){await t((0,e6.D1)({id:l,format:a}))})()},[t]),(0,d.jsx)(e4,{title:"Export ".concat("html"===a?"HTML":a.charAt(0).toUpperCase()+a.slice(1)),actionText:o?"Copied!":"Copy to Clipboard",onAction:()=>{let e="html"===a?"text/html":"text/markdown";e3()(n.exportedData,{format:e,onCopy:t=>{null==t||t.setData(e,n.exportedData),null==t||t.setData("text/plain",n.exportedData),r(!0),setTimeout(()=>r(!1),1e3),(0,q.L9)("exported_to_".concat(a))}})},onCancel:()=>{s()},loading:(i||!n||(null==c?void 0:c.percentage)!==100||m)&&!p,contentClassName:"w-[75%] h-[75%]",children:(i||!n||(null==c?void 0:c.percentage)!==100||m)&&!p?(0,d.jsx)(e1,{message:"Loading"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:"m-0 my-2 text-base text-blueGray-900",children:"Copy and paste to your editor."}),(0,d.jsx)("textarea",{className:"flex w-full flex-1 flex-grow resize-none rounded border border-indigo-500 text-sm text-blueGray-900 transition-all duration-500 ease-in-out",value:n.exportedData||""}),p&&(0,d.jsx)("p",{className:"text-red-500",children:"Some of the screenshots may not have exported correctly. Please try again."})]})})};let te=(e,t)=>["exportedDocument",e,t],tt=e=>{let{fileId:t,format:n}=e;return(0,g.useQuery)({queryKey:te(t,n),queryFn:()=>_.Z.getExportedDocumentForScribeFile(t,n),refetchInterval:e=>![k.Z0.Uploaded,k.Z0.Error].includes(null==e?void 0:e.upload_status)&&1e3,enabled:!!t,refetchOnMount:!0})},tn={pdf:"PDF",docx:"DOCX"};var ti=e=>{let{scribeDocumentId:t,onClose:n,format:i,contentClassName:l,isPreview:a,onPreviewPDF:s}=e,{data:o,error:r,isFetching:c}=tt({fileId:t,format:i}),u=c||(null==o?void 0:o.upload_status)==="waiting",m="Generating your file... This will take a few moments.";return r||(null==o?void 0:o.upload_status)==="error"?m="Sorry! There was an error generating your file. Please try again later.":(null==o?void 0:o.download_url)&&!u&&(m="Your ".concat(tn[i]," file is ready! Take a look.")),(0,d.jsxs)(e4,{title:"Creating your ".concat(tn[i]," file..."),actionText:"View Document",onAction:()=>{a?s(o.download_url):(window.open(o.download_url,"_blank"),(0,q.L9)("downloaded_".concat(i))),n()},onCancel:()=>{n()},loading:u,contentClassName:l,children:[(0,d.jsx)("p",{className:"mx-0 my-2 text-base text-blueGray-900",children:m}),u&&(0,d.jsx)("div",{className:"h-1 w-full rounded bg-transparent",children:(0,d.jsx)("div",{className:"h-full rounded bg-indigo-500 transition-[width] duration-700 ease-in-out",style:{width:"".concat((null==o?void 0:o.upload_progress)||2,"%")}})}),!u&&(0,d.jsx)("div",{className:"h-4"})]})},tl=n(43425),ta=n(23892),ts=n.n(ta),to=n(10965),tr=n(18378),td=n(31928),tc=n(13135);let tu={[k.Ct.Scroll]:"Copy Link",[k.Ct.Slides]:"Copy Slides Link",[k.Ct.Movie]:"Copy Movie Link"},tm=(e,t)=>{if(e)return t.type===k.Ct.Scroll?m.nNP:t.icon},tp=e=>{let{variant:t="primary",currentShareSetting:n,url:i,onClick:l,className:a,showIcon:s=!0,size:o}=e,[r,c]=(0,E.useState)(!1);return(0,d.jsx)(J.z,{onClick:e=>{e3()(i),c(!0),l(e),setTimeout(()=>c(!1),800)},className:a,icon:tm(s,n),variant:t,size:o,"data-testid":"share-modal-copy-link-button",children:r?"Copied":tu[n.type]})};var tx=e=>{let{document:t,desktopOnly:n=!1,adjustPermissions:i,sharedFirstScribe:l=!1,linkToPreview:a,...s}=e,{url:o,onClick:r}=(0,tc.sY)({document:t,sharedFirstScribe:l,desktopOnly:n,linkToPreview:a,adjustPermissions:i});return(0,d.jsx)(tp,{...s,onClick:r,url:o})},th=n(81644),tv=e=>{let{onToggleSearchEngineIndexing:t,isSearchEngineIndexingEnabled:n,hasPublicProfile:i}=e;return(0,d.jsxs)("div",{className:"flex justify-between border-slate-700 px-2 py-1 sm:px-4",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("span",{className:"mr-1.5 text-sm text-slate-100",children:i?"Share on my Community profile":"Search engine indexing"}),(0,d.jsx)($.pn,{children:(0,d.jsxs)($.u,{children:[(0,d.jsx)($.aJ,{children:(0,d.jsx)(ex.G,{className:"text-slate-500",icon:ec.sqG,fixedWidth:!0,size:"xs"})}),(0,d.jsx)($._v,{side:"bottom",className:"!h-auto",style:{whiteSpace:"normal"},children:(0,d.jsx)("span",{className:"my-2 max-w-[358px]",children:i?"Your document will appear on your Community profile and in search engine results.":"This makes it possible for viewers to find this Scribe using search engines like Google, Yahoo, etc."})})]})})]}),(0,d.jsx)($.pn,{children:(0,d.jsxs)($.u,{children:[(0,d.jsx)($.aJ,{asChild:!1,style:{background:"none"},children:(0,d.jsx)(th.r,{checked:n,onCheckedChange:t})}),!n&&(0,d.jsx)($._v,{side:"bottom",className:"!h-auto",style:{whiteSpace:"normal"},children:(0,d.jsx)("span",{className:"my-2 max-w-[358px]",children:"Please ensure your document doesn't contain any sensitive or confidential information."})})]})})]})};let tf=[{type:k.Ct.Scroll,description:"Scroll",icon:ec.r5q,queryParams:{as:k.Ct.Scroll}},{type:k.Ct.Slides,description:"Slides",icon:ec.CAI,queryParams:{}},{type:k.Ct.Movie,description:"Movie",icon:ec.CjD,queryParams:{as:k.Ct.Movie}}],tg=e=>{let{document:t,setShareSetting:n,currentShareSetting:i,previewLink:l,onContextMenuOpen:a}=e,s=(null==t?void 0:t.type)===k.rZ.KnowledgePage,{updateScribeFile:o}=(0,er.c)(null==t?void 0:t.id,{enabled:!s}),[r,c]=(0,E.useState)(!1);return(0,d.jsxs)(eH.xV,{placement:"bottom",onOpenChange:e=>{c(e),a(e)},itemsClassName:"!min-w-[200px]",button:(0,d.jsx)($.pn,{children:(0,d.jsxs)($.u,{children:[(0,d.jsx)($.aJ,{asChild:!1,className:"!focus:outline-none mx-0 px-0",children:(0,d.jsx)(J.z,{"data-testid":"update-sharing-style-button",variant:"primary",className:"!rounded-l-none !rounded-r-md ring-0 focus:outline-0 focus:ring-0 focus:ring-transparent",icon:ec.ptq})}),(0,d.jsx)($._v,{side:"bottom",className:"!h-auto",style:{whiteSpace:"normal",display:r?"none":""},children:(0,d.jsx)("span",{className:"my-2 max-w-[358px]",children:"Select your Scribe's link share format"})})]})}),children:[(0,d.jsx)(eH.xV.Title,{children:"Viewing Mode"}),tf.map(e=>(0,d.jsx)(eH.xV.Item,{icon:e.icon,onClick:()=>{(0,q.L9)("link_share_settings_changed",{share_setting:e.type}),n(e),e.type!==k.Ct.Movie||(null==t?void 0:t.is_video_embed_enabled)||o({is_video_embed_enabled:!0})},selected:e.type===i.type,children:(0,d.jsxs)("div",{className:"inline-flex items-center gap-2",children:[e.description,e.type===k.Ct.Movie&&(0,d.jsx)(eh.Z,{className:"bg-brand-700",textClassName:"text-brand-100"})]})},e.type)),(0,d.jsx)("div",{className:"my-3 flex w-full items-center justify-center px-4",children:(0,d.jsx)(J.z,{variant:"ghost",className:"w-full text-[#F1F5F9]",onClick:()=>{(0,q.L9)("link_share_settings_viewed_preview",{share_setting:i.type}),window.open(l,"_blank")},children:"View Preview"})})]})},tb=e=>{let{permissionMenuItems:t,onToggleContextMenu:n,document:i,account:l,onChangePermission:a,onAdjustPermissions:s,desktopOnly:o,handleSearchEngineIndexingToggle:r,isSearchEngineIndexingEnabled:c,hasPublicProfile:u,showSearchIndexing:m,isScribe:p}=e,[h,v]=(0,E.useState)(!1),[f,g]=(0,E.useState)(t[0]),[b,_]=(0,E.useState)(tf[0]),{publicRuntimeConfig:w}=ts()();(0,E.useEffect)(()=>{let e=t.findIndex(e=>e.permissionLevel===(null==i?void 0:i.global_permission));g(t[e])},[i,t]);let j=t.filter(e=>(null==e?void 0:e.enabled)===!0),y=["step_by_step",k.Ct.Slides,k.Ct.Movie].includes(b.type),N="".concat(w.cursiveRootUrl,"embed-preview/").concat((0,td.km)(null==i?void 0:i.id,null==i?void 0:i.name)).concat(0!==Object.keys(b.queryParams).length?"?".concat((0,td.uM)(b.queryParams)):"")||"#",C=(0,E.useMemo)(()=>y?N:i?(0,td.W0)(i.id,i.name,i.type,{}):"",[i,N,y]),S=h?"text-slate-500":"text-slate-700",L=!j.length;return(0,d.jsxs)("div",{className:"-mb-px flex w-full justify-between border-slate-200 p-4 sm:px-6",children:[(0,d.jsxs)(eH.xV,{placement:"bottom",onOpenChange:e=>n(e),itemsClassName:"!min-w-[320px]",disabled:L,button:(0,d.jsxs)(J.z,{"data-testid":"update-permissions-menu-button",variant:"ghost",disabled:L,className:(0,x.cn)({"cursor-not-allowed":h,"cursor-default bg-transparent hover:bg-transparent disabled:opacity-100":L}),children:[(0,d.jsx)("span",{className:"mr-1.5",children:(0,d.jsx)(ex.G,{icon:null==f?void 0:f.icon,className:S})}),(0,d.jsx)("span",{title:null==f?void 0:f.description,className:(0,x.cn)(S,"max-w-[200px] truncate"),children:null==f?void 0:f.description}),j.length>0&&(0,d.jsx)("span",{className:"ml-1.5",children:(0,d.jsx)(ex.G,{className:S,icon:ec.gc2})})]}),children:[j.length>0&&(0,d.jsx)(eH.xV.Title,{children:"Share Settings"}),j.map(e=>(0,d.jsx)(eH.xV.Item,{icon:e.icon,onClick:()=>{h||(v(!0),a(e).finally(()=>v(!1)))},selected:e.permissionLevel===(null==f?void 0:f.permissionLevel),children:(0,d.jsx)("span",{title:e.description,children:e.description.length>40?"".concat(e.description.slice(0,40),"..."):e.description})},e.id)),m&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eN.VD,{className:"!mx-0",theme:"dark"}),(0,d.jsx)(tv,{onToggleSearchEngineIndexing:r,isSearchEngineIndexingEnabled:c,hasPublicProfile:u})]})]}),p?(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(tx,{document:i,currentShareSetting:b,sharedFirstScribe:null==l?void 0:l.shared_first_scribe,desktopOnly:o,adjustPermissions:s,linkToPreview:C,className:"!rounded-l-md !rounded-r-none focus:outline-0 focus:ring-0 focus:ring-transparent"}),(0,d.jsx)(tg,{document:i,setShareSetting:_,currentShareSetting:b,previewLink:C,onContextMenuOpen:e=>{e&&(0,q.L9)("link_share_settings_menu_opened"),n(e)}})]}):(0,d.jsx)(tx,{document:i,currentShareSetting:b,sharedFirstScribe:null==l?void 0:l.shared_first_scribe,desktopOnly:o,adjustPermissions:s})]})};var t_=e=>{let{permissionMenuItems:t,onToggleContextMenu:n,onSetSharingPermission:i,document:l,account:a,onAdjustPermissions:s,desktopOnly:o,handleSearchEngineIndexingToggle:r,isSearchEngineIndexingEnabled:c,hasPublicProfile:u,showSearchIndexing:m,isScribe:p,setRequireWorkspaceUpdate:x}=e,h=e=>{let t,{permissionLevel:n,id:i,type:l,name:a}=e;"private"===n&&(t="shared_private"),"team"===n&&(t="shared_with_org"),"super_org_read"===n&&(t="shared_with_superorg"),"link_read"===n&&(t="shared_with_link"),(0,q.L9)(t,{document_name:a,document_id:i,type:l})},{updateGrowthState:v}=(0,L.N)(),f=(0,g.useQueryClient)(),_=(0,D.nd)(),j=(0,b.I0)(),{refetch:y}=(0,N.T)(null==l?void 0:l.id,null==l?void 0:l.type),C=(0,tl.Z)("ml_training_data"),{mlTrainingData:k}=(0,b.v9)(tr.F),S=async e=>{let t=null==l?void 0:l.global_permission,n=e.permissionLevel;C&&k&&(null==e?void 0:e.permissionLevel)==="link_read"&&((0,q.L9)("ml_scribe_made_public",{scribe_id:null==l?void 0:l.id}),eV.Z.processActionFiles(null==l?void 0:l.id)),(0,B.wm)(t,n)||await to.Z.updateDocumentMetadata(l.id,{folder_id:null}),await j((0,w.M3)({bodyParams:{global_permission:n},document:l})),await y(),f.setQueryData(_,e=>{var t;return e?{...e,pages:null==e?void 0:null===(t=e.pages)||void 0===t?void 0:t.map(e=>{var t;return{...e,documents:null==e?void 0:null===(t=e.documents)||void 0===t?void 0:t.map(e=>e.id===l.id?{...e,global_permission:n||e.global_permission}:e)}})}:e}),x(!0),"private"===n?i(!1):"private"!==t||(0,B.wm)(t,n)||i(!0),(null==a?void 0:a.shared_first_scribe)||"private"===e.permissionLevel||await v({sharedFirstScribe:!0}),h({permissionLevel:e.permissionLevel,id:l.id,type:l.type,name:l.name})};return(0,d.jsx)(tb,{permissionMenuItems:t,onAdjustPermissions:s,onToggleContextMenu:n,document:l,account:a,onChangePermission:S,desktopOnly:o,handleSearchEngineIndexingToggle:r,isSearchEngineIndexingEnabled:c,hasPublicProfile:u,showSearchIndexing:m,isScribe:p})},tw=n(58955),tj=n(52359),ty=e=>{let t=(0,b.I0)(),{data:n}=(0,v.ZP)(),i=(null==e?void 0:e.type)==="scribe",{updateGrowthState:l}=(0,L.N)(),a=async(n,l)=>t((i?w.Sg:tw.Sg)({id:e.id,email:n,permissionLevel:l}));return{addPermissionForCandidate:async t=>{var s,o,r,d,c,u;let m=!1,p=!(0,V.Ju)(t),x=null!=e&&null!==(d=e.organization_owner)&&void 0!==d&&null!==(r=d.super_organization)&&void 0!==r&&!!r.limit_users_to_domain&&(0,tj.Z)(t)!==(null==e?void 0:null===(u=e.organization_owner)||void 0===u?void 0:null===(c=u.super_organization)||void 0===c?void 0:c.domain),h=i&&!(null==n?void 0:n.shared_first_scribe);if(!(!p&&!x))return{invalidEmail:p,invalidDomain:x,domain:"",inviteError:m};try{await a(t,"read")}catch(e){m=!0}return h&&(l({sharedFirstScribe:!0}),(0,q.L9)("share_with_email",{id:e.id,emailAddress:t},"action","shared_first_scribe")),h||(0,q.L9)("share_with_email",{id:e.id,emailAddress:t}),{inviteError:m,invalidEmail:p,invalidDomain:x,domain:null==e?void 0:null===(o=e.organization_owner)||void 0===o?void 0:null===(s=o.super_organization)||void 0===s?void 0:s.domain}},updatePermissionForCandidate:a}},tN=n(44659),tC=n(9117);let tk=e=>{var t;let n=(0,b.I0)(),{data:i}=(0,v.ZP)(),{updateGrowthState:l}=(0,L.N)(),{document:a,isLoadingFile:s,isScribe:o}=(0,N.T)(null==e?void 0:e.id,null==e?void 0:e.type),{teammates:r,userSearchQuery:d,setUserSearchQuery:c}=(0,tC.ZP)({organization:null==e?void 0:e.organization_owner,sortByPermission:!0}),{users:u,refetch:m,isLoadingUsersWithPermission:p}=S(null==e?void 0:e.id),{addPermissionForCandidate:x,updatePermissionForCandidate:h}=ty(e),{invalidate:f}=j(null==e?void 0:e.id),{refetchInvites:g}=(0,tN.Z)(null==e?void 0:null===(t=e.organization_owner)||void 0===t?void 0:t.id),_=r.map(e=>{var t;return{...e,value:e.email,label:e.email,isDisabled:!!u.find(t=>t.user.id===e.id)||(null==a?void 0:null===(t=a.user_owner)||void 0===t?void 0:t.id)===e.id}}),y=async(t,i)=>{let l=o?w._I:tw._I;await n(l({id:null==e?void 0:e.id,userId:t.userId,permissionLevel:i})),m(),g()};return{teamMembers:_,sharedWith:u,addPermissionForUser:t=>(!o||(null==i?void 0:i.shared_first_scribe)?(0,q.L9)("share_with_teammate",{id:null==e?void 0:e.id,email:t.email}):(l({sharedFirstScribe:!0}),(0,q.L9)("share_with_teammate",{id:null==e?void 0:e.id,email:t.email},"action","shared_first_scribe")),y({documentId:null==e?void 0:e.id,email:t.email,userId:t.userId},k.yz.Read)),removePermissionForUser:t=>((0,q.L9)("remove_permission",{email:t.email,id:t.documentId}),y({documentId:null==e?void 0:e.id,email:t.email,userId:t.userId},k.yz.None)),changePermissionForUser:(t,n)=>((0,q.L9)("change_permission_level",{email:t.email,id:t.documentId}),y({documentId:null==e?void 0:e.id,email:t.email,userId:t.userId},n)),addPermissionForCandidate:async e=>{let t=await x(e);return f(),m(),g(),t},changePermissionForCandidate:async(e,t)=>{await h(e,t),f(),m(),g()},isLoading:s||p,userSearchQuery:d,setUserSearchQuery:c}};var tS=n(25971),tL=n(66725),tP=()=>(0,d.jsxs)("span",{className:"my-2.5 flex flex-col items-center justify-center text-sm text-slate-600",children:[(0,d.jsx)("span",{children:"User not found."}),(0,d.jsx)("span",{children:"Contact your account admin to invite users to Scribe."})]}),tz=e=>{let{onInvite:t,inputValue:n,isScribe:i,onSuccessfulInvite:l,isInviting:a}=e,[s,o]=(0,E.useState)(!1),[r,c]=(0,E.useState)(!1),[u,m]=(0,E.useState)(!1),[p,x]=(0,E.useState)(!1),[h,v]=(0,E.useState)(""),f=async()=>{x(!0);let{invalidEmail:e,invalidDomain:i,domain:a,inviteError:s}=await t(n);e||i||l(),o(e),c(i),v(a),m(s),x(!1)};return(0,E.useEffect)(()=>{o(!1),c(!1),v("")},[n]),(0,E.useEffect)(()=>{a&&f()},[a]),(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,d.jsxs)("span",{className:"m-0 mb-2.5 text-sm text-slate-600",children:["People you add will receive an email to access this ",i?"Scribe":"Page","."]}),s&&(0,d.jsx)(eQ.Z,{className:"w-3/4",variant:"error",title:"Please enter a valid email address".concat(r?" at @".concat(h,"."):".")}),u&&(0,d.jsx)(eQ.Z,{className:"w-3/4",variant:"error",title:"There was an error inviting this user. Please try again."}),(0,d.jsx)("div",{className:"p-2",children:(0,d.jsx)(J.z,{variant:"primary",loading:p,disabled:p,onClick:f,children:"Share"})})]})},tE=e=>{let{canInvite:t,onInvite:n,onSuccessfulInvite:i,isScribe:l,inputValue:a,isInviting:s}=e;return t?(0,d.jsx)(tz,{isScribe:l,onInvite:n,inputValue:a,onSuccessfulInvite:i,isInviting:s}):(0,d.jsx)(tP,{})},tZ=n(83644),tI=e=>{let{result:t,isSelected:n}=e;return(0,d.jsxs)("button",{className:(0,x.cn)("flex w-full flex-row items-center bg-transparent px-3 py-2"),disabled:null==t?void 0:t.isDisabled,children:[(0,d.jsx)("div",{className:"mr-2",children:(0,d.jsx)(tZ.qE,{size:"xs",uuid:null==t?void 0:t.id,children:(null==t?void 0:t.profile_picture_url)?(0,d.jsx)(K(),{src:null==t?void 0:t.profile_picture_url,width:20,height:20,alt:"".concat(null==t?void 0:t.first_name," ").concat(null==t?void 0:t.last_name)}):"".concat(null==t?void 0:t.first_name," ").concat(null==t?void 0:t.last_name)})}),(0,d.jsx)("span",{className:"text-sm ".concat(n?"text-slate-300":"cursor-pointer text-slate-900"),children:null==t?void 0:t.email})]})},tT=e=>{let{placeholder:t,filterKey:n,onSelect:i,onInvite:l,canInvite:a,isScribe:s,document:o,className:r}=e,[c,u]=(0,E.useState)(!1),[m,p]=(0,E.useState)(!1),[h,v]=(0,E.useState)(340),{isLoading:f,fetchNextPage:g,teammatesResults:b}=(0,tC.ZP)({organization:null==o?void 0:o.organization_owner,sortByPermission:!0}),{teamMembers:_,userSearchQuery:w,setUserSearchQuery:j}=tk(o),y=""===w?_:_.filter(e=>{var t;return null==e?void 0:null===(t=e[n])||void 0===t?void 0:t.toLowerCase().replace(/\s+/g,"").includes(w.toLowerCase().replace(/\s+/g,""))}),N=(0,E.useRef)(null),C=()=>{u(!c)},k=(0,E.useRef)(null),S=(0,E.useRef)(null),L=e=>{null!==S.current&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),p(!0),setTimeout(()=>p(!1),100))};return(0,E.useEffect)(()=>{if(k&&(null==k?void 0:k.current)){let e=k.current;return e.addEventListener("keydown",L),v(e.clientWidth),()=>e.removeEventListener("keydown",L)}return()=>{}},[]),(0,d.jsx)("div",{className:r,children:(0,d.jsxs)(eW.hQ,{value:w,onChange:e=>{i(e),j("")},children:[(0,d.jsx)(eW.hQ.Button,{className:"hidden",ref:N}),(0,d.jsx)("div",{className:(0,x.cn)("group relative mt-0.5 w-full cursor-default overflow-hidden rounded border border-slate-200 bg-white",{"ring-2 ring-indigo-500":c}),children:(0,d.jsx)(eW.hQ.Input,{className:"w-full border-none px-2 py-2 pr-10 text-sm leading-5 text-gray-900 placeholder:text-slate-400",onChange:e=>j(e.target.value),placeholder:t,onFocus:C,onBlur:C,onClick:()=>{var e;null===(e=N.current)||void 0===e||e.click()},ref:k})}),(0,d.jsx)(eW.uT,{as:E.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>j(""),children:(0,d.jsxs)(eW.hQ.Options,{style:{width:h},className:"absolute z-10 mt-2 max-h-60 w-full list-none overflow-auto rounded bg-white p-0 shadow focus:outline-none",children:[(null==y?void 0:y.length)===0&&""!==w?(0,d.jsx)("div",{className:"relative cursor-default select-none px-3 py-2",ref:S,children:(0,d.jsx)(tE,{canInvite:a,isScribe:s,onInvite:l,inputValue:w,onSuccessfulInvite:()=>{var e;j(""),null===(e=N.current)||void 0===e||e.click()},isInviting:m})}):y.map(e=>(0,d.jsx)(eW.hQ.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none ".concat(t?"bg-indigo-50":"")},value:e,children:(0,d.jsx)(tI,{result:e,isSelected:null==e?void 0:e.isDisabled})},e.id)),(0,d.jsx)(tL.Z,{onVisible:()=>{(null==b?void 0:b.pages[(null==b?void 0:b.pages.length)-1].next)&&!f&&g()}})]})})]})})},tM=e=>{let{permissionLevel:t,availablePermissionLevels:n,onToggleContextMenu:i,className:l,disabled:a=!1}=e;return(0,d.jsx)(eH.xV,{placement:"bottom",onOpenChange:a?()=>{}:e=>i(e),button:(0,d.jsxs)(J.z,{variant:"ghost",disabled:a,children:[(0,d.jsx)("span",{children:t}),(0,d.jsx)("span",{className:"ml-1.5",children:!a&&(0,d.jsx)(ex.G,{className:"text-slate-900",icon:ec.gc2})})]}),className:l,children:!a&&n.map(e=>(0,d.jsx)(eH.xV.Item,{onClick:null==e?void 0:e.onClick,children:e.title},e.title))})},tF=e=>{var t,n,i;let{file:l,account:a,onToggleContextMenu:s}=e,o=(0,b.I0)(),{permissions:r,refetchPermissions:c}=(0,C.ZP)(null==l?void 0:l.id),{refetch:u}=(0,N.T)(null==l?void 0:l.id,null==l?void 0:l.type),m=(0,g.useQueryClient)(),p="admin"===(null===(t=((null==a?void 0:a.organizations)||[]).find(e=>{var t;return e.id===(null==l?void 0:null===(t=l.organization_owner)||void 0===t?void 0:t.id)}))||void 0===t?void 0:t.permission_level),x=e=>{o((0,w.M3)({bodyParams:{organization_permission:e},document:l})).then(()=>{c(),u(),m.invalidateQueries(D.wZ)})},h=()=>{((null==r?void 0:r.is_owner)||p)&&x("read")};return(0,d.jsxs)("div",{className:"relative mb-4 flex flex-row items-center",children:[(0,d.jsx)(tZ.qE,{size:"sm",uuid:l.organization_owner.id,children:l.organization_owner.name}),(0,d.jsx)("div",{className:"mx-2 flex flex-1 flex-col justify-center",children:(0,d.jsx)("span",{title:l.organization_owner.name,className:"max-w-[250px] truncate font-sans text-sm font-semibold text-slate-900",children:l.organization_owner.name})}),(0,d.jsx)(tM,{permissionLevel:"read"===(i=null==l?void 0:null===(n=l.sharing_details)||void 0===n?void 0:n.perceived_organization_permission)?"Can view":"write"===i?"Can edit":null,availablePermissionLevels:[{title:"Can view",onClick:()=>h()},{title:"Can edit",onClick:()=>x("write")}],onToggleContextMenu:s,disabled:!(null==r?void 0:r.is_owner)&&!p})]})},tD=n(19686),tA=n(21677),tO=n(86133);let tR=e=>{var t,n,i,l;let{option:a,selected:s,isDisabled:o}=e;return(0,d.jsxs)("div",{className:"flex w-full flex-row items-center bg-transparent px-3 py-2",children:[(0,d.jsx)("div",{className:"mr-2",children:(0,d.jsx)(tZ.qE,{size:"xs",uuid:null==a?void 0:a.id,children:(null==a?void 0:a.profile_picture_url)?(0,d.jsx)(K(),{src:null==a?void 0:a.profile_picture_url,width:20,height:20,alt:null==a?void 0:null===(n=a.email)||void 0===n?void 0:null===(t=n.toUpperCase)||void 0===t?void 0:t.call(n)}):null==a?void 0:null===(l=a.email)||void 0===l?void 0:null===(i=l.toUpperCase)||void 0===i?void 0:i.call(l)})}),(0,d.jsx)("span",{className:"text-sm ".concat(s||o?"text-slate-300":"cursor-pointer text-slate-900"),children:null==a?void 0:a.email})]})};var tB=e=>{let{options:t,userOwner:n,onChange:i,isDisabled:l,organization:a}=e,[s,o]=(0,E.useState)(350),{isLoading:r,fetchNextPage:c,teammatesResults:u}=(0,tC.ZP)({organization:a,sortByPermission:!0}),m=(0,E.useMemo)(()=>t.filter(e=>e.id!==n.id&&![k.yz.None,k.yz.Read].includes(e.permission_level)),[t,n.id]),p=(0,E.useRef)(null);return(0,E.useEffect)(()=>{p.current&&o(p.current.clientWidth)},[]),(0,d.jsxs)(eW.Ri,{value:null==n?void 0:n.email,onChange:i,children:[(0,d.jsx)(eW.Ri.Button,{ref:p,className:"relative w-full rounded p-0 focus:outline-none focus:ring-2 focus:ring-indigo-400",children:e=>{let{open:t}=e;return(0,d.jsxs)("div",{className:(0,x.cn)("flex h-8 w-full cursor-default items-center justify-between rounded border border-slate-300 bg-white px-2 text-left focus:outline-none",{"ring-2 ring-indigo-400":t}),children:[(0,d.jsx)("span",{className:"block truncate text-slate-600",children:null==n?void 0:n.email}),(0,d.jsx)("span",{className:"pointer-events-none block",children:(0,d.jsx)(ex.G,{className:"mt-1 h-4 w-4 text-slate-500",icon:ec.gc2})})]})}}),(0,d.jsx)(eW.uT,{as:E.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,d.jsxs)(eW.Ri.Options,{style:{width:s},className:"absolute z-[10] my-2 max-h-40 w-full list-none overflow-auto rounded bg-white p-0 shadow focus:outline-none",children:[m.map(e=>(0,d.jsx)(eW.Ri.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none px-3 py-2 ".concat(t&&"bg-indigo-50")},value:e,disabled:l,children:t=>{let{selected:n}=t;return(0,d.jsx)(tR,{option:e,selected:n,isDisabled:l})}},e.id)),(0,d.jsx)(tL.Z,{onVisible:()=>{(null==u?void 0:u.pages[(null==u?void 0:u.pages.length)-1].next)&&!r&&c()}})]})})]})},tV=n(4941),tG=e=>{var t;let n;let{scribeFile:i,user:l,permissionLevel:a=null,permissions:s,overridePermissionLabel:o=null,isOwner:r=!1,onToggleContextMenu:c,isCandidate:u=!1}=e,m=(0,b.I0)(),{data:p}=(0,v.ZP)(),x=null==p?void 0:p.active_organization,{invites:h,refetchInvites:f}=(0,tN.Z)(null==x?void 0:x.id),{teamMembers:g,changePermissionForUser:_,removePermissionForUser:w,changePermissionForCandidate:j}=tk(i),{refetch:C}=(0,N.T)(null==i?void 0:i.id,null==i?void 0:i.type),[S,L]=(0,E.useState)(!1),[P,z]=(0,E.useState)(!1),[Z,I]=(0,E.useState)(null),[T,M]=(0,E.useState)(!1),{isAdminOfActiveTeam:F}=(0,tD.TR)(),D=(0,tA.Z)(),{onMutate:A}=(0,tC.ZP)({organization:null==i?void 0:i.organization_owner,sortByPermission:!0}),{mutateAsync:O}=(0,y.t)(),R=g.map(e=>({...e,label:"".concat(e.first_name," ").concat(e.last_name," (").concat(e.email,")")}));if(!l)return null;let B=(0,E.useMemo)(()=>e=>{let t="";return(e.first_name||e.last_name)&&(e.first_name&&(t+=e.first_name),e.last_name&&(e.first_name&&(t+=" "),t+=e.last_name)),t},[l]),V=e=>null==g?void 0:g.some(t=>t.email.includes(e.email)),G=e=>null==h?void 0:h.some(t=>t.invited_user_email.includes(e.email)),Q=e=>e.id===(null==p?void 0:p.id),W=!(null==s?void 0:s.shared_individually),U=r&&(null==s?void 0:s.can_edit)||F,H=l.first_name||l.last_name||(null==l?void 0:l.email);return(0,d.jsxs)(d.Fragment,{children:[!P&&(0,d.jsxs)("div",{className:"relative mb-4 flex flex-row items-center",children:[(0,d.jsx)(tZ.qE,{size:"sm",uuid:l.id,children:(null==l?void 0:l.deactivation_date)?(0,d.jsx)(tZ.aV,{faIcon:"faUser",size:"sm"}):(null==l?void 0:l.profile_picture_url)?(0,d.jsx)(K(),{src:null==l?void 0:l.profile_picture_url,width:24,height:24,alt:H}):H}),(0,d.jsxs)("div",{className:"mx-2 flex flex-1 flex-col justify-center",children:[B(l)&&(0,d.jsx)("span",{className:"max-w-[16ch] truncate font-sans text-sm font-semibold text-slate-900",children:B(l)}),!B(l)&&(null==l?void 0:null===(t=l.email)||void 0===t?void 0:t.length)>0&&(0,d.jsx)("span",{className:"max-w-[16ch] truncate font-sans text-sm font-semibold text-slate-900",children:null==l?void 0:l.email})]}),(e=>{if("Owner"!=o){if(Q(e))return(0,d.jsx)("span",{className:"mr-3 bg-opacity-70 text-sm text-blueGray-400",children:"You"});if(V(e)){if(W)return(0,d.jsx)("span",{className:"mr-3 hidden bg-opacity-70 text-sm text-blueGray-400 sm:inline",children:"Teammate"})}else if(G(e)&&W){if(W)return(0,d.jsx)("span",{className:"mr-3 bg-opacity-70 text-sm text-blueGray-400",children:"Invited"})}else{if(!S&&D)return(0,d.jsxs)(J.z,{variant:"secondary",size:"small",className:"mr-3 gap-0",onClick:async()=>{L(!0),(0,q.L9)("invite_teammate",{location:"share_modal",email:e.email},"action","invited_teammate"),await m((0,tO.R2)({teammateEmail:e.email,organizationId:null==x?void 0:x.id,location:"share_modal"})),f()},children:["Invite",(0,d.jsx)("span",{className:"hidden sm:inline",children:"\xa0to Team"})]});if(S&&W)return(0,d.jsx)("span",{className:"mr-3 bg-opacity-70 text-sm text-blueGray-400",children:"Invited"})}}})(l),o?(0,d.jsx)(J.z,{variant:"ghost",onClick:()=>U&&z(!0),...U&&{icon:ec.gr5,iconPosition:"right",iconProps:{className:"text-slate-400"}},disabled:!U,children:o}):(0,d.jsx)(tM,{permissionLevel:o||(a===k.yz.Read?"Can view":a===k.yz.Write?"Can edit":null),availablePermissionLevels:(n=[{title:"Can View",onClick:()=>u?j(l.email,k.yz.Read):_({documentId:i.id,email:l.email,userId:l.id},k.yz.Read)},{title:"Remove",onClick:()=>u?j(l.email,k.yz.None):w({documentId:i.id,email:l.email,userId:l.id})}],(e=>{let t=null==g?void 0:g.find(t=>t.email.includes(e.email));return(null==t?void 0:t.permission_level)!=="read"})(l)&&(n=[{title:"Can Edit",onClick:()=>u?j(l.email,k.yz.Write):_({documentId:i.id,email:l.email,userId:l.id},k.yz.Write)},...n]),n),onToggleContextMenu:c,className:"flex-none",disabled:!(null==s?void 0:s.can_change_team_settings)})]},l.id),(0,d.jsx)("div",{children:P&&(0,d.jsxs)("div",{className:"mb-4 flex flex-col gap-2",children:[(0,d.jsx)("label",{className:"flex items-center text-[13px] font-medium leading-[15px] text-slate-800",children:"Update Owner"}),(0,d.jsxs)("div",{className:"flex flex-row items-start",children:[(0,d.jsx)("div",{className:"mr-3 flex-1",children:(0,d.jsx)(tB,{options:R,userOwner:null==i?void 0:i.user_owner,onChange:e=>{I(null==e?void 0:e.email),M(!0)},isDisabled:!1,organization:null==i?void 0:i.organization_owner})}),(0,d.jsx)(J.z,{onClick:()=>z(!1),variant:"secondary",className:"flex-none",children:"Cancel"})]})]})}),T&&(0,d.jsx)(tV.Z,{onCancel:()=>M(!1),onConfirm:()=>{(0,q.L9)("change_owner",{old_owner:l.email,new_owner:Z,id:i.id}),O({documentId:i.id,bodyParams:{user_owner_email:Z}}).then(()=>{C(),z(!1),M(!1),I(null),A()})}})]})};let tq=e=>{var t,n;let{document:i,sharedWith:l,candidates:a,account:s,permissions:o,onToggleContextMenu:r,onSelectUser:c,onAddCandidate:u,isLoading:m,isScribe:p,sharedIndividually:x=!1}=e,h=null==i?void 0:i.user_owner,v=(null==s?void 0:s.id)&&(null==s?void 0:s.id)===(null==i?void 0:null===(t=i.user_owner)||void 0===t?void 0:t.id),f=(null==i?void 0:null===(n=i.sharing_details)||void 0===n?void 0:n.perceived_organization_permission)===null;return(0,d.jsxs)("div",{className:"-mx-6 max-h-full overflow-y-auto px-6",children:[!x&&(null==o?void 0:o.can_invite)&&!m&&(0,d.jsx)(tT,{placeholder:"Add emails to share",filterKey:"email",onSelect:c,canInvite:!0,isScribe:p,onInvite:u,className:"mb-6",document:i}),m?(0,d.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,d.jsx)(tS.BeatLoader,{size:6,color:"#818CF8"})}):(0,d.jsxs)("div",{className:"max-h-[220px] overflow-y-auto pr-1.5",children:[(0,d.jsx)(tG,{scribeFile:i,overridePermissionLabel:"Owner",user:h,isOwner:v,permissions:o,onToggleContextMenu:r}),l.length>0&&l.map(e=>(0,d.jsx)(tG,{scribeFile:i,user:e.user,permissionLevel:e.permission_level,permissions:o,onToggleContextMenu:r},e.user.id)),a.length>0&&a.map(e=>(0,d.jsx)(tG,{isCandidate:!0,scribeFile:i,permissionLevel:e.permission_level,user:{email:e.email,first_name:"",last_name:""},permissions:o,onToggleContextMenu:r},e.email)),"organization_permission"in i&&!f&&(0,d.jsx)(tF,{file:i,account:s,onToggleContextMenu:r})]})]})};var tQ=e=>{var t;let{document:n,account:i,onToggleContextMenu:l}=e,a=null==n?void 0:null===(t=n.sharing_details)||void 0===t?void 0:t.shared_individually,{sharedWith:s,addPermissionForUser:o,isLoading:r,addPermissionForCandidate:c}=tk(n),{isScribe:u,document:m,isLoadingFile:p}=(0,N.T)(n.id,n.type),{candidates:x}=j(null==m?void 0:m.id),{permissions:h}=(0,C.ZP)(null==n?void 0:n.id);return(0,d.jsx)(tq,{document:m,sharedIndividually:a,sharedWith:s,candidates:x,account:i,permissions:h,onToggleContextMenu:l,onSelectUser:e=>o({email:e.email,userId:e.id,documentId:n.id}),onAddCandidate:c,isLoading:p||r,isScribe:u})};let tW=e=>{var t,n,i,l;let{document:a,activeTab:s,onClose:o,desktopOnly:r,onDocumentShared:c,hideEmbedCallout:u}=e,[m,p]=(0,E.useState)(null!=s?s:"people"),[h,_]=(0,E.useState)(!1),[Z,I]=(0,E.useState)(!1),T=(0,b.I0)(),{data:M,isLoading:F}=(0,v.ZP)(),O=(0,G.TV)(null==M?void 0:null===(t=M.active_organization)||void 0===t?void 0:t.super_organization),{document:H,isScribe:K,refetch:J}=(0,N.T)(null==a?void 0:a.id,null==a?void 0:a.type),{candidates:Y}=j(null==a?void 0:a.id),{users:$,isLoadingUsersWithPermission:X}=S(null==a?void 0:a.id),{updateGrowthState:et}=(0,L.N)(),{mutateAsync:en}=(0,y.t)(),ei=(null==a?void 0:a.type)==="knowledge_page",el=null==a?void 0:a.id,[ea,eo]=(0,E.useState)(!1),er=!(0,V.By)(null==H?void 0:null===(n=H.organization_owner)||void 0===n?void 0:n.super_organization),ed=(0,A.useRouter)(),{sidepanel:ec}=ed.query,eu=(0,g.useQueryClient)(),{permissions:em}=(0,C.ZP)(el),[ep,ex]=(0,E.useState)(void 0),[eh,ev]=(0,E.useState)(!1),[ef,eg]=(0,E.useState)(null),[eb,e_]=(0,E.useState)(!1),ej=(0,U.Z)(),ey=$.length+Y.length>0,eN=(null==M?void 0:M.id)===(null==H?void 0:null===(i=H.user_owner)||void 0===i?void 0:i.id),eC=!!H&&"submitted_for_seo"in H&&(null==H?void 0:H.submitted_for_seo),[ek,eS]=(0,E.useState)(!1),[eL,eP]=(0,E.useState)(!1),[ez,eE]=(0,E.useState)(""),[eZ,eI]=(0,E.useState)(""),eT=(er||(null==M?void 0:M.has_public_profile))&&eN,{isHardUsageLimitReached:eM}=(0,P.Z)(),[eF,eA]=(0,E.useState)(eM),{embedView:eR,onEmbedViewChange:eB}=(0,f.Z)(),[eV,eG]=(0,E.useState)(!ei&&!(null==M?void 0:M.seen_interactive_embed_callout)&&!ec&&!u),eq=(0,z.Z)(M);(0,E.useEffect)(()=>{!0===eb&&(null==c||c())},[eb]),(0,E.useEffect)(()=>{!F&&(null==M?void 0:M.seen_interactive_embed_callout)&&eG(!1)},[F,null==M?void 0:M.seen_interactive_embed_callout]);let eQ=(0,E.useMemo)(()=>{var e;let t="smart-embed"===m?(0,W.zf)("customization"):(0,W.zf)("export");return ek&&(0,d.jsx)(W.ZP,{superOrganization:null==H?void 0:null===(e=H.organization_owner)||void 0===e?void 0:e.super_organization,selectedFeature:t,onClose:()=>{(0,q.L9)("closed_feature_gate_modal",{location:"document_share_modal",tab:m}),eS(!1)},onUpgradeToPro:e=>{(0,q.L9)("clicked_feature_gate_modal_upgrade_to_pro",{location:"document_share_modal",feature:e}),ej({location:"document_share_modal",tab:m})},onSelectedFeature:e=>{(0,W.Wp)(e.title,"document_share_modal")}})},[ed,ek,m]),eW=(0,E.useMemo)(()=>(0,d.jsx)(eO,{open:eL&&!!ez,url:ez,onCancel:()=>{eP(!1),(0,q.L9)("closed_pdf_preview")},onAction:()=>{(0,q.L9)("get_scribe_pro",{location:"pdf_preview"}),ed.push("/billing/checkout?plan_type=five_user_team&plan_period=annual")}}),[eL,ez,ed]);if(X)return null;let eU=()=>{T((0,w.$C)({document:H,permissions:em})).then(()=>J());let e=(0,B.dK)(H,em,ey);"private"===e?e_(!1):e_(!0),(0,q.L9)("adjusted_sharing_permissions",{id:H.id,newDocumentPermission:e})},eH=null==em?void 0:em.can_export_pdf,eK=O||(null==em?void 0:em.can_export_text),eJ=O||(null==em?void 0:em.can_export_confluence);return eF?(0,d.jsx)(W.ZP,{superOrganization:null==H?void 0:null===(l=H.organization_owner)||void 0===l?void 0:l.super_organization,selectedFeature:(0,W.zf)("unlimited"),onClose:()=>{(0,q.L9)("closed_feature_gate_modal",{location:"document_share_modal",tab:m}),eA(!1),null==o||o()},onUpgradeToPro:e=>{(0,q.L9)("clicked_feature_gate_modal_upgrade_to_pro",{location:"document_share_modal",feature:e}),ej({location:"document_share_modal",tab:m})},onSelectedFeature:e=>{(0,W.Wp)(e.title,"document_share_modal")}}):(0,d.jsxs)(Q.Z,{style:{display:"block"},className:"block !w-[480px] max-w-[100vw] overflow-hidden rounded-xl !p-0 shadow-2xl",contentStyle:{display:"block"},onCancel:()=>{h||eL||eV||(Z&&eu.invalidateQueries(D.wZ),o())},darkBackdrop:!0,visible:!0,disableCloseOnClickOutside:eV,"data-testid":"file-share-modal",children:[(0,d.jsxs)("div",{className:"max-h-[calc(100vh-3rem)] w-full overflow-hidden text-left",children:[(0,d.jsx)("div",{className:"flex flex-col",children:(0,d.jsx)("div",{className:(0,x.cn)("flex flex-1 flex-shrink-0 flex-col transition-all duration-500 ease-in-out",{"sticky max-h-[700px] min-h-[444px]":"smart-embed"===m,"h-[108px] max-h-[400px] min-h-[108px]":"people"===m,"h-[142px] max-h-[488px] min-h-[142px]":"export"===m}),children:(0,d.jsxs)(R.mQ,{value:m,defaultValue:"people",className:"w-full",onValueChange:e=>{p(e),eo(!1),(0,q.L9)("click_share_modal_tab",{tab:e})},children:[(0,d.jsx)("div",{className:(0,x.cn)("w-full pb-4 pt-2 sm:px-6",{"shadow-sm":ea}),children:(0,d.jsxs)(R.dr,{variant:"switch",children:[(0,d.jsx)(R.SP,{value:"people",children:"Share"}),(0,d.jsx)(es,{open:eV,onPrimaryActionClick:()=>{eB(k.Ct.Movie),p("smart-embed"),eo(!1),(0,q.L9)("click_share_modal_tab",{tab:"smart-embed"}),eG(!1),et({seenInteractiveEmbedCallout:!0})},onSecondaryActionClick:()=>{eG(!1)},onClose:()=>{eG(!1),et({seenInteractiveEmbedCallout:!0})},children:(0,d.jsx)(R.SP,{value:"smart-embed",children:"Embed"})}),K&&(0,d.jsx)(R.SP,{value:"export",children:"Export"})]})}),(0,d.jsxs)(R.nU,{value:"people",className:"sm:px-6",tabIndex:-1,children:[(0,d.jsx)("div",{className:"mb-6 text-sm font-normal leading-tight text-slate-600",children:"Share link over email/chat or send directly to specific people."}),(0,d.jsx)(tQ,{account:M,document:a,onToggleContextMenu:_})]}),(0,d.jsx)(R.nU,{value:"smart-embed",className:(0,x.cn)("!mt-0 max-h-[calc(100vh-14rem)] overflow-auto !pt-2"),onScroll:e=>{eo(e.target.scrollTop>25)},children:(0,d.jsx)("div",{className:"sm:px-6",children:(0,d.jsx)(ew,{document:a,setEmbedSnippet:eI,embedView:eR,onEmbedViewChange:eB,onPopoverOpen:_})})}),(0,d.jsx)(R.nU,{value:"export",className:"sm:px-6",children:(0,d.jsxs)("div",{className:"pb-4",children:[(0,d.jsx)("div",{className:"mb-6 text-sm font-normal leading-tight text-slate-600",children:"View in other formats. These options do not automatically update."}),(0,d.jsx)(ee,{isFree:O,isPdfExportUnavailable:eq,showPdfExport:eH,onPdfExport:()=>{ex("pdf"),eq&&(0,q.L9)("clicked_preview_pdf")},showDocxExport:eH,onDocxExport:()=>{O?((0,q.L9)("show_feature_gate_modal",{location:"export_docx",feature:"DOCX Export"}),eS(!0)):ex("docx")},showHtmlExport:eK,onHtmlExport:()=>{O?((0,q.L9)("show_feature_gate_modal",{location:"export_html",feature:"HTML Export"}),eS(!0)):eg("html")},showMarkdownExport:eK,onMarkdownExport:()=>{O?((0,q.L9)("show_feature_gate_modal",{location:"export_markdown",feature:"Markdown Export"}),eS(!0)):eg("markdown")},showConfluenceExport:eJ,onConfluenceExport:()=>{O?((0,q.L9)("show_feature_gate_modal",{location:"export_confluence",feature:"Confluence Export"}),eS(!0)):ev(!0)}}),ep&&(0,d.jsx)(ti,{contentClassName:"w-[100%] h-[100%]",scribeDocumentId:null==H?void 0:H.id,onClose:()=>ex(void 0),format:ep,onPreviewPDF:e=>{eP(!0),eE(e),(0,q.L9)("opened_pdf_preview")},isPreview:eq}),ef&&["html","markdown"].includes(ef)&&(0,d.jsx)(e7,{scribeDocumentId:null==H?void 0:H.id,format:ef,onClose:()=>eg(null),contentClassName:"w-[100%] h-[100%]"}),eh&&(0,d.jsx)(e5,{scribeDocumentId:null==H?void 0:H.id,onClose:()=>ev(!1),organizationOwner:null==H?void 0:H.organization_owner})]})})]})})}),"people"===m&&(0,d.jsx)("div",{className:"border-slate-200 bg-slate-50",children:(0,d.jsx)(t_,{document:H,account:M,permissionMenuItems:(0,B.ZZ)(ey,em,null==H?void 0:H.organization_owner),onAdjustPermissions:eU,onToggleContextMenu:_,onSetSharingPermission:e_,handleSearchEngineIndexingToggle:e=>{en({documentId:el,bodyParams:{submitted_for_seo:e}}).then(()=>{eU()}),(0,q.L9)("search_indexing_toggled",{enabled:e,document_id:el})},isSearchEngineIndexingEnabled:!!eC,hasPublicProfile:null==M?void 0:M.has_public_profile,desktopOnly:r,showSearchIndexing:eT,isScribe:K,setRequireWorkspaceUpdate:I})}),"smart-embed"===m&&(0,d.jsx)(eD,{document:a,embedSnippet:eZ,embedView:eR,onProTagClick:()=>{(0,q.L9)("show_feature_gate_modal",{location:"smart_embed",feature:"Smart Embed"}),eS(!0)},onMenuOpen:_})]}),eQ,eW]})};var tU=e=>{let{document:t,onClose:n,desktopOnly:i,disableSidekickExp:l=!1,activeTab:a}=e,{sidepanel:s}=(0,A.useRouter)().query,[o,r]=(0,E.useState)(!1),[m,p]=(0,E.useState)(!1),[x,v]=(0,E.useState)(null!=a?a:"people"),f=(0,u.Z)(c.G3),[g,b]=(0,O.Z)("seenFirstShareModal",!1),_=f.enabled&&!g,[,w]=(0,O.Z)("show_side_panel_callout",!1),[j,y]=(0,O.Z)("has_hidden_sidekick_callout",!1),{isEligibleForSidekickIntroduction:N,firstStepURL:C}=F(t),k=null!==j&&!0!==j&&!s&&N&&!l&&!m,S=()=>{if((0,q.L9)("sidekick_callout_clicked_cta"),w(!0),(0,T.dE)("sidebar/assistant"),C){var e;null===(e=window)||void 0===e||e.open(C,"_blank")}};return f.ready?_?(0,d.jsx)(ea,{onSelectOption:e=>{v(e),b(!0),(0,q.L9)("closed_first_share_modal",{option:e})}}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(tW,{document:t,onClose:()=>{o&&k||n()},desktopOnly:i,disableSidekickExp:l,onDocumentShared:()=>{r(!0)},activeTab:x,hideEmbedCallout:f.enabled}),k&&(0,d.jsx)(h,{isVisible:o,onClose:()=>{y(!0),(0,q.L9)("sidekick_callout_closed"),r(!1),p(!0)},onContinue:()=>{S(),r(!1),p(!0)}})]}):null}},79954:function(e,t,n){var i=n(24246),l=n(22967),a=n(42171);let s={small:{logoClassName:"h-5 w-5",letterClassName:"text-[11px] rounded h-5 w-5"},medium:{logoClassName:"h-6 w-6",letterClassName:"text-[11px] rounded h-6 w-6 "},large:{logoClassName:"h-7 w-7",letterClassName:"rounded-lg text-lg h-9 w-9 p-[1.75px] text-lg drop-shadow "}},o={primary:{className:"text-white",style:{background:"linear-gradient(180deg, rgba(99, 102, 241, 0.84) 0%, rgba(88, 91, 214, 0.84) 100%)",boxShadow:"inset 0px 1px 1px rgba(129, 140, 248, 0.3)",textShadow:"0px 0.833333px 0.833333px rgba(15, 23, 42, 0.39)"}},secondary:{className:"bg-white text-indigo-500 border border-indigo-100",style:{}},outlineLight:{className:"bg-white text-slate-500 border border-indigo-100",style:{}}};t.Z=e=>{var t,n,r;let{activeTeam:d,className:c,size:u="large",variant:m="primary",clickable:p=!1}=e,x=null!==(r=null==d?void 0:null===(t=d.name[0])||void 0===t?void 0:t.toUpperCase())&&void 0!==r?r:"-";return(0,i.jsx)("button",{className:(0,l.cn)("rounded-lg bg-transparent p-0 text-white",{"!bg-white !p-1":(null==d?void 0:d.logo)&&"large"===u,"cursor-pointer hover:shadow-[0px_0px_0px_4px_#334155]":p}),onClick:()=>{p&&"large"===u&&(0,a.L9)("opened_team_dropdown",{location:"l1"})},children:d&&(null==d?void 0:d.logo)?(0,i.jsx)("div",{className:c,children:(0,i.jsx)("img",{className:"flex items-center justify-center rounded object-contain drop-shadow ".concat(s[u].logoClassName),src:null==d?void 0:null===(n=d.logo)||void 0===n?void 0:n.download_url,alt:"".concat(d.name,"-logo")})}):(0,i.jsx)("div",{className:(0,l.cn)(c,o[m].className,"flex items-center justify-center font-bold",s[u].letterClassName),style:{...o[m].style},children:x})})}},41395:function(e,t,n){var i=n(24246),l=n(83469),a=n(94033),s=n(27378),o=n(48407),r=n(22967),d=n(42171),c=n(95861);t.Z=e=>{let{className:t,query:n,onChange:u,placeholder:m,lightAlternative:p=!1,modalAlternative:x=!1,searchAppTag:h=null,open:v=!1,communityView:f=!1,variant:g="default",referrer:b="search"}=e,_=(0,s.useRef)(null),[w,j]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[C,k]=(0,s.useState)(!1),S="large"===g,L=(0,r.cn)("relative transition hover:border-opacity-50 hover:bg-opacity-10 text-left text-slate-500 focus-within:text-left flex items-center border border-slate-300 border-opacity-30 cursor-pointer rounded-md",{"p-2 h-8":!S,"p-3 h-10":S}),P=(0,r.cn)("cursor-pointer hover:text-blueGray-700 focus:bg-white focus:text-gray-900 focus:outline-none flex-1 border-none h-full w-full text-sm",{"p-2":!S,"bg-slate-100":!p,"bg-white":p}),z=()=>{(0,d.L9)("opened_search_modal"),N(!0)},E=e=>{if(e.stopPropagation(),x)z();else{var t;j(!0),null===(t=_.current)||void 0===t||t.focus()}},Z=e=>{null==u||u(e.target.value),k(e.target.value.length>0)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:t,children:w||""!==n||v?(0,i.jsxs)("div",{className:L,onClick:E,children:[(0,i.jsx)(a.G,{className:"inline text-base text-slate-400",icon:l.wn1}),(0,i.jsx)("input",{type:"text",name:"q",className:P,autoComplete:"off",ref:_,onClick:E,onFocus:()=>j(!0),onBlur:()=>j(!1),onChange:e=>x?z():Z(e),placeholder:m,value:n}),(0,i.jsx)("button",{className:(0,r.cn)("flex-none cursor-pointer bg-transparent p-2",{invisible:!C,visible:C}),onClick:()=>{_.current.value="",u(""),k(!1)},"aria-label":"Clear search query",children:(0,i.jsx)(a.G,{icon:l.YIN,className:"inline text-base text-slate-400"})})]}):(0,i.jsx)(o.z,{variant:"secondary",icon:l.wn1,iconProps:{className:"SearchIcon"},onClick:e=>{e.stopPropagation(),x?z():j(!0)}})}),(0,i.jsx)(c.Z,{open:y,onClose:N,forcedAppTagFilter:h,communityView:f,referrer:b})]})}},11979:function(e,t,n){n.d(t,{k:function(){return q}});var i=n(24246),l=n(23599),a=n(54062),s=n(99006),o=n(84139),r=n(4910),d=n(91809),c=n(40129),u=n(58109),m=n(80125),p=n(86677),x=n(27378),h=n(16125),v=n(39011),f=n(81488),g=n(18378),b=n(56985),_=n(1381),w=n(22967),j=n(18575),y=n(42171),N=n(66725),C=n(42364),k=n(98716),S=n(70360),L=n(29582),P=n(19973),z=n(50327),E=n(24304),Z=n(28895),I=n(62136),T=n(58539),M=n(61688),F=n(38579),D=n.n(F),A=n(83644),O=n(43044),R=n(33240);let B=e=>"".concat(e.first_name," ").concat(e.last_name),V=e=>{let{selectedUserEmail:t,onSelect:n,users:l}=e;(0,x.useEffect)(()=>{if(!t&&l){var e;n(null===(e=l[0])||void 0===e?void 0:e.email)}},[l,t,n]);let a=(null==l?void 0:l.find(e=>e.email===t))||{};if(!l||!a)return null;let s=e=>{var t,n,l,a;return(0,i.jsx)(A.qE,{size:"xs",uuid:null==e?void 0:e.id,children:(null==e?void 0:e.deactivation_date)?(0,i.jsx)(A.aV,{faIcon:"faUser",size:"sm"}):(null==e?void 0:e.profile_picture_url)?(0,i.jsx)(D(),{src:null==e?void 0:e.profile_picture_url,width:20,height:20,alt:null==e?void 0:null===(n=e.email)||void 0===n?void 0:null===(t=n.toUpperCase)||void 0===t?void 0:t.call(n)}):null==e?void 0:null===(a=e.email)||void 0===a?void 0:null===(l=a.toUpperCase)||void 0===l?void 0:l.call(a)})};return(0,i.jsx)("div",{className:"relative w-full",children:(0,i.jsxs)(R.Ph,{onValueChange:e=>{var t;return n(null===(t=l.find(t=>t.email===e))||void 0===t?void 0:t.email)},value:t,children:[(0,i.jsx)(R.i4,{showDirectionArrow:!1,className:"mt-2 w-full bg-white",children:(0,i.jsx)(R.ki,{placeholder:"Select new owner"})}),(0,i.jsx)(R.Bw,{className:"z-[999999999] bg-white",children:(0,i.jsx)(R.DI,{children:l.map(e=>(0,i.jsx)(R.Ql,{value:e.email,id:B(e),onSelect:()=>n(e),children:(0,i.jsxs)("div",{className:"flex w-full items-center justify-between gap-3",children:[s(e),(0,i.jsx)("span",{className:"whitespace-nowrap text-sm",children:B(e)}),(0,i.jsx)("span",{className:"truncate text-sm text-slate-400",children:null==e?void 0:e.email})]})},e.email))})})]})})};var G=e=>{var t;let{onSuccess:n,onCancel:l,isOpen:a,document:o}=e,[r,d]=(0,x.useState)(null),c=null==o?void 0:null===(t=o.organization_owner)||void 0===t?void 0:t.id,u=(0,M.q)({teamId:c}).data||[],m=(0,s.t)();return(0,i.jsx)(O.Vq,{open:a,children:(0,i.jsxs)(O.cZ,{className:"max-w-[448px]",children:[(0,i.jsx)(O.fK,{title:"Restore document",description:"The previous owner of ".concat(o.name," is deactivated. Select a new owner for this document. ")}),(0,i.jsx)(O.SL,{children:(0,i.jsx)(V,{users:u,selectedUserEmail:r,onSelect:e=>d(e)})}),(0,i.jsx)(O.cN,{primaryAction:{children:"Restore",onClick:async()=>{(0,y.L9)("clicked_restore_document",{document_id:o.id,new_owner_email:r}),await m.mutateAsync({documentId:o.id,bodyParams:{user_owner_email:r}}),null==n||n()},disabled:m.isLoading||!r},secondaryAction:{children:"Cancel",variant:"secondary",onClick:()=>{null==l||l()}}})]})})};let q=e=>{var t,n,M;let{containerClassName:F,document:D,dragEnabled:A=!1,openInEditor:O,openInNewTab:R,onDuplicated:B,onMenuOpen:V,disabled:q,tags:Q,onlyShowCreatedLine:W,shouldRestrictFunctionality:U,onBookmark:H,hideContextMenu:K,onRemoveFromProfile:J,variant:Y="dashboard",selectedCardId:$,onArchiveCardClick:X,referrer:ee,selectedItem:et,isProfileOwner:en,isTrigger:ei,onTriggerVisible:el,onLinkClick:ea,showAuthor:es,...eo}=e,er=(0,h.I0)(),ed=(0,p.useRouter)(),ec=(0,u.Z)(),eu=(0,P.Z)(),[em,ep]=(0,x.useState)(!1),[ex,eh]=(0,x.useState)(!1),[ev,ef]=(0,x.useState)(!1),[eg,eb]=(0,x.useState)(!1),[e_,ew]=(0,x.useState)(!1),[ej,ey]=(0,x.useState)(!1),[eN,eC]=(0,x.useState)(!1),{selectedFolderId:ek}=(0,h.v9)(z.pV),{typeFilter:eS}=(0,h.v9)(e=>e.workspace),{writableTeams:eL,canWriteInActiveTeam:eP}=(0,h.v9)(_.wL),{pinnedScribes:ez}=(0,h.v9)(g.F),{isHardUsageLimitReached:eE}=(0,c.Z)(),{refetch:eZ}=(0,r.T)(null==D?void 0:D.id,null==D?void 0:D.type),eI=(0,d.te)(null==D?void 0:D.id),{mutateAsync:eT}=(0,d.ru)(),{mutateAsync:eM}=(0,o.D)(),{mutate:eF}=(0,s.g)(),[eD,eA]=(0,x.useState)(!1),{data:eO}=(0,a.ZP)(),eR=null==eO?void 0:eO.active_organization,eB=(0,j.Z)(D),eV=ed.pathname.includes("profile"),eG=ec.split("__")[0].slice(1),eq=["documents","pages","scribes",I.mV.Archive].includes(eG),eQ=ez&&(ec.includes(I.mV.PinnedByMe)||ec.includes(I.mV.PinnedByTeam)),eW=(0,m.IV)(),eU=(0,x.useMemo)(()=>{var e;return ej&&(0,i.jsx)(L.ZP,{superOrganization:null==D?void 0:null===(e=D.organization_owner)||void 0===e?void 0:e.super_organization,selectedFeature:(0,L.zf)("unlimited"),onClose:()=>{(0,y.L9)("closed_feature_gate_modal",{location:"document_card_copy_link_button"}),ey(!1)},onUpgradeToPro:e=>{(0,y.L9)("clicked_feature_gate_modal_upgrade_to_pro",{location:"document_share_modal",feature:e}),eu({location:"document_card_copy_link_button"})},onSelectedFeature:e=>(0,L.Wp)(e.title,"document_card_copy_link_button")})},[null==D?void 0:null===(t=D.organization_owner)||void 0===t?void 0:t.super_organization,ej,eu]),eH=e=>{er((0,b.$C)({document:D,permissions:e,location:"document_card"})).then(()=>eZ())},eK=()=>{let{id:e}=D,t=ed.asPath.includes("#private")?"private":"team",n=()=>{er((0,Z.oP)({folder:ek,permission:t,typeFilter:eS})),B?B():ed.push("/workspace#created_by_me")};eM({id:e,context:o.k.WORKSPACE},{onSuccess:n,onError:()=>{eM({id:e,isRetry:!0,context:o.k.WORKSPACE},{onSuccess:n})}})};return eN?null:(0,i.jsxs)("div",{className:(0,w.cn)("h-full",F),children:[(0,i.jsx)(T.Z,{disableCopyToClipboard:eE&&eB&&(null==eB?void 0:eB.can_see_sharing_modal),openInEditor:O,openInNewTab:R,showReviewTags:null==eR?void 0:null===(n=eR.super_organization)||void 0===n?void 0:n.show_process_tags,showPinnedInfo:eQ,dragEnabled:A,document:D,adjustPermissions:()=>{er((0,E.L1)({documentId:null==D?void 0:D.id})).then(e=>{let{payload:t}=e;if(t&&t.can_see_sharing_modal&&eE){(0,y.L9)("show_feature_gate_modal",{location:"document_usage_limit",feature:"Sharing Document Above Usage Limit"}),ey(!0);return}eH(t)}),v.Z.trackCopyLink(null==D?void 0:D.id,"document_card_copy_link_button")},onFavorite:()=>{var e,t,n;if(eT({fileId:null==D?void 0:D.id,data:{isBookmarked:!(null===(e=eI.data)||void 0===e?void 0:e.is_bookmarked)}}).then(e=>{et!==I.mV.Saved||(null==e?void 0:e.is_bookmarked)||eC(!0)}),"publicProfile"===Y&&!en){(0,y.L9)((null===(n=eI.data)||void 0===n?void 0:n.is_bookmarked)?"unbookmarked_scribe":"bookmarked_scribe",{scribeId:D.id,location:"public_profile"});return}(0,y.L9)((null===(t=eI.data)||void 0===t?void 0:t.is_bookmarked)?"unbookmarked_scribe":"bookmarked_scribe",{scribeId:D.id,location:"workspace"})},disabled:q,onlyShowCreatedLine:!0,cardTeamName:eV||eq?void 0:null==D?void 0:null===(M=D.organization_owner)||void 0===M?void 0:M.name,showUpdatedTag:null==D?void 0:D.changed_since_view,onLinkClick:ea,onArchiveCardClick:X,onCopyToTeam:()=>{(null==eL?void 0:eL.length)===1&&"scribe"===D.type?eK():ep(!0)},onMoveToTeam:()=>eh(!0),onArchive:()=>eb(!0),onUnarchive:()=>{er((0,f.qK)(D.id)).then(l.SI).then(e=>{let t="private"===e.global_permission?"#private":"#documents";ed.push(t)}).catch(e=>{var t;console.error("Error un-archiving a file: ",e),(null==e?void 0:null===(t=e.detail)||void 0===t?void 0:t.includes("is deactivated"))&&eA(!0)}),(0,y.L9)("unarchive_scribe",{scribeId:D.id})},onDelete:()=>ew(!0),onShare:()=>{ef(!0)},onMenuOpen:()=>{er((0,E.L1)({documentId:D.id})).then(()=>null==V?void 0:V())},onPinnedInfoClick:()=>er((0,E.L1)({documentId:D.id})),permissionContext:{permissions:eB,canWriteInActiveTeam:eP,hasWritableTeams:eL.length>0},shouldRestrictFunctionality:U,hideContextMenu:K,onRemoveFromProfile:J,variant:Y,selectedCardId:$,referrer:ee,showAuthor:es,...eo}),eD&&(0,i.jsx)(G,{document:D,isOpen:eD,onCancel:()=>{eA(!1),(0,y.L9)("cancel_restore_to_other_user")},onSuccess:()=>{er((0,f.qK)(D.id)).then(l.SI).then(e=>{let t="private"===e.global_permission?"#private":"#documents";ed.push(t)}).catch(e=>{console.error("Error un-archiving a file: ",e),eA(!0)}),(0,y.L9)("unarchive_scribe",{scribeId:D.id})}}),em&&(0,i.jsx)(k.Z,{visible:em,action:"Duplicate",onCancel:()=>ep(!1),document:D}),ex&&(0,i.jsx)(k.Z,{visible:ex,action:"Move",onCancel:()=>eh(!1),document:D}),ev&&(0,i.jsx)(C.Z,{document:D,onClose:()=>ef(!1),desktopOnly:null==eO?void 0:eO.isDesktopOnly,disableSidekickExp:!0}),(0,i.jsx)(S.Z,{description:(0,i.jsx)(()=>{var e,t,n;return(null==eR?void 0:eR.id)===(null==D?void 0:null===(e=D.organization_owner)||void 0===e?void 0:e.id)?(0,i.jsxs)(i.Fragment,{children:['Are you sure you want to delete "',null==D?void 0:D.name,'"?']}):(0,i.jsxs)(i.Fragment,{children:['Are you sure you want to delete "',null==D?void 0:D.name,'" under',(0,i.jsxs)("b",{children:[" ",null==D?void 0:null===(t=D.organization_owner)||void 0===t?void 0:t.name]}),"? To restore this document, please switch teams to",(0,i.jsxs)("b",{children:[" ",null==D?void 0:null===(n=D.organization_owner)||void 0===n?void 0:n.name]}),"."]})},{}),open:eg,onCancel:()=>eb(!1),onDelete:()=>{eF({documentId:D.id}),eb(!1),(0,y.L9)("archive_scribe",{scribeId:D.id})}}),(0,i.jsx)(S.Z,{actionText:"Delete Forever",description:'Are you sure you want to permanently delete "'.concat(D.name,'"?'),open:e_,title:"Confirm Delete",onCancel:()=>ew(!1),onDelete:()=>{er((0,f.js)(D.id)).then(()=>{eW(e=>({...e,pages:e.pages.map(e=>({...e,total_files:e.total_files-1,documents:e.documents.filter(e=>e.id!==D.id)}))}))}),ew(!1),(0,y.L9)("delete_scribe",{scribeId:D.id})}}),eU,ei&&(0,i.jsx)(N.Z,{onVisible:el})]})}},66725:function(e,t,n){var i=n(24246),l=n(27378),a=n(62560);t.Z=e=>{let{onVisible:t,threshold:n=1,rootMargin:s="0px",root:o=null,className:r}=e,d=l.useRef(null),c=(0,a.Z)(d,{root:o,rootMargin:s,threshold:n});return(0,l.useEffect)(()=>{(null==c?void 0:c.isIntersecting)&&t()},[null==c?void 0:c.isIntersecting,t]),(0,i.jsx)("div",{className:r,ref:d})}},28031:function(e,t,n){n.d(t,{Z:function(){return x}});var i=n(24246),l=n(83469),a=n(94033),s=n(63688),o=n(27378),r=n(22967),d=n(22107),c=e=>{let{className:t,...n}=e;return(0,i.jsxs)("div",{className:(0,r.cn)("inline-flex w-14 items-center rounded bg-emerald-50 px-1 py-0.5 text-[9px] font-bold uppercase leading-[11px] text-emerald-500",t),...n,children:[(0,i.jsx)(a.G,{icon:d.fV7,className:"mr-1 h-[11px] w-[11px]"}),"active"]})};let u=(e,t)=>"transparent"===e?(0,r.cn)("py-2 px-4 bg-white bg-opacity-10 text-sm leading-5 font-bold text-white",t?"rounded-t-lg":"rounded-lg"):(0,r.cn)("bg-white border border-slate-300 text-slate-800 rounded"),m=(e,t,n)=>"transparent"===e?"py-2 bg-white bg-opacity-10 text-sm leading-5 font-normal text-white":(0,r.cn)("py-2 text-sm text-slate-800",t?"bg-slate-100":"bg-white",{"flex justify-between items-center":n}),p=e=>{let{value:t,disabled:n,onChange:d,variant:p,options:x,placeholder:h,className:v,itemClassName:f,showActiveTag:g,...b}=e,_=(0,o.useMemo)(()=>{let e=x.find(e=>{let{value:n,label:i}=e;return n===t});return(null==e?void 0:e.label)||h},[x,t,h]),w=(0,o.useMemo)(()=>{let e=x.find(e=>{let{value:n,isActive:i}=e;return n===t&&i});return(null==e?void 0:e.isActive)||!1},[x,t]);return(0,i.jsx)(s.Ri,{value:t,onChange:d,children:(0,i.jsxs)("div",{className:(0,r.cn)("relative",v),children:[(0,i.jsxs)(s.Ri.Button,{className:e=>{let{open:t}=e;return(0,r.cn)("flex w-full cursor-pointer items-center justify-between py-3 pl-3 pr-2 text-sm leading-5",u(p,t))},children:[(0,i.jsx)("span",{children:_}),!!w&&(0,i.jsx)(i.Fragment,{children:g&&(0,i.jsx)(c,{className:"ml-2 mr-auto"})}),(0,i.jsx)(a.G,{icon:l.gc2,className:"h-4 w-4 text-slate-500"})]}),(0,i.jsx)(s.uT,{as:o.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,i.jsx)(s.Ri.Options,{className:"absolute z-10 m-0 mt-2 max-h-[40vh] w-full cursor-pointer list-none overflow-visible overflow-y-scroll rounded border border-blueGray-300 p-0 shadow-lg",children:x.map(e=>{let{value:t,label:n,isActive:o}=e;return(0,i.jsxs)(s.Ri.Option,{value:t,className:e=>{let{active:t}=e;return(0,r.cn)("w-full px-4 text-left",m(p,t,n===_),f)},children:[n,!!o&&(0,i.jsx)(i.Fragment,{children:g&&(0,i.jsx)(c,{className:"ml-1.5 mr-auto"})}),!o&&(0,i.jsx)("div",{className:"ml-1.5 mr-auto",children:" "}),n===_&&(0,i.jsx)(a.G,{icon:l.LEp,className:"h-4 w-4 text-slate-900"})]},t)})})})]})})};p.defaultProps={placeholder:"Select an option...",variant:"regular",disabled:!1};var x=p},62564:function(e,t,n){var i=n(24246),l=n(83469),a=n(94033);n(27378);var s=n(22967);t.Z=e=>{let{title:t="",imageUrl:n,variant:o="primary",classes:r,icon:d,isEditable:c=!1,onDelete:u,...m}=e;return(0,i.jsxs)("button",{className:(0,s.cn)("white mr-1 flex items-center justify-center rounded bg-white p-1 px-2",d?"pl-1":"px-2","borderless"===o?"border-transparent":"ring-1 ring-slate-400/20 hover:ring-slate-400/50 transition duration-100",r),title:t,...m,children:[d&&(0,i.jsx)("div",{className:"mr-1 flex flex-none items-center justify-center",children:d}),n&&(0,i.jsx)("div",{className:"mr-1 flex items-center justify-center opacity-90",children:(0,i.jsx)("img",{alt:"tag-icon",className:"h-4 w-4 rounded-sm",src:n})}),(0,i.jsx)("span",{className:"max-w-[140px] truncate break-all font-sans text-xs leading-4 text-slate-500",children:t}),c&&u&&(0,i.jsx)(a.G,{icon:l.g82,className:"ml-1 mr-[-4px] box-border h-[14px] w-[14px] cursor-pointer p-px text-base text-slate-300 hover:text-slate-400",onClick:u})]})}},89377:function(e,t,n){n.d(t,{Z:function(){return i.Z}});var i=n(62564)},13135:function(e,t,n){n.d(t,{sY:function(){return u}});var i=n(24246),l=n(48365),a=n(27378),s=n(39011),o=n(31928),r=n(42171),d=n(62136),c=n(13422);let u=e=>{let{document:t,sharedFirstScribe:n,desktopOnly:i,location:c="scribe_editor_page_copy_scribe_button",linkToPreview:u,adjustPermissions:m}=e,{updateGrowthState:p}=(0,l.N)(),x=t&&(null==t?void 0:t.type)===d.rZ.KnowledgePage,h=(0,a.useMemo)(()=>u||(t?(0,o.W0)(t.id,t.name,t.type,{altApi:i}):""),[u,t,i]);return{url:h,onClick:()=>{n?((0,r.L9)("got_share_link",{location:c,link:h}),x&&(0,r.L9)("knowledge_page_copy_link")):(p({sharedFirstScribe:!0}),(0,r.L9)("got_share_link",{location:c,link:h},"action","shared_first_scribe")),m&&(null==m||m());try{s.Z.trackCopyLink(null==t?void 0:t.id,c)}catch(e){console.error(e)}}}};t.ZP=e=>{let{document:t,desktopOnly:n=!1,adjustPermissions:l,sharedFirstScribe:a=!1,linkToPreview:s,location:o="scribe_editor_page_copy_scribe_button",...r}=e,{url:d,onClick:m}=u({document:t,sharedFirstScribe:a,desktopOnly:n,linkToPreview:s,adjustPermissions:l,location:o});return(0,i.jsx)(c.u,{...r,onClick:m,url:d})}},13422:function(e,t,n){n.d(t,{u:function(){return d}});var i=n(24246),l=n(83469),a=n(36012),s=n.n(a),o=n(27378),r=n(48407);let d=e=>{let{variant:t="primary",url:n,onClick:a,className:d,buttonText:c="Copy Link",showButtonText:u=!0,showIcon:m=!0,size:p}=e,[x,h]=(0,o.useState)(!1),v=x&&!u?l.E9T:l.nNP;return(0,i.jsx)(r.z,{onClick:e=>{s()(n),h(!0),a(e),setTimeout(()=>h(!1),800)},className:d,icon:m?v:void 0,variant:t,size:p,children:u?x?"Copied!":c:void 0})}},53924:function(e,t,n){n.d(t,{Z:function(){return i.ZP},u:function(){return l.u}});var i=n(13135),l=n(13422)},64467:function(e,t,n){n.d(t,{$:function(){return s}});var i=n(24246),l=n(22107),a=n(94033);let s=e=>{let{loading:t=!0,icon:n=l.LM3,...s}=e;return t&&(0,i.jsx)(a.G,{color:"#818CF8",spin:!0,icon:n,...s})}},98592:function(e,t,n){n.d(t,{Z:function(){return F}});var i=n(24246),l=n(21947),a=n(54062),s=n(99006),o=n(84139),r=n(56552),d=n(10965),c=()=>(0,r.useMutation)({mutationFn:e=>{let{id:t,orgId:n}=e;return d.Z.move({documentMetadataId:t,newOrganizationId:n})}}),u=n(55260),m=n(49660),p=n(4238),x=n(80850),h=n(86677),v=n(27378),f=n(16125),g=n(1381),b=n(31928),_=n(42171),w=n(65801),j=n(43879),y=n(22967);let N=e=>{let{label:t,labelMobile:n,value:l,name:a,disabled:s,onChange:o,checked:r,margin:d="mb-4",small:c,...u}=e;return(0,i.jsxs)("div",{className:(0,y.cn)(d,"flex cursor-pointer flex-row items-center text-blueGray-700",{"pointer-events-none opacity-50":s},"hover:border-indigo-500 hover:text-indigo-500"),onClick:()=>null==o?void 0:o(l),children:[(0,i.jsx)("div",{className:(0,y.cn)("flex items-center justify-center rounded-full border-3 border-indigo-500",c?"h-5 w-5":"h-6 w-6",{"border-blueGray-300":!r}),children:r&&(0,i.jsx)("div",{className:(0,y.cn)("flex rounded-full bg-indigo-500",c?"h-[6.67px] w-[6.67px]":"h-2 w-2")})}),t&&(0,i.jsxs)("label",{className:(0,y.cn)("cursor-pointer font-sans text-sm",c?"ml-2":"ml-4"),htmlFor:l+(a||""),children:[(0,i.jsx)("span",{className:(0,y.cn)({hidden:n,"sm:inline":n}),children:t}),n&&(0,i.jsx)("span",{className:(0,y.cn)({inline:n,"sm:hidden":n}),children:n})]})]})};N.defaultProps={value:""};var C=n(28031),k=n(4941),S=n(83469),L=n(94033),P=n(63688),z=n(60940),E=n(68005),Z=e=>{let{icon:t,title:n,children:l,className:a,titleClassNames:s,loading:o,onCancel:r,darkBackground:d,fullScreen:c,...u}=e;return(0,i.jsx)(E.Z,{onCancel:r,visible:!0,fullScreen:c,...u,children:(0,i.jsxs)("div",{className:(0,y.cn)("relative inline-block w-[560px] overflow-hidden rounded-4xl bg-white py-8 align-middle antialiased shadow-2xl",{"bg-slate-700":d},!c&&"w-[480px] rounded-3xl",a),...u,children:[!o&&(0,i.jsx)("button",{onClick:r,className:"absolute right-8 cursor-pointer bg-white",children:(0,i.jsx)(L.G,{className:"text-xl text-slate-500",icon:S.YIN})}),(0,i.jsx)(L.G,{className:"text-[40px] text-indigo-500",icon:t}),n&&(0,i.jsx)(P.Vq.Title,{as:"h1",className:(0,y.cn)("text-2xl font-extrabold text-blueGray-900",s),children:n}),o?(0,i.jsx)("div",{className:"mt-8 grid content-center",children:(0,i.jsxs)("div",{className:"clear mr-4 mt-2",children:[(0,i.jsx)(z.aN,{size:"sm"})," \xa0"]})}):l]})})},I=n(50327),T=n(28895),M=n(94513),F=e=>{let{onCancel:t,document:n,visible:r,action:d,rerouteOnSuccess:y=!0}=e,S=(0,h.useRouter)(),L=(0,f.I0)(),{writableTeams:P}=(0,f.v9)(g.wL),{data:z}=(0,a.ZP)(),E=null==z?void 0:z.active_organization,[F,D]=(0,v.useState)(E),[A,O]=(0,v.useState)(!1),[R,B]=(0,v.useState)(""),[V,G]=(0,v.useState)(void 0),[q,Q]=(0,v.useState)(!1),{bulkEditorContext:W}=(0,u.ZP)()||{},[U,H]=(0,v.useState)(!0),K=e=>H("keep"===e),{scribeFile:J}=(0,p.c)(null==n?void 0:n.id,{enabled:(null==n?void 0:n.type)==="scribe"&&"Move"===d}),{data:Y}=(0,m.k)({documentId:null==n?void 0:n.id,isAuthenticated:!0,enabled:(null==n?void 0:n.type)==="knowledge_page"&&"Move"===d&&!!(null==n?void 0:n.id)}),{mutateAsync:$}=(0,x.K)(),{mutateAsync:X}=(0,m.c)(),{mutateAsync:ee}=c(),{mutateAsync:et}=(0,o.D)(),{mutateAsync:en}=(0,s.t)(),ei=async e=>{var i,l,a,s;"knowledge_page"===e.type&&"Duplicate"===d?(0,_.L9)("duplicate_page",{location:"workspace"}):(0,_.L9)("".concat(d.toLowerCase(),"_scribe_to_team"),{sourceScribeId:n.id,location:W});let o="Success! Your Scribe has been ".concat("Duplicate"===d?"duplicated":"moved",' to\n "').concat(null==e?void 0:null===(i=e.organization_owner)||void 0===i?void 0:i.name,'".');if(!y){O(!1),G(o);return}(null===(l=e.organization_owner)||void 0===l?void 0:l.id)!==(null==E?void 0:E.id)&&(L((0,I.kt)(null)),await $({team:{id:null===(s=e.organization_owner)||void 0===s?void 0:s.id}}));let r=null==e?void 0:null===(a=e.folder)||void 0===a?void 0:a.id,c=r?(0,b.km)(r,"documents"):"documents";L((0,T.kt)("private"===e.global_permission?"private":"documents")),L((0,I.kt)(r||null)),S.push("/workspace#".concat(c)),O(!1),G(o),t()},el=async()=>{if(!n||!F)return;let e=()=>{O(!1),G(void 0),B("Something went wrong try again later.")};if("knowledge_page"===n.type&&"Duplicate"===d){X({pageToBeDuplicatedId:n.id,keepScribes:U,orgId:null==F?void 0:F.id},{onSuccess:ei,onError:e});return}if("Duplicate"===d){et({id:n.id,orgId:null==F?void 0:F.id,context:o.k.WORKSPACE},{onSuccess:ei,onError:()=>{et({id:n.id,isRetry:!0,context:o.k.WORKSPACE},{onSuccess:ei,onError:e})}});return}ee({id:n.id,orgId:null==F?void 0:F.id},{onSuccess:ei,onError:e})},ea=async()=>{var e;let t=(null==n?void 0:n.type)==="scribe"?J:Y,i=null==t?void 0:null===(e=t.user_owner)||void 0===e?void 0:e.email,l=null==z?void 0:z.email;(0,_.L9)("change_owner",{old_owner:i,new_owner:l,id:n.id}),en({documentId:t.id,bodyParams:{user_owner_email:l}}).then(()=>{Q(!1);let e="Duplicate"===d?"duplicated":"moved";G("Please wait as your Document is being ".concat(e,".")),O(!0),el()}).catch(()=>{O(!1),G(void 0),B("Something went wrong try again later.")})},es=async()=>{let e="Duplicate"===d?"duplicated":"moved";if(G("Please wait as your Document is being ".concat(e,".")),O(!0),B(""),"Move"===d&&(null==F?void 0:F.id)!==E.id){var t,i,l,a;let e=await L((0,g.QZ)({id:null==F?void 0:F.id,nameParam:"",limit:1e3})),s=(null==n?void 0:n.type)==="scribe"?J:Y,o=null==s?void 0:null===(t=s.user_owner)||void 0===t?void 0:t.id;if(!(null==e?void 0:null===(a=e.payload)||void 0===a?void 0:null===(l=a.teammates)||void 0===l?void 0:null===(i=l.results)||void 0===i?void 0:i.some(e=>e.id===o))){G(void 0),O(!1),Q(!0);return}}el()};return A||V?(0,i.jsx)(Z,{onCancel:t,icon:A?"Move"===d?l.ca9:l.kZ_:l.fV7,title:V,loading:A,titleClassNames:"px-6"}):(0,i.jsxs)(i.Fragment,{children:[!q&&(0,i.jsx)(M.Z,{visible:r,className:"max-w-[400px]",onCancel:t,title:"".concat(d," ").concat("scribe"===n.type?"Scribe":"Page"),children:(0,i.jsxs)("div",{className:"mt-2 flex w-full flex-col",children:[(0,i.jsx)("p",{className:"mb-2 mt-0 text-left text-xs font-semibold",children:"Select a team:"}),(0,i.jsx)(C.Z,{onChange:e=>{D(P.find(t=>t.id===e))},options:P.filter(e=>!e.is_request).map(e=>({value:e.id,label:e.name,isActive:e.id===(null==E?void 0:E.id)})),value:(null==F?void 0:F.id)||null,showActiveTag:!0,className:"mb-6"}),"knowledge_page"===n.type&&"Duplicate"===d&&(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)("p",{className:"mt-0 text-left text-sm font-semibold text-slate-800",children:"I want the embedded Scribes to:"}),(0,i.jsx)(N,{checked:U,value:"keep",onChange:K,label:"Link to the existing Scribes"}),(0,i.jsx)(N,{checked:!U,value:"replace",onChange:K,label:"Be replaced with placeholder Scribes"})]}),(0,i.jsx)(j.Z,{title:R&&"There was an error processing the document.",variant:"error",className:"my-2"}),(0,i.jsxs)("div",{className:"-mx-6 -mb-6 flex flex-row items-center justify-end rounded-b-3xl bg-slate-50 px-6 py-4",children:[(0,i.jsx)(w.Z,{variant:"outlineLight",size:"small",disabled:A,onClick:t,className:"mr-4",children:"Cancel"}),(0,i.jsx)(w.Z,{variant:"primary",size:"small",disabled:A||!(null==F?void 0:F.id),onClick:es,children:d})]})]})}),q&&(0,i.jsx)(k.Z,{onCancel:()=>Q(!1),onConfirm:()=>ea(),message:"After you move this document, the original owner may no longer have access to this document, and you will be the new document owner. Are you sure you'd like to move this document?"})]})}},98716:function(e,t,n){n.d(t,{Z:function(){return i.Z}});var i=n(98592)},70360:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(24246);n(27378);var l=n(43044),a=e=>{let{actionText:t,cardContent:n,description:a,loading:s,open:o,title:r,onCancel:d,onDelete:c}=e;return(0,i.jsx)(l.Vq,{open:o,onOpenChange:d,children:(0,i.jsxs)(l.cZ,{children:[(0,i.jsx)(l.fK,{title:r||"Confirmation",description:a}),n&&(0,i.jsx)(l.SL,{children:n}),(0,i.jsx)(l.cN,{primaryAction:{children:t||"Delete",variant:"danger",onClick:c,loading:s},secondaryAction:{children:"Cancel",onClick:d}})]})})}},19973:function(e,t,n){var i=n(86677),l=n(27378),a=n(42171);t.Z=()=>{let e=(0,i.useRouter)();return(0,l.useCallback)(function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(async()=>{let i=n?new URLSearchParams(n):"";(0,a.L9)("get_scribe_pro",{...t}),await e.push({pathname:"/billing",query:i.toString()})})()},[e])}},24304:function(e,t,n){n.d(t,{L1:function(){return i.L},kz:function(){return a},Rf:function(){return l}});var i=n(77425);let l=(0,n(3228).P1)([e=>{var t;return{permissions:(null===(t=e.sharingPermissions)||void 0===t?void 0:t.permissions)||{}}},(e,t)=>t],(e,t)=>{let{permissions:n}=e,{document:i}=t;return n[null==i?void 0:i.id]});function a(e){return e.sharingPermissions}n(79989)}}]);