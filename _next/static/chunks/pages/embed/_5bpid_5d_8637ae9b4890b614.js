(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3312],{31954:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/embed/[pid]",function(){return n(98307)}])},98307:function(e,t,n){"use strict";n.r(t),n.d(t,{MAX_ACTION_LIMIT:function(){return ng},__N_SSP:function(){return nx},default:function(){return nw}});var i,r,l,s,a=n(24246),o=n(8022),c=n(77737),d=n(78919),u=n(17046),m=n(37892),f=n(27378),p=n(27855),v=n(15597),h=n(56552),x=n(70385);let g=e=>e.map(e=>{let{file:t,...n}=e,i=new Audio(t);return i.preload="auto",i.load(),{...n,file:t,audioSource:i,durationMs:n.duration_ms}}),b=async e=>g(await x.Z.getActionDescriptionAudioList(e));var w=(e,t)=>{let{actionIds:n=[],page:i=0,pageSize:r=2}=e,l=n.slice(0,i*r+r),s=(0,h.useQueries)(l.length?l.map(e=>({queryKey:["action-audios",e],queryFn:async()=>b(e),staleTime:1/0,cacheTime:1/0,...t})):[]),a=s.some(e=>e.isLoading),o=s.some(e=>e.isFetching);return{data:s,isLoading:a,isFetching:o,currentPage:i}};let y=e=>{let t=[],n=0;return e.forEach((e,i)=>{"section"===e.kind?(t.length>0&&(t[t.length-1].count=n),t.push({sectionIndex:i,count:0}),n=0):n+=1}),t.length>0&&(t[t.length-1].count=n),t.length>0&&0===t[0].count&&t.shift(),t},k=function(e){let{index:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.length<=t)return;let n=e[t],i=(0,m.$7)(n);if(!i)return k(e,{index:t+1});let r=new Image;"stack"===n.kind&&r.setAttribute("crossOrigin","anonymous"),r.onload=()=>k(e,{index:t+1}),r.src=i},j=e=>{(null==e?void 0:e.logoUrl)&&(new Image().src=e.logoUrl)};new h.QueryClient;let _=e=>{let[t]=e.reduce((e,t)=>{if("instruction"===t.kind&&null!==t.instruction_type)return e;let[n,i]=e;return[n.set(t.id,i),i+1]},[new Map,1]);return t},C={100:500,200:1e3,400:1500,800:2e3},S=e=>{let t=Object.keys(C).map(Number).sort((e,t)=>e-t).find(t=>e<t);return t?C[t]:3e3},N=e=>{let t=0;return e.map(e=>{let n="section"===e.kind||"tip"===e.instruction_type||"warning"===e.instruction_type;return n||(t+=1),{id:e.id,stepIdx:n?null:t}})},M=(e,t)=>{var n;if(-1===t)return 0;let i=null===(n=e[t])||void 0===n?void 0:n.id,r=N(e),l=r.findIndex(e=>e.id===i);if(-1!==l&&null!==r[l].stepIdx)return r[l].stepIdx;let s=r.slice(0,l).reverse().find(e=>null!==e.stepIdx);if(s||t===e.length)return s.stepIdx;let a=r.slice(l+1).find(e=>null!==e.stepIdx);return a?a.stepIdx:null},E=(e,t)=>Math.min(Math.max(e/t*100,0),100),T=(e,t)=>Math.round(e/100*t),R=(e,t)=>{let n=e.find(e=>e.id===t);return n?n.durationMs:void 0};var A=n(52138),P=n(69711),L=n(69623);let z=e=>"object"==typeof e&&"x"in e&&"y"in e&&"number"==typeof e.x&&"number"==typeof e.y,I=(e,t)=>{let n=e.find(e=>e.id===t);return n?n.duration||0:e.filter(e=>e.parentActionId===t).reduce((e,t)=>e+(t.duration||0),0)},D=async(e,t,n,i)=>{if(!e)return{naturalWidth:0,naturalHeight:0,width:0,height:0,scale:0};try{return await new Promise((r,s)=>{let a=new Image;a.src=e,a.onload=()=>{let e=a.naturalWidth*n,s=t.x/e,o=e*s,c=a.naturalHeight*n,d=t.y/c,u=c*d;if(i===l.Movie&&(o=1.2*t.x,u=a.naturalHeight*(o/a.naturalWidth)),i===l.Vertical){let n=c/e;o=(u=t.y)/n}let m=o/a.naturalWidth,f=u/a.naturalHeight,p=(m+f)/2;if(i===l.Default){let i=t.x/P.e5;p=n*i,e=c/A.Hb}r({width:e,height:c,naturalWidth:a.naturalWidth,naturalHeight:a.naturalHeight,scale:p})},a.onerror=e=>{s(Error("getImageDimensions Failed to load image: ".concat(e)))}})}catch(t){return(0,v.l)(t,{tags:{action:"Interactive Embeds getImageDimensions"},level:"error",contexts:{prefetchedUrl:e}}),Promise.reject(t)}},H=(e,t)=>{if(!z(e))return{originalTranslate:null,scaledTranslate:null,diffTranslate:null};let n=new p.E(e),i=n.add(n.multipliedBy(t)),r=i.subtract(n);return{originalTranslate:n,scaledTranslate:i,diffTranslate:r}},B=e=>{var t,n,i,r,l,s;let a,o;return(null===(t=e.position)||void 0===t?void 0:t.x)&&(null===(n=e.position)||void 0===n?void 0:n.y)&&(a=e.position.x-(null!==(l=null===(i=e.user_cropped_screenshot)||void 0===i?void 0:i.x)&&void 0!==l?l:0),o=e.position.y-(null!==(s=null===(r=e.user_cropped_screenshot)||void 0===r?void 0:r.y)&&void 0!==s?s:0)),{x:a,y:o}},O=e=>{var t,n;return!!e&&!!(null==e?void 0:e.position)&&(null==e?void 0:e.show_position_indicator)&&z(B(e))&&L.n7.includes(null==e?void 0:e.kind)&&!(null===(n=e.user_cropped_screenshot)||void 0===n?void 0:null===(t=n.screenshot_editor_state)||void 0===t?void 0:t.hasRemovedDot)};(i=l||(l={})).Movie="movie",i.Default="default",i.Vertical="vertical";let Z=(0,f.createContext)(void 0);var W=e=>{let{children:t}=e,[n,i]=(0,f.useState)(!1),[r,l]=(0,f.useState)(null),[s,o]=(0,f.useState)([]),[c,d]=(0,f.useState)(null),[h,x]=(0,f.useState)(null),[g,b]=(0,f.useState)([]),[w,y]=(0,f.useState)(!1),[k,j]=(0,f.useState)(!0),_=(0,u.ZI)(),C=(0,f.useMemo)(()=>new Set(g.map(e=>e.id)),[g]),N=(0,f.useMemo)(()=>new Map(g.map((e,t)=>[e.id,t])),[g]),M=(0,f.useMemo)(()=>g.map(e=>{var t;return{id:e.id,parentActionId:e.parentActionId,duration:null===(t=s.find(t=>t.id===e.id))||void 0===t?void 0:t.clickTarget.duration}}),[g,s]),E=(0,f.useCallback)((e,t,n)=>{let i=t.subtract(e),r=e.x>t.x,l=e.y>t.y,s=r?i.x/2:0,a=l?i.y/2:0;return{x:Math.min(Math.max(n.x,s),-s),y:Math.min(Math.max(n.y,a),-a)}},[]),T=(0,f.useCallback)(async(e,t,n)=>{var i;let r=B(e),l=(0,m.$7)(e),s=e.device_pixel_ratio||1,a=(null!==(i=e.default_scale_factor)&&void 0!==i?i:1)/s,o=await D(l,n,a,t),c=new p.E({x:o.naturalWidth,y:o.naturalHeight}),d=c.multipliedBy(o.scale),u=n.subtract(d),f={x:e.drag_translate_x,y:e.drag_translate_y},{originalTranslate:v,diffTranslate:h}=H(f,o.scale),x="movie"===t&&z(f)?v.add(h).add(new p.E({x:48,y:48})):v,{x:g,y:b}=E(d,n,z(f)&&x||z(r)&&c.dividedBy(2).subtract(new p.E(r)).multipliedBy(o.scale)||new p.E({x:0,y:0})),w=z(r)&&new p.E(r).multipliedBy(o.scale).add(u.dividedBy(2)).add({x:g,y:b}).add({x:-20,y:-8});return{...o,x:g,y:b,clickTarget:{x:w.x,y:w.y,visible:O(e),duration:3e3},imageFetchStatus:"loaded"}},[E]),R=(0,f.useCallback)(async e=>{let{containerRef:t,initScreens:n=[],options:i={forceRerender:!1}}=e,{forceRerender:r}=i;l(t);let s=t.current.getBoundingClientRect(),a=new p.E({x:s.width,y:s.height});if(n.length>0&&z(a)&&(k||r)){j(!1);let e=n.flatMap(e=>e.stack_actions&&e.stack_actions.length>0?e.stack_actions.map(t=>({...t,parentActionId:e.id})):[e]);b(e),k&&!r&&x(e[0].id),o(await Promise.all(e.map(async(t,n)=>{var i;let r=n>=0?e[n-1]:null,l=(0,m.$7)(t),s=!!(null===(i=t.user_cropped_screenshot)||void 0===i?void 0:i.url)&&t.user_cropped_screenshot_x>0&&t.user_cropped_screenshot_y>0,o=!!r&&!O(r)&&O(t)&&!s,c="default";t.external_screenshot_url?c="vertical":!s&&t&&O(t)&&(c="movie");let d={id:t.id,clickTarget:{visible:!!t&&O(t),duration:3e3},scaleType:c,shouldZoom:o,screenshotUrl:l,isCropped:s};if(l)try{let e=await T(t,c,a);d={...d,...e,clickTarget:{...d.clickTarget,...e.clickTarget}}}catch(e){d={...d,imageFetchStatus:"error"},(0,v.l)(e,{tags:{location:"AnimatedScreenshotsProvider",action:"initScreenshots"},level:"error"})}return d})))}},[T,k]);(0,f.useEffect)(()=>{let e=N.get(h);n||void 0===e||k||null===s[e]||d(s[e])},[s,n,h,N,k]);let A=(0,f.useCallback)(async e=>{let t=N.get(e),n=r.current.getBoundingClientRect(),i=new p.E({x:n.width,y:n.height}),l={};if((null==c?void 0:c.screenshotUrl)&&c.id===e&&"error"===c.imageFetchStatus)try{l=await T(g[t],null==c?void 0:c.scaleType,i)}catch(t){(0,v.l)(t,{tags:{location:"AnimatedScreenshotsProvider",action:"handleScreenshotUpdate"},level:"error",contexts:{actionId:e}})}o(n=>{var r,s;if((null===(r=n[t])||void 0===r?void 0:r.id)!==e)return y(!1),n;let a=[...n],o=n[t-1]?{...n[t-1],previousScreenshot:null}:{y:i.y/2,x:i.x/2,clickTarget:{visible:!1,duration:3e3}},c={...a[t],...l},d=(null==o?void 0:null===(s=o.clickTarget)||void 0===s?void 0:s.visible)?S(Math.max(Math.abs(o.clickTarget.x-c.clickTarget.x),Math.abs(o.clickTarget.y-c.clickTarget.y))):3e3,u={...c,clickTarget:{...c.clickTarget,duration:S(d)},previousScreenshot:o};return a[t]=u,y(!1),a})},[N,r,c,T,g]),P=(0,f.useCallback)((e,t)=>{let{isTransitioning:n}=t;i(n),n&&y(!0),e&&!n&&C.has(e.id)&&x(e.id)},[C]),L=(0,f.useMemo)(()=>({screens:g,containerRef:r,updateScreenshot:A,initialize:R,clickTargetDurations:M,transitionScreen:P,isTransitioning:n,currentScreenId:h,currentScreenshot:c,cursorSpringRef:_,isUpdatingScreenshot:w}),[g,r,A,R,M,P,n,h,c,_,w]);return(0,a.jsx)(Z.Provider,{value:L,children:t})},U=n(94722),F=n(54062),q=n(21352),V=()=>{let e=(0,f.useContext)(Z);if(void 0===e)throw Error("useAnimatedScreenshots must be used within a AnimatedScreenshotsProvider");return e},K=n(42171),$=n(28481),G=n(62136),X=n(36053);let J=()=>{var e,t;return(null===(e=window)||void 0===e?void 0:e.location.search.includes("preview=true"))||(null===(t=window)||void 0===t?void 0:t.location.search.includes("modalPreview=true"))},Y={embedType:G.Ct.Slides,isPreview:J()},Q={embedType:G.Ct.Movie,isPreview:J()},ee={[G.Ct.Slides]:{getStartedClick:"embed_click_get_started",finishClick:"embed_click_finish",prevStepClick:X.bR.EMBED_CLICK_PREVIOUS_STEP,nextStepClick:X.bR.EMBED_CLICK_NEXT_STEP,showMoreClick:"embed_click_show_more",hideMoreClick:"embed_click_hide_more",progressClick:"embed_click_progress",showMeHowClick:"embed_click_show_me_how",replayScribeClick:X.bR.EMBED_CLICK_RESTART,params:Y,userHalfway:X.bR.EMBED_HALF_WAY,userCompleted:X.bR.EMBED_COMPLETED},[G.Ct.Movie]:{playClicked:"embed_click_play",pauseClicked:"embed_click_pause",audioOnClick:"embed_click_audio_on",audioOffClick:"embed_click_audio_off",playbackSpeed:{"0.75":"embed_click_playbackspeed_0.75x",1:"embed_click_playbackspeed_1x","1.25":"embed_click_playbackspeed_1.25x","1.5":"embed_click_playbackspeed_1.5x","1.75":"embed_click_playbackspeed_1.75x",2:"embed_click_playbackspeed_2x"},prevStepClick:X.bR.EMBED_CLICK_PREVIOUS_STEP,nextStepClick:X.bR.EMBED_CLICK_NEXT_STEP,progressDragClick:"embed_click_progress_slider",showMeHowClick:"embed_click_show_me_how",replayScribeClick:X.bR.EMBED_CLICK_RESTART,audioCalloutCloseClick:"embed_click_audio_callout_close",params:Q,userHalfway:X.bR.EMBED_HALF_WAY,userCompleted:X.bR.EMBED_COMPLETED}};var et=n(16354),en=()=>{let[e,t]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{let e=window.matchMedia("(prefers-reduced-motion: reduce)");t(e.matches);let n=()=>t(e.matches);return e.addEventListener("change",n),()=>e.removeEventListener("change",n)},[]),{prefersReducedMotion:e,prefersReducedMotionClassNames:e?"motion-reduce:transition-none":""}},ei=n(38579),er=n.n(ei),el=n(22967);let es=e=>{let{isTransitioning:t}=V(),[n,i]=(0,f.useState)(0),r=(0,f.useRef)(null),l=(0,f.useRef)(null),s=(0,u.ZI)(),a=(0,u.ZI)(),[o]=(0,u.q_)(()=>({ref:s,from:{transform:"scale(1)"},to:0===n&&e&&!t?[{transform:"scale(0.8)"},{transform:"scale(1)"}]:{},config:{duration:167},reset:0===n,onRest:()=>{i(1)}}),[e,n,t]),[c]=(0,u.q_)(()=>({ref:a,from:{opacity:e&&!t?1:0,transform:"scale(0)"},to:e?{opacity:0,transform:"scale(1)"}:{},config:{duration:1e3},reset:0===n,onRest:()=>{setTimeout(()=>{0!==n&&i(0)},833)}}),[e,n,t]);return{animationStep:n,setAnimationStep:i,cursorAnimationRef:r,cursorAnimationSpringRef:s,clickTargetRef:l,cursorAnimationStyles:o,clickTargetStyles:c,clickTargetSpringRef:a}};var ea=e=>{let{clickTargetColor:t,shouldShowClickAnimation:n}=e,{prefersReducedMotionClassNames:i}=en(),{clickTargetStyles:r,cursorAnimationSpringRef:l,cursorAnimationRef:s,clickTargetRef:o,cursorAnimationStyles:c,clickTargetSpringRef:d}=es(n);return(0,u.Ab)([l,d],[0,.167],2e3),(0,a.jsxs)(u.q.div,{className:(0,el.cn)("relative",i),children:[(0,a.jsx)(u.q.div,{"data-testid":"cursor-animation",style:c,ref:s,className:(0,el.cn)("absolute z-10 size-12",i),children:(0,a.jsx)(er(),{src:"/images/embeds/cursor.svg",alt:"cursor",fill:!0,style:{objectFit:"contain"}})}),(0,a.jsx)(u.q.div,{"data-testid":"click-target-animation",ref:o,style:{...r,background:"#".concat(t||et.Qe)},className:(0,el.cn)("z-1 absolute -left-4 -top-5 size-16 transform-gpu rounded-full",i)})]})};let eo=e=>e?0===e.description_subtitles.length?2e3:e.description_subtitles.reduce((e,t)=>e+t.duration_ms,0):0,ec=(e,t)=>e.reduce((e,n,i)=>i<t?e+n.durationMs:e,0),ed=(e,t)=>e.reduce((e,n,i)=>i<=t?e+n.durationMs:e,0),eu=e=>e.reduce((e,t)=>e+t.durationMs,0),em=(e,t)=>{let n=0,i=0;for(let r=0;r<e.length;r+=1){let l=e[r].durationMs;if(i=r,n+l>t)break;n+=l}return i},ef=(e,t)=>{if(e>100)throw Error("Slider value must be between 0 and 100");return e/100*t},ep=(e,t)=>{if(e<0)throw Error("Start duration must be greater than 0");return e>t?100:Math.min(Math.max(e/t*100,0),100)},ev=(e,t,n)=>e.map((e,i)=>{var r,l;let s=(null===(l=n[i])||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:r.reduce((e,t)=>e+t.duration_ms,0))||0;0===s&&(s=2e3);let a=I(t,e.id)+2e3,o=s<a?a+eb:s+eb;return{...e,durationMs:o}});(r=s||(s={})).Prev="prev",r.Next="next",r.Slider="slider";let eh=(0,f.createContext)(void 0),ex=[{label:"0.75x",value:.75},{label:"1x",value:1},{label:"1.25x",value:1.25},{label:"1.5x",value:1.5},{label:"1.75x",value:1.75},{label:"2x",value:2}],eg=ex[1],eb=1e3;var ew=e=>{let{children:t,scribeId:n,uuid:i,canUseOpenAI:r}=e,{isVideoUnmuted:l,toggleVideoUnmuted:s}=(0,q.Z)(),{isLoading:o}=(0,F.ZP)(),[c,d]=(0,f.useState)(eg),[u,m]=(0,f.useState)(!1),[p,v]=(0,f.useState)([]),[h,x]=(0,f.useState)([]),[g,b]=(0,f.useState)(0),[y,k]=(0,f.useState)(0),[j,_]=(0,f.useState)(!1),[C,S]=(0,f.useState)("next"),N=p.map(e=>e.id),{data:M,isLoading:E}=w({actionIds:r?N:[],page:y},{enabled:r}),T=E||o,{clickTargetDurations:R}=V(),A=(0,f.useMemo)(()=>ev(p,R,M),[p,R,M]),P=eu(A),L=250/(P/100),z=(0,f.useCallback)(()=>{!j&&i&&n&&((0,$.ZP)(n,"embed",i,"embedded",$.pJ.EmbedStepByStep),_(!0))},[j,n,i]);(0,f.useEffect)(()=>{let e=em(A,ef(g,P));g>0&&z(),k(e)},[g,P,y,A,z]);let I=(0,f.useCallback)(e=>{e.length!==h.length&&(v(e.map(e=>({id:e.id,durationMs:eo(e)}))),x(e))},[h]),D=(0,f.useCallback)(e=>{e.value!==c.value&&(d(e),(0,K.L9)(ee[G.Ct.Movie].playbackSpeed[e.value],{...ee[G.Ct.Movie].params}))},[c]),H=(0,f.useCallback)(e=>{e!==u&&m(e)},[u]),B=(0,f.useCallback)(()=>{s()},[s]),O=(0,f.useCallback)(e=>{b(Math.min(ep(e,P),100))},[P]),Z=(0,f.useCallback)(e=>{e!==C&&S(e)},[C]),W=(0,f.useMemo)(()=>({playbackSpeed:c,playbackPosition:g,isPlaying:u,totalDuration:P,timeline:A,timelineActionIdx:y,activeControlType:C,unitsPerInterval:L,onPlaybackSpeedChange:D,onPlayChange:H,initialize:I,onPlaybackPositionChange:O,onControlClick:Z,isMuted:!l,onMuteChange:B,isLoading:T}),[c,g,u,P,A,y,C,L,D,H,I,O,Z,l,B,T]);return(0,a.jsx)(eh.Provider,{value:W,children:t})},ey=n(64425),ek=n(23892),ej=n.n(ek),e_=n(86677),eC=n(78295),eS=n(16125),eN=n(19686),eM=n(73943),eE=n(22716),eT=()=>{let e=(0,f.useContext)(eh);if(void 0===e)throw Error("usePlaybackControls must be used within a PlaybackControlsProvider");return e},eR=e=>{let{modalPreview:t=!1}=e;return(0,a.jsx)("div",{className:"absolute inset-0 overflow-hidden opacity-20",children:(0,a.jsx)(er(),{src:"/images/embedBackdrop.svg",alt:"backdrop",style:{marginTop:"-120px",filter:"blur(150px)",width:t?"440px":"",height:t?"400px":""},height:508,width:457,className:"mx-auto block"})})},eA=n(78440);function eP(){var e;let{query:t}=(0,e_.useRouter)();return{skipIntro:"true"===t.skipIntro,removeLogo:"true"===t.removeLogo,modalPreview:"true"===t.modalPreview,viewingMode:null!==(e=t.as)&&void 0!==e?e:G.Ct.Slides}}var eL=e=>{var t,n;let i="stack"===e.kind&&!!(null===(t=e.stack_actions)||void 0===t?void 0:t.length),{timeline:r}=eT(),{currentScreenId:l,transitionScreen:s}=V(),[a,o]=(0,f.useState)(0),c=(null===(n=e.stack_actions)||void 0===n?void 0:n.map(e=>e.id))||[],d=R(r,e.id),m=i&&e.stack_actions[a]?e.stack_actions[a]:e,p=i?d/e.stack_actions.length:0,v=0===a,h=c.includes(l)||l===e.id,x=(0,u.Yz)(a,i?{from:{opacity:0},enter:{opacity:1},leave:{opacity:1},config:{duration:0},onStart:()=>s(m,{isTransitioning:!0}),onRest:()=>s(m,{isTransitioning:!1})}:{});return(0,f.useEffect)(()=>{let t;if(i){if(!h)return o(0),()=>clearInterval(t);t=setInterval(()=>{a<e.stack_actions.length-1?o(e=>e+1):clearInterval(t)},p)}return()=>clearInterval(t)},[e.stack_actions,p,m,i,a,h]),{action:m,isStackedAction:i,isInitialStackedAction:v,stackedActionIdx:a,stackedActionTransitions:x}},ez=n(83469),eI=n(22107),eD=n(94033),eH=n(36012),eB=n.n(eH),eO=n(1581),eZ=n(16985),eW=n(14071),eU=n(53583),eF=n(2412),eq=n(66823),eV=n(53355);let eK=e=>{try{return!!new URL(e).protocol}catch(n){var t;return!!(null==e?void 0:null===(t=e.startsWith)||void 0===t?void 0:t.call(e,"//"))}},e$=e=>{let{node:t}=e,{iconClassNames:n,href:i,text:r,...l}=t.attrs;return(0,a.jsx)(eW.T5,{className:"inline cursor-pointer",children:(0,a.jsxs)("a",{href:i,target:"_blank",rel:"noopener noreferrer",...l,children:[r||i,(0,a.jsx)("span",{className:"absolute right-1",children:(0,a.jsx)(eD.G,{icon:eI.wlW,className:n,size:"sm"})})]})})},eG=eV.NB.create({name:"linkWithIcon",group:"inline",inline:!0,content:"text*",addOptions:()=>({isSubtitle:!1}),addAttributes:()=>({className:{default:""},href:{default:null},text:{default:""},iconClassNames:""}),parseHTML(){return[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),text:e.textContent,className:(0,eF.UJ)({isLink:!0,isSubtitle:this.options.isSubtitle,isEmbedded:!0}),iconClassNames:"ml-1 ".concat(this.options.isSubtitle?"text-slate-500":"text-blue-400")})}]},renderHTML(e){let{HTMLAttributes:t}=e,n=t;return eK(t.href)||(n={...t,href:"//".concat(t.href)}),["a",(0,eV.P1)(n),0]},addNodeView:()=>(0,eW.fW)(e$)});function eX(e,t,n){let i=(n=n||{}).marker||":",r=i.charCodeAt(0),l=i.length,s=n.validate||function(e){return e.trim().split(" ",2)[0]===t},a=n.render||function(e,n,i,r,l){return 1===e[n].nesting&&e[n].attrJoin("class",t),l.renderToken(e,n,i,r,l)};e.block.ruler.before("fence","container_"+t,function(e,n,a,o){let c;let d=!1,u=e.bMarks[n]+e.tShift[n],m=e.eMarks[n];if(r!==e.src.charCodeAt(u))return!1;for(c=u+1;c<=m&&i[(c-u)%l]===e.src[c];c++);let f=Math.floor((c-u)/l);if(f<3)return!1;c-=(c-u)%l;let p=e.src.slice(u,c),v=e.src.slice(c,m);if(!s(v,p))return!1;if(o)return!0;let h=n;for(;!(++h>=a)&&(!((u=e.bMarks[h]+e.tShift[h])<(m=e.eMarks[h]))||!(e.sCount[h]<e.blkIndent));){if(r===e.src.charCodeAt(u)&&!(e.sCount[h]-e.blkIndent>=4)){for(c=u+1;c<=m&&i[(c-u)%l]===e.src[c];c++);if(!(Math.floor((c-u)/l)<f)&&(c-=(c-u)%l,!((c=e.skipSpaces(c))<m))){d=!0;break}}}let x=e.parentType,g=e.lineMax;e.parentType="container",e.lineMax=h;let b=e.push("container_"+t+"_open","div",1);b.markup=p,b.block=!0,b.info=v,b.map=[n,h],e.md.block.tokenize(e,n+1,h);let w=e.push("container_"+t+"_close","div",-1);return w.markup=e.src.slice(u,c),w.block=!0,e.parentType=x,e.lineMax=g,e.line=h+(d?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules["container_"+t+"_open"]=a,e.renderer.rules["container_"+t+"_close"]=a}let eJ=e=>{let{node:t,updateAttributes:n}=e,[i,r]=(0,f.useState)(!1),l=(0,f.useRef)(null),{isSingleLine:s,isExpanded:o}=t.attrs;return(0,f.useEffect)(()=>{if(l.current&&l.current.scrollHeight>0){let{scrollHeight:e}=l.current,t=e<=48;r(e>=96),s!==e<=48&&setTimeout(()=>{n({isSingleLine:t})},0)}},[s,n]),(0,f.useEffect)(()=>{let e=()=>{let{scrollHeight:e}=l.current,t=e<=48;r(e>=96),s!==t&&setTimeout(()=>{n({isSingleLine:t})},0)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[s,n]),(0,a.jsxs)(eW.T5,{children:[(0,a.jsx)("div",{ref:l,className:(0,el.cn)("overflow-hidden",o?"line-clamp-none":"line-clamp-3",{"flex flex-col items-center justify-center":s,"pt-1.5":!s}),style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:o?"unset":3},children:(0,a.jsx)(eW.ms,{})}),i&&(0,a.jsx)("button",{onClick:()=>{n({isExpanded:!o})},className:(0,el.cn)("cursor-pointer bg-transparent p-0 text-base font-semibold leading-normal text-slate-400 underline",{"mb-4":o}),children:o?"Hide More":"Show More"})]})},eY=eV.NB.create({name:"truncateContent",group:"block",content:"block+",defining:!0,addOptions:()=>({classes:["truncateContent"]}),addStorage:()=>({markdown:{serialize(e,t){e.write("::: ".concat(t.attrs.containerClass||"","\n")),e.renderContent(t),e.flushClose(1),e.write(":::"),e.closeBlock(t)},parse:{setup(e){this.options.classes.forEach(t=>{e.use(eX,t)})}}}}),addAttributes(){return{containerClass:{default:null,parseHTML:e=>Array.from(e.classList).find(e=>this.options.classes.includes(e)),renderHTML:e=>({class:e.containerClass,"data-type":e.containerClass})},isSingleLine:{default:!1},isExpanded:{default:!1}}},parseHTML(){return[{tag:"div",getAttrs:e=>!!Array.from(e.classList).find(e=>this.options.classes.includes(e))&&null}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eV.P1)(t,{"data-type":"truncateContent"}),0]},addNodeView:()=>(0,eW.fW)(eJ)}),eQ=e=>{let{content:t,hasImage:n,className:i,isSubtitle:r=!1,onOpenChange:l,isExpanded:s}=e,[o,c]=(0,f.useState)(!1),[d,u]=(0,f.useState)(!1),{viewingMode:m}=eP(),p="::: truncateContent\n  ".concat(t,"\n  :::"),v=(0,eW.jE)({editable:!1,autofocus:!1,extensions:[eU.Z.configure({codeBlock:!1,hardBreak:{keepMarks:!0},orderedList:{HTMLAttributes:{class:"not-prose !list-decimal"}},heading:{HTMLAttributes:{class:"heading"}},paragraph:{HTMLAttributes:{class:(0,el.cn)("public-sans text-base",{"first:mt-0":!o,"my-0":o||r})}},bulletList:{HTMLAttributes:{class:"not-prose"}},bold:{HTMLAttributes:{class:"font-bold not-prose text-inherit"}}}),eq.U.configure({html:!1,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!0}),eZ.Z.configure({types:["heading","paragraph"]}),eF.ee.configure({isSubtitle:r}),eG.configure({isSubtitle:r}),eY.configure({isSingleLine:o,isExpanded:s})],content:r?t:p,editorProps:{attributes:{class:(0,el.cn)("w-full h-full border-none leading-6 break-words font-semibold text-slate-700 overflow-hidden transition-all duration-300",i)}},onCreate:()=>{u(!0)},onDestroy:()=>{u(!1)}},[o,r,t]);(0,f.useEffect)(()=>{if(!v)return()=>{};let e=()=>{v.state.doc.descendants(e=>{"truncateContent"===e.type.name&&(c(e.attrs.isSingleLine),null==l||l(e.attrs.isExpanded))})};return v.on("transaction",e),()=>{v.off("transaction",e)}},[v,l]);let h=m===G.Ct.Movie?{onClick:e=>e.stopPropagation()}:{};return(0,a.jsx)("div",{className:(0,el.cn)("max-w-[600px] cursor-default transition-opacity",{"flex flex-col items-start justify-center":n,"h-full":n||s,"opacity-0":!d,"opacity-100":d}),...h,children:(0,a.jsx)(eW.kg,{editor:v})})},e0=()=>(0,a.jsx)("div",{className:"rounded-md bg-red-100 p-4",children:(0,a.jsx)("h1",{className:"text-red-500",children:"Something went wrong"})});var e1=e=>(0,a.jsx)(eM.Z,{fallback:e0,children:(0,a.jsx)(eQ,{...e})}),e2=e=>{let{instructionType:t,text:n}=e,[i,r]=f.useState(!1),[l,s]=(0,f.useState)(!1),[o,c]=(0,f.useState)(!1);return(0,a.jsx)("div",{className:"-shadow -shadow-black/25 inline-flex items-center gap-3 overflow-hidden rounded-xl border border-black/75 bg-black/75 p-3 px-4 shadow-lg ring-1 ring-inset ring-white/25 backdrop-blur-sm backdrop-filter","data-testid":"audio-subtitle",children:(0,a.jsxs)("div",{className:"flex",children:[t&&(0,a.jsxs)("div",{className:"relative pr-3 leading-6",children:[(0,a.jsx)("div",{className:(0,el.cn)("-rotate-28.644 absolute left-[-48.582px] top-[-40.741px] h-[56.269px] w-[81.427px] transform opacity-50 blur-[37.5px] filter",{"bg-emerald-500":t===G.p0.Tip,"bg-red-600":t===G.p0.Warning})}),t===G.p0.Tip&&(0,a.jsx)(eD.G,{icon:ez.sqG,className:"size-4 rounded-full text-emerald-400"}),t===G.p0.Warning&&(0,a.jsx)(eD.G,{icon:eI.xHz,className:"size-4 rounded-full text-red-600"})]}),(0,a.jsx)(e1,{className:"text-white",content:n,onOpenChange:()=>{},isSubtitle:!0}),o&&(0,a.jsx)(eO.pn,{children:(0,a.jsxs)(eO.u,{open:l||i,onOpenChange:s,children:[(0,a.jsx)(eO.aJ,{children:(0,a.jsx)("button",{className:"ml-3 flex h-[27px] w-[27px] cursor-pointer items-center justify-center rounded-[4px] bg-gray-200 bg-opacity-5 align-middle",onClick:e=>{eB()(n),r(!0),setTimeout(()=>{r(!1)},800)},children:(0,a.jsx)("div",{children:(0,a.jsx)(eD.G,{icon:ez.kZ_,className:"h-[14px] w-[14px] text-slate-500"})})})}),(0,a.jsx)(eO.NM,{children:(0,a.jsx)(eO._v,{side:"top",sideOffset:20,children:i?(0,a.jsxs)("span",{children:[(0,a.jsx)(eD.G,{icon:ez.LEp,className:"mr-1 text-indigo-400"})," Copied"]}):"Copy text"})})]})})]})})},e5=n(52205);let e4=e=>{var t;let{action:n,clickTargetColor:i,ordinal:r}=e,[l,s]=(0,f.useState)({x:n.drag_translate_x,y:n.drag_translate_y}),o=null!==(t=n.alt_text)&&void 0!==t?t:"Step ".concat(r," image"),{user_cropped_screenshot:c,position:d}=n,u=(0,f.useMemo)(()=>{let e,t;return(null==d?void 0:d.x)&&(null==d?void 0:d.y)&&(e=d.x-((null==c?void 0:c.x)||0),t=d.y-((null==c?void 0:c.y)||0)),{x:e,y:t}},[null==c?void 0:c.x,null==c?void 0:c.y,null==d?void 0:d.x,null==d?void 0:d.y]);return(0,a.jsx)(e5.D,{alt:o,devicePixelRatio:n.device_pixel_ratio,actionId:n.id,translate:l,clickTarget:u,onTranslateChange:s,showClickTarget:O(n),clickTargetColor:i,disableInitialTransition:!0})},e3=()=>(0,a.jsx)("div",{className:"rounded-md bg-red-100 p-4",children:(0,a.jsx)("h1",{className:"text-red-500",children:"Something went wrong"})});var e6=e=>(0,a.jsx)(eM.Z,{fallback:e3,children:(0,a.jsx)(e4,{...e})}),e7=n(20685);let e8=(0,u.q)(e7.M),e9=e=>{var t;let{action:n,ordinal:i,transitionStyle:r}=e,{updateScreenshot:l,currentScreenshot:s,cursorSpringRef:o}=V(),{prefersReducedMotionClassNames:c}=en(),[d,m]=(0,f.useState)(!1),p=null!==(t=n.alt_text)&&void 0!==t?t:"Step ".concat(i," image"),v=(0,f.useRef)(null),h=(0,f.useCallback)(async()=>{v.current&&l(n.id)},[n.id,l]),x=(0,u.ZI)(),[g]=(0,u.q_)(()=>{var e,t,n,i,r,l,a,o,c,u,m;let f=null!==(r=null==s?void 0:s.scale)&&void 0!==r?r:1,p=(null==s?void 0:s.shouldZoom)?f-.05:f,v=(null==s?void 0:s.clickTarget.visible)&&!(null==s?void 0:s.isCropped)?{x:null!==(l=null==s?void 0:null===(e=s.previousScreenshot)||void 0===e?void 0:e.x)&&void 0!==l?l:null==s?void 0:s.x,y:null!==(a=null==s?void 0:null===(t=s.previousScreenshot)||void 0===t?void 0:t.y)&&void 0!==a?a:null==s?void 0:s.y}:{x:(null==s?void 0:s.shouldZoom)?0:null!==(o=null==s?void 0:s.x)&&void 0!==o?o:0,y:(null==s?void 0:s.shouldZoom)?0:null!==(c=null==s?void 0:s.y)&&void 0!==c?c:0};return{ref:x,from:{transform:"translate(".concat((null==s?void 0:s.shouldZoom)?0:null==v?void 0:v.x,"px, ").concat((null==s?void 0:s.shouldZoom)?0:null==v?void 0:v.y,"px) scale(").concat(p,")")},to:{transform:"translate(".concat(null!==(u=null==s?void 0:s.x)&&void 0!==u?u:0,"px, ").concat(null!==(m=null==s?void 0:s.y)&&void 0!==m?m:0,"px) scale(").concat(f,")")},config:{tension:170,friction:26,precision:.01,velocity:0,mass:1,duration:null==s?void 0:null===(n=s.clickTarget)||void 0===n?void 0:n.duration},reset:d,immediate:!(null==s?void 0:null===(i=s.clickTarget)||void 0===i?void 0:i.visible)}},[s,d]);return(0,u.Ab)([x,o],[0,0]),(0,a.jsx)("div",{className:"relative flex size-full items-center justify-center overflow-hidden rounded-lg border border-slate-950/5 bg-slate-50 shadow-inner",children:(0,a.jsxs)(u.q.div,{className:(0,el.cn)("absolute left-0 top-0 flex size-full bg-slate-50",c),children:[(0,a.jsxs)("div",{className:(0,el.cn)("absolute left-0 top-0 z-0 size-full transition-opacity duration-0",{"opacity-0":!d,"opacity-100":d}),children:[(0,a.jsx)(e7.M,{src:null==s?void 0:s.screenshotUrl,alt:"background blur",className:"absolute inset-0 size-full object-cover"}),(0,a.jsx)("div",{className:"relative size-full bg-slate-700/10 backdrop-blur-[10px]"})]}),(0,a.jsx)("div",{className:(0,el.cn)("relative z-10 flex size-full items-center justify-center"),style:{...r},children:(0,a.jsx)(e8,{src:null==s?void 0:s.screenshotUrl,style:{...g},className:(0,el.cn)(c,"relative flex transform-gpu items-center justify-center transition-opacity duration-0",{"opacity-0":!d,"opacity-100":d}),alt:p,onLoad:()=>{h(),m(!0)},ref:v,"data-testid":"animated-screenshot-".concat(i)})})]})})},te=()=>(0,a.jsx)("div",{className:"rounded-md bg-red-100 p-4",children:(0,a.jsx)("h1",{className:"text-red-500",children:"Something went wrong"})});var tt=e=>(0,a.jsx)(eM.Z,{fallback:te,children:(0,a.jsx)(e9,{...e})});let tn=e=>{let{action:t,ordinal:n,transitionStyle:i}=e,{stackedActionTransitions:r}=eL(t);return r((e,r)=>(0,a.jsx)(tt,{action:t.stack_actions[r],ordinal:n,transitionStyle:{...i,...e}},t.stack_actions[r].id))},ti=()=>(0,a.jsx)("div",{className:"rounded-md bg-red-100 p-4",children:(0,a.jsx)("h1",{className:"text-red-500",children:"Something went wrong"})});var tr=e=>(0,a.jsx)(eM.Z,{fallback:ti,children:(0,a.jsx)(tn,{...e})}),tl=e=>{let{ordinal:t,instructionType:n}=e;return(0,a.jsx)("div",{className:(0,el.cn)("flex flex-col items-center justify-center gap-2 rounded-full p-2 text-center",{"border-2 border-brand-600/5 bg-indigo-100":!n,"border-2 border-emerald-100 bg-emerald-100":"tip"===n,"border-2 border-red-600 bg-red-600":"warning"===n}),children:(0,a.jsxs)("span",{className:"flex size-4 flex-col justify-center text-sm font-semibold leading-5 text-brand-600","aria-label":"Step ".concat(t),children:["tip"===n&&(0,a.jsx)(eD.G,{icon:ez.sqG,className:"size-4 rounded-full text-emerald-600"}),"warning"===n&&(0,a.jsx)(eD.G,{icon:eI.xHz,className:"size-4 rounded-full text-white"}),t]})})};let ts=e=>{let{action:t,clickTargetColor:n,ordinal:i,isExpanded:r,onOpenChange:l,transitionStyle:s,markdown:o}=e,{viewingMode:c}=eP(),d=c===G.Ct.Movie,u=!!(0,m.$7)(t),{isTransitioning:f}=V(),{isStackedAction:p}=eL(t),v=p?(0,a.jsx)(tr,{action:t,ordinal:i,transitionStyle:s}):(0,a.jsx)(tt,{action:t,ordinal:i,transitionStyle:s}),h=(0,a.jsxs)(a.Fragment,{children:[!d&&(0,a.jsxs)("div",{className:(0,el.cn)("flex w-full items-start pl-1 pr-6",{"h-full items-center justify-center":!u}),children:[(0,a.jsx)("div",{className:"items-end pr-4",children:(0,a.jsx)(tl,{ordinal:i,instructionType:t.instruction_type})}),(0,a.jsx)(e1,{onOpenChange:l,isExpanded:r,content:t.transcribed_description||t.description,hasImage:u})]}),u&&(0,a.jsx)("div",{className:(0,el.cn)("size-full",d?"pt-1":"relative my-4 overflow-hidden"),children:d?v:(0,a.jsx)(e6,{clickTargetColor:n,action:t,ordinal:i})}),d&&o&&!f&&(0,a.jsx)("div",{className:"absolute bottom-12 z-20 flex w-full items-center justify-center",children:(0,a.jsx)(e2,{text:o,instructionType:t.instruction_type})})]});return(0,a.jsx)("div",{className:(0,el.cn)("flex size-full flex-col",{"pb-[96px]":r}),children:h})},ta=()=>(0,a.jsx)("div",{className:"rounded-md bg-red-100 p-4",children:(0,a.jsx)("h1",{className:"text-red-500",children:"Something went wrong"})});var to=e=>(0,a.jsx)(eM.Z,{fallback:ta,children:(0,a.jsx)(ts,{...e})}),tc=e=>{let{clickTargetColor:t}=e,{currentScreenshot:n,cursorSpringRef:i,isTransitioning:r,isUpdatingScreenshot:l}=V(),[s,o]=(0,f.useState)(!1),{prefersReducedMotionClassNames:c}=en();(0,f.useEffect)(()=>{(r||l)&&o(!1)},[r,l]);let[d]=(0,u.q_)(()=>{var e,t;let r=null==n?void 0:null===(e=n.previousScreenshot)||void 0===e?void 0:e.clickTarget,l={x:(null==n?void 0:n.x)?-n.x:100,y:(null==n?void 0:n.y)?-n.y:100};return{ref:i,from:(null==n?void 0:null===(t=n.clickTarget)||void 0===t?void 0:t.visible)?{transform:(null==r?void 0:r.visible)?"translate(".concat(r.x,"px, ").concat(r.y,"px)"):"translate(".concat(l.x,"px,  ").concat(l.y,"px)")}:{},to:(null==n?void 0:n.clickTarget.visible)?{transform:"translate(".concat(n.clickTarget.x,"px, ").concat(n.clickTarget.y,"px)")}:{},onStart:()=>{o(!1)},onRest:()=>{o(!0)},config:{tension:170,friction:26,precision:.01,velocity:0,mass:1,duration:null==n?void 0:n.clickTarget.duration}}},[n]);return(null==n?void 0:n.clickTarget.visible)?(0,a.jsx)("div",{className:"relative z-20 flex size-full items-center justify-center overflow-hidden",children:(0,a.jsx)(u.q.div,{style:d,className:(0,el.cn)("absolute left-0 top-0 z-20 flex size-12 transform-gpu",c),children:(0,a.jsx)(ea,{clickTargetColor:t,shouldShowClickAnimation:s})})}):null},td=n(48407),tu=n(87013),tm=e=>{let{actions:t=[],scribeId:n,stepLength:i,currentStep:r,currentActionIdx:l,onBackClick:s,onNextClick:o,onStepClick:c,isContentScrollable:d}=e,[u,m]=(0,f.useState)(!1),[p,v]=(0,f.useState)(0),h=t.length>0,x=-1===l,g=h&&l===t.length-1,b=h&&l===t.length,[w,y]=(0,f.useState)(!1),k=(0,ey.Z)(),j=()=>{w||((0,$.ZP)(n,"embed",k,"embedded",$.pJ.EmbedStepByStep),y(!0))},_=(e,t)=>{m(!1),(0,K.L9)(ee[G.Ct.Slides].progressClick,{scribeId:n,kind:e.kind,instructionType:e.instruction_type}),c(t),j()},[C,S]=(0,f.useState)(!1),[N,M]=(0,f.useState)(!1);(0,f.useEffect)(()=>{v(E(l,t.length))},[l,t.length]);let R=e=>{let n=e.currentTarget.getBoundingClientRect(),i=T(Math.round(100*Math.min(Math.max((e.clientX-n.left)/n.width,0),1)),t.length);c(i),t[i]&&(0,K.L9)(ee[G.Ct.Slides].progressClick,{kind:t[i].kind,instructionType:t[i].instruction_type})};return(0,a.jsxs)("div",{className:(0,el.cn)("-mt-7 bg-gradient-to-b from-white/0 to-white/90 to-25% px-5 pb-6 pt-8",{"-mt-6 pt-7":!d}),children:[h&&(0,a.jsx)("div",{className:"flex items-center gap-1.5 pb-4 pt-[1px]","data-testid":"control-progress",children:i>20?(0,a.jsx)(tu.E,{value:p,onPointerDown:e=>R(e),className:"w-full cursor-pointer"}):t.map((e,t)=>{let n="section"===e.kind,i=l>=t?100:0;return(0,a.jsx)("div",{className:n?"":"flex-1",children:n?(0,a.jsx)("div",{className:(0,el.cn)("size-2 cursor-pointer rounded border-2 shadow-[inset_0_1px_2px_0px_rgba(15,23,42,0.05)] backdrop-blur-[20px]",l>=t?"border-indigo-600":"border-slate-950/10"),role:"button",tabIndex:0,onClick:()=>_(e,t),onKeyDown:n=>{("Enter"===n.key||" "===n.key)&&_(e,t)},"aria-label":"Go to section ".concat(e.description)}):(0,a.jsx)(tu.E,{value:i,onClick:()=>_(e,t),tabIndex:0,onKeyDown:n=>{("Enter"===n.key||" "===n.key)&&_(e,t)},animate:u})},e.id)})}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"text-xs font-semibold text-slate-800",children:["Step ",r," of ",i]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[!x&&(0,a.jsx)(td.z,{variant:"secondary",size:"small",icon:ez.acZ,onClick:()=>{m(!0),(0,K.L9)(ee[G.Ct.Slides].prevStepClick,{scribeId:n,step:r,...ee[G.Ct.Slides].params}),s()},"aria-label":"Back"}),!b&&(0,a.jsxs)(td.z,{variant:"primary",size:"small",icon:ez.eFW,iconPosition:"right",onClick:()=>{let e;m(!g),e=x?ee[G.Ct.Slides].getStartedClick:g?ee[G.Ct.Slides].finishClick:ee[G.Ct.Slides].nextStepClick,(0,K.L9)(e,{scribeId:n,step:r,...ee[G.Ct.Slides].params});let t=r+1===Math.floor(i/2),l=r+1===i;t&&!C&&((0,K.L9)(ee[G.Ct.Slides].userHalfway,{scribeId:n,embedType:G.Ct.Slides}),S(!0)),l&&!N&&((0,K.L9)(ee[G.Ct.Slides].userCompleted,{scribeId:n,embedType:G.Ct.Slides}),M(!0)),o(),j()},children:[x&&"Get Started",!x&&!g&&"Next",g&&"Finish"]})]})]})]})},tf=e=>{let{title:t,description:n,variant:i="title",align:r="left",icon:l,metadata:s,transitionStyle:o,children:c}=e,{prefersReducedMotionClassNames:d}=en(),m=(0,a.jsxs)("div",{className:(0,el.cn)("relative z-10 m-auto flex size-full flex-col justify-center px-8 sm:px-16",{"max-w-[766px] items-center text-center":"center"===r}),children:[l&&(0,a.jsx)("div",{className:"mb-8",children:l}),"title"!==i?(0,a.jsx)("h2",{className:"m-0 text-3xl font-bold leading-9 text-slate-900",children:t}):(0,a.jsx)("h1",{className:"m-0 text-3xl font-bold leading-9 text-slate-900",children:t}),n&&(0,a.jsx)("p",{style:{wordBreak:"break-word"},className:(0,el.cn)("align-center mb-2 mt-4 items-center whitespace-pre-line text-base font-normal leading-6 text-slate-500",{"text-slate-900":"end"===i}),children:n}),s&&(0,a.jsx)("div",{className:(0,el.cn)("mt-2 flex w-full items-center pt-2",{"justify-center":"center"===r,"justify-start":"left"===r}),children:s.map((e,t)=>(0,a.jsx)("div",{className:(0,el.cn)("text-sm text-slate-500",{"mr-3 border-r border-slate-200 pr-3":t<s.length-1}),children:e},"metadata".concat(t.toString())))}),c]});return(0,a.jsx)(u.q.div,{className:(0,el.cn)("relative size-full min-h-[333px] p-4",d),style:o,children:m})},tp=n(68286),tv=n(16713),th=e=>{let{showMarketing:t,estimatedTime:n,customLogo:i,onPrimaryBtnClick:r,onSecondaryBtnClick:l,...s}=e,{viewingMode:o}=eP(),c=(null==i?void 0:i.logoUrl)?(0,a.jsx)(tp.Z,{className:"mb-4",variant:"large",logoUrl:i.logoUrl,altText:i.altText,linkUrl:i.linkUrl}):(0,a.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full border border-slate-950/10 bg-rose-500 shadow-[0_19px_26px_-10px_#FDA4AF]",children:(0,a.jsx)(er(),{src:"/images/embeds/logoMark.svg",height:52,width:52,alt:"Scribe logo"})}),d=o===G.Ct.Movie?{onClick:e=>e.stopPropagation()}:{};return(0,a.jsx)(tf,{title:t&&(()=>{if(n&&n<6e5){let e=(0,tv.Z)(n).split(" ");return(0,a.jsxs)(a.Fragment,{children:["This how-to guide was created free with Scribe in ",(0,a.jsx)("span",{className:"text-red-500",children:e[0]})," ",e[1],"."]})}return(0,a.jsx)(a.Fragment,{children:"Want to make guides like this in seconds? Yes, it's really that fast."})})(),description:t&&"Create your own guides today!",icon:c,variant:"end",align:"center",...s,children:(0,a.jsxs)("div",{className:"mt-8 flex flex-col gap-3",...d,children:[t&&r&&(0,a.jsx)(td.z,{variant:"primary",onClick:()=>{null==r||r(),(0,K.L9)(ee[o].showMeHowClick,{...ee[o].params})},children:"Show Me How"}),(0,a.jsx)(td.z,{variant:"secondary",icon:ez.jHE,onClick:()=>{null==l||l(),(0,K.L9)(ee[o].replayScribeClick,{...ee[o].params})},children:"Replay Scribe"})]})})};let tx=e=>{let{actions:t=[],currentActionIdx:n,renderActionComponent:i}=e,{skipIntro:r,viewingMode:l}=eP(),s=l===G.Ct.Movie,{transitionScreen:o}=V(),[c,d]=(0,f.useState)([]),{initialize:m}=V(),p=(0,f.useRef)(null),v=(0,f.useMemo)(()=>[...r?[]:[{id:"title",sort_order:-1}],...t,{id:"end",sort_order:t.length}],[t,r]),h=(0,f.useCallback)(()=>{p.current&&m({containerRef:p,initScreens:v})},[m,v]);(0,f.useEffect)(()=>{let e=p.current;if(!e||!s)return;let t=new ResizeObserver(()=>{m({containerRef:p,initScreens:v,options:{forceRerender:!0}})});return t.observe(e),()=>t.unobserve(e)},[v,m,s]),(0,f.useEffect)(()=>{t.length>0&&(d(v),s&&h())},[t,h,v,s,r]);let x=r?n:n+1,g=(0,u.Yz)(x,s?{from:{opacity:0},enter:{opacity:1},leave:{opacity:1},config:{duration:0},onStart:()=>{o(null,{isTransitioning:!0})},onRest:()=>{o(c[x],{isTransitioning:!1})}}:{}),b=e=>{let{style:t}=e;return c.map(e=>i({action:e,currentActionIdx:n,style:t}))};return(0,a.jsx)("div",{className:"absolute left-0 top-0 size-full",ref:p,children:g(e=>b({style:e})[x])})},tg=()=>(0,a.jsx)("div",{className:"rounded-md bg-red-100 p-4",children:(0,a.jsx)("h1",{className:"text-red-500",children:"Something went wrong"})});var tb=e=>(0,a.jsx)(eM.Z,{fallback:tg,children:(0,a.jsx)(tx,{...e})}),tw=n(52602),ty=n(971),tk=n(83644),tj=e=>{let{displayName:t,profilePictureUrl:n}=e;return(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsx)("div",{className:"mr-2",children:(0,a.jsx)(tk.qE,{size:"xs",children:n?(0,a.jsx)(er(),{src:n,width:20,height:20,alt:t}):t})}),(0,a.jsx)("span",{className:"font-medium text-slate-800",children:t})]})},t_=e=>{let{scribe:t,showAuthor:n,...i}=e,r=(0,f.useMemo)(()=>{var e;return(0,tv.Z)(null!==(e=null==t?void 0:t.estimated_time)&&void 0!==e?e:0)},[null==t?void 0:t.estimated_time]),l=[{isVisible:n,renderComponent:(0,a.jsx)(tj,{displayName:null==t?void 0:t.author})},{isVisible:(null==t?void 0:t.show_step_count)&&(null==t?void 0:t.actions_count)>0,renderComponent:(0,a.jsxs)("span",{children:[null==t?void 0:t.actions_count," Step",(null==t?void 0:t.actions_count)>1?"s":""]})},{isVisible:null==t?void 0:t.show_creation_time,renderComponent:(0,a.jsx)("span",{children:r})}].filter(e=>e.isVisible).map(e=>e.renderComponent);return(0,a.jsx)(tf,{title:null==t?void 0:t.name,description:null==t?void 0:t.description,variant:"title",align:"left",icon:t&&(0,a.jsx)(ty.Z,{document:t,isPickerIcon:!0}),metadata:l,...i,children:t&&(0,a.jsx)(tw.Z,{mode:"viewer",documentData:t})})};function tC(e,[t,n]){return Math.min(n,Math.max(t,e))}function tS(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e?.(i),!1===n||!i.defaultPrevented)return t?.(i)}}function tN(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function tM(...e){return f.useCallback(tN(...e),e)}function tE(e,t=[]){let n=[],i=()=>{let t=n.map(e=>f.createContext(e));return function(n){let i=n?.[e]||t;return f.useMemo(()=>({[`__scope${e}`]:{...n,[e]:i}}),[n,i])}};return i.scopeName=e,[function(t,i){let r=f.createContext(i),l=n.length;function s(t){let{scope:n,children:i,...s}=t,o=n?.[e][l]||r,c=f.useMemo(()=>s,Object.values(s));return(0,a.jsx)(o.Provider,{value:c,children:i})}return n=[...n,i],s.displayName=t+"Provider",[s,function(n,s){let a=s?.[e][l]||r,o=f.useContext(a);if(o)return o;if(void 0!==i)return i;throw Error(`\`${n}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=n.reduce((t,{useScope:n,scopeName:i})=>{let r=n(e)[`__scope${i}`];return{...t,...r}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}(i,...t)]}function tT(e){let t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...e)=>t.current?.(...e),[])}var tR=f.createContext(void 0),tA=globalThis?.document?f.useLayoutEffect:()=>{};n(31542);var tP=f.forwardRef((e,t)=>{let{children:n,...i}=e,r=f.Children.toArray(n),l=r.find(tI);if(l){let e=l.props.children,n=r.map(t=>t!==l?t:f.Children.count(e)>1?f.Children.only(null):f.isValidElement(e)?e.props.children:null);return(0,a.jsx)(tL,{...i,ref:t,children:f.isValidElement(e)?f.cloneElement(e,void 0,n):null})}return(0,a.jsx)(tL,{...i,ref:t,children:n})});tP.displayName="Slot";var tL=f.forwardRef((e,t)=>{let{children:n,...i}=e;if(f.isValidElement(n)){let e,r;let l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref;return f.cloneElement(n,{...function(e,t){let n={...t};for(let i in t){let r=e[i],l=t[i];/^on[A-Z]/.test(i)?r&&l?n[i]=(...e)=>{l(...e),r(...e)}:r&&(n[i]=r):"style"===i?n[i]={...r,...l}:"className"===i&&(n[i]=[r,l].filter(Boolean).join(" "))}return{...e,...n}}(i,n.props),ref:t?tN(t,l):l})}return f.Children.count(n)>1?f.Children.only(null):null});tL.displayName="SlotClone";var tz=({children:e})=>(0,a.jsx)(a.Fragment,{children:e});function tI(e){return f.isValidElement(e)&&e.type===tz}var tD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=f.forwardRef((e,n)=>{let{asChild:i,...r}=e,l=i?tP:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(l,{...r,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),tH=["PageUp","PageDown"],tB=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],tO={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},tZ="Slider",[tW,tU,tF]=function(e){let t=e+"CollectionProvider",[n,i]=tE(t),[r,l]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=e=>{let{scope:t,children:n}=e,i=f.useRef(null),l=f.useRef(new Map).current;return(0,a.jsx)(r,{scope:t,itemMap:l,collectionRef:i,children:n})};s.displayName=t;let o=e+"CollectionSlot",c=f.forwardRef((e,t)=>{let{scope:n,children:i}=e,r=tM(t,l(o,n).collectionRef);return(0,a.jsx)(tP,{ref:r,children:i})});c.displayName=o;let d=e+"CollectionItemSlot",u="data-radix-collection-item",m=f.forwardRef((e,t)=>{let{scope:n,children:i,...r}=e,s=f.useRef(null),o=tM(t,s),c=l(d,n);return f.useEffect(()=>(c.itemMap.set(s,{ref:s,...r}),()=>void c.itemMap.delete(s))),(0,a.jsx)(tP,{[u]:"",ref:o,children:i})});return m.displayName=d,[{Provider:s,Slot:c,ItemSlot:m},function(t){let n=l(e+"CollectionConsumer",t);return f.useCallback(()=>{let e=n.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${u}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},i]}(tZ),[tq,tV]=tE(tZ,[tF]),[tK,t$]=tq(tZ),tG=f.forwardRef((e,t)=>{let{name:n,min:i=0,max:r=100,step:l=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[i],value:u,onValueChange:m=()=>{},onValueCommit:p=()=>{},inverted:v=!1,...h}=e,x=f.useRef(new Set),g=f.useRef(0),b="horizontal"===s?tY:tQ,[w=[],y]=function({prop:e,defaultProp:t,onChange:n=()=>{}}){let[i,r]=function({defaultProp:e,onChange:t}){let n=f.useState(e),[i]=n,r=f.useRef(i),l=tT(t);return f.useEffect(()=>{r.current!==i&&(l(i),r.current=i)},[i,r,l]),n}({defaultProp:t,onChange:n}),l=void 0!==e,s=l?e:i,a=tT(n);return[s,f.useCallback(t=>{if(l){let n="function"==typeof t?t(e):t;n!==e&&a(n)}else r(t)},[l,e,r,a])]}({prop:u,defaultProp:d,onChange:e=>{let t=[...x.current];t[g.current]?.focus(),m(e)}}),k=f.useRef(w);function j(e,t,{commit:n}={commit:!1}){let s=(String(l).split(".")[1]||"").length,a=tC(function(e,t){let n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-i)/l)*l+i,s),[i,r]);y((e=[])=>{var i,r;let s=function(e=[],t,n){let i=[...e];return i[n]=t,i.sort((e,t)=>e-t)}(e,a,t);if(i=s,!(!((r=c*l)>0)||Math.min(...i.slice(0,-1).map((e,t)=>i[t+1]-e))>=r))return e;{g.current=s.indexOf(a);let t=String(s)!==String(e);return t&&n&&p(s),t?s:e}})}return(0,a.jsx)(tK,{scope:e.__scopeSlider,name:n,disabled:o,min:i,max:r,valueIndexToChangeRef:g,thumbs:x.current,values:w,orientation:s,children:(0,a.jsx)(tW.Provider,{scope:e.__scopeSlider,children:(0,a.jsx)(tW.Slot,{scope:e.__scopeSlider,children:(0,a.jsx)(b,{"aria-disabled":o,"data-disabled":o?"":void 0,...h,ref:t,onPointerDown:tS(h.onPointerDown,()=>{o||(k.current=w)}),min:i,max:r,inverted:v,onSlideStart:o?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let n=e.map(e=>Math.abs(e-t));return n.indexOf(Math.min(...n))}(w,e);j(e,t)},onSlideMove:o?void 0:function(e){j(e,g.current)},onSlideEnd:o?void 0:function(){let e=k.current[g.current];w[g.current]!==e&&p(w)},onHomeKeyDown:()=>!o&&j(i,0,{commit:!0}),onEndKeyDown:()=>!o&&j(r,w.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!o){let n=tH.includes(e.key)||e.shiftKey&&tB.includes(e.key),i=g.current;j(w[i]+l*(n?10:1)*t,i,{commit:!0})}}})})})})});tG.displayName=tZ;var[tX,tJ]=tq(tZ,{startEdge:"left",endEdge:"right",size:"width",direction:1}),tY=f.forwardRef((e,t)=>{let{min:n,max:i,dir:r,inverted:l,onSlideStart:s,onSlideMove:o,onSlideEnd:c,onStepKeyDown:d,...u}=e,[m,p]=f.useState(null),v=tM(t,e=>p(e)),h=f.useRef(),x=function(e){let t=f.useContext(tR);return e||t||"ltr"}(r),g="ltr"===x,b=g&&!l||!g&&l;function w(e){let t=h.current||m.getBoundingClientRect(),r=ne([0,t.width],b?[n,i]:[i,n]);return h.current=t,r(e-t.left)}return(0,a.jsx)(tX,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:(0,a.jsx)(t0,{dir:x,"data-orientation":"horizontal",...u,ref:v,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=w(e.clientX);s?.(t)},onSlideMove:e=>{let t=w(e.clientX);o?.(t)},onSlideEnd:()=>{h.current=void 0,c?.()},onStepKeyDown:e=>{let t=tO[b?"from-left":"from-right"].includes(e.key);d?.({event:e,direction:t?-1:1})}})})}),tQ=f.forwardRef((e,t)=>{let{min:n,max:i,inverted:r,onSlideStart:l,onSlideMove:s,onSlideEnd:o,onStepKeyDown:c,...d}=e,u=f.useRef(null),m=tM(t,u),p=f.useRef(),v=!r;function h(e){let t=p.current||u.current.getBoundingClientRect(),r=ne([0,t.height],v?[i,n]:[n,i]);return p.current=t,r(e-t.top)}return(0,a.jsx)(tX,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:(0,a.jsx)(t0,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=h(e.clientY);l?.(t)},onSlideMove:e=>{let t=h(e.clientY);s?.(t)},onSlideEnd:()=>{p.current=void 0,o?.()},onStepKeyDown:e=>{let t=tO[v?"from-bottom":"from-top"].includes(e.key);c?.({event:e,direction:t?-1:1})}})})}),t0=f.forwardRef((e,t)=>{let{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:l,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:c,...d}=e,u=t$(tZ,n);return(0,a.jsx)(tD.span,{...d,ref:t,onKeyDown:tS(e.onKeyDown,e=>{"Home"===e.key?(s(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):tH.concat(tB).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:tS(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():i(e)}),onPointerMove:tS(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&r(e)}),onPointerUp:tS(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),l(e))})})}),t1="SliderTrack",t2=f.forwardRef((e,t)=>{let{__scopeSlider:n,...i}=e,r=t$(t1,n);return(0,a.jsx)(tD.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:t})});t2.displayName=t1;var t5="SliderRange",t4=f.forwardRef((e,t)=>{let{__scopeSlider:n,...i}=e,r=t$(t5,n),l=tJ(t5,n),s=tM(t,f.useRef(null)),o=r.values.length,c=r.values.map(e=>t9(e,r.min,r.max));return(0,a.jsx)(tD.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:s,style:{...e.style,[l.startEdge]:(o>1?Math.min(...c):0)+"%",[l.endEdge]:100-Math.max(...c)+"%"}})});t4.displayName=t5;var t3="SliderThumb",t6=f.forwardRef((e,t)=>{let n=tU(e.__scopeSlider),[i,r]=f.useState(null),l=tM(t,e=>r(e)),s=f.useMemo(()=>i?n().findIndex(e=>e.ref.current===i):-1,[n,i]);return(0,a.jsx)(t7,{...e,ref:l,index:s})}),t7=f.forwardRef((e,t)=>{var n;let{__scopeSlider:i,index:r,name:l,...s}=e,o=t$(t3,i),c=tJ(t3,i),[d,u]=f.useState(null),m=tM(t,e=>u(e)),p=!d||!!d.closest("form"),v=function(e){let[t,n]=f.useState(void 0);return tA(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let i,r;if(!Array.isArray(t)||!t.length)return;let l=t[0];if("borderBoxSize"in l){let e=l.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,r=t.blockSize}else i=e.offsetWidth,r=e.offsetHeight;n({width:i,height:r})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}(d),h=o.values[r],x=void 0===h?0:t9(h,o.min,o.max),g=(n=o.values.length)>2?`Value ${r+1} of ${n}`:2===n?["Minimum","Maximum"][r]:void 0,b=v?.[c.size],w=b?function(e,t,n){let i=e/2,r=ne([0,50],[0,i]);return(i-r(t)*n)*n}(b,x,c.direction):0;return f.useEffect(()=>{if(d)return o.thumbs.add(d),()=>{o.thumbs.delete(d)}},[d,o.thumbs]),(0,a.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${x}% + ${w}px)`},children:[(0,a.jsx)(tW.ItemSlot,{scope:e.__scopeSlider,children:(0,a.jsx)(tD.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":h,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:m,style:void 0===h?{display:"none"}:e.style,onFocus:tS(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),p&&(0,a.jsx)(t8,{name:l??(o.name?o.name+(o.values.length>1?"[]":""):void 0),value:h},r)]})});t6.displayName=t3;var t8=e=>{let{value:t,...n}=e,i=f.useRef(null),r=function(e){let t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(t);return f.useEffect(()=>{let e=i.current,n=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(r!==t&&n){let i=new Event("input",{bubbles:!0});n.call(e,t),e.dispatchEvent(i)}},[r,t]),(0,a.jsx)("input",{style:{display:"none"},...n,ref:i,defaultValue:t})};function t9(e,t,n){return tC(100/(n-t)*(e-t),[0,100])}function ne(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let i=(t[1]-t[0])/(e[1]-e[0]);return t[0]+i*(n-e[0])}}var nt=n(35286);let nn=f.forwardRef((e,t)=>{var n,i;let{className:r,...l}=e;return(0,a.jsxs)(tG,{ref:t,className:(0,nt.cn)("relative flex touch-none select-none items-center","vertical"===l.orientation?"h-full flex-col":"w-full flex-row",r,l.disabled?"pointer-events-none opacity-50":void 0),...l,children:[(0,a.jsx)(t2,{className:(0,nt.cn)("relative grow overflow-hidden rounded-full bg-slate-950/10 backdrop-blur-sm","vertical"===l.orientation?"h-full w-1.5":"h-1.5 w-full"),children:(0,a.jsx)(t4,{className:(0,nt.cn)("shadow-brand-800/30 absolute bg-gradient-to-b from-[#5648FB] to-[#3C2EDD] shadow-[inset_0_0_0_1px]","vertical"===l.orientation?"w-full rounded-b-full":"h-full rounded-l-full")})}),(null!==(i=null!==(n=l.value)&&void 0!==n?n:l.defaultValue)&&void 0!==i?i:[0]).map(e=>(0,a.jsx)(t6,{className:"focus-visible:outline-brand-400/50 block h-3 w-3 rounded-full bg-white shadow-md ring-1 ring-slate-950/10 transition-colors hover:cursor-grab hover:ring-slate-950/15 focus-visible:outline-none focus-visible:outline-offset-0 focus-visible:ring-0 active:cursor-grabbing"},e))]})});var ni=e=>{let{children:t,disabled:n}=e,i=(0,a.jsx)("div",{className:(0,el.cn)("inline-flex items-center justify-center gap-5 rounded-4xl bg-slate-900/25 px-5 py-3 backdrop-blur-lg",{"opacity-40":n}),children:t});return n?(0,a.jsx)(eO.pn,{children:(0,a.jsxs)(eO.u,{children:[(0,a.jsx)(eO.aJ,{asChild:!0,children:i}),(0,a.jsx)(eO._v,{side:"bottom",sideOffset:8,align:"end",children:"AI Audio is disabled for this organization"})]})}):i},nr=e=>{let{disabled:t}=e,{isMuted:n,onMuteChange:i}=eT(),r=()=>{(0,K.L9)(n?ee[G.Ct.Movie].audioOnClick:ee[G.Ct.Movie].audioOffClick,{...ee[G.Ct.Movie].params}),i()},l=t||n;return(0,a.jsx)(eO.pn,{children:(0,a.jsxs)(eO.u,{children:[(0,a.jsx)(eO.aJ,{asChild:!0,children:(0,a.jsx)("button",{className:(0,el.cn)("m-0 size-6 bg-transparent p-0",{"cursor-pointer":!t}),"aria-label":"Toggle audio","data-testid":"toggle-audio",onClick:()=>r(),disabled:t,children:(0,a.jsx)(eD.G,{fixedWidth:!0,"data-testid":l?"fa-volume-slash-icon":"fa-volume-icon",icon:l?ez.KlT:ez.m1t,fontSize:16,className:"text-white"})})}),!t&&(0,a.jsx)(eO._v,{side:"bottom",sideOffset:16,children:n?"Turn Audio On":"Turn Audio Off"})]})})},nl=n(83449),ns=e=>{let{onSelectPlaybackSpeed:t,disabled:n}=e,{playbackSpeed:i,onPlaybackSpeedChange:r}=eT(),l=e=>{r(e),null==t||t(e)};return(0,a.jsxs)(nl.h_,{modal:!1,children:[(0,a.jsx)(nl.$F,{className:"bg-transparent px-0",disabled:n,"data-testiid":"playback-control-trigger",children:(0,a.jsx)(eO.pn,{children:(0,a.jsxs)(eO.u,{children:[(0,a.jsx)(eO.aJ,{asChild:!0,className:"bg-transparent px-1",children:(0,a.jsx)("span",{className:(0,el.cn)("h-6 select-none items-center justify-center font-sans text-[13px] font-semibold leading-[15px] text-white",{"cursor-pointer":!n}),children:i.label})}),!n&&(0,a.jsx)(eO._v,{side:"bottom",sideOffset:16,children:"Playback Speed"})]})})}),(0,a.jsx)(nl.AW,{className:"z-[100000] w-auto min-w-[27px]",sideOffset:16,children:(0,a.jsx)(nl._x,{value:i.label,children:ex.map(e=>(0,a.jsx)(nl.qB,{value:e.label,onSelect:()=>l(e),children:e.label},e.value))})})]})},na=e=>{let{action:t,clickTargetColor:n,ordinal:i,triggerComponent:r,clientX:l=0,tooltipContentProps:s}=e,o=!!(0,m.$7)(t);return(0,a.jsx)(eO.pn,{delayDuration:200,children:(0,a.jsxs)(eO.u,{children:[(0,a.jsx)(eO.aJ,{children:r}),(0,a.jsxs)(eO._v,{side:"top",align:"start",className:(0,el.cn)("z-30",o?"flex h-fit min-h-[154px] w-[208px] flex-col border-none":""),alignOffset:o?l-148:l-100,...s,children:[o&&(0,a.jsx)("div",{className:"relative h-[118px] w-[208px] rounded-none border-none",children:(0,a.jsx)(e6,{clickTargetColor:n,action:t})}),(0,a.jsxs)("div",{className:(0,el.cn)("inline-flex items-center gap-1.5",o?"p-2":""),children:[(null==t?void 0:t.instruction_type)==="tip"&&(0,a.jsx)(eD.G,{icon:ez.sqG,className:"size-4 rounded-full text-emerald-600"}),(null==t?void 0:t.instruction_type)==="warning"&&(0,a.jsx)(eD.G,{icon:eI.xHz,className:"size-4 rounded-full text-red-600"}),i?"Step ".concat(i):t.description]})]})]})})},no=e=>{var t;let{actions:n=[],scribeId:i,stepLength:r,currentStep:l,currentActionIdx:o,clickTargetColor:c,onBackClick:d,onNextClick:u,onStepClick:m,onPlayStepDescription:p,isMovieHovered:v,canUseOpenAI:h}=e,[x,g]=(0,f.useState)([0]),[b,y]=(0,f.useState)(0),{playbackSpeed:k,isPlaying:j,onPlayChange:C,totalDuration:S,timeline:N,onPlaybackPositionChange:M,playbackPosition:E,timelineActionIdx:T,initialize:R,onControlClick:A,unitsPerInterval:P,isMuted:L,isLoading:z}=eT(),[I,D]=(0,f.useState)(0),[H,B]=(0,f.useState)(0),[O,Z]=(0,f.useState)(!1),[W,U]=(0,f.useState)(!1),[F,q]=(0,f.useState)(!1),V=(0,f.useRef)(null),$=(0,f.useRef)(null),X=n.length>0,J=-1===o,Y=0===o,Q=o===n.length,et=n.map(e=>e.id),en=J?0:o,ei=_(null==n?void 0:n.filter(e=>"section"!==e.kind));(0,f.useEffect)(()=>{R(n)},[n,R]);let{data:er}=w({actionIds:h?et:[],page:en},{enabled:h}),es=(0,f.useRef)(null),ea=(0,f.useRef)(null),eo=(0,f.useCallback)(()=>{V.current&&(clearInterval(V.current),V.current=null),$.current&&(clearTimeout($.current),$.current=null)},[]),eu=()=>{es.current&&(es.current.pause(),es.current.currentTime=0,es.current=null)};(0,f.useEffect)(()=>{es.current&&(es.current.muted=L,es.current.playbackRate=k.value)},[L,k]);let ev=(0,f.useCallback)(e=>{eo(),M(e),q(!1),es.current&&eu(),y(0),g([0])},[eo,M]),eh=(0,f.useCallback)((e,t)=>{eo();let r=ef(e[0],S),l=em(N,r);ev(r),n[T]&&(null==m||m(T),ev(r),n[l]&&(null==m||m(l)),t&&(A(s.Slider),(0,K.L9)(ee[G.Ct.Movie].progressDragClick,{scribeId:i,percentage:Math.round(E),...ee[G.Ct.Movie].params})))},[eo,S,N,ev,n,T,m,A,E,i]),ex=(0,f.useCallback)(e=>{eo();let t=J?0:o+1;if(e&&(t=o-1),ev(t===N.length?S:ec(N,t)),e){A(s.Prev),Y&&C(!1),null==d||d();return}A(s.Next),null==u||u()},[eo,J,o,N,S,ev,A,u,Y,d,C]),eg=x.reduce((e,t)=>e+t,0);(0,f.useEffect)(()=>{let e=ec(N,o)+eg;!F&&es.current&&e<S&&!Q&&M(e)},[o,x,M,eg,N,F,S,Q]);let eb=(0,f.useCallback)(()=>{j&&!O&&es.current&&!F&&g(e=>{let t=[...e],n=1e3*es.current.currentTime,i=N[o].durationMs-n,r=N[o].durationMs-i;return t[b]=r,t})},[j,O,F,N,o,b]),ew=(0,f.useCallback)(async()=>{var e,t,i,r,l,s,a,c,d,u,m,f,v;if(((null===(t=er[o])||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.length)===0||(null===(r=n[o])||void 0===r?void 0:null===(i=r.description_subtitles)||void 0===i?void 0:i.length)===0)&&!Q){null==p||p(null);return}if(!h){if(null===(c=n[o])||void 0===c?void 0:c.description_subtitles){let{markdown:e}=(null===(d=n[o])||void 0===d?void 0:d.description_subtitles.length)>b&&n[o].description_subtitles[b];(null===(u=n[o])||void 0===u?void 0:u.kind)!=="section"&&(null==p||p(e))}return}if((null===(l=er[o])||void 0===l?void 0:l.isSuccess)&&(null===(a=er[o])||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s[b])){let{audioSource:e,markdown:t}=(null===(f=er[o])||void 0===f?void 0:null===(m=f.data)||void 0===m?void 0:m.length)>b&&er[o].data[b];if((null===(v=n[o])||void 0===v?void 0:v.kind)!=="section"&&(null==p||p(t)),es.current=e,es.current.muted=L,es.current.playbackRate=k.value,es.current.loop=!1,j&&es.current){let e=async()=>{var e,t;try{await (null===(e=es.current)||void 0===e?void 0:e.play()),y(b+1)}catch(e){C(!1),null===(t=es.current)||void 0===t||t.pause()}},t=async()=>{var n;await e(),null===(n=es.current)||void 0===n||n.removeEventListener("canplaythrough",t)};if(es.current.readyState>=3){e();return}es.current.addEventListener("canplaythrough",t)}}},[h,er,o,Q,b,p,j,n,L,k.value,C]),ey=(0,f.useCallback)((e,t)=>{let i=E;eo(),V.current=setInterval(()=>{i+=P,q(!0),i>=t&&(i=t,clearInterval(V.current),q(!1));let e=ec(N,o);g(r=>{let l=[...r],s=l.reduce((e,t,n)=>n<b?e+t:e),a=0===b?ef(i,S)-e:ef(i,S)-s-e,c=ef(t,S)-ef(i,S),d=h?N[o].durationMs-c:a;return!h&&n[o].description_subtitles.length>0&&a>=n[o].description_subtitles[b].duration_ms&&b<n[o].description_subtitles.length-1&&(eo(),q(!1),y(e=>e+1)),l[b]=d,l}),M(ef(i,S))},250),$.current=setTimeout(()=>{V.current&&(clearInterval(V.current),q(!1)),ex()},e)},[E,eo,P,M,S,N,o,b,h,n,ex]),ek=(0,f.useCallback)(()=>{ey(N[o]&&eg<N[o].durationMs?N[o].durationMs-eg:0,ep(ed(N,o),S))},[N,o,eg,S,ey]);(0,f.useEffect)(()=>{var e,t;if(!h&&b<(null===(t=n[o])||void 0===t?void 0:null===(e=t.description_subtitles)||void 0===e?void 0:e.length)&&!F){ek(),ew();return}h&&0===b&&0===eg&&!F&&ew()},[b,F,ew,eg,h,ek,n,o]),(0,f.useEffect)(()=>{var e,t;if(j&&J){ex();return}if(!j&&V.current&&(eo(),U(!0)),Q){C(!1),eo(),eu();return}if((null===(t=n[o])||void 0===t?void 0:null===(e=t.description_subtitles)||void 0===e?void 0:e.length)===0&&j){ek();return}let i=j&&W;if(es.current&&!V.current){let e=es.current.duration;if(!Q&&!J&&es.current.currentTime<e&&!i){if(j){(async()=>{try{await es.current.play()}catch(t){var e;C(!1),null===(e=es.current)||void 0===e||e.pause()}})();return}es.current.pause();return}}i&&(ek(),U(!1))},[j,J,Q,ex,ek,V,W,C,eo,n,o,h]),(0,f.useEffect)(()=>{let e=es.current;if(e){let t=()=>{var e,t;if(b<((null===(t=er[o])||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.length)||0)){ew();return}ek()};return e.addEventListener("ended",t),e.addEventListener("timeupdate",eb),()=>{e.removeEventListener("ended",t),e.removeEventListener("timeupdate",eb)}}return()=>{}},[b,ek,eb,ew,o,er]);let ej=(e,t)=>{let n=e.currentTarget.children[0].getBoundingClientRect(),i=em(N,ef(Math.round(100*Math.min(Math.max((e.clientX-n.left)/n.width,0),1)),S));"over"===t&&(D(e.clientX),B(i)),"down"===t&&Z(!0),"up"===t&&Z(!1)},[e_,eC]=(0,f.useState)(!1),[eS,eN]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{let e=l+1===Math.floor(r/2),t=l+1===r;e&&!e_&&((0,K.L9)(ee[G.Ct.Slides].userHalfway,{scribeId:i,embedType:G.Ct.Movie}),eC(!0)),t&&!eS&&((0,K.L9)(ee[G.Ct.Slides].userCompleted,{scribeId:i,embedType:G.Ct.Movie}),eN(!0))},[l,i,r,e_,eS]),(0,a.jsxs)("div",{className:"z-30 -mt-8 px-5 pb-6 pt-12","data-testid":"video-control-panel",ref:ea,children:[(0,a.jsx)("div",{className:(0,el.cn)("fixed right-8 top-8 z-0 transition-opacity ease-in-out hover:opacity-100",{"opacity-0":z||!v,"z-20 opacity-100":v}),children:(0,a.jsxs)(ni,{disabled:!h,children:[(0,a.jsx)(nr,{disabled:!h}),(0,a.jsx)(ns,{disabled:!h})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("button",{className:"cursor-pointer bg-transparent p-0","aria-label":j?"Pause":"Play",onClick:()=>{C(!j),(0,K.L9)(j?ee[G.Ct.Movie].pauseClicked:ee[G.Ct.Movie].playClicked,{scribeId:i,location:"video_control_panel",...ee[G.Ct.Movie].params})},disabled:z,children:(0,a.jsx)(eD.G,{icon:j?eI.XQY:eI.zc,mask:eI.Fyj,className:"h-6 w-6 bg-gradient-to-b from-[#5648FB] to-[#3C2EDD] text-center text-2xl text-white shadow-[inset_0_0_0_1px] shadow-brand-800/30"})}),X&&(0,a.jsx)("div",{className:"flex w-full items-center gap-1.5","data-testid":"control-progress",children:(0,a.jsx)(na,{action:n[H],triggerComponent:(0,a.jsx)(nn,{value:[E],className:"w-full cursor-pointer",onValueChange:eh,onValueCommit:e=>eh(e,!0),max:100,onPointerOver:e=>ej(e,"over"),onPointerDown:e=>ej(e,"down"),onPointerUp:e=>ej(e,"up")}),clickTargetColor:c,ordinal:ei.get(null===(t=n[H])||void 0===t?void 0:t.id),clientX:I})}),(0,a.jsxs)("div",{className:"text-nowrap text-xs font-semibold text-slate-800",children:["Step ",l," of ",r]}),(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsxs)("div",{className:(0,el.cn)("flex gap-2"),children:[!J&&(0,a.jsx)(td.z,{variant:"secondary",size:"small",icon:ez.acZ,onClick:()=>{ex(!0),(0,K.L9)(ee[G.Ct.Movie].prevStepClick,{scribeId:i,step:l,...ee[G.Ct.Movie].params})},"aria-label":"Back"}),!Q&&(0,a.jsx)(td.z,{variant:"secondary",size:"small",icon:ez.eFW,onClick:()=>{ex(),(0,K.L9)(ee[G.Ct.Movie].nextStepClick,{scribeId:i,step:l,...ee[G.Ct.Movie].params})},"aria-label":"Next"})]})})]})]})};let nc=e=>{var t,n,i,r;let{scribe:l,viewerUrl:s,actions:o=[],onCreateYourOwn:c,showMarketing:d,removeLogo:u,customLogo:m,estimatedTime:p,showAuthor:v,className:h}=e,{inContextViewer:x}=(0,e_.useRouter)().query,{skipIntro:g,modalPreview:b,viewingMode:w}=eP(),[C,S]=(0,f.useState)(null),[N,E]=(0,f.useState)(!1),T=o.length>0,R=g?0:-1,A=g?1:0,[P,L]=(0,f.useState)(R),[z,I]=(0,f.useState)(A),[D,H]=(0,f.useState)(!1),{isPlaying:B,onPlayChange:O,onPlaybackPositionChange:Z,isLoading:W}=eT(),U=(0,f.useRef)(null),q=-1===P,V=null==o?void 0:o.filter(e=>"section"!==e.kind),$=T&&P===o.length,{data:J}=(0,F.ZP)(),{isLoggedIn:Y}=(0,eN.TR)(),Q=Math.round((P+1)/o.length*100),et=Y&&"true"!==x&&(null==l?void 0:l.show_step_links)&&!$&&!q,en=w===G.Ct.Movie,{setSessionPercentage:ei}=(0,eE.Z)({documentId:null==l?void 0:l.id,authenticated:Y,userId:null==J?void 0:J.id});(0,f.useEffect)(()=>{k(o),j(m)},[o,m]);let er=(null==U?void 0:null===(t=U.current)||void 0===t?void 0:t.scrollHeight)>(null==U?void 0:null===(n=U.current)||void 0===n?void 0:n.clientHeight);(0,f.useEffect)(()=>{q||Q>100||ei(Q)},[ei,Q,q]);let es=_(V),ea=o[P],eo=!q&&!$,ec=eo?{"bg-gradient-to-br from-white to-emerald-50":(null==ea?void 0:ea.instruction_type)&&(null==ea?void 0:ea.instruction_type)==="tip","bg-gradient-to-br from-white to-rose-50":(null==ea?void 0:ea.instruction_type)&&(null==ea?void 0:ea.instruction_type)==="warning"}:{},ed=(null==ea?void 0:ea.kind)==="section"||q||$||en,eu=e=>{let{action:t,currentActionIdx:n,style:i}=e;if(-1===n||!T&&!g)return(0,a.jsx)(t_,{scribe:l,showAuthor:v,align:en?"center":"left",transitionStyle:i});if(eo&&(null==t?void 0:t.kind)==="section"){var r;return(0,a.jsx)(tf,{title:null==t?void 0:t.description,variant:"section",align:"center",metadata:[(0,a.jsxs)("span",{children:[null===(r=y(o).find(e=>e.sectionIndex===P))||void 0===r?void 0:r.count," Steps"]})],transitionStyle:i})}return n===o.length?(0,a.jsx)(th,{showMarketing:d,estimatedTime:p,customLogo:m,onPrimaryBtnClick:c,onSecondaryBtnClick:()=>{X.Ji(l),Z(0),L(R),I(A)},transitionStyle:i}):(0,a.jsx)("div",{className:(0,el.cn)("flex size-full flex-1"),children:(0,a.jsx)(to,{action:t,ordinal:es.get(null==t?void 0:t.id),clickTargetColor:null==l?void 0:l.click_target_color,isExpanded:D,onOpenChange:H,transitionStyle:i,markdown:C})})},em=(0,f.useCallback)(e=>{if(!en&&U.current&&U.current.scrollTo({top:0,behavior:"instant"}),e&&g&&0===P)return;let t=e?P-1:P+1;t!==o.length&&I(M(o,t)),L(t)},[o,P,en,g]),ef=(0,f.useCallback)(e=>{!en&&U.current&&U.current.scrollTo({top:0,behavior:"instant"}),L(e);let t=e===o.length?e-1:e;I(M(o,t))},[o,en]);return(0,a.jsxs)("div",{className:(0,el.cn)("h-screen w-screen",en||ed?"bg-white":"bg-gradient-to-br from-white to-slate-100",h),children:[ed&&(0,a.jsx)(eR,{modalPreview:!!b}),(0,a.jsxs)("div",{className:(0,el.cn)("group relative flex size-full flex-col overflow-hidden font-sans antialiased",ec),"data-testid":"interactive-embed-container",children:[(0,a.jsx)("div",{className:"relative flex size-full flex-col px-4 pt-4",children:(0,a.jsx)("div",{className:(0,el.cn)("relative flex flex-1 flex-col overflow-x-hidden",{"mb-[112px]":D&&!en,"mb-[96px]":D&&en,"overflow-y-auto":!en,"overflow-y-hidden":en}),ref:U,children:en?(0,a.jsxs)("div",{role:"button",tabIndex:0,"aria-pressed":B,"aria-label":B?"Pause video":"Play video","aria-disabled":W,onClick:()=>{W||(O(!B),(0,K.L9)(B?ee[G.Ct.Movie].pauseClicked:ee[G.Ct.Movie].playClicked,{location:"screen",scribeId:null==l?void 0:l.id,...ee[G.Ct.Movie].params}))},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(O(!B),e.preventDefault())},onFocus:()=>E(!0),onMouseOut:()=>E(!1),onMouseOver:()=>E(!0),onBlur:()=>E(!1),className:"flex size-full cursor-pointer",children:[(0,a.jsx)(tc,{clickTargetColor:null==l?void 0:l.click_target_color}),(0,a.jsx)(tb,{actions:o,currentActionIdx:P,renderActionComponent:eu})]}):(0,a.jsx)(tb,{actions:o,currentActionIdx:P,renderActionComponent:eu})})}),(0,a.jsxs)("div",{className:(0,el.cn)("z-30",D?"absolute bottom-12 w-full":"",en?"pt-4":""),children:[D&&!en&&(0,a.jsx)("div",{className:"h-8 w-full bg-gradient-to-b from-transparent to-white"}),en?(0,a.jsx)(no,{scribeId:null==l?void 0:l.id,actions:o,stepLength:null==l?void 0:l.actions_count,currentStep:z,currentActionIdx:P,onBackClick:()=>em(!0),onNextClick:()=>em(!1),onStepClick:ef,onPlayStepDescription:S,clickTargetColor:null==l?void 0:l.click_target_color,isMovieHovered:N,canUseOpenAI:null==l?void 0:null===(r=l.organization_owner)||void 0===r?void 0:null===(i=r.super_organization)||void 0===i?void 0:i.allow_openai}):(0,a.jsx)(tm,{scribeId:null==l?void 0:l.id,actions:o,stepLength:null==l?void 0:l.actions_count,currentStep:z,currentActionIdx:P,onBackClick:()=>em(!0),onNextClick:()=>em(!1),onStepClick:ef,isContentScrollable:er})]}),(!u||!b)&&(0,a.jsx)(eA.Z,{externalLink:s,onExternalLinkClick:e=>{X.xo(l,s,e)},removeLogo:u,onLogoClick:c,openLinksWithScribeViewer:et,actionURL:null==ea?void 0:ea.url,scribe:l,hideFooterButtons:b})]})]})},nd=()=>(0,a.jsx)("div",{className:"rounded-md bg-red-100 p-4",children:(0,a.jsx)("h1",{className:"text-red-500",children:"Something went wrong"})});var nu=e=>(0,a.jsx)(eM.Z,{fallback:nd,children:(0,a.jsx)(nc,{...e})}),nm=n(10975),nf=n(31928),np=n(49817),nv=n(9275);let{publicRuntimeConfig:nh}=ej()();var nx=!0;let ng=300,nb=e=>{let{ref:t,as:n,inContextViewer:i,preview:r}=(0,e_.useRouter)().query,{removeLogo:l,viewingMode:s}=eP(),u=(0,eS.I0)(),[m,p]=(0,f.useState)(e),[v,h]=(0,f.useState)(!0),{pageId:x,backendPID:g,result:b,initialVisibleActions:w,error:y,isAuthError:k}=m,j="".concat(nh.cursiveRootUrl,"shared/").concat(x),_=(0,ey.Z)(),{captureError:C}=(0,U.Z)();(0,f.useEffect)(()=>{u((0,o.Hf)({actions:w,overwrite:!1}))},[u,w]);let S=(0,f.useCallback)(async()=>{try{let e=await (0,eC.fetchScribeAndActions)(x,!0,null,u,ng);p(e.props),h(!1)}catch(e){C(e,{tags:{action:"fetchAndSetScribeAndActions",location:"embed/[pid]"}})}},[C,u,x]);if((0,f.useEffect)(()=>{k&&S()},[k,S]),(0,f.useEffect)(()=>{"cursiveinternal"!==t&&(null==b?void 0:b.id)&&"true"!==i&&X.z0(b,s)},[null==b?void 0:b.id]),!y&&b){var N,M,E,T,R,A;let e=null;(0,nm.hL)(b)&&(e={logoUrl:b.organization_owner.logo.download_url,altText:"".concat(b.organization_owner.name," Logo"),linkUrl:b.organization_owner.team_url});let t=null==b?void 0:null===(M=b.organization_owner)||void 0===M?void 0:null===(N=M.super_organization)||void 0===N?void 0:N.show_scribe_marketing,i=null==b?void 0:b.estimated_time,s=(0,nf.Eo)(b.id,b.name),o=!t&&(!(null==b?void 0:null===(E=b.organization_owner)||void 0===E?void 0:E.show_made_with_scribe)||l);return"scrollable"===n?(0,a.jsx)(np.Z,{scribeFileData:b,actions:w,hideButtons:!0,hideLogo:o,isEmbedded:!0,isPreviewLink:"true"===r}):(0,a.jsx)(W,{children:(0,a.jsx)(ew,{scribeId:null==b?void 0:b.id,uuid:_,canUseOpenAI:null==b?void 0:null===(R=b.organization_owner)||void 0===R?void 0:null===(T=R.super_organization)||void 0===T?void 0:T.allow_openai,children:(0,a.jsx)(nu,{scribe:b,viewerUrl:s,actions:w,removeLogo:o,onCreateYourOwn:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString(),n="/signup?direct=true&utm_source=embed&utm_medium=product&utm_campaign=".concat(b.id).concat(""!==t?"&".concat(t):"");window.open(n,"_blank")},showMarketing:t,customLogo:e,estimatedTime:i,showAuthor:null==b?void 0:null===(A=b.user_owner)||void 0===A?void 0:A.scribe_owned})})})}return k&&v?(0,a.jsx)("div",{style:{width:"100vw",height:"100vh",backgroundColor:"rgb(240, 240, 248)"}}):k&&!v?(0,a.jsx)(nv.Z,{onPermissionsGranted:S,documentUrl:j,documentId:g}):404===y||410===y?(0,a.jsx)(d.Z,{isEmbedded:!0,fileId:g,isServerSide:v}):(0,a.jsx)(c.d,{})};nb.SSR=!1;var nw=nb},52602:function(e,t,n){"use strict";n.d(t,{V:function(){return m}});var i=n(24246),r=n(44067),l=n(27378),s=n(83449),a=n(22967),o=n(52949),c=n(89377),d=n(26581),u=n(42135);let m=e=>{if(!e)return"";if(e.id)return e.name;let{prettified_name:t,domain:n,generated_name:i}=e,r=n;return(null==r?void 0:r.split(".")[0])==="www"&&(r=r.split(".").slice(1).join(".")),t||i||r};t.Z=e=>{let{mode:t,documentData:n,variant:f="document"}=e,[p,v]=(0,l.useState)([]),h=(0,l.useRef)(null),x=n.app_tags,g=(0,l.useRef)(x.map(l.createRef)),b=p.filter(e=>e.topPosition>24),w=x.length-b.length,y=(0,r.Z)();return(0,l.useEffect)(()=>{var e;if(null===h.current||null===g.current)return;let t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect(),n=x.map((e,n)=>{var i;let r=null===(i=g.current[n].current)||void 0===i?void 0:i.getBoundingClientRect(),l=(null==r?void 0:r.top)||0,s=(null==t?void 0:t.top)||0;return{rect:r,tag:e,id:e.id,topPosition:l-s}});y<=640&&v(n)},[y]),(null==x?void 0:x.length)>0&&(0,i.jsx)("div",{ref:h,className:(0,a.cn)("page"===f?"inline":"relative z-20 mt-4 flex h-[26px] flex-wrap items-center gap-2 overflow-y-hidden px-[1px] py-[1px] sm:h-auto sm:overflow-y-auto"),children:x.map((e,n)=>{let r=n+1===w&&b.length>=1;return(0,i.jsx)("div",{children:"page"===f?0===n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"font-sans text-xs font-normal leading-none text-slate-500",children:m(e)}),(0,i.jsx)("span",{className:"px-2 text-slate-200",children:"|"})]}):(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{ref:g.current[n],children:(0,i.jsx)(o.Z,{tag:e,className:(0,a.cn)("not-prose","viewer"===t&&"cursor-pointer"),isEditable:(0,u.m)(t)})}),r&&(0,i.jsxs)(s.h_,{modal:!1,children:[(0,i.jsx)(s.$F,{asChild:!0,children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Z,{classes:"block sm:hidden cursor-pointer",title:"+".concat(b.length),variant:"primary"})})}),(0,i.jsx)(s.AW,{side:"top",theme:"light",sideOffset:8,children:b.map(e=>(0,i.jsx)(s.Xi,{className:"cursor-default",children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{className:"flex h-4 w-4 items-center justify-center",children:(0,i.jsx)("img",{src:e.tag.icon_url||(0,d.m)(e.tag.domain),alt:"".concat(e.tag.tagUrlDomain," app tag"),className:"h-full w-full"})}),m(e.tag)]})},e.id))})]})]})},e.id)})})}},9275:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(24246),r=n(27378),l=n(15597),s=n(5827),a=n(83469),o=n(38579),c=n.n(o),d=n(79894),u=n.n(d),m=n(48407),f=n(22967),p=n(42171),v=e=>{let{documentUrl:t}=e;return(0,i.jsx)("div",{id:"scribe-file-viewer-storage-access-permission-denied",className:(0,f.cn)("h-full w-full overflow-hidden bg-white"),children:(0,i.jsx)("div",{className:"flex h-4/5 w-full flex-row items-center justify-center",children:(0,i.jsxs)("div",{className:"m-0 flex w-1/2 flex-col items-start justify-center sm:p-5 mobile-lg:w-4/5",children:[(0,i.jsx)(c(),{height:48,width:48,src:"/images/extensionLogo.svg",alt:"extension logo",className:"mb-6 h-full w-10"}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-black",children:"Welcome to Scribe"}),(0,i.jsx)("h3",{className:"text-lg font-normal text-black",children:"Hi there! It looks like your current browser settings are preventing you from accessing this Scribe. You can view this Scribe in a new tab or fix the cookie settings in your browser."}),(0,i.jsx)("div",{className:"mt-5 flex w-full justify-center mobile-lg:flex-col mobile-lg:space-y-4",children:(0,i.jsxs)("div",{className:"flex min-w-full flex-col gap-3 lg:min-w-[272px]",children:[(0,i.jsx)(u(),{href:t,target:"_blank",className:"w-full",children:(0,i.jsx)(m.z,{variant:"primary",size:"large",className:"w-full",iconPosition:"right",icon:a.wlW,onClick:()=>(0,p.L9)("embed_clicked_view_doc_new_tab_button"),children:"View this Scribe in new tab"})}),(0,i.jsx)(u(),{href:"https://scribehow.com/page/Reset_cross-cookie_access_in_your_browser__bVXoJ4HeRjWmQR0sr4P4BA?referrer=workspace",target:"_blank",className:"w-full",children:(0,i.jsxs)(m.z,{variant:"secondary",size:"large",className:"w-full",onClick:()=>(0,p.L9)("embed_clicked_fix_cookies_button"),children:["Show me how to fix my cookies ",(0,i.jsx)("span",{className:"ml-1 hidden sm:block",children:"\uD83C\uDF6A"})]})})]})})]})})})},h=e=>{let{approve:t}=e;return(0,i.jsx)("div",{id:"scribe-file-viewer-storage-access-permission-needed",className:(0,f.cn)("h-full w-full overflow-hidden bg-white"),children:(0,i.jsx)("div",{className:"flex h-4/5 w-full flex-row items-center justify-center",children:(0,i.jsxs)("div",{className:"m-0 flex w-1/2 flex-col items-start justify-center p-5 mobile-lg:w-4/5",children:[(0,i.jsx)(c(),{height:48,width:48,src:"/images/extensionLogo.svg",alt:"extension logo",className:"mb-6 h-full w-10"}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-black",children:"Welcome to Scribe"}),(0,i.jsx)("h3",{className:"text-lg font-normal text-black",children:"Hi there! To view embedded content, Scribe needs your permission to access cross-site cookies."}),(0,i.jsx)("div",{className:"mt-5 flex w-full mobile-lg:flex-col mobile-lg:space-y-4",children:(0,i.jsx)("div",{className:"flex flex-col gap-4",children:(0,i.jsx)("div",{className:"flex flex-col-reverse gap-4 xs:flex-row",children:(0,i.jsx)(m.z,{className:"min-w-[160px]",onClick:t,variant:"primary",children:"Approve"})})})})]})})})};let x=()=>new Promise((e,t)=>{"undefined"==typeof document?e("error"):document.hasStorageAccess?document.hasStorageAccess().then(t=>{t?e("has_access"):navigator.permissions.query({name:"storage-access"}).then(t=>{"granted"===t.state?document.requestStorageAccess().then(()=>{e("has_access")}).catch(t=>{(0,l.l)(t,{tags:{location:"storageAPIAccessHelpers",action:"requestStorageAccess"}}),e("error")}):"prompt"===t.state?e("prompt"):"denied"===t.state&&e("denied")}).catch(t=>{(0,l.l)(t,{tags:{location:"storageAPIAccessHelpers",action:"determineCookieAccess"}}),e("error")})}).catch(t=>{(0,l.l)(t,{tags:{location:"storageAPIAccessHelpers",action:"hasStorageAccess"}}),e("error")}):e("has_access")});var g=e=>{let{onPermissionsGranted:t,documentUrl:n,documentId:a,...o}=e,c=window.self!==window.top,[d,u]=(0,r.useState)(void 0),m=()=>{document.requestStorageAccess().then(()=>null==t?void 0:t()).then(()=>{u("has_access")}).catch(e=>{console.error("Error obtaining storage access: ".concat(e,". Please sign in.")),u("denied"),(0,l.l)(e,{tags:{location:"EmbedPermissionsView",action:"requestStorageAccess"}})})};return((0,r.useEffect)(()=>{if(!c){u("has_access");return}x().then(e=>{"has_access"===e?m():u(e)}).catch(e=>{u("error"),(0,l.l)(e,{tags:{location:"EmbedPermissionsView",action:"determineCookieAccess"}})})},[c]),"prompt"===d)?(0,i.jsx)(h,{approve:m}):"denied"===d?(0,i.jsx)(v,{documentUrl:n}):(0,i.jsx)(s.Z,{props:o,pk:a,isEmbedded:!0})}}},function(e){e.O(0,[3277,1362,7873,1662,7841,9671,8345,4101,4488,7969,737,5971,8005,9894,9537,2851,5444,9294,7669,7765,5498,5132,4075,663,3941,7893,2450,7046,6408,8686,5861,8539,1132,51,9422,7983,4561,8295,2888,9774,179],function(){return e(e.s=31954)}),_N_E=e.O()}]);