(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4561],{10379:function(e,t,i){"use strict";i.d(t,{Z:function(){return b}});var n=i(24246),l=i(83469),s=i(94033),o=i(54107);i(27378);var a=i(48407),r=i(1581),d=i(12068),c=i(42171),u=i(22107),m=i(38579),x=i.n(m),p=i(87846),h=i(22967),v=e=>{let{domain:t,limitedURL:i,extensionInstalled:l}=e,o=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"truncate text-ellipsis text-sm font-semibold text-white",children:["Follow along on ",(0,n.jsx)("span",{className:(0,h.cn)(t&&"capitalize"),children:t||"the site"})]}),(0,n.jsx)("span",{className:"truncate text-ellipsis text-sm font-medium text-slate-400",children:i})]});return l||(o=(0,n.jsxs)("div",{className:"flex w-full cursor-pointer hover:opacity-90",onClick:()=>{var e;(0,c.L9)("scribe_viewer_button_tooltip_open_extension_store"),null===(e=window)||void 0===e||e.open((0,d.Xk)(),"_blank")},children:[(0,n.jsxs)("span",{className:"line-clamp-2 flex w-full text-ellipsis text-sm font-semibold text-white",children:["Get the Scribe extension to follow along on ",(0,n.jsxs)("span",{className:(0,h.cn)(t&&"capitalize"),children:[t||"the site","!"]})]}),(0,n.jsx)(s.G,{icon:u.eFW,className:"mx-2 self-center text-sm text-slate-50"})]})),(0,n.jsxs)("div",{className:"flex w-[252px] flex-col overflow-hidden rounded-md bg-slate-800 shadow-xl",children:[(0,n.jsx)(p.C,{variant:"brand",size:"lg",className:"absolute left-3 top-3",children:"BETA"}),(0,n.jsx)(x(),{height:133,width:252,src:"/images/guideMe/guideMeTooltip.svg",alt:"open scribe viewer button tooltip content"}),(0,n.jsx)("div",{className:"flex w-full flex-col px-4 py-3",children:o})]})};let g=e=>{try{let{hostname:t}=new URL(e);return o.parse(t).sld}catch(e){return}},f=e=>{try{let t=new URL(e);return t.hostname+t.pathname}catch(e){return}};var b=e=>{let{onClick:t,actionURL:i,withGuideMeLabel:o,extensionInstalled:u,isEmbedFooter:m}=e,x=i?g(i):"",p=i?f(i):"",h=()=>{if(u)null==t||t();else{var e;(0,c.L9)("scribe_viewer_button_open_extension_store"),null===(e=window)||void 0===e||e.open((0,d.Xk)(),"_blank")}},b=m?(0,n.jsx)("button",{className:"m-0 flex h-6 w-6 cursor-pointer items-center justify-center bg-transparent p-0 text-slate-500 hover:text-slate-900",onClick:h,"aria-label":"Guide Me",children:(0,n.jsx)(s.G,{className:"h-4 w-4",icon:l.$40})}):(0,n.jsx)(a.z,{"aria-label":"Guide Me",variant:"secondary",onClick:h,icon:l.$40});return o&&(b=(0,n.jsx)(a.z,{variant:"secondary",onClick:h,icon:l.$40,children:"Guide Me"})),(0,n.jsx)(r.pn,{children:(0,n.jsxs)(r.u,{children:[(0,n.jsx)(r.aJ,{children:b}),(0,n.jsx)(r._v,{align:m?"end":"center",side:m?"top":"left",alignOffset:m?-16:0,asChild:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,{extensionInstalled:u,limitedURL:p,domain:x}),!m&&(0,n.jsx)(r.Ce,{})]})})]})})}},19135:function(e,t,i){"use strict";i.d(t,{w:function(){return ec},Z:function(){return eu}});var n=i(24246),l=i(83469),s=i(94033),o=i(43425),a=i(16125),r=i(8365),d=i(80833),c=i(37869),u=i(7131),m=i(22967),x=i(85878),p=i(42171),h=i(21785),v=i(27378);let g=(0,v.forwardRef)((e,t)=>{let{icon:i,className:l,children:o,variant:a="default",...r}=e,{disabled:d}=r;return(0,n.jsxs)("button",{ref:t,className:(0,m.cn)("primary"==a?"editor-sidebar-button-primary":"editor-sidebar-button",l),...r,children:[(0,n.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,n.jsx)(s.G,{className:d?"text-slate-500":"text-slate-300",icon:i})}),(0,n.jsx)("span",{className:(0,m.cn)("text-shadow",d?"text-slate-500":"text-white"),children:o})]})});var f=i(1048),b=i(56985),_=i(10975),w=i(29582),j=i(19973),y=i(50498),N=i(2126),k=e=>{let{isScribeSuperOrgFree:t,allowFeedback:i,onAllowFeedback:l,completionStep:s,onCompletionStepToggle:o,publicComments:a,onPublicCommentsToggle:r,teamComments:d,onTeamCommentsToggle:c}=e,u=(0,n.jsx)(y.Z,{label:"Allow Feedback",enabled:i,onToggle:l,isPro:t,editable:!t,className:"[&>label]:!flex [&>label]:!items-center"});return t&&(u=(0,n.jsxs)("div",{className:"relative",children:[u,(0,n.jsx)("button",{className:"absolute inset-0 m-0 cursor-pointer bg-transparent",onClick:l,"aria-label":"Upgrade to Pro to Toggle Feedback"})]})),(0,n.jsxs)(N.Z,{className:"space-y-4",children:[u,(0,n.jsx)(y.Z,{label:"Completion Step",enabled:s,onToggle:o}),(0,n.jsx)(y.Z,{label:"Public Comments",enabled:a,onToggle:r}),(0,n.jsx)(y.Z,{label:"Team Comments",enabled:d,onToggle:c})]})},C=()=>{var e,t;let{scribeFile:i}=(0,a.v9)(b.Q),[l,s]=(0,v.useState)(!1),o=(0,a.I0)(),r=(0,_.TV)(null==i?void 0:null===(e=i.organization_owner)||void 0===e?void 0:e.super_organization),d=(0,j.Z)(),c=(e,t)=>{let n=!i[e],l={};l[e]=n,o((0,b.Qm)({id:i.id,bodyParams:l})),(0,p.L9)("toggle_".concat(t),{file_id:i.id,...l})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k,{completionStep:null==i?void 0:i.show_completion_step,publicComments:null==i?void 0:i.comments_enabled_for_viewer,teamComments:null==i?void 0:i.comments_enabled_for_editor,isScribeSuperOrgFree:r,allowFeedback:null==i?void 0:i.allow_feedback,onAllowFeedback:()=>{if(r)return(0,p.L9)("show_feature_gate_modal",{location:"collaboration_menu",feature:"Scribe Document Feedback"}),s(!0);let e=!(null==i?void 0:i.allow_feedback);(0,p.L9)("feedback_set_for_editor",{file_id:i.id,feedback_enabled:e}),o((0,b.Qm)({id:i.id,bodyParams:{allow_feedback:e}})),(0,p.L9)("feedback_enabled_disabled_for_scribe_editor",{file_id:i.id,enabled:e})},onCompletionStepToggle:()=>((0,p.L9)("toggle_completion_step",{file_id:i.id,enabled:!i.show_completion_step,docType:"Scribe"}),c("show_completion_step","completion_step")),onPublicCommentsToggle:()=>{let e=!(null==i?void 0:i.comments_enabled_for_viewer);(0,p.L9)("comments_set_for_viewer",{file_id:i.id,comments_enabled:e});let t={comments_enabled_for_viewer:e,comments_enabled_for_editor:null==i?void 0:i.comments_enabled_for_editor};e&&(t.comments_enabled_for_editor=!0),o((0,b.iW)({documentId:i.id,bodyParams:t})),(0,p.L9)("comments_enabled_disabled_for_scribe_viewer",{file_id:i.id,enabled:e})},onTeamCommentsToggle:()=>{let e=!(null==i?void 0:i.comments_enabled_for_editor);(0,p.L9)("comments_set_for_editor",{file_id:i.id,comments_enabled:e}),o((0,b.iW)({documentId:i.id,bodyParams:{comments_enabled_for_editor:e,comments_enabled_for_viewer:e}})),(0,p.L9)("comments_enabled_disabled_for_scribe_editor",{file_id:i.id,enabled:e})}}),l&&(0,n.jsx)(w.ZP,{superOrganization:null==i?void 0:null===(t=i.organization_owner)||void 0===t?void 0:t.super_organization,selectedFeature:(0,w.zf)("customization"),onClose:()=>{(0,p.L9)("closed_feature_gate_modal",{location:"collaboration_menu"}),s(!1)},onUpgradeToPro:e=>{(0,p.L9)("clicked_feature_gate_modal_upgrade_to_pro",{location:"collaboration_menu",feature:e}),d({location:"collaboration_menu"})},onSelectedFeature:e=>(0,w.Wp)(e.title,"collaboration_menu")})]})},S=i(17654),I=i(45166),L=i(4238),T=e=>{let{className:t,...i}=e;return(0,n.jsx)("div",{className:(0,m.cn)("h-px bg-slate-700",t),...i})},E=e=>{let{isScribeSuperOrgFree:t,showStepCount:i,onStepCountToggle:l,showAuthor:s,onAuthorToggle:o,showTimestamps:a,onTimestampsToggle:r,showTableOfContents:d,onTableOfContentsToggle:c,showStepLinks:u,onShowStepLinksToggle:x,showCreationTime:p,onCreationTimeToggle:h,scribeFileId:g,onDisabledClick:f}=e,{scribeFile:b,updateScribeFile:_}=(0,L.c)(g),[w,j]=(0,v.useState)(null==b?void 0:b.click_target_color);(0,v.useEffect)(()=>{(null==b?void 0:b.click_target_color)&&j(b.click_target_color)},[b]);let k=(0,n.jsxs)(N.Z,{onClick:()=>{t&&(null==f||f())},className:(0,m.cn)("space-y-4",{"pointer-events-none":t}),children:[(0,n.jsx)(I.Z,{label:"Click Target Color",isDisabledForUserPlan:t,onSelectColor:e=>{j(e),_({click_target_color:e})},selectedColor:w}),(0,n.jsx)(T,{}),(0,n.jsx)(y.Z,{label:"Show Author",enabled:s,onToggle:o,editable:!t}),(0,n.jsx)(y.Z,{label:"Show Step Count",enabled:i,onToggle:l,editable:!t}),(0,n.jsx)(y.Z,{label:"Show Creation Time",enabled:p,onToggle:h,editable:!t}),(0,n.jsx)(T,{}),(0,n.jsx)(y.Z,{label:"Show Timestamps",enabled:a,onToggle:r,editable:!t}),(0,n.jsx)(y.Z,{label:"Show Table of Contents",enabled:d,onToggle:c,editable:!t}),(0,n.jsx)(T,{}),(0,n.jsx)(y.Z,{label:"Show Guide Me Links",enabled:u,onToggle:x,editable:!t})]});return t?(0,n.jsx)("button",{className:"!m-0 w-full cursor-pointer bg-transparent !p-0",onClick:e=>{e.stopPropagation(),null==f||f()},children:k}):k},Z=()=>{var e,t;let{scribeFile:i}=(0,a.v9)(b.Q),[l,s]=(0,v.useState)(!1),o=(0,a.I0)(),r=(0,j.Z)(),d=(0,S.TV)(null==i?void 0:null===(e=i.organization_owner)||void 0===e?void 0:e.super_organization),c=()=>((0,p.L9)("show_feature_gate_modal",{location:"customization",feature:"Customization"}),s(!0)),u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(d)return(0,p.L9)("show_feature_gate_modal",{location:"customization_menu",feature:t}),c();let l=!i[e],s={};s[e]=l,n?o((0,b.iW)({documentId:i.id,bodyParams:s})):o((0,b.Qm)({id:i.id,bodyParams:s})),(0,p.L9)("toggle_".concat(t),{file_id:i.id,...s})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E,{scribeFileId:null==i?void 0:i.id,isScribeSuperOrgFree:d,showStepCount:null==i?void 0:i.show_step_count,onStepCountToggle:()=>{u("show_step_count","step_count")},showAuthor:null==i?void 0:i.show_author,onAuthorToggle:()=>u("show_author","author"),showTimestamps:null==i?void 0:i.show_timestamps,onTimestampsToggle:()=>{if(d)return c();let e=!(null==i?void 0:i.show_timestamps);(0,p.L9)("toggle_timestamps",{file_id:i.id,timestamps_enabled:e}),o((0,b.iW)({documentId:i.id,bodyParams:{show_timestamps:e}}))},showTableOfContents:null==i?void 0:i.show_table_of_content,onTableOfContentsToggle:()=>u("show_table_of_content","table_of_content"),showStepLinks:null==i?void 0:i.show_step_links,onShowStepLinksToggle:()=>u("show_step_links","show_step_links",!0),showCreationTime:null==i?void 0:i.show_creation_time,onCreationTimeToggle:()=>u("show_creation_time","creation_time"),onDisabledClick:()=>c()}),l&&(0,n.jsx)(w.ZP,{superOrganization:null==i?void 0:null===(t=i.organization_owner)||void 0===t?void 0:t.super_organization,selectedFeature:(0,w.zf)("customization"),onClose:()=>{(0,p.L9)("closed_feature_gate_modal",{location:"customization_menu"}),s(!1)},onUpgradeToPro:e=>{(0,p.L9)("clicked_feature_gate_modal_upgrade_to_pro",{location:"customization_menu",feature:e}),r({location:"customization_menu"})},onSelectedFeature:e=>(0,w.Wp)(e.title,"customization_menu")})]})};let F=e=>(0,n.jsx)("p",{className:"m-0 text-xs font-semibold uppercase text-slate-400",...e}),B=e=>{let{label:t,value:i}=e;return(0,n.jsxs)("div",{className:"flex justify-between text-sm font-medium",children:[(0,n.jsx)("span",{className:"text-slate-400",children:t}),(0,n.jsx)("span",{className:"ml-4 truncate text-white",children:null!=i?i:"Loading..."})]})};function D(e){return new Date(e).toDateString()}var M=e=>{let{created:t,createdBy:i,lastUpdated:l,lastEditedBy:s,folder:o,views:a,comments:r,totalSteps:d}=e;return(0,n.jsxs)(N.Z,{className:"space-y-4",children:[(0,n.jsx)(F,{children:"Information"}),(0,n.jsx)(B,{label:"Created",value:D(t)}),(0,n.jsx)(B,{label:"Created By",value:i}),(0,n.jsx)(B,{label:"Last Updated",value:D(l)}),(0,n.jsx)(B,{label:"Last Edited By",value:s}),(0,n.jsx)(B,{label:"Folder",value:o}),(0,n.jsx)(T,{}),(0,n.jsx)(F,{children:"Stats"}),(0,n.jsx)(B,{label:"Views",value:null==a?void 0:a.toString()}),(0,n.jsx)(B,{label:"Comments",value:null==r?void 0:r.toString()}),(0,n.jsx)(B,{label:"Total Steps",value:null==d?void 0:d.toString()})]})},z=()=>{let{scribeFile:e}=(0,a.v9)(b.Q),t=(null==e?void 0:e.folder)?e.folder.name:"-",i=null==e?void 0:e.user_creator,l=i?"".concat(i.first_name," ").concat(i.last_name):"-";return(0,n.jsx)(M,{created:null==e?void 0:e.created,createdBy:l,lastUpdated:null==e?void 0:e.updated,lastEditedBy:null==e?void 0:e.updater_name,folder:t,views:null==e?void 0:e.view_count,comments:null==e?void 0:e.comment_count,totalSteps:null==e?void 0:e.actions_count})},P=i(60074),A=i(69029),R=i(56552),G=i(22172),O=e=>{let{scribeId:t}=e,i=(0,R.useQueryClient)(),n=(0,a.I0)(),l=(0,A.M7)(t),{scribeFile:s}=(0,A.cR)(t);return(0,R.useMutation)(async()=>{let e=await G.Z.updateScribeFile(s.id,{process_tags:(0,b.av)(s.process_tags,b.lB)});return{...s,...e}},{onMutate:async()=>{await i.cancelQueries(l);let e=i.getQueryData(l),t={...s,process_tags:(0,b.av)(s.process_tags,b.lB)};return n(b.iW.fulfilled(t)),i.setQueryData(l,t),{previousScribe:e}},onError:(e,t,o)=>{n(b.iW.fulfilled(s)),i.setQueryData(l,o.previousScribe),P.Tb(e)},onSettled:e=>{var t,n;i.invalidateQueries(l),(0,p.L9)("toggled_under_review",{under_review:null!==(n=null==e?void 0:null===(t=e.process_tags)||void 0===t?void 0:t.includes(b.lB))&&void 0!==n&&n})}})},U=e=>{let{scribeId:t}=e,i=(0,R.useQueryClient)(),n=(0,a.I0)(),l=(0,A.M7)(t),{scribeFile:s}=(0,A.cR)(t);return(0,R.useMutation)(async()=>{let e=await G.Z.updateScribeFile(s.id,{process_tags:(0,b.av)(s.process_tags,b.fJ)});return{...s,...e}},{onMutate:async()=>{await i.cancelQueries(l);let e=i.getQueryData(l),t={...s,process_tags:(0,b.av)(s.process_tags,b.fJ)};return n(b.iW.fulfilled(t)),i.setQueryData(l,t),{previousScribe:e}},onError:(e,t,s)=>{n(b.iW.fulfilled(s.previousScribe)),i.setQueryData(l,s.previousScribe),P.Tb(e)},onSettled:e=>{var t,n;i.invalidateQueries(l),(0,p.L9)("toggled_verified",{verified:null!==(n=null==e?void 0:null===(t=e.process_tags)||void 0===t?void 0:t.includes(b.fJ))&&void 0!==n&&n})}})},V=e=>{let{verified:t,onVerifiedToggle:i,underReview:l,onUnderReviewToggle:s}=e;return(0,n.jsxs)(N.Z,{className:"space-y-4",children:[(0,n.jsx)(y.Z,{label:"Verified",enabled:t,onToggle:i}),(0,n.jsx)(y.Z,{label:"Under Review",enabled:l,onToggle:s})]})},W=()=>{var e,t,i,l;let{scribeFile:s}=(0,a.v9)(b.Q),{mutate:o}=O({scribeId:null==s?void 0:s.id}),{mutate:r}=U({scribeId:null==s?void 0:s.id});return(0,n.jsx)(V,{verified:null!==(i=null==s?void 0:null===(e=s.process_tags)||void 0===e?void 0:e.includes("bestpractice"))&&void 0!==i&&i,onVerifiedToggle:()=>r(s),underReview:null!==(l=null==s?void 0:null===(t=s.process_tags)||void 0===t?void 0:t.includes("tobeoptimized"))&&void 0!==l&&l,onUnderReviewToggle:()=>o(s)})},H=i(54062),q=i(99006),K=i(84139),Q=i(86677),J=i.n(Q),Y=i(18378),X=i(1381),$=i(18575),ee=i(98716),et=i(70360),ei=i(71203),en=i(12934),el=()=>(0,n.jsxs)("div",{className:"w-[256px] overflow-hidden rounded-lg bg-slate-800",children:[(0,n.jsxs)("div",{className:"relative flex h-[100px] items-end overflow-hidden bg-gradient-to-b from-[rgb(29,43,78)] to-[rgba(10,16,32)] pl-[15px] pt-4",children:[(0,n.jsx)("img",{className:"z-10",src:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/Scribe_Page_AI_Input.png",alt:"Scribe Page AI Input",width:"245",height:"87"}),(0,n.jsx)("div",{className:"absolute -top-8 left-[140px] h-[134px] w-[134px] rounded-full bg-gradient-to-tr from-[rgb(92,96,255)] to-[rgb(73,255,255)] blur-[56px]"}),(0,n.jsx)("div",{className:"absolute left-[156px] top-2 h-[134px] w-[134px] rounded-full bg-gradient-to-tr from-[rgb(92,96,255)] to-[rgb(69,162,183)] blur-[56px]"}),(0,n.jsx)("div",{className:"absolute -top-7 left-[54px] h-[131px] w-[131px] rounded-full bg-gradient-to-tr from-[rgb(92,96,255)] to-[rgb(73,255,255)] blur-[36px]"})]}),(0,n.jsxs)("div",{className:"px-3",children:[(0,n.jsx)("h3",{className:"mb-2 text-sm font-bold text-white",children:"Want to see some AI magic?"}),(0,n.jsx)("p",{className:"mt-0 text-sm text-slate-300",children:"Add this Scribe to an AI-generated process document. No work needed from you!"})]})]}),es=e=>{let{onPin:t,onAddToPage:i,onMagicMerge:s,onDuplicate:o,onMoveToTeam:a,onCopyToTeam:r,onArchiveScribe:d,pinnedScribes:c,newBulkStepEnabled:u,showAiTooltip:m,permissionContext:x}=e,[p,g]=(0,v.useState)(!1),{permissions:f,hasWritableTeams:b}=x;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(N.Z,{className:"space-y-3",children:[c&&(0,n.jsx)(en.Z,{icon:l.RP7,onClick:t,badgeLabel:"New",children:"Pin Scribe"}),(0,n.jsx)(h.Z,{title:"profile?.email",appearance:"left",variant:"small-dark",visible:!0,offset:[0,32],content:m?(0,n.jsx)(el,{}):null,children:(0,n.jsx)(en.Z,{icon:l.inW,onClick:i,children:"Add to Page"})}),(0,n.jsxs)(en.Z.Stack,{children:[u&&(0,n.jsx)(en.Z,{icon:l.Z30,onClick:()=>g(!0),children:"Magic Merge"}),(0,n.jsx)(en.Z,{icon:l.kZ_,onClick:o,children:"Duplicate"}),(null==f?void 0:f.can_move)&&b&&(0,n.jsx)(en.Z,{icon:l.iiS,onClick:a,children:"Move to a Team"}),(0,n.jsx)(en.Z,{icon:l.NdV,onClick:r,children:"Duplicate to a Team"})]}),(null==f?void 0:f.can_delete)&&(0,n.jsx)(en.Z,{icon:l.XAH,onClick:d,children:"Delete Scribe"})]}),p&&(0,n.jsx)(ei.Z,{title:"Merge Steps",description:'This action combines steps with similar screenshots into a single animation. You can always undo this by selecting "Undo Merged Steps".',visible:p,onCancel:()=>g(!1),showCloseIcon:!0,showCancel:!0,actionTitle:"Let's go!",onAction:()=>{s(),g(!1)},variant:"success"})]})},eo=e=>{let{onAddToPage:t,onPin:i,onMagicMerge:l}=e,{scribeFile:s}=(0,a.v9)(b.Q),{pinnedScribes:r}=(0,a.v9)(Y.F),d=(0,o.Z)("viewer_left_toc"),[c,u]=(0,v.useState)(!1),[m,x]=(0,v.useState)(!1),[h,g]=(0,v.useState)(!1),{writableTeams:f,canWriteInActiveTeam:_}=(0,a.v9)(X.wL),w=(0,$.Z)(s),{data:j}=(0,H.ZP)(),{mutateAsync:y}=(0,K.D)(),{mutateAsync:N}=(0,q.g)(),k=(null==j?void 0:j.shared_first_scribe)&&(null==j?void 0:j.first_created_scribe_id)&&(null==j?void 0:j.first_created_scribe_id.length);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(es,{onAddToPage:t,onMagicMerge:l,onDuplicate:()=>y({id:s.id,context:K.k.EDITOR}),onPin:i,onMoveToTeam:()=>{x(!0),(0,p.L9)("move_scribe_to_team",{location:"editor_document_actions"})},onCopyToTeam:()=>u(!0),onArchiveScribe:()=>{g(!0),(0,p.L9)("archive_scribe",{location:"editor_document_actions"})},pinnedScribes:r,newBulkStepEnabled:d,showAiTooltip:!!k,permissionContext:{permissions:w,canWriteInActiveTeam:_,hasWritableTeams:(null==f?void 0:f.length)>0}}),m&&(0,n.jsx)(ee.Z,{visible:m,action:"Move",rerouteOnSuccess:!1,onCancel:()=>x(!1),document:s}),c&&(0,n.jsx)(ee.Z,{visible:c,action:"Duplicate",rerouteOnSuccess:!1,onCancel:()=>u(!1),document:s}),(0,n.jsx)(et.Z,{description:'Are you sure you want to delete "'.concat(null==s?void 0:s.name,'"?'),open:h,onCancel:()=>g(!1),onDelete:()=>{N({documentId:s.id}).then(()=>{J().reload()}).catch(e=>{console.error("Error archiving a file: ",e)}),g(!1),(0,p.L9)("archive_scribe",{scribeId:s.id})}})]})},ea=i(40174);let er=e=>{let{label:t,icon:i,active:o,onClick:a,isNew:r,disabledForFree:d=!1}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"h-px bg-blueGray-900"}),(0,n.jsx)("div",{className:"h-px bg-blueGray-700"}),(0,n.jsxs)("div",{"aria-hidden":!0,className:"flex cursor-pointer select-none items-center p-4",onClick:a,children:[(0,n.jsx)(s.G,{className:(0,m.cn)("text-sm",o?"text-indigo-500":"text-blueGray-500"),icon:i,fixedWidth:!0}),(0,n.jsx)("span",{className:"ml-2 block text-sm font-semibold text-white",children:t}),r&&(0,n.jsx)("span",{style:{borderRadius:"4px",fontSize:"9px"},className:"ml-2 block bg-indigo-600 px-1 py-0.5 font-bold text-indigo-100",children:"NEW"}),d&&(0,n.jsx)(u.g,{variant:"dark",className:"ml-3"}),(0,n.jsx)("div",{className:(0,m.cn)("ml-auto text-sm transition-all",o?"text-white":"text-blueGray-600",{"-rotate-180":o}),children:(0,n.jsx)(s.G,{icon:l.gc2})})]})]})},ed=e=>{let{children:t,open:i,maxHeight:l=1/0}=e,[s,{height:o}]=(0,d.Z)();return(0,n.jsx)(r.ZP,{in:i,timeout:150,children:e=>(0,n.jsx)("div",{style:{height:"exiting"===e||"exited"===e?0:l<o?l:o},className:"overflow-y-auto transition-[height]","aria-expanded":i,children:(0,n.jsx)("div",{ref:s,children:t})})})},ec=e=>{let{label:t,icon:i,menu:l,open:s,onToggle:o,isNew:a,disabledForFree:r=!1,maxHeight:d}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(er,{label:t,icon:i,active:s,onClick:o,isNew:a,disabledForFree:r}),(0,n.jsx)(ed,{open:s,maxHeight:d,children:l})]})};var eu=e=>{let{copyLinkTitle:t="Link",isFreeSuperOrgDocument:i,onShare:s,canShare:r,onCopyLink:d,onPin:u,onAddToPage:m,setMultiSelectMode:v,onCombineSteps:b,onCloneAndMove:_,onMagicMerge:w,onDeleteSteps:j,onUndoMagicMerge:y,withReviewMenu:N,stepActionsMenuState:k,dispatchStepActionsMenu:S,selectedStepIds:I}=e,{height:L}=(0,c.Z)(),T=L-396-72-8,E=(0,a.v9)(e=>e.editorSidebar.openSection),F=(0,x.N9)(),B=(0,a.I0)(),D=e=>()=>{B((0,f.ZN)(e)),(0,p.L9)("editor_sidebar_section_toggled",{section:e,action:E===e?"closed":"opened"})},M=(0,o.Z)("viewer_left_toc");return F?null:(0,n.jsx)("div",{style:{top:72,bottom:8},className:"pointer-events-none fixed right-6 hidden max-w-[250px] sm:block xl:w-80","data-testid":"editor-sidebar",children:(0,n.jsxs)("div",{className:"pointer-events-auto overflow-hidden rounded-2xl bg-slate-800",children:[(0,n.jsxs)("div",{className:"flex gap-3 p-4",children:[r?(0,n.jsx)(g,{className:"flex-1",icon:l.zBy,onClick:s,children:"Share"}):(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(h.Z,{appearance:"left",variant:"dark",content:(0,n.jsxs)("p",{className:"mx-5 my-3 text-sm font-semibold text-slate-100",children:["Share functionality is limited to users",(0,n.jsx)("br",{}),"on the document owner's team."]}),offset:[0,30],children:(0,n.jsx)(g,{className:"w-full",icon:l.zBy,disabled:!0,children:"Share"})})}),(0,n.jsx)(g,{className:"flex-1 whitespace-nowrap",icon:l.nNP,onClick:d,variant:"primary",children:t})]}),(0,n.jsx)(ec,{label:"Document Actions",icon:l.nfZ,menu:(0,n.jsx)(eo,{onPin:u,onAddToPage:m,onMagicMerge:w}),open:"document_actions"===E,onToggle:D("document_actions"),maxHeight:T}),!M&&(0,n.jsx)(ec,{label:"Step Actions",icon:l.nFo,menu:(0,n.jsx)(ea.ZP,{setMultiSelectMode:v,onCombineSteps:b,onCloneAndMove:_,onMagicMerge:w,onDeleteSteps:j,onUndoMagicMerge:y,state:k,dispatch:S,selectedStepIds:I}),open:"step_actions"===E,onToggle:D("step_actions"),maxHeight:T}),(0,n.jsx)(ec,{label:"Customization",icon:l.cRF,menu:(0,n.jsx)(Z,{}),open:"customization"===E,onToggle:D("customization"),maxHeight:T,disabledForFree:i}),(0,n.jsx)(ec,{label:"Collaboration",icon:l.lXL,menu:(0,n.jsx)(C,{}),open:"collaboration"===E,onToggle:D("collaboration"),maxHeight:T}),N&&(0,n.jsx)(ec,{label:"Review",icon:l.E9T,menu:(0,n.jsx)(W,{}),open:"review"===E,onToggle:D("review"),maxHeight:T}),(0,n.jsx)(ec,{label:"Stats & Info",icon:l.dGq,menu:(0,n.jsx)(z,{}),open:"stats_and_info"===E,onToggle:D("stats_and_info"),maxHeight:T})]})})}},50498:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n=i(24246),l=i(7131),s=i(81644),o=e=>{let{label:t,enabled:i,onToggle:o,editable:a,isPro:r,className:d}=e;(a||void 0===a)&&(a=void 0!==o);let c=(0,n.jsxs)(n.Fragment,{children:[t,r&&(0,n.jsx)(l.g,{variant:"dark",className:"mx-3"})]});return(0,n.jsx)(s.r,{theme:"dark",checked:i,onCheckedChange:o,disabled:!a,label:c,className:d,id:t.replace(/\s/g,"").toLowerCase()})}},12934:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var n=i(24246),l=i(94033),s=i(27378),o=i(22967),a=e=>{let{label:t}=e;return(0,n.jsx)("span",{className:"mx-2 mt-0.5 max-h-4 rounded-[4px] bg-indigo-600 px-1 text-[9px] text-xs font-bold text-indigo-100",children:t})},r=Object.assign((0,s.forwardRef)((e,t)=>{let{icon:i,badgeLabel:s,className:r,children:d,...c}=e,{disabled:u}=c;return(0,n.jsxs)("button",{ref:t,className:(0,o.cn)("step-action-button group",void 0===i?"justify-center":"justify-between",r),...c,children:[(0,n.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,n.jsx)("span",{className:u?"text-slate-500":"text-white",children:d}),s&&(0,n.jsx)(a,{label:"New"})]}),i&&(0,n.jsx)(l.G,{className:u?"text-slate-500":"text-indigo-500 group-hover:text-indigo-400",icon:i,fixedWidth:!0})]})}),{Stack:e=>(0,n.jsx)("div",{className:"step-action-button-stack flex flex-col gap-[1px]",...e})})},2126:function(e,t,i){"use strict";var n=i(24246),l=i(22967);t.Z=e=>{let{className:t,...i}=e;return(0,n.jsx)("div",{className:(0,l.cn)("bg-slate-900 p-4",t),...i})}},40174:function(e,t,i){"use strict";i.d(t,{ZP:function(){return I},E3:function(){return b},I6:function(){return _}});var n=i(24246),l=i(83469),s=i(55260),o=i(27378),a=i(16125),r=i(8022),d=i(22967),c=i(42171),u=i(71203),m=i(94033);let x={backgroundColor:"#1b2335",width:"112px",height:"84px"},p={...x,boxShadow:"inset 0 1px 0 #334155"},h={background:"radial-gradient(59.82% 76.14% at 50% 100%, rgba(79, 70, 229, 0.6) 0%, rgba(79, 70, 229, 0) 100%), rgba(255, 255, 255, 0.08)"};var v=e=>{let{label:t,icon:i,style:l,className:s,disabled:o,...a}=e;return(0,n.jsxs)("button",{style:{...o?x:p,...l},className:(0,d.cn)("group relative select-none rounded-lg p-0",{"cursor-pointer":!o},s),disabled:o,...a,children:[!o&&(0,n.jsx)("div",{style:h,className:"absolute inset-0 rounded-lg opacity-0 transition-opacity group-hover:opacity-100"}),(0,n.jsxs)("div",{className:"absolute inset-0 pt-4 text-center",children:[(0,n.jsx)(m.G,{className:"text-2xl text-indigo-500 transition-colors group-hover:text-indigo-400 group-disabled:text-blueGray-600",icon:i}),(0,n.jsx)("p",{className:"mb-0 mt-3 font-sans text-xs font-medium text-white transition-colors group-disabled:text-blueGray-500",children:t})]})]})},g=i(12934),f=i(2126);let b={activeMenu:"NONE"};function _(e,t){switch(t.type){case"RESET":return b;case"COMBINE_STEPS_ENTERED":return{...e,activeMenu:"COMBINE_STEPS"};case"STEPS_COMBINED":return{...e,combinedSteps:t.num};case"COMBINE_MORE_CLICKED":return{...e,combinedSteps:void 0};case"COPY_STEPS_ENTERED":return{...e,activeMenu:"COPY_STEPS"};case"MAGIC_MERGE_ENTERED":return{...e,activeMenu:"MAGIC_MERGE"};case"DELETE_STEPS_ENTERED":return{...e,activeMenu:"DELETE_STEPS"}}}let w={flexBasis:"calc(50% - 8px)"},j=e=>{let{onCombineSteps:t,onCopy:i,onMagicMerge:s,onDeleteSteps:o}=e,a=[{label:"Combine",icon:l.GB4,onClick:t},{label:"Copy To",icon:l.JUV,onClick:i},{label:"Magic Merge",icon:l.Z30,onClick:s},{label:"Delete",icon:l.XAH,onClick:o}];return(0,n.jsx)("div",{style:{marginRight:"-0.5rem"},className:"flex flex-wrap gap-2",children:a.map(e=>(0,n.jsx)(v,{"data-testid":"".concat(e.label,"-steps-menu-button"),style:w,...e},e.label))})},y=e=>{let{children:t,success:i}=e;return(0,n.jsx)("p",{className:(0,d.cn)("m-0 text-center text-xs font-medium",i?"text-green-500":"text-slate-500"),children:t})},N=e=>{let{combinedSteps:t,onCombineMore:i,onCombine:s,onCancel:o}=e,{selectedActions:d,firstSelectedAction:c,lastSelectedAction:u,numSelectedActions:m}=(0,a.v9)(r.Bf),x=d.length<2||!(c>=0&&c+m-1===u);return t?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(y,{success:!0,children:"Successfully combined steps"}),(0,n.jsx)(g.Z,{icon:l.Krp,onClick:i,children:"Combine More Steps"}),(0,n.jsx)(g.Z,{onClick:o,children:"Done"})]}):(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(y,{children:"Select and combine steps"}),(0,n.jsx)(g.Z,{icon:l.Krp,onClick:s,disabled:x,children:"Combine Selected"}),(0,n.jsx)(g.Z,{onClick:o,children:"Cancel"})]})},k=e=>{let{onCopy:t,onCancel:i}=e,{selectedActions:s}=(0,a.v9)(r.Bf);return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(y,{children:"Select and copy steps"}),(0,n.jsx)(g.Z,{icon:l.kZ_,onClick:t,disabled:0===s.length,children:"Copy Selected"}),(0,n.jsx)(g.Z,{onClick:i,children:"Cancel"})]})},C=e=>{let{onMergeSteps:t,onUndoMergedSteps:i,onDone:s}=e,{autoStackCount:o}=(0,a.v9)(r.JR);return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(y,{children:"Merge steps"}),o>0?(0,n.jsxs)(g.Z.Stack,{children:[(0,n.jsx)(g.Z,{icon:l.qHV,onClick:t,children:"Merge More Steps"}),(0,n.jsx)(g.Z,{icon:l.X7o,onClick:i,children:"Undo Merged Steps"})]}):(0,n.jsx)(g.Z,{icon:l.qHV,onClick:t,children:"Merge Steps"}),(0,n.jsx)(g.Z,{onClick:s,children:"Done"})]})},S=e=>{let{onDelete:t,onCancel:i}=e,{selectedActions:s}=(0,a.v9)(r.Bf);return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(y,{children:"Select and delete steps"}),(0,n.jsx)(g.Z,{"data-testid":"delete-selected-steps-button",icon:l.XAH,onClick:t,disabled:0===s.length,children:"Delete Selected"}),(0,n.jsx)(g.Z,{onClick:i,children:"Cancel"})]})};var I=e=>{let{setMultiSelectMode:t,onCombineSteps:i,onCloneAndMove:l,onMagicMerge:a,onUndoMagicMerge:r,onDeleteSteps:d,state:m,dispatch:x,selectedStepIds:p}=e,[h,v]=(0,o.useState)(!1),{setBulkEditorContext:g}=(0,s.ZP)(),b=(0,n.jsx)(j,{onCombineSteps:()=>{x({type:"COMBINE_STEPS_ENTERED"}),t("multiple"),g("editor_step_actions"),(0,c.L9)("edited_file_stacked_actions",{location:"editor_step_actions",actionIds:[p]})},onCopy:()=>{x({type:"COPY_STEPS_ENTERED"}),t("multiple"),g("editor_step_actions"),(0,c.L9)("clicked_copy_steps_to",{location:"editor_step_actions"})},onMagicMerge:()=>x({type:"MAGIC_MERGE_ENTERED"}),onDeleteSteps:()=>{x({type:"DELETE_STEPS_ENTERED"}),t("multiple"),g("editor_step_actions")}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{children:(()=>{switch(m.activeMenu){case"NONE":default:return b;case"COMBINE_STEPS":return(0,n.jsx)(N,{combinedSteps:m.combinedSteps,onCombine:()=>{x({type:"STEPS_COMBINED",num:i()})},onCombineMore:()=>{x({type:"COMBINE_MORE_CLICKED"}),t("multiple")},onCancel:()=>{x({type:"RESET"}),t(null)}});case"COPY_STEPS":return(0,n.jsx)(k,{onCopy:l,onCancel:()=>{x({type:"RESET"}),t(null),g("editor_step_actions")}});case"MAGIC_MERGE":return(0,n.jsx)(C,{onMergeSteps:()=>v(!0),onUndoMergedSteps:r,onDone:()=>x({type:"RESET"})});case"DELETE_STEPS":return(0,n.jsx)(S,{onDelete:d,onCancel:()=>{x({type:"RESET"}),t(null)}})}})()}),h&&(0,n.jsx)(u.Z,{title:"Merge Steps",description:'This action combines steps with similar screenshots into a single animation. You can always undo this by selecting "Undo Merged Steps".',visible:h,onCancel:()=>v(!1),showCloseIcon:!0,showCancel:!0,actionTitle:"Let's go!",onAction:()=>{a(),v(!1)},variant:"success"})]})}},77737:function(e,t,i){"use strict";i.d(t,{d:function(){return d}});var n=i(24246),l=i(38579),s=i.n(l),o=i(48407),a=i(22967),r=i(15920);let d=e=>{let{isEmbedded:t=!1}=e;return(0,n.jsxs)("div",{id:"scribe-file-viewer",className:(0,a.cn)("h-full w-full overflow-hidden bg-white",{}),children:[!t&&(0,n.jsx)(r.Z,{showBackButton:!0,hideSearchBar:!0,hideTeamDropdown:!0}),(0,n.jsx)("div",{className:"flex h-4/5 w-full flex-row items-center justify-center",children:(0,n.jsxs)("div",{className:"m-0 flex w-1/2 flex-col items-start justify-center p-5 mobile-lg:w-4/5",children:[(0,n.jsx)(s(),{height:48,width:48,src:"/images/extensionLogo.svg",alt:"extension logo",className:"mb-6 h-full w-10"}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-black",children:"Whoops, something's not working!"}),(0,n.jsxs)("h3",{className:"text-lg font-normal text-black",children:["Try refreshing the page. Need more help? Reach out to us at"," ",(0,n.jsx)("a",{className:"text-blue-500 underline",href:"mailto:support@scribehow.com",children:"support@scribehow.com"}),"."]}),(0,n.jsx)("div",{className:"mt-5 flex w-full mobile-lg:flex-col mobile-lg:space-y-4",children:(0,n.jsx)("div",{className:"flex flex-col gap-4",children:(0,n.jsx)("div",{className:"flex flex-col-reverse gap-4 xs:flex-row",children:(0,n.jsx)(o.z,{className:"min-w-[160px]",onClick:()=>{window.location.reload()},variant:"primary",children:"Refresh"})})})})]})})]})}},62789:function(e,t,i){"use strict";var n=i(24246),l=i(23733),s=i.n(l);t.Z=e=>{let{className:t}=e,i={...e};return delete i.className,(0,n.jsx)("button",{className:"".concat(s().DownloadButton," ").concat(t||""," ").concat(e.smaller?s().smaller:""),...i,children:e.text?e.text:"Get Scribe for Free"})}},18587:function(e,t,i){"use strict";i.d(t,{Z:function(){return v}});var n=i(24246),l=i(21947),s=i(94033),o=i(79894),a=i.n(o),r=i(27378),d=i(22652),c=i.n(d),u=i(22967),m=i(85878),x=i(22107),p=e=>{let{isCompleted:t,setIsCompleted:i}=e,l=(0,m.oj)();return(0,n.jsxs)("button",{onClick:()=>i(),className:"z-10 flex h-[42px] w-48 transform-gpu cursor-pointer items-center justify-center overflow-hidden rounded-full shadow-inner transition-all duration-500 ease-in-out md:h-[56px] md:w-64",style:{backgroundImage:t?"linear-gradient(#10B981, #059669)":"linear-gradient(#282656, #15142E)",boxShadow:"0px 6px 8px -3px rgba(21, 20, 46, 0.26), 0px 1px 1px 0px rgba(227, 226, 243, 0.22) inset"},children:[(0,n.jsx)("div",{className:"text-center text-base font-bold leading-normal text-white transition-opacity ".concat(t?"pl-2":"hidden opacity-0"),children:"Completed!"}),(0,n.jsx)("div",{className:"inline-flex w-6 items-center justify-center",children:(0,n.jsx)("div",{className:"absolute transform-gpu text-center text-2xl text-white transition-transform duration-200 md:-mt-2 md:h-6 md:w-6 ".concat(t?"right-11 translate-x-full transform font-black":"left-8 -translate-x-full transform font-normal opacity-25 md:left-11"),children:(0,n.jsx)(s.G,{icon:x.f8k,height:l?18:24,width:l?18:24})})}),(0,n.jsx)("div",{className:"ml-2 w-full whitespace-nowrap text-center text-sm font-bold leading-normal text-white transition-opacity md:text-base ".concat(t?"hidden opacity-0":""),children:"Mark as Complete"})]})},h=e=>{let{completed:t=!1}=e,i=(0,m.oj)(),l=(0,u.cn)({"bottom-[-50px] left-[-30px]":!t,"bottom-[-0px] left-[-0px]":t,"bottom-[-0px] left-[-100px]":i}),s=(0,u.cn)({"bottom-[-50px] right-[-60px]":!t,"bottom-[-0px] right-0":t,"bottom-[-0px] right-[-140px]":i});return(0,n.jsxs)("div",{className:"absolute h-full w-full flex-col justify-between",children:[(0,n.jsxs)("svg",{className:"absolute left-0 transition-all duration-300 ".concat(l),width:"334",height:"256",viewBox:"0 0 334 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:t?"":"rotate(-10deg)"},children:[(0,n.jsx)("g",{filter:"url(#filter0_f_240_1239)",children:(0,n.jsx)("path",{d:"M226.224 335.84C195.971 388.24 62.8708 415.472 -29.8337 361.949C-122.538 308.426 -139.842 112.763 -109.5 36C-76.9577 -46.3313 -17.0002 103.5 68.7226 183.192C154.445 262.884 256.477 283.44 226.224 335.84Z",fill:"url(#paint0_linear_240_1239)"})}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:"filter0_f_240_1239",x:"-225.487",y:"-90.2544",width:"559.433",height:"583.573",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"51.143",result:"effect1_foregroundBlur_240_1239"})]}),(0,n.jsxs)("linearGradient",{id:"paint0_linear_240_1239",x1:"-157.5",y1:"200.663",x2:"118.398",y2:"359.953",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#F45397"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#FFB525"})]})]})]}),(0,n.jsxs)("svg",{className:"absolute transition-all duration-300 ".concat(s),width:"344",height:"256",viewBox:"0 0 344 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:t?"":"rotate(10deg)"},children:[(0,n.jsx)("g",{filter:"url(#filter0_f_240_1240)",children:(0,n.jsx)("path",{d:"M428.304 14.3979C493.44 52.0287 524.384 222.48 454.789 342.944C385.193 463.409 331.268 455.158 235.5 418C132.785 378.147 52.9483 312.414 218.908 206.671C384.868 100.928 265 -37.9999 428.304 14.3979Z",fill:"url(#paint0_linear_240_1240)"})}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:"filter0_f_240_1240",x:"0.669067",y:"-119.707",width:"616.304",height:"684.758",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"61.3414",result:"effect1_foregroundBlur_240_1240"})]}),(0,n.jsxs)("linearGradient",{id:"paint0_linear_240_1240",x1:"150.353",y1:"413.515",x2:"244.379",y2:"6.29905",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#3C2EDD"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#3AC3FF"})]})]})]})]})},v=e=>{let{ownerFirstName:t,onComplete:i,showAuthor:o,hasCompleted:d,containerClassName:x,isKnowledgePage:v}=e,[g,f]=(0,r.useState)(d),[b,_]=(0,r.useState)(!1),w=(0,m.oj)();return(0,n.jsxs)("div",{className:(0,u.cn)("relative mt-8 inline-flex h-[256px] w-full flex-col items-center justify-center gap-6 overflow-hidden rounded-xl border border-black border-opacity-5 bg-white",x),"data-testid":"insights-completion-cta",children:[b&&(0,n.jsx)(c(),{width:window.innerWidth,height:window.innerHeight,numberOfPieces:200,recycle:!0,onConfettiComplete:()=>{_(!0),setTimeout(()=>{_(!1)},5e3)}}),!w&&g&&(0,n.jsxs)("div",{className:"z-10 flex flex-col items-center justify-end gap-1 pb-1",children:[(0,n.jsx)("div",{className:"pb-[2px] text-center text-2xl font-bold leading-normal text-slate-900",children:"Well done!"}),(0,n.jsxs)("div",{className:"text-center text-base font-medium leading-none text-slate-600",children:["Let's find some more ",v?"Pages":"Scribes"," to learn from"]}),(0,n.jsx)("div",{className:"inline-flex h-4 w-4 items-center justify-center",children:(0,n.jsx)("button",{className:"cursor-pointer bg-transparent bg-none pt-2",children:(0,n.jsx)(a(),{href:"/workspace",className:"z-20 !cursor-pointer",children:(0,n.jsx)(s.G,{icon:l.wlW})})})})]}),!w&&!g&&(0,n.jsxs)("div",{className:"flex flex-col items-center justify-end gap-1 pt-1",children:[(0,n.jsx)("div",{className:"pb-[2px] text-center text-2xl font-bold leading-normal text-slate-900",children:"You’ve reached the end"}),(0,n.jsxs)("div",{className:"text-center text-base font-medium leading-none text-slate-600",children:[!v&&(0,n.jsxs)(n.Fragment,{children:["Let ",o?t:"the author"," know you've finished this Scribe"]}),v&&(0,n.jsx)(n.Fragment,{children:"Mark this Page as complete"})]}),(0,n.jsx)("div",{className:"z-10 w-4 text-center text-base font-black text-slate-600",children:(0,n.jsx)("div",{children:(0,n.jsx)(s.G,{icon:l.r5q})})})]}),w&&(0,n.jsx)("div",{className:"flex flex-col items-center justify-end gap-1 pt-1",children:(0,n.jsx)("div",{className:"pb-[2px] text-center text-lg font-bold leading-normal text-slate-900",children:"You’ve reached the end"})}),(0,n.jsx)(p,{isCompleted:g,setIsCompleted:()=>{g||(f(!0),null==i||i(),_(!0))}}),(0,n.jsx)(h,{completed:g})]})}},15920:function(e,t,i){"use strict";var n=i(24246),l=i(23892),s=i.n(l),o=i(86677),a=i(27378),r=i(37322),d=i(37277),c=i(31612),u=i(48268),m=i(7118),x=i(10975),p=i(42171),h=i(62789),v=i(84283),g=i(70752),f=i.n(g);let{publicRuntimeConfig:b}=s()(),_="".concat(u.L,"/images/logo/dark-logo.svg"),w=e=>{let[t,i]=(0,a.useState)(!1),{homePath:l}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:f().mobileNavBar,children:[e.customLogo?e.customLogo&&e.customLogoUrl?(0,n.jsx)("div",{style:{cursor:"pointer"},onClick:()=>(0,x.qv)(e.customLogoUrl),children:(0,n.jsx)("img",{className:f().customLogo,src:e.customLogo,alt:"your_logo"})}):null:(0,n.jsx)("a",{href:l,children:(0,n.jsx)("img",{className:f().mobileNavBarLogo,src:_,alt:"Scribe"})}),(0,n.jsxs)("div",{onClick:()=>{i(!t)},className:"".concat(f().menuToggle," ").concat(t?" ".concat(f().opened):""),id:"menu-toggle","aria-expanded":t?"true":"false",children:[(0,n.jsx)("span",{className:f().screenReaderText,children:"Menu"}),(0,n.jsx)("svg",{className:"".concat(f().icon," ").concat(f().iconMenuToggle,"}"),"aria-hidden":"true",version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",children:(0,n.jsxs)("g",{className:f().svgMenuToggle,children:[(0,n.jsx)("path",{className:"".concat(f().line," ").concat(f().line1),d:"M5 13h90v14H5z"}),(0,n.jsx)("path",{className:"".concat(f().line," ").concat(f().line3),d:"M5 43h90v14H5z"}),(0,n.jsx)("path",{className:"".concat(f().line," ").concat(f().line3),d:"M5 73h90v14H5z"})]})})]})]}),(0,n.jsxs)("div",{className:"".concat(f().mobileNavBarLinks," ").concat(t?" ".concat(f().slide):""),children:[e.children&&(0,n.jsx)("div",{className:f().mobileMenuItemsChildrenWrapper,children:e.children}),e.links&&e.links.map((e,l)=>null==e.enabled||e.enabled?e.href?(0,n.jsx)("a",{href:e.href,onClick:()=>i(!t),children:(0,n.jsxs)("div",{className:f().mobileNavBarItem,children:[(0,n.jsx)("span",{children:e.label}),(0,n.jsx)("img",{src:c.P.arrowRight,alt:"arrow_right"})]})},l+e.href):e.onClick?(0,n.jsx)("a",{onClick:()=>{e.onClick(),i(!t)},children:(0,n.jsxs)("div",{className:f().mobileNavBarItem,children:[(0,n.jsx)("span",{children:e.label}),(0,n.jsx)("img",{src:c.P.arrowRight,alt:"arrow_right"})]})},e.label):void 0:null)]})]})};t.Z=e=>{let{isSticky:t,homePath:l,transparentTop:s,hideUserMenu:c,hideTeamMenu:u,showPagesMenu:g,hideNavLinks:j,showRedirBanner:y,showCreditsBanner:N,showSandboxBanner:k,onCloseBanner:C}=e,S=(0,o.useRouter)(),I=e=>S.pathname===e.href?{fontWeight:"bold"}:{},[L,T]=(0,a.useState)(!1),[E,Z]=(0,a.useState)(y&&i.g.window&&i.g.window.location.href.includes("from=cursive.io")&&"true"!==window.localStorage.getItem("closed-sh-banner")),[F,B]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=e=>{T(window.scrollY>500),B(window.scrollY>80)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,n.jsxs)("div",{className:E?f().navBarBehind:void 0,children:[(0,n.jsxs)("div",{className:"".concat(f().navBarOuter," ").concat(t?f().sticky:""," ").concat(s?f().transparentTop:""," ").concat(F?f().transparentWhiteBg:""),children:[E&&(0,n.jsxs)("div",{className:f().banner,children:[(0,n.jsxs)("p",{className:f().bannerText,children:["\uD83C\uDF89 We have a new (but familiar) name: Cursive is now Scribe, and you can find us here at"," ",(0,n.jsx)("a",{className:f().bannerLink,href:b.cursiveRootUrl,children:"scribehow.com"}),". \uD83C\uDF89"]}),(0,n.jsx)(d.q5L,{size:18,className:f().bannerX,onClick:()=>{Z(!1),window.localStorage.setItem("closed-sh-banner","true")}})]}),k&&(0,n.jsx)("div",{className:"".concat(f().banner," ").concat(f().center),children:(0,n.jsx)("p",{className:f().bannerText,children:"Welcome to the Northern Trust General Team! Please reach out to your manager to inquire about being added to an existing team."})}),(0,n.jsxs)("div",{className:f().navBarInner,children:[(0,n.jsx)("div",{className:f().logoContainer,children:e.customLogo?e.customLogoUrl?(0,n.jsx)("div",{style:{cursor:"pointer"},onClick:()=>(0,x.qv)(e.customLogoUrl),children:(0,n.jsx)("img",{className:f().customLogo,src:e.customLogo,alt:"your_logo"})}):null:(0,n.jsx)("a",{href:l||"/",children:(0,n.jsx)("img",{className:f().navBarLogo,src:_,alt:"Scribe"})})}),e.links&&e.links.length&&!j?(0,n.jsx)("div",{className:f().navBarLinks,children:e.links&&e.links.map((e,t)=>{if(null==e.enabled||e.enabled)return(0,n.jsx)("div",{className:f().navBarLink,style:I(e),children:e.href?(0,n.jsx)("a",{href:e.href,children:e.label}):(0,n.jsx)("a",{onClick:e.onClick,children:e.label})},t+e.href)})}):(0,n.jsx)("div",{className:f().navBarLinks}),e.showGetScribeButton?(0,n.jsx)(h.Z,{text:"Get Scribe",className:"".concat(f().navigationBarGetScribeButton," ").concat(L?f().fadeIn:f().fadeOut),onClick:()=>{(0,p.L9)("click_get_scribe",{location:"navigation_bar"}),S.push("/signup")}}):null,(0,n.jsx)("div",{className:f().navBarChildrenWrapper,children:e.children}),(0,m.d)()&&(0,n.jsxs)(v.Z,{style:{marginRight:8,marginLeft:8},minimal:!0,onClick:e=>{e.preventDefault(),(0,m.k1)().checkForUpdatesAndNotify&&(0,m.k1)().checkForUpdatesAndNotify(),i.g.location.reload()},children:["Reload\xa0",(0,n.jsx)(r.cAs,{size:18})]})]})]}),(0,n.jsx)(w,{homePath:e.homePath,links:e.links,showUser:e.showUser,children:e.children,customLogoUrl:e.customLogoUrl,customLogo:e.customLogo})]})}},78919:function(e,t,i){"use strict";i.d(t,{Z:function(){return B}});var n=i(24246),l=i(38579),s=i.n(l),o=i(86677),a=i.n(o),r=i(27378),d=i(22325),c=i(72291),u=i(16125),m=i(57075),x=i(83644),p=i(7118),h=i(18575),v=i(31928),g=i(42171),f=i(69876),b=i(23599),_=i(79894),w=i.n(_),j=i(81488),y=i(65801),N=i(3770),k=e=>{let{fileId:t,fileType:i,isEmbedded:l=!1}=e,a=(0,u.I0)(),r=(0,o.useRouter)(),{back_to:d}=r.query;return(0,n.jsxs)(n.Fragment,{children:[!l&&(0,n.jsx)(N.Z,{showBackButton:!0,hideSearchBar:!0,hideTeamDropdown:!0}),(0,n.jsx)("div",{className:"flex h-4/5 w-full flex-row items-center justify-center",children:(0,n.jsxs)("div",{className:"m-0 flex w-1/2 flex-col items-start justify-center p-5 mobile-lg:w-4/5",children:[(0,n.jsx)(s(),{src:"/images/extensionLogo.svg",alt:"extension logo",className:"mb-6 h-full w-10",height:40,width:40}),(0,n.jsxs)("h1",{className:"text-3xl font-bold text-black",children:[i," has been deleted"]}),(0,n.jsxs)("h3",{className:"text-lg font-normal text-black",children:["To access this ",i,", please restore it."]}),(0,n.jsxs)("div",{className:"mt-5 flex w-full mobile-lg:flex-col mobile-lg:space-y-4",children:["browser"===d?(0,n.jsx)(y.Z,{className:"min-w-[200px]",variant:"secondary",onClick:()=>{r.back()},children:"Back to Workspace"}):(0,n.jsx)(w(),{legacyBehavior:!0,href:"/workspace",children:(0,n.jsx)("a",{className:"flex h-12 min-w-[200px] cursor-pointer flex-row items-center justify-center rounded-md bg-white px-6 py-3 font-sans text-base font-semibold leading-6 text-slate-700 outline-0 ring-1 ring-slate-200 hover:text-slate-900 hover:ring-2 hover:ring-slate-100/50 hover:ring-offset-1 hover:ring-offset-slate-300 focus:outline-1",children:"Back to Workspace"})}),(0,n.jsx)(y.Z,{onClick:()=>{a((0,j.qK)(t)).then(b.SI).then(()=>{r.reload()}).catch(e=>{console.error("Error un-archiving a file: ",e)}),(0,g.L9)("unarchive_scribe",{scribeId:t})},variant:"primary",className:"ml-10 min-w-[200px] mobile-lg:mr-0",children:"Restore"})]})]})})]})},C=i(24304),S=i(93570),I=i(62789),L=i(84283),T=i(97146),E=i.n(T),Z=i(49447);let F=(0,p.d)();var B=e=>{let{isServerSide:t,fileId:i,fileType:l="Scribe",isEmbedded:p=!1}=e,b=(0,o.useRouter)(),_=(0,u.I0)(),w=(0,u.v9)(e=>null==e?void 0:e.account.data),{token:j}=(0,u.v9)(m.G8),{token:y}=(0,S.r_)(),N=!!j;p&&(N=N&&y);let T=(0,v.kg)(i),B=(0,h.Z)({id:T}),{loading:D}=(0,u.v9)(C.kz);(0,r.useEffect)(()=>{_((0,C.L1)({documentId:T}))},[]);let M=null;return N?M=w&&(0,n.jsx)("div",{className:"ml-4",children:(0,n.jsx)(x.qE,{uuid:w.first_name,children:(null==w?void 0:w.profile_picture_url)?(0,n.jsx)(s(),{src:null==w?void 0:w.profile_picture_url,width:32,height:32,alt:"".concat(null==w?void 0:w.first_name," avatar")}):null==w?void 0:w.first_name})}):F||(M=(0,n.jsx)(I.Z,{style:{marginLeft:10},text:"Get Scribe",onClick:()=>{(0,g.L9)("click_get_scribe",{location:"viewer_page_top"}),b.push("/")}})),(0,n.jsx)("div",{id:"scribe-file-viewer",className:"h-full w-full overflow-hidden bg-white",children:(null==B?void 0:B.can_unarchive)?(0,n.jsx)(k,{isEmbedded:p,fileId:T,fileType:l}):t||D?null:(0,n.jsxs)(n.Fragment,{children:[!p&&(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)("div",{className:E().MetadataContainerRow,children:N&&(0,n.jsx)("div",{className:E().UniversalNavbarBackIcon,onClick:()=>a().push({pathname:"/workspace"}),children:(0,n.jsx)(c.D_,{size:26})})}),(0,n.jsx)("div",{className:E().CTAContainer,children:M})]}),(0,n.jsxs)("div",{className:E().InvalidScribeURLWrapper,children:[(0,n.jsx)(s(),{width:48,height:48,src:"/images/extensionLogo.svg",alt:"extension logo",className:E().navBarLogo}),(0,n.jsxs)("h1",{className:E().NotFoundHeader,children:[l," not found."]}),(0,n.jsxs)("h3",{className:E().NotFoundSubtitle,children:["We're having trouble finding this ",l,". Please make sure the url is correct."]}),(0,n.jsx)("div",{className:E().buttonContainer,children:N?!p&&(0,n.jsx)(L.Z,{className:E().leaveButtonLoggedIn,onClick:()=>b.push("/workspace"),primary:!0,children:"Back to Workspace"}):(0,n.jsxs)(n.Fragment,{children:[!F&&(0,n.jsxs)(L.Z,{className:E().openInDesktopButton,onClick:()=>window.open((0,f._J)(window.location.href)),children:[(0,n.jsx)(d.lMi,{className:E().desktopIcon})," Open in Scribe Desktop"]}),(0,n.jsx)(L.Z,{className:E().leaveButtonLoggedOut,onClick:()=>b.push("/signin"),primary:!0,children:"Sign In"})]})})]})]})})}},45166:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var n=i(24246),l=i(16354),s=i(22107),o=i(94033),a=i(31679),r=i.n(a),d=i(27378),c=i(22967),u=i(95351);let m=(e,t)=>t&&e!==l.Qe;var x=e=>{let{colors:t,onSelectColor:i,selectedColor:a=l.Qe,disabled:x=!1,isPages:p=!1}=e,[h,v]=(0,d.useState)(!1),g=a&&!t.includes(a),[f,b]=(0,d.useState)(g),[_,w]=(0,d.useState)(a),j=e=>{i&&i(e)};return(0,d.useEffect)(()=>{if(!h)return()=>{};let e=setTimeout(()=>{v(!1)},2e3);return()=>{clearTimeout(e)}},[h]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-row justify-around",children:[t.map(e=>(0,n.jsx)("button",{disabled:x,className:(0,c.cn)("flex h-6 w-6 items-center justify-center rounded-full bg-transparent",{"opacity-15":m(e,x)}),onClick:()=>{p||r().track("click_target_color_selected",{custom:!1,color:e}),b(!1),j(e),v(!0)},"data-testid":"color-".concat(e),"aria-label":"Select ".concat(e," color"),children:(0,n.jsxs)("div",{className:(0,c.cn)("z-1 $ relative h-4 w-4 rounded-full",{"cursor-pointer":!x}),style:{backgroundColor:(0,u.E9)(e,1),boxShadow:"inset 0 0 0 1px rgba(255,255, 255, 0.15)"},children:[(0,n.jsx)("div",{className:(0,c.cn)("absolute left-0 top-0 h-4 w-4 rounded-full hover:animate-ping"),style:{backgroundColor:(0,u.E9)(e,.3),border:"1px solid #".concat(e)}}),(0,n.jsx)("div",{className:(0,c.cn)("pointer-events-none relative left-[-6px] top-[-6px] inline-block h-7 w-7 rounded-full",{"border-2 border-[#6366F1] transition-[border-width]":a===e||!a&&e===l.Qe&&!f})})]})},e)),(0,n.jsx)("button",{"data-testid":"color-custom",className:(0,c.cn)("flex h-6 w-6 cursor-pointer items-center justify-center rounded-full bg-transparent text-white hover:bg-slate-800",{"cursor-default opacity-15":!!x,"border-2 border-[#6366F1] bg-transparent":f}),onClick:()=>{i(""),b(!0)},children:(0,n.jsx)("div",{className:"flex rounded-full text-slate-400",children:(0,n.jsx)(o.G,{size:"sm",icon:s.olY})})})]}),!x&&(f||g)&&(0,n.jsx)("div",{className:"mb-3 mt-3 block w-full flex-row justify-around align-middle",children:(0,n.jsxs)("div",{className:"relative mt-1 rounded-md shadow-sm",children:[(0,n.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center rounded-full pl-3",children:(0,n.jsx)("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:(0,u.E9)(_,1),display:_?"block":"none",boxShadow:"inset 0 0 0 1px rgba(255,255, 255, 0.15)"}})}),(0,n.jsx)("input",{className:(0,c.cn)("h-8 w-full rounded-md border-slate-700 bg-slate-700 bg-opacity-15 text-[0.8125rem] tracking-wide text-slate-100 active:focus:border-slate-600",{"pl-9":_,uppercase:(null==_?void 0:_.length)>0}),disabled:x,"data-1p-ignore":!0,type:"text",maxLength:7,minLength:3,defaultValue:_,placeholder:"Hex Code","data-testid":"custom-hex-input",onKeyDown:e=>{"Enter"===e.key&&(0,u.pL)(_)&&(j(_),v(!0))},onChange:e=>{let t=e.target.value;t=(t=t.replace("#","")).replace(/[^0-9a-f]/gi,""),(0,u.pL)(t)?w((0,u.KF)(t)):w(t)}}),(0,n.jsx)("button",{disabled:x||!(0,u.pL)(_)||h,className:(0,c.cn)("absolute inset-y-0 right-px z-10 mt-[1px] flex h-[30px] w-8 cursor-pointer items-center rounded-r-[0.3rem] bg-slate-800 p-2 transition-all",{"opacity-0":_===a}),onClick:()=>{!x&&(0,u.pL)(_)&&!h&&(j(_),v(!0),p||r().track("click_target_color_selected",{custom:!0,color:_}))},"aria-label":"Select custom color",children:(0,n.jsx)(o.G,{icon:s.LEp,className:"h-4 w-4 ".concat((0,u.pL)(_)?"text-white":"text-gray-500"),"aria-hidden":"true"})})]})})]})},p=e=>{let{isDisabledForUserPlan:t,label:i,onSelectColor:s,selectedColor:o,colors:a=l.J9,isPages:r}=e;return(0,n.jsxs)("div",{className:"text-sm text-white",children:[i&&(0,n.jsx)("div",{className:"mb-4 flex w-full text-sm font-semibold text-white",children:i}),(0,n.jsx)(x,{disabled:t,colors:a,onSelectColor:s,selectedColor:o,isPages:r})]})}},49447:function(e,t,i){"use strict";var n=i(24246),l=i(48268),s=i(2786),o=i.n(s);let a="".concat(l.L,"/images/scribe-paths.svg");t.Z=e=>{let{withBanner:t}=e;return(0,n.jsxs)("div",{className:"".concat(o().documentHeaderBar," ").concat(t?o().withBanner:""),children:[e.showMark?(0,n.jsx)("div",{className:o().cursiveMarkContainer,children:(0,n.jsx)("a",{href:"/scribe",children:(0,n.jsx)("img",{className:o().cursiveMark,src:a})})}):null,e.children]})}},219:function(e,t,i){"use strict";i.d(t,{G:function(){return o}});var n=i(24246),l=i(83469),s=i(94033);let o=e=>{let{type:t}=e;return(0,n.jsxs)("div",{className:"mb-4 flex h-[72px] w-[720px] flex-row items-center rounded-2xl border border-brand-200 bg-brand-50 p-4",children:[(0,n.jsx)("div",{className:"mr-4 flex h-10 w-10 cursor-pointer flex-col items-center justify-center rounded-full bg-brand-200",children:(0,n.jsx)(s.G,{icon:l.qO$,className:"text-brand-700",size:"lg"})}),(0,n.jsx)("span",{className:"text-brand-800",children:"You're viewing a read-only version of this ".concat(t,". Close Version History to edit.")})]})}},40525:function(e,t,i){"use strict";i.d(t,{W:function(){return Z}});var n=i(24246),l=i(83469),s=i(94033),o=i(49353),a=i(27378),r=i(16125),d=i(8022),c=i(58955),u=i(56985),m=i(22967),x=i(42171),p=i(86677),h=i(48407),v=i(84424);let g=e=>{let{lineClassName:t,circleClassName:i}=e;return(0,n.jsxs)("div",{className:(0,m.cn)("z-1 relative flex w-full items-center py-[10px] pl-[10px] pr-6"),children:[(0,n.jsx)("div",{className:(0,m.cn)("h-[12px] w-[12px] rounded-full border-2 bg-white opacity-100",i)}),(0,n.jsxs)("div",{className:(0,m.cn)("w-full p-2",t),children:[(0,n.jsx)("div",{className:"m-[10px] h-4 w-full rounded-md bg-slate-100"}),(0,n.jsx)("div",{className:"m-[10px] h-3 w-4/5 rounded-md bg-slate-100"})]})]})},f=()=>(0,n.jsxs)("div",{className:"mt-3 w-full",children:[(0,n.jsx)(g,{lineClassName:"opacity-100",circleClassName:"border-slate-100"}),(0,n.jsx)(g,{lineClassName:"opacity-50",circleClassName:"border-slate-100"}),(0,n.jsx)(g,{lineClassName:"opacity-25",circleClassName:"border-slate-50"})]}),b=()=>{let e=(0,p.useRouter)();return(0,n.jsxs)("div",{className:"relative mx-auto mt-8 w-[288px]",children:[(0,n.jsx)("div",{className:(0,m.cn)("absolute -top-7 left-[14px] z-0 h-full w-1"),style:{background:"repeating-linear-gradient(to bottom, #F1F5F9 0, #F1F5F9 5px, transparent 5px, transparent 10px)"}}),(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("p",{className:"m-0 mr-1 text-lg font-bold leading-7",children:"Unlock more history!"}),(0,n.jsx)(v.Z,{})]}),(0,n.jsx)("p",{className:"mb-5 mt-1 text-center text-sm font-normal leading-5",children:"Take a look back at all versions of this Scribe by upgrading to Enterprise plan."}),(0,n.jsx)(h.z,{variant:"link",className:"text-sm font-semibold leading-5 text-indigo-600",onClick:()=>e.push("/billing"),children:"Upgrade to Enterprise"})]}),(0,n.jsx)(f,{})]})};var _=i(7131),w=i(87846);let j=e=>{let{isFocused:t,isFirst:i,isLast:l,hasMoreVersions:s}=e;return(0,n.jsxs)("div",{className:"relative flex h-full items-center justify-center",children:[(0,n.jsx)("div",{className:(0,m.cn)("absolute top-0 h-1/2 w-[3px]",t?"bg-gradient-to-b from-slate-200 to-indigo-500":"bg-slate-200",i&&"opacity-0")}),(0,n.jsx)("div",{className:(0,m.cn)("absolute bottom-0 h-1/2 w-[3px]",t?"bg-gradient-to-t from-slate-200 to-indigo-500":"bg-slate-200",l&&!s&&"opacity-0")}),(0,n.jsx)("div",{className:(0,m.cn)("absolute h-3 w-3 rounded-full border-2 bg-white",t?"border-indigo-500":"border-slate-200")}),t&&(0,n.jsx)("div",{className:"absolute h-5 w-5 rounded-full border-[4px] border-indigo-500 opacity-25"})]})};var y=e=>{let{date:t,creator:i,isCurrentVersion:l,isFocused:s,isFirst:o,isLast:a,onClick:r,onRevert:d,isReverting:c,hasMoreVersions:u}=e;return(0,n.jsxs)("div",{className:(0,m.cn)("mx-auto flex w-80 cursor-pointer bg-white pl-8 hover:bg-slate-50",s?"h-28":"h-24"),onClick:()=>r(),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&r()},children:[(0,n.jsx)(j,{isFocused:s,isFirst:l||o,isLast:a,hasMoreVersions:u}),(0,n.jsx)("div",{className:"flex flex-1 items-center p-6 pr-4",children:(0,n.jsxs)("div",{className:"w-full",children:[l&&(0,n.jsx)(w.C,{variant:"light",size:"sm",children:"CURRENT VERSION"}),s&&!l&&(0,n.jsx)(w.C,{variant:"light",size:"sm",className:"bg-amber-200",children:"PREVIEW ONLY"}),(0,n.jsx)("p",{className:(0,m.cn)("my-1 text-sm leading-5 text-slate-900",s&&"font-bold"),children:t}),(0,n.jsx)("p",{className:"my-1 text-sm text-slate-500",children:i}),s&&!l&&(0,n.jsx)(h.z,{variant:"secondary",size:"small",onClick:d,disabled:c,children:"Revert to this version"})]})})]})};let N=[{date:"Feb 28, 2024 — 07:23:59 PST",creator:"Miss Donald Davis"},{date:"Feb 14, 2024 — 12:54:01 PST",creator:"Meghan Runte"},{date:"Feb 12, 2024 — 15:17:32 PST",creator:"Bryan Reichert"}],k=[{date:"Feb 10, 2024 — 09:32:12 PST",creator:"Brett Reynolds"},{date:"Jan 30, 2024 — 13:05:00 PST",creator:"Amos Little"},{date:"Jan 24, 2024 — 14:29:33 PST",creator:"Marianne Jones"},{date:"Jan 21, 2024 — 10:01:00 PST",creator:"Craig Guardman"},{date:"Nov 29, 2019 — 00:00:00 PST",creator:"Aleksandrov Radici"},{date:"Nov 29, 2019 — 00:00:00 PST",creator:"Nicholas Milevus"}],C=()=>(0,n.jsx)("div",{className:"mb-24",children:N.map((e,t)=>(0,n.jsx)("div",{className:"blur-[1px] opacity-".concat(2===t?10:1===t?30:40),children:(0,n.jsx)(y,{date:e.date,creator:e.creator,isCurrentVersion:!1,isFocused:!1,isFirst:!0,isLast:!0,isReverting:!1},t)}))}),S=()=>(0,n.jsx)("div",{className:"mt-24 blur-[1px]",children:k.map((e,t)=>(0,n.jsx)("div",{className:"opacity-".concat(0===t?10:1===t?30:40),children:(0,n.jsx)(y,{date:e.date,creator:e.creator,isCurrentVersion:!1,isFocused:!1,isFirst:!0,isLast:!0,isReverting:!1},t)}))}),I=()=>{let e=(0,p.useRouter)();return(0,n.jsxs)("div",{className:"relative mx-auto mt-8 w-full",children:[(0,n.jsx)(C,{}),(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("p",{className:"m-0 mr-1 text-lg font-bold leading-7",children:"Unlock version history!"}),(0,n.jsx)(_.g,{})]}),(0,n.jsx)("p",{className:"mb-5 mt-1 text-center text-sm font-normal leading-5",children:"Start tracking and viewing versions of your Scribes by upgrading to Pro."}),(0,n.jsx)(h.z,{variant:"link",className:"text-sm font-semibold leading-5 text-indigo-600",onClick:()=>e.push("/billing"),children:"Upgrade to Pro"})]}),(0,n.jsx)(S,{})]})},L=e=>{let{className:t}=e;return(0,n.jsxs)("div",{className:(0,m.cn)("flex w-full items-center py-[10px] pl-5 pr-6",t),children:[(0,n.jsx)("div",{className:"h-4 w-4 rounded-full bg-slate-200"}),(0,n.jsxs)("div",{className:"w-full p-2",children:[(0,n.jsx)("div",{className:"m-[10px] h-4 w-full rounded-md bg-slate-200"}),(0,n.jsx)("div",{className:"m-[10px] h-4 w-4/5 rounded-md bg-slate-200"})]})]})};var T=()=>(0,n.jsxs)("div",{className:"mt-3 w-full animate-pulse",children:[(0,n.jsx)(L,{className:"opacity-100"}),(0,n.jsx)(L,{className:"opacity-50"}),(0,n.jsx)(L,{className:"opacity-25"})]});let E=e=>{let t=new Date(e),i=t.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}),n=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZoneName:"short",hour12:!0});return"".concat(i," — ").concat(n)};var Z=e=>{var t,i,p,h;let{visible:v,onClose:g,document:f,onRevertToVersion:_,isReverting:w}=e,j=(0,r.I0)(),[N,k]=(0,a.useState)(0),C=(0,o.vU)({documentId:f.id,enabled:!!(null==f?void 0:f.organization_owner.super_organization.version_history_enabled)&&!!v}),S=null==C?void 0:null===(t=C.data)||void 0===t?void 0:t.results,L=(0,a.useMemo)(()=>{var e;return(null==C?void 0:null===(e=C.data)||void 0===e?void 0:e.total_count)>(null==S?void 0:S.length)},[C,S]);return(0,a.useEffect)(()=>{k(0)},[S,v]),(0,n.jsxs)("div",{className:(0,m.cn)("fixed right-0 top-0 z-30 flex h-screen w-auto flex-1 flex-col bg-white transition-all duration-500 ease-in-out",{"w-80 max-w-[320px] outline outline-1 outline-slate-900/10":v,"w-0 max-w-0":!v}),children:[(0,n.jsxs)("button",{onClick:()=>{k(0),g()},className:"flex h-16 w-80 cursor-pointer flex-row items-center justify-start border-b-[1px] border-slate-200 bg-white/50 p-6",children:[(0,n.jsx)(s.G,{icon:l._tD,className:"mx-[2px] h-[15px] w-[10px] cursor-pointer text-slate-500 hover:text-slate-800","aria-label":"Close Feedback"}),(0,n.jsx)("span",{className:"ml-6 text-sm font-semibold text-slate-600",children:"Version History"})]}),(0,n.jsxs)("div",{className:"overflow-y-auto scrollbar-hide",children:[(null==f?void 0:null===(h=f.organization_owner)||void 0===h?void 0:null===(p=h.super_organization)||void 0===p?void 0:null===(i=p.plan)||void 0===i?void 0:i.name)==="free"?(0,n.jsx)(I,{}):C.isLoading?(0,n.jsx)(T,{}):null==S?void 0:S.map((e,t)=>{var i,l;return(0,n.jsx)(y,{date:E(e.created),creator:"".concat(null===(i=e.updater)||void 0===i?void 0:i.first_name," ").concat(null===(l=e.updater)||void 0===l?void 0:l.last_name),isCurrentVersion:0===t,isFocused:t===N,isLast:t===S.length-1,isReverting:w,onClick:()=>{t!==N&&((0,x.L9)("version_selected",{id:e.id,document_id:f.id,kind:f.type}),k(t),"knowledge_page"===f.type?j((0,c.PH)(e.file)):(j((0,d.Sv)({scribeDocumentId:f.id,version_id:e.id,clearActions:!0,skip:0,limit:20})),j((0,u.iv)({data:e.file}))))},onRevert:()=>{_(e.id)},hasMoreVersions:L},t)}),L&&(0,n.jsx)(b,{})]})]})}},82406:function(e,t,i){"use strict";i.d(t,{Z:function(){return Q}});var n,l,s,o,a=i(24246),r=i(79894),d=i.n(r),c=i(86677),u=i(27378),m=i(7131),x=i(19973),p=i(42171),h=e=>{let{isKnowledgePage:t}=e,i=(0,c.useRouter)();(0,x.Z)();let[n,l]=(0,u.useState)(!1),s=(0,u.useCallback)(e=>{e.preventDefault(),(0,p.L9)("clicked_insights_upgrade_to_pro",{location:t?"page_doc_insights":"scribe_doc_insights",doc_type:t?"Page":"Scribe"}),(0,p.L9)("get_scribe_pro",{location:t?"page_doc_insights":"scribe_doc_insights",doc_type:t?"Page":"Scribe"}),i.push("/billing")},[t,i]);return(0,a.jsx)(d(),{legacyBehavior:!0,href:"/billing",passHref:!0,children:(0,a.jsxs)("a",{onClick:s,className:"absolute z-20 flex h-full cursor-pointer flex-col items-center justify-center bg-gradient-to-b from-[rgba(248,250,252,0.7)] to-white","aria-label":"upgrade to pro",children:[(0,a.jsxs)("div",{className:"mb-1 flex items-center gap-2 text-sm font-semibold leading-5",children:["Get more insights!",(0,a.jsx)(m.g,{})]}),(0,a.jsx)("span",{className:"mb-4 text-center text-sm font-normal leading-5 text-slate-600",children:"Check your team's progress, track guest views and more!"}),(0,a.jsx)("span",{className:"text-sm font-semibold leading-5 text-indigo-600",children:"Upgrade to Pro"})]})})},v=i(22107),g=i(94033),f=i(22716),b=i(43425),_=i(41127),w=i(63879),j=i(80011),y=i(12320),N=i(22967),k=i(99621),C=i(83424),S=i(73943),I=i(61320),L=i.n(I);(n=s||(s={})).Completions="completions",n.Views="views",n.Created="created";let T=e=>L()(e).utc().format("MMM D"),E=e=>L()(e).format("MMM D, YYYY"),Z=e=>{var t,i,n,l,s,o;let a="",r=null,d="",c=!0,u="",m=null;return(null==e?void 0:e.user)?(a="".concat(null!==(t=e.user.first_name)&&void 0!==t?t:""," ").concat(null!==(i=e.user.last_name)&&void 0!==i?i:""),r=e.user.profile_picture_url||null,c=!1,u=e.user.id,m=e.user.deactivation_date):(null==e?void 0:e.anonymous_user)&&(a=null!==(n=e.anonymous_user.avatar_name)&&void 0!==n?n:"",d=e.anonymous_user.fa_icon),{user:{name:a,avatar:r,faIcon:d,isAnonymous:c,uuid:u,deactivationDate:m},lastViewed:new Date(null!==(l=null==e?void 0:e.created)&&void 0!==l?l:Date.now()),timeToComplete:null!==(s=null==e?void 0:e.completion_time_sec)&&void 0!==s?s:0,completion:null!==(o=null==e?void 0:e.percentage_completed)&&void 0!==o?o:0,reaction:null==e?void 0:e.reaction_identifier,trackingFunc:p.L9}},F=e=>L()(e).fromNow(),B=e=>{let{className:t="",children:i,onClick:n}=e;return(0,a.jsx)("button",{className:(0,N.cn)("rounded-lg border border-slate-200 p-4",t),onClick:n,children:i})},D=(0,u.memo)(e=>{let{created:t,lastUpdated:i,lastEditedBy:n,createdBy:l}=e;return(0,a.jsx)("div",{className:"inline-flex w-72 flex-col items-start justify-start gap-2 border-y border-slate-200 py-6",children:[{label:"Created",value:t},{label:"Created By",value:l},{label:"Last Updated",value:i},{label:"Last Edited By",value:n}].map(e=>(0,a.jsxs)("div",{className:"inline-flex items-start justify-between gap-2 self-stretch",title:e.value instanceof Date?E(e.value):null,children:[(0,a.jsx)("div",{className:"text-sm font-normal leading-tight text-slate-600",children:e.label}),(0,a.jsx)("div",{className:"text-sm font-semibold leading-tight text-slate-900",children:e.value instanceof Date?F(e.value):e.value})]},e.label))})}),M=()=>(0,a.jsx)("div",{className:"inline-flex w-72 flex-col items-center justify-start gap-2 border-y border-slate-200 py-6 text-sm font-normal leading-tight text-slate-600",children:"Something went wrong"});var z=e=>(0,a.jsx)(S.Z,{fallback:M,children:(0,a.jsx)(D,{...e})}),P=i(1581);let A=e=>{let{children:t,header:i,footer:n,onHover:l=()=>null}=e,s=(0,a.jsxs)("div",{className:"flex flex-shrink-0 flex-col items-center justify-center px-2 py-1",children:[(0,a.jsx)("div",{className:"whitespace-nowrap text-sm text-slate-50",children:i}),(0,a.jsx)("div",{className:"whitespace-nowrap text-xs text-slate-300",children:n})]});return(0,a.jsx)(P.pn,{children:(0,a.jsxs)(P.u,{onOpenChange:e=>{e&&l()},children:[(0,a.jsx)(P.aJ,{children:t}),(0,a.jsxs)(P._v,{side:"bottom",className:"h-auto",children:[s,(0,a.jsx)(P.Ce,{width:8,height:4})]})]})})};var R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.Completions;return(t,i,n,l)=>{let{count:o,day:r}=i,d=1===o?"":"s",{key:c,eventName:u,typeName:m}={[s.Completions]:{key:"completion_count",eventName:"completions_hover",typeName:"completion".concat(d)},[s.Views]:{key:"view_count",eventName:"total_views_hover",typeName:"view".concat(d)},[s.Created]:{key:"total_creations",eventName:"total_creations_hover",typeName:"creation".concat(d)}}[e];return(0,a.jsx)(A,{header:"".concat((0,C.Qv)(o)," ").concat(m),footer:T(r),onHover:()=>(0,p.L9)(u,{[c]:o,location:n,docType:l}),children:t},"".concat(r,"-").concat(o,"-analytics-graph-tooltip"))}},G=e=>{let{onShareClick:t,teamViewCount:i=0,guestViewCount:n=0,isKnowledgePage:l}=e,s=l?"Page":"Scribe",o=0!==i&&0===n?"No one outside of your team has seen this ".concat(s," yet."):"No one has seen this ".concat(s," yet.");return(0,a.jsx)("div",{className:"flex h-60 w-72 flex-col items-start justify-center gap-2 rounded-lg bg-gradient-to-b from-slate-50 to-white px-6 py-20",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-center justify-center gap-4",children:[(0,a.jsxs)("div",{className:"flex w-full flex-col items-center justify-start gap-1",children:[(0,a.jsx)("div",{className:"text-center text-lg font-bold leading-7 text-slate-900",children:"Nothing to show."}),(0,a.jsx)("div",{className:"text-center text-sm font-normal leading-tight text-slate-600",children:o})]}),(0,a.jsxs)("button",{className:"cursor-pointer bg-transparent text-sm font-semibold leading-tight text-indigo-600 hover:text-indigo-800",onClick:t,children:["Share this ",s]})]})})},O=i(38579),U=i.n(O),V=i(83644);let W=new Date("2023-09-18");var H=e=>{let{user:t,lastViewed:i,completion:n,timeToComplete:l,reaction:s,trackingFunc:o,isKnowledgePage:r}=e,[d,c]=u.useState(!0),m=(0,u.useCallback)(()=>{c(!d);let e=t.isAnonymous?"guests":"teammates",i=d?"opened":"closed";o&&o("".concat(i,"_user_view"),{tab:e,location:r?"page_doc_insights":"doc_insights",doc_type:r?"Page":"Scribe"})},[t,d,o,r]),x=(0,u.useCallback)(()=>L().duration(l,"seconds").humanize(),[l]);return(0,a.jsxs)(B,{className:(0,N.cn)("inline-flex w-72 cursor-pointer flex-col items-center justify-start hover:border-slate-300",d?"bg-white":"bg-slate-50"),onClick:()=>m(),children:[(0,a.jsxs)("div",{className:"inline-flex h-full w-full items-center text-left",children:[(0,a.jsx)(V.yq,{percentage:n,reaction:s,faIcon:null==t?void 0:t.faIcon,uuid:null==t?void 0:t.uuid,children:(null==t?void 0:t.deactivationDate)?(0,a.jsx)(V.aV,{faIcon:"faUser",size:"md"}):(null==t?void 0:t.avatar)?(0,a.jsx)(U(),{src:null==t?void 0:t.avatar,width:32,height:32,alt:null==t?void 0:t.name}):null==t?void 0:t.name}),(0,a.jsx)("div",{className:(0,N.cn)("ml m-2 shrink grow basis-0 select-none text-sm font-medium leading-tight text-slate-900",{"text-slate-900":!(null==t?void 0:t.deactivationDate)},{"text-slate-400":!!(null==t?void 0:t.deactivationDate)}),children:null==t?void 0:t.name}),(0,a.jsx)("div",{className:"flex h-4 w-4 items-center justify-center",children:(0,a.jsx)("div",{className:"h-4 w-4 text-center text-xs font-normal text-slate-300",children:(0,a.jsx)(g.G,{icon:d?v.gc2:v.onQ})})})]}),!d&&(0,a.jsxs)("div",{className:"mt-2 h-full w-full",children:[(0,a.jsx)("div",{className:"mb-2 inline-flex w-full items-start justify-start gap-1 self-stretch",children:(0,a.jsxs)("div",{className:"text-xs font-normal leading-none text-slate-600",children:["Last viewed ",F(i)]})}),l>0&&(0,a.jsx)("div",{className:"mb-2 inline-flex w-full items-start justify-start self-stretch",children:(0,a.jsxs)("div",{className:"text-xs font-normal leading-none text-slate-600",children:["Completed in ",x()]})}),(0!==n||i>=W)&&(0,a.jsx)(k.e,{size:"compact",gapless:!0,title:"Completion",defaultColor:"bg-slate-200",segments:(0,k.j)(n)})]})]})},q=(0,u.memo)(e=>{let{usersInfo:t=[],isAnonymous:i=!1,isKnowledgePage:n=!1}=e;return(null==t?void 0:t.length)?(0,a.jsx)(a.Fragment,{children:null==t?void 0:t.map((e,t)=>{var l,s;let o=i?null==e?void 0:null===(l=e.anonymous_user)||void 0===l?void 0:l.external_id:null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.id;return(0,a.jsx)(H,{...Z(e),isKnowledgePage:n},null!=o?o:"unknown-id-".concat(t))})}):null}),K=e=>{let{viewsCount:t,teamViewsCount:i,guestViewsCount:n}=e;if(0===t)return(0,a.jsx)("div",{children:"No views"});let l="".concat(n>0?"+":""," ").concat((0,C.Qv)(t-i-n)," other ").concat(1===t?"view":"views");return(0,a.jsx)("div",{className:(0,N.cn)("mt-3.5 text-center text-xs font-normal leading-4 text-slate-400"),children:l})};(l=o||(o={})).Teammates="Teammates",l.Guests="Guests";var Q=e=>{var t,i,n,l,o,r,d;let{userId:c,documentId:m,onShareClick:x,onClose:S,hidden:I,updatedBy:L,createdBy:T,lastUpdate:E,createdOn:Z,isLoggedIn:F,isFreeUser:B,isKnowledgePage:D,onInvite:M}=e,P=(0,b.Z)("doc_insights"),[A,O]=(0,u.useState)("Teammates"),{documentViews:U}=(0,f.Z)({documentId:m,authenticated:F,userId:c}),V={total:null!==(n=null==U?void 0:U.view_count)&&void 0!==n?n:0,daily:null!==(l=null==U?void 0:U.view_count_per_day)&&void 0!==l?l:[]},W={total:null!==(o=null==U?void 0:U.completion_count)&&void 0!==o?o:0,daily:null!==(r=null==U?void 0:U.completions_by_day)&&void 0!==r?r:[]},[H,Q]=(0,_.Z)("viewer_insights_invite_cta_callout",!1),J=(null==U?void 0:null===(t=U.authenticated_users_info)||void 0===t?void 0:t.length)>0,Y=(null==U?void 0:null===(i=U.anonymous_users_info)||void 0===i?void 0:i.length)>0,X=!J&&"Teammates"===A||"Guests"===A&&!Y;if(!F||!P)return null;let $=(0,a.jsxs)("div",{className:"view-card-list mt-6 flex h-full flex-col gap-2 overflow-y-auto",children:["Teammates"===A&&J&&(0,a.jsx)(q,{usersInfo:null==U?void 0:U.authenticated_users_info,isKnowledgePage:D}),"Guests"===A&&Y&&(0,a.jsx)(q,{usersInfo:null==U?void 0:U.anonymous_users_info,isAnonymous:!0,isKnowledgePage:D}),"Guests"===A&&!X&&(0,a.jsx)(K,{viewsCount:null==U?void 0:U.view_count,teamViewsCount:null==U?void 0:U.authenticated_users_count,guestViewsCount:null==U?void 0:U.anonymous_user_count}),X&&(0,a.jsx)(G,{teamViewCount:null==U?void 0:U.authenticated_users_count,guestViewCount:null==U?void 0:U.anonymous_user_count,onShareClick:x,isKnowledgePage:D})]}),ee=[{name:"Teammates",count:null==U?void 0:U.authenticated_users_count,onClick:()=>{O("Teammates");let e=D?"pages_insights_sidebar":"insights_sidebar",t=D?"Page":"Scribe";(0,p.L9)("clicked_teammates",{location:e,docType:t})}},{name:"Guests",count:null==U?void 0:U.anonymous_user_count,onClick:()=>{O("Guests");let e=D?"pages_insights_sidebar":"insights_sidebar",t=D?"Page":"Scribe";(0,p.L9)("clicked_guests",{location:e,docType:t})}}];return(0,a.jsxs)("div",{className:(0,N.cn)("fixed right-0 top-0 z-30 flex h-screen w-auto flex-1 flex-col overflow-hidden bg-white transition-all duration-500 ease-in-out",{"w-80 max-w-[320px] outline outline-1 outline-slate-900/10":!I,"w-0 max-w-0":I}),children:[(0,a.jsxs)("button",{onClick:S,className:"flex h-16 w-80 cursor-pointer flex-row items-center justify-start border-b-[1px] border-slate-200 bg-white/50 p-6",children:[(0,a.jsx)(g.G,{icon:v._tD,className:"mx-[2px] h-[15px] w-[10px] cursor-pointer text-slate-500 hover:text-slate-800","aria-label":"Close Insights"}),(0,a.jsx)("span",{className:"ml-6 text-sm font-semibold text-slate-600",children:"Insights"})]}),(0,a.jsxs)(j.x,{className:"flex h-screen w-full min-w-[320px] flex-col items-start justify-start p-4 pb-[72px]",children:[(0,a.jsxs)("div",{className:"flex w-full flex-col gap-4 py-2",children:[(0,a.jsx)(C.ZP,{title:"Total Views",data:V,wrapper:R(s.Views),location:D?"page_doc_insights":"doc_insights",docType:D?"Page":"Scribe"}),(0,a.jsx)(C.ZP,{title:"Completions",data:W,baseColor:"emerald",location:D?"page_doc_insights":"doc_insights",wrapper:R(s.Completions),docType:D?"Page":"Scribe"}),(0,a.jsx)(k.e,{title:"Completion Rate",segments:(0,k.j)(null!==(d=null==U?void 0:U.user_view_completion_percentage)&&void 0!==d?d:0,!0),size:"compact"})]}),(0,a.jsx)("div",{className:"my-6",children:(0,a.jsx)(z,{created:Z,lastUpdated:E,lastEditedBy:L,createdBy:T})}),(0,a.jsxs)("div",{className:(0,N.cn)(B&&"relative min-h-[675px]","w-full"),children:[B&&(0,a.jsx)(h,{}),(0,a.jsx)("div",{className:"-mb-2",children:(0,a.jsxs)(y.mQ,{defaultValue:"Teammates",children:[(0,a.jsx)(y.dr,{variant:"switch",children:ee.map(e=>{let{name:t,...i}=e;return(0,u.createElement)(y.SP,{value:t,...i,key:t},t)})}),ee.map(e=>{let{name:t}=e;return(0,a.jsx)(y.nU,{value:t,children:$},t)})]})}),!B&&!I&&"Teammates"===A&&(0,a.jsxs)("div",{className:"relative mt-4 w-full",children:[(0,a.jsx)("button",{onClick:()=>M(),className:"flex h-16 w-full cursor-pointer items-center justify-center gap-2 self-stretch rounded-lg border border-solid border-slate-100 bg-slate-50 px-4 py-6",children:(0,a.jsx)(g.G,{icon:v.FKd,className:"text-slate-400"})}),!H&&(0,a.jsxs)(w.UW,{open:!0,children:[(0,a.jsx)(w.rP,{asChild:!0,children:(0,a.jsx)("span",{className:"absolute bottom-0 left-0 right-0 top-0 -z-10 m-auto"})}),(0,a.jsxs)(w.Nn,{showCloseButton:!0,onCloseAction:()=>{Q(!0),(0,p.L9)("closed_invite_teammates_callout",{location:"viewer_insights"})},side:"bottom",withArrow:!0,children:[(0,a.jsx)(w.lj,{title:"Invite Teammates",icon:v.xHz}),(0,a.jsx)(w.He,{children:(0,a.jsx)("div",{className:"text-sm font-normal not-italic leading-5 text-white text-opacity-75",children:"Add teammates to see who has viewed or completed your Scribes."})})]})]})]})]})]})]})}},11215:function(e,t,i){"use strict";var n=i(24246),l=i(83469),s=i(22107),o=i(94033),a=i(54062),r=i(91809),d=i(48407),c=i(1581),u=i(22967),m=i(42171);let x=e=>{let{showButtonCopy:t,onClick:i,isBookmarked:a,isOwner:r}=e;return(0,n.jsx)(c.pn,{children:(0,n.jsxs)(c.u,{children:[(0,n.jsx)(c.aJ,{children:(0,n.jsx)(d.z,{"aria-label":a?"Remove bookmark":"Bookmark",variant:"secondary",onClick:i,className:(0,u.cn)("hidden md:flex [&>span]:flex-shrink-0",{"h-8 w-8":!t}),icon:a?s.xVw:l.xVw,iconProps:{className:(0,u.cn)("group-hover:text-slate-900",{"text-slate-600":!a,"text-slate-700":a})},children:t&&(0,n.jsx)("span",{className:(0,u.cn)("text-left transition-all duration-200 ease-linear",{"ml-0.5 line-clamp-1 w-[92px] max-w-[92x] translate-x-1 opacity-100":!r&&!a,"ml-0.5 line-clamp-1 w-[44px] max-w-[44x] translate-x-1 opacity-100":!r&&a}),children:a?"Saved":"Save for Later"})})}),(0,n.jsx)(c._v,{side:"bottom",variant:"compact",className:(0,u.cn)("!h-fit !p-3",{"!px-2 !py-0.5":r}),children:r?"Save":(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center text-sm text-white",children:[(0,n.jsx)(o.G,{icon:s.xVw,className:"mr-2"}),(0,n.jsx)("span",{className:"text-sm font-semibold",children:a?"Document Saved!":"Was this Scribe helpful?"})]}),(0,n.jsx)("div",{className:"text-xs text-white/[85] [&>a]:text-indigo-200",children:a?(0,n.jsxs)("span",{children:["You can find it in your"," ",(0,n.jsx)("a",{href:"https://scribehow.com/workspace#saved",className:"underline",target:"_blank",rel:"noreferrer",children:"Saved Documents"}),"."]}):(0,n.jsx)("span",{children:"Save this document for future reference."})})]})})]})})};t.Z=e=>{var t;let{isBookmarked:i,documentData:l,showButtonCopy:s,loggedOut:o}=e,{data:d}=(0,a.ZP)(),c=(0,r.te)(null==l?void 0:l.id),{mutate:u}=(0,r.ru)(),p=d&&l&&(null==d?void 0:d.id)===(null==l?void 0:null===(t=l.user_owner)||void 0===t?void 0:t.id);return(0,n.jsx)(x,{isOwner:p,onClick:()=>{if(o)(0,m.L9)("clicked_bookmark_logged_out",{location:"document_header"}),window.open("/signup?save=".concat(null==l?void 0:l.id),"_blank");else{var e;(0,m.L9)(i?"unbookmarked_scribe":"bookmarked_scribe",{scribeId:l.id,location:"document_header",visible_in_gallery:null==l?void 0:l.visible_in_gallery}),u({fileId:null==l?void 0:l.id,data:{isBookmarked:!(null===(e=c.data)||void 0===e?void 0:e.is_bookmarked)}})}},isBookmarked:i,showButtonCopy:s&&!p})}},70115:function(e,t){"use strict";t.Z=["6b31558b-396c-475e-aba4-cbc860cc5079","a7c0a8df-862b-440e-9420-7b65de3427c4","02cf9289-3c9a-422a-87a2-10145bbfe1e0","8e9db6ff-b8fa-48bf-b3d4-9be39493dd5a","f4421e94-51f0-47cd-9247-c4c7917e77ae","edea35a6-6d77-4180-aea0-d1f9ce2d21e9","719c8537-747d-41ed-bff0-1da8dace1e32","ea1fd790-0440-4abe-a8ad-08945f61c795","0b7eb10d-f25a-4ecb-ba8c-149930ad0062","ec14cb6d-0616-43ad-810d-1e85b1c3eb00","b90a035e-de55-4d2f-a458-bc676930bdf5","48affd0d-9e35-444f-88ed-12413aa40d54","2cf45cd1-2369-431a-9929-9b6242bc1609","249ba9fe-40c0-42fe-83dc-721af3479dc6","c715fc0a-1144-4211-9582-4966bc3efebe","1f9a08c9-60ec-49e6-9c94-49434f34f273","1f9a08c9-60ec-49e6-9c94-49434f34f273","bcfa1461-70cc-476d-902b-e403ee9c803e","9afeed3d-19d5-4ba5-9be8-5b8703af3b27","2339bd69-a511-4298-b737-09a5b462d4d9","8b56ea3c-c5bc-4223-8369-059af870e16d","e4578fd5-ba1b-4317-b607-820d07d77a99","c70f913d-60a1-4f1e-b16b-8c9c29e70ad6","097c57b6-d8dc-44f8-8628-6d4b3628ea01","caebdd51-1a34-4bb7-a247-38fcb2921860","cc9fd68a-93eb-478b-b354-031883128bab","bc1907ea-a218-43fc-910d-250f05596303","0092da81-cedb-4c3c-b44d-ce1ab5925819","d736e220-365e-4aa9-ab1b-b66d44452f10","368f89ef-8b6f-4117-8128-e3692f8c551f","011c9f78-8cf9-47ef-916e-bbfd0108e806","6e21af37-1fbb-4f2f-99a9-6c5a2a0f5870","f8544acc-c83a-4730-874b-7b9b5caa005b","8c587837-6016-4829-a09d-7edbe9a6868b","cdb62740-07e1-4b91-9704-51df1a562585","5858bf31-4c6d-4d12-bff7-040c7be558e0","9afeed3d-19d5-4ba5-9be8-5b8703af3b27","a57b4a19-c433-447a-be01-860ec2253766","87a5c74d-e712-4714-ba0d-5f4e30d4daa1","23074f6f-ae24-4cab-ba82-9d4fd852c2e4","142dd947-49da-4829-ae89-3d8b192c3cbf","8abd3876-3a70-46ee-bc47-b12c580671ca","110898c6-1614-47ce-8bf0-118fcd7769d7","4129f87e-df3a-4e56-83b3-7a70340d82bb","1160bee0-ff4f-49e6-8d98-1ac504c074d3","4c987a69-9f12-432a-ba31-f17a3e867ba7","1d051afb-a48f-4370-b3c1-710268f9a5ef","da7b0dd8-d0b1-4f81-8277-37d96aa3bc67","09d1d83e-2338-4bbc-8b49-b50a960f9067","abe935c5-d765-4a1a-84d1-d666ef0aa386"]},10270:function(e,t,i){"use strict";i.d(t,{EJ:function(){return h},L6:function(){return x},Wu:function(){return v},Wo:function(){return p}});var n=i(83469),l=i(56552),s=i(53826),o=i(45719),a=async(e,t)=>(0,o.Z)("document_feedback/?doc_id=".concat(e),"POST",!0,{other_feedback:t}),r=async e=>(0,o.Z)("document_feedback/?doc_id=".concat(e),"GET",!0),d=async(e,t)=>(0,o.Z)("document_feedback/".concat(e,"/"),"PATCH",!0,t),c=async e=>(0,o.Z)("document_feedback/".concat(e,"/"),"DELETE",!0),u=i(54062);let m=e=>{let t=["feedbacks"];return e?[...t,e]:t},x=e=>{var t;let{documentId:i}=e,n=(0,u.BP)();return(0,l.useQuery)({queryKey:m(i),queryFn:()=>r(i),enabled:!!(null===(t=n.data)||void 0===t?void 0:t.id)})},p=()=>{let e=(0,l.useQueryClient)();return(0,l.useMutation)({mutationFn:e=>{let{feedbackId:t,data:i}=e;return d(t,i)},onSuccess:()=>e.invalidateQueries(m())})},h=()=>{let e=(0,l.useQueryClient)();return(0,l.useMutation)({mutationFn:e=>c(e),onSuccess:()=>e.invalidateQueries(m())})},v=()=>{let e=(0,l.useQueryClient)();return(0,l.useMutation)({mutationFn:async t=>{let{documentId:i,content:n}=t,l=await a(i,n);return await e.invalidateQueries(m(i)),l},onSuccess:()=>{(0,s.Am)({title:"Message sent!",icon:n.fV7})}})}},94722:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n=i(80469),l=i(27378),s=i(15597),o=()=>{let{enabledFlags:e}=(0,n.Z)();return{captureError:(0,l.useCallback)((t,i)=>{let n={...i,contexts:{...i.contexts,enabledFlags:e}};(0,s.l)(t,n)},[e])}}},22716:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var n=i(43425),l=i(18022),s=i(64425),o=i(56552),a=i(56672),r=i(45719);let d=async(e,t)=>(0,r.Z)("views/analytics/".concat(e,"/"),"GET",t),c=async e=>(0,r.Z)("views/check_user_completion/".concat(e,"/"),"GET",!0),u=async e=>{let{documentId:t,percentageComplete:i,uuid:n,authenticated:l}=e;return n?(0,r.Z)("views/view_completion/","POST",l,{document_id:t,percentage_complete:Math.floor(i)},!1,{"X-User-UUID":null!=n?n:""}):Promise.resolve()},m=async(e,t,i)=>i?c(e):Promise.resolve({has_completed:100===t}),x=e=>{let{documentId:t,authenticated:i,userId:r=null,enable:c=!1}=e,x=((0,n.Z)("doc_insights")||c)&&!!t,p=(0,s.Z)(),h=r||p,v="".concat("docInsightsCompletionPercentage","_").concat(1,"_").concat(h,"_").concat(t),[g,f]=(0,l.Z)(v,0),{data:b,refetch:_,isStale:w,...j}=(0,o.useQuery)(["documentViews",t],()=>d(t,i),{enabled:!!t&&x&&i,staleTime:6e4}),{data:y}=(0,o.useQuery)(["userCompletion",t],()=>m(t,g,i),{enabled:!!t}),N=(0,o.useMutation)("submitCompletion",e=>{if(null!=e&&p)return f(e),u({documentId:t,percentageComplete:e,uuid:p,authenticated:i})},{onMutate:e=>({lastSentPercentage:e,percentageBeforeLast:g}),onError:(e,t,i)=>{f(i.percentageBeforeLast),console.error("Submission failed",e)}}),k=(0,a.f)(e=>{e<=0||e>100||e<=g||!x||!h||N.mutate(e)},1200);return{...j,documentViews:b,completionPercentage:g,submitCompletionPercentage:k,userCompletion:y,refetchDocumentViews:_,isStale:w}};var p=e=>{let{documentId:t,authenticated:i,userId:n}=e,l=(0,s.Z)(),{documentViews:o,refetchDocumentViews:a,isStale:r,completionPercentage:d,submitCompletionPercentage:c,userCompletion:u,...m}=x({documentId:t,authenticated:i,userId:n});return{documentViews:o,...m,sessionPercentage:d,setSessionPercentage:c,uuid:l,userCompletion:u,refetchDocumentViews:a,isStale:r}}},6332:function(e,t,i){"use strict";i.d(t,{v:function(){return n.vU}});var n=i(49353)},49353:function(e,t,i){"use strict";i.d(t,{HJ:function(){return a},gZ:function(){return r},on:function(){return s},vU:function(){return o}});var n=i(56552),l=i(10965);let s=e=>["document_versions",e],o=e=>{let{documentId:t,enabled:i}=e;return(0,n.useQuery)({queryKey:s(t),queryFn:()=>l.Z.listVersions(t),enabled:i,refetchOnMount:"always"})},a=e=>{let{documentId:t}=e,i=(0,n.useQueryClient)();return(0,n.useMutation)({mutationFn:e=>l.Z.createVersion(t),onSuccess:()=>{i.invalidateQueries(s(t))}})},r=e=>{let{documentId:t}=e,i=(0,n.useQueryClient)();return(0,n.useMutation)({mutationFn:e=>l.Z.revertVersion(t,e),onSuccess:()=>{i.invalidateQueries(s(t))}})}},14164:function(e,t,i){"use strict";i.d(t,{M:function(){return l},Z:function(){return s}});var n=i(27378);let l=()=>top.postMessage({messageType:"scribeViewerLoaded"},"*");function s(e,t){(0,n.useEffect)(()=>{var n,s,o;e&&(null===(n=i.g)||void 0===n?void 0:n.window)&&!(null===(o=i.g)||void 0===o?void 0:null===(s=o.window)||void 0===s?void 0:s.location.hash)&&t.length>0&&l()},[e,t.length])}},64425:function(e,t,i){"use strict";var n=i(22744);t.Z=n.Z},29480:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});var n=i(56552),l=i(67349),s=i(35391);let o=(e,t)=>(0,s.u)({url:"/api/document_metadata/{id}/related_documents/",method:"get",...e,signal:t}),a=(e,t)=>{let{fetcherOptions:i,queryOptions:s,queryKeyFn:a}=(0,l.V)(t);return n.useQuery({queryKey:a({path:"/api/document_metadata/{id}/related_documents/",operationId:"apiDocumentMetadataRelatedDocumentsList",variables:e}),queryFn:t=>{let{signal:n}=t;return o({...i,...e},n)},...t,...s})}},37984:function(e,t,i){"use strict";i.d(t,{L:function(){return n}});let{useGetViewsByDocIdQuery:n}=i(96719).u.injectEndpoints({endpoints:e=>({getViewsByDocId:e.query({query:e=>"views/".concat(e,"/"),providesTags:["DocumentViewSummary"]})})})},4289:function(e,t,i){"use strict";i.d(t,{_I:function(){return I},aR:function(){return L}});var n=i(23599),l=i(54062),s=i(86677),o=i(27378),a=i(16125),r=i(93570),d=i(67787),c=i(57075),u=i(79011),m=i(7118),x=i(56855),p=i(10975),h=i(52359),v=i(23892);let{publicRuntimeConfig:g}=i.n(v)()(),f=g.googleOauthClientId,b=g.googleOauthRedirectUrl,_=e=>{window.gapi.load("auth2",()=>{window.gapi.auth2.init({client_id:f}).then(()=>{window.gapi.auth2.getAuthInstance().grantOfflineAccess({ux_mode:"redirect",redirect_uri:b}).then(e=>console.log(e),e=>{console.log(e)})}).catch(t=>{console.log(t),t.details.includes("Cookies are not enabled in current environment")?e(!0):e(!1)})})};var w=i(42171),j=i(57392),y=i(27061);let N=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=(0,h.Z)(e),o=(0,m.d)()?"desktop":"web";i&&(o="macos_desktop");let a=new URL("".concat(t||u.G,"workos_sso/auth/"));a.searchParams.append("domain",s),a.searchParams.append("client_type",o),a.searchParams.append("email",e),a.searchParams.append("from_embed",n?"true":"false"),l&&a.searchParams.append("super_organization",l),(0,m.d)()?(0,m.k1)().openURLInBrowser(a):window.open(a)},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,[t,i]=(0,o.useState)("none"),[l,s]=(0,o.useState)(null),[r,d]=(0,o.useState)(!1),u=(0,a.I0)();return[t,(0,j.N)(e=>{if(e&&(0,p.Ju)(e)){let t=(0,h.Z)(e);d(!0),u((0,c.$9)({domain:t,email:e})).then(n.SI).then(e=>{d(!1),e.is_sso_enabled_domain?i(e.force_sso?"forced":"optional"):i("none"),e.backend_url&&s(e.backend_url)})}else i("none")},e),l,r]},C=async function(e,t,i,n,l,s,o){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,r=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=await l((0,c.y1)({email:e,password:t,confirmPassword:t,firstName:i,lastName:n,cloudflareToken:a,fsUUID:r}));"rejected"===u.meta.requestStatus&&o((0,x.Z)(null==u?void 0:u.payload)),u.payload&&u.payload.token&&((0,w.Rp)("email",u.payload.id),l(d.Nx.actions.setAccountInfo(u.payload)),l((0,c.setToken)({token:u.payload.token,refresh:u.payload.refresh})),s.push("/welcome"))},S=async(e,t,i)=>{try{await i((0,c.loginWithEmailAndPassword)({email:e.toLowerCase(),password:t})).then(n.SI).then(e=>{e&&(e.token||e.refresh)&&(0,w.D3)("email",e.id)})}catch(e){console.error("Failed to login",e)}},I=async(e,t,i,n,l)=>{var s,o,a,r;let d=await t((0,c.r5)({credential:e}));(null==d?void 0:null===(s=d.payload)||void 0===s?void 0:s.token)&&(d.token=d.payload.token,t((0,c.setToken)({token:d.payload.token,refresh:d.payload.refresh})),d.payload.is_signup?((0,w.L9)("user_signed_up_google_one_tap"),(0,w.Rp)("google_one_tap",null===(o=d.payload)||void 0===o?void 0:o.id),n(),l()):((0,w.L9)("user_signed_in_google_one_tap",{userId:null===(a=d.payload)||void 0===a?void 0:a.id}),(0,w.D3)("google_one_tap",null===(r=d.payload)||void 0===r?void 0:r.id)))},L=e=>{var t;let{signup:i=!1,fromEmbed:n=!1,showName:l=!1,callback:d,disableCloudflare:u=!1,overrideSsoType:x}=e,h=(0,s.useRouter)(),v=(0,a.I0)(),g=window.localStorage.getItem("e2e"),f=(null==y?void 0:null===(t=y.env)||void 0===t?void 0:t.JEST_WORKER_ID)!==void 0,b=!g&&!f&&!u,{as:w,appauth:j}=h.query,{isLoading:C,errorMessage:S}=(0,a.v9)(c.VG),I=(0,r.xO)(),[L,Z]=(0,o.useState)(null),[F,B]=(0,o.useState)(w||""),[D,M]=(0,o.useState)(""),[z,P]=(0,o.useState)(!!w),[A,R]=(0,o.useState)(""),[G,O]=(0,o.useState)(!0),[U,V]=(0,o.useState)(!1),[W,H]=(0,o.useState)(""),[q,K]=(0,o.useState)({}),[Q,J,Y,X]=k();Q=x||Q;let $=T(v,h,i,K,L,I),ee=E(v),et=!b||L;return(0,o.useEffect)(()=>{O(""===F||!(0,p.Ju)(F)||z&&""===A&&"forced"!==Q&&""===W||!et||l&&!D)},[F,A,z,Q,W,D,l,L,et]),(0,o.useEffect)(()=>{v((0,c.$P)())},[F,A]),(0,o.useEffect)(()=>{w&&J(w)},[]),{cloudflareTurnstileEnabled:b,setCloudflareToken:Z,email:F,onEmailChange:e=>{J(e),B(e)},fullName:D,onNameChange:e=>{P(l&&e.trim().length>0&&"forced"!==Q),M(e)},password:A,onPasswordChange:e=>R(e),onSubmit:e=>{if(""!==W){ee(F,W);return}if(!z&&"forced"!==Q){P(!0);return}if(A||"forced"===Q){if("forced"===Q)N(F,Y,j,n,null==e?void 0:e.superOrgId),(0,m.d)()&&setTimeout(()=>V(!0),3e3);else{let[e,t]=null==D?void 0:D.split(" ");$(F,A,e,t,d,L,I)}}},otp:W,onOtpChange:e=>H(e),onSsoSubmit:(e,t)=>{(0,m.d)()&&setTimeout(()=>V(!0),3e3),N(F,Y,j,n,null==t?void 0:t.superOrgId)},onGoogleSubmit:()=>{null==d||d(),_(e=>{v((0,c.Z2)("Could not sign in with Google.".concat(e?" Third-party cookies are disabled.":"")))})},showOtp:U,loading:C,error:S,showPassword:z,showName:l,disableSubmit:G,ssoType:Q,ssoCheckLoading:X,fieldErrors:q}},T=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],async function(s,o,a,r){let d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(l.pV.some(e=>s.toLowerCase().includes(e))&&!(0,m.d)()){t.push("/redirect-to-desktop?to=signin");return}i?((0,w.L9)("onboarding_created_account",{email:s}),await C(s,o,a,r,e,t,n,c,u)):await S(s,o,e),null==d||d()}},E=e=>async function(t,i){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;await e((0,c.PI)({email:t.toLowerCase(),otp:i})).then(n.SI).then(e=>{e&&(e.token||e.refresh)&&(0,w.D3)("email+otp",e.id)}),null==l||l()}},55113:function(e,t,i){"use strict";var n=i(16713),l=i(37892);t.Z=(e,t,i)=>{var s;return{__html:'{\n            "@context": "https://schema.org",\n            "@type": "HowTo",\n            "image": {\n                "@type": "ImageObject",\n                "url": "'.concat(e.replace("/shared/","/og/"),'"\n            },\n            "name": "').concat(null==t?void 0:null===(s=t.name)||void 0===s?void 0:s.replaceAll('"','\\"'),'",\n            ').concat((null==t?void 0:t.estimated_time)&&'"totalTime": "PT'.concat((()=>{let e=(0,n.Z)(null==t?void 0:t.estimated_time);return e.includes("minute")?"".concat(e.split(" ")[0],"M"):"".concat(e.split(" ")[0],"S")})(),'",'),'\n            "step": [\n                ').concat(i.map(e=>{var t;return'{\n                            "@type": "HowToStep",\n                            "text": "'.concat(null==e?void 0:null===(t=e.description)||void 0===t?void 0:t.replaceAll('"','\\"'),'",\n                            "image": "').concat((0,l.$7)(e),'"\n                        }')}),"\n            ]\n          }\n    ")}}},31612:function(e,t,i){"use strict";i.d(t,{P:function(){return n}});var n={twitter:"/icons/twitter.svg",linkedin:"/icons/linkedin.svg",arrowRight:"/icons/arrow.svg",slack:"/icons/slack.svg",logoSmall:"/icons/logo_small.svg"}},28481:function(e,t,i){"use strict";i.d(t,{pJ:function(){return l},ZP:function(){return r},wJ:function(){return d}});var n,l,s=i(45719),o={create:async(e,t,i,n,l)=>(0,s.Z)("views/?id=".concat(e),"POST",!0,{context:t,referrer:n,viewFormat:l},!1,i?{"X-User-UUID":i}:{}),createPublicProfileView:async e=>{await (0,s.Z)("views/public_profile/?profile_id=".concat(e),"POST",!0)}},a=i(15597);async function r(e,t,i,n,l){try{await o.create(e,t,i,n,l)}catch(t){a.u.error({category:"trackView",message:"viewCreateService.create failed",data:{documentId:e,uuid:i,referrer:n,viewFormat:l}}),(0,a.l)(t,{tags:{location:"trackView",action:"viewCreateService.create"}})}}function d(e){o.createPublicProfileView(e)}(n=l||(l={})).LinkScroll="link-scroll",n.LinkScrollSidekick="link-scroll-sidekick",n.LinkStepByStep="link-step-by-step",n.LinkMovie="link-movie",n.EmbedStepByStep="embed-step-by-step",n.EmbedScroll="embed-scroll",n.EmbedMovie="embed-movie",n.GuideMe="guide-me"},56672:function(e,t,i){"use strict";i.d(t,{f:function(){return o}});var n=i(19783),l=i.n(n),s=i(27378);function o(e,t){let i=(0,s.useRef)(e);return(0,s.useEffect)(()=>{i.current=e}),(0,s.useCallback)(l()(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.current(...t)},t,{leading:!0,trailing:!0}),[t])}},70758:function(e,t,i){"use strict";var n=i(27781),l=i(23892);let{publicRuntimeConfig:s}=i.n(l)()();class o{async generateCompletion(e,t,i,l,o){let a=!1;await (0,n.L)("".concat(s.llmApiRootUrl,"generate"),{method:"POST",signal:t.signal,openWhenHidden:!0,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)},body:JSON.stringify({prompt:e,systemPrompt:this.systemPrompt}),async onopen(e){if(e.ok)console.log("Receiving stream of data...");else if(e.status>=400&&e.status<500&&429!==e.status)throw Error("Got error: ".concat(e.status," ").concat(e.statusText))},onmessage(e){if((null==e?void 0:e.data)==="Stream closed"){null==o||o();return}((null==e?void 0:e.data)!==""||a)&&(i(e.data),a=!0)},onerror(e){null==l||l(e),console.error("Error generating text:",e)}})}constructor(e,t){this.token=e,this.systemPrompt=t}}t.Z=o},49817:function(e,t,i){"use strict";let n;i.d(t,{Z:function(){return lB}});var l,s,o,a,r=i(24246),d=i(21947),c=i(22107),u=i(23599),m=i(23505),x=i(93570),p=i(19686),h=i(1048),v=i(40174),g=e=>{let{progress:t=0}=e;return(0,r.jsx)("div",{className:"fixed top-16 z-10 h-1 w-full bg-gradient-to-r from-transparent to-[#7279F8]",children:(0,r.jsx)("div",{className:"absolute right-0 top-0 h-full bg-white transition-all duration-1000 ease-in-out",style:{width:"calc(100% - ".concat(t,"%)")}})})};let f=()=>(0,r.jsxs)("div",{className:"mb-4 flex w-full",children:[(0,r.jsx)("div",{className:"flex h-[88px] w-[104px] rounded-full bg-slate-200"}),(0,r.jsxs)("div",{className:"ml-5 flex w-full flex-col gap-2",children:[(0,r.jsx)("div",{className:"flex h-[40px] w-full rounded-md bg-slate-200"}),(0,r.jsx)("div",{className:"flex h-[80px] w-full rounded-md bg-slate-200"}),(0,r.jsx)("div",{className:"flex h-[28px] w-[50%] rounded-md bg-slate-200"})]})]}),b=()=>(0,r.jsxs)("div",{className:"mb-4 flex h-full w-full flex-col space-y-4 rounded-2xl",children:[(0,r.jsx)("div",{className:"h-[72px] rounded-2xl bg-slate-200"}),(0,r.jsx)("div",{className:"h-full rounded-2xl bg-gradient-to-b from-slate-200 to-slate-50"})]});var _=e=>{let{className:t}=e;return(0,r.jsxs)("div",{className:"mx-auto flex w-full max-w-[720px] flex-1 animate-pulse flex-col items-center justify-center space-y-4 ".concat(t),children:[(0,r.jsx)(f,{}),(0,r.jsx)(b,{})]})},w=i(219),j=i(40525),y=i(82406),N=i(59052),k=i(51107),C=i(15393),S=i(55766),I=i(21404),L=i(27378),T=i(16125),E=i(8022),Z=i(22967),F=i(42171),B=(0,L.memo)(e=>{let{children:t,draggableId:i,disabled:n}=e,l=(0,L.useMemo)(()=>({id:i,disabled:n,animateLayoutChanges:()=>!1}),[i,n]),{attributes:s,listeners:o,setNodeRef:a}=(0,C.nB)(l);return(0,r.jsx)("div",{ref:a,...s,...o,children:t})}),D=e=>{let{children:t,droppableId:i,disabled:n}=e,{isOver:l,setNodeRef:s}=(0,N.Zj)({id:i,disabled:n});return(0,r.jsx)("div",{ref:s,style:{color:l?"green":void 0},children:t})},M=i(94033),z=e=>{let{count:t}=e;return(0,r.jsxs)("div",{className:(0,Z.cn)(["absolute z-50 ml-20 flex h-8 w-24 flex-row items-center rounded-[2px] bg-[#f8fafcdf] align-middle shadow"]),children:[(0,r.jsx)("div",{className:"ml-2",children:(0,r.jsx)(M.G,{icon:c.Krp,className:"h-[14px] w-[14px] text-indigo-500"})}),(0,r.jsxs)("div",{className:"public-sans ml-3 text-[13px] text-slate-600",children:[t," Steps"]})]})},P=i(55260),A=e=>e.replace(/(https?:\/\/)?(www\.)?/gi,"").replace(/("?)\[\[(.*?)]\]\1/g,(e,t,i)=>'"'.concat(i,'"'))||null,R=i(93910),G=i(21785),O=i(83469),U=e=>{let{index:t,instructionType:i}=e;if("number"==typeof t&&"section"!==i&&"warning"!==i&&"tip"!==i)return(0,r.jsx)("span",{className:"h-5 min-w-[20px] shrink-0 rounded bg-slate-50 px-1 text-center text-[10px] font-semibold leading-5 text-slate-500",children:t});let n=null;return("warning"===i&&(n=(0,r.jsx)(M.G,{icon:O.ik8,className:"h-[14px] w-[14px] text-red-300","data-testid":"warning-icon"})),"tip"===i&&(n=(0,r.jsx)(M.G,{icon:O.DBf,className:"h-[14px] w-[14px] text-green-300","data-testid":"tip-icon"})),"section"===i&&(n=(0,r.jsx)(M.G,{icon:O.a0l,className:"h-[14px] w-[14px] text-slate-400","data-testid":"section-icon"})),n)?(0,r.jsx)("div",{className:"flex h-5 w-5 shrink-0 flex-row justify-center pt-[3px] text-center align-middle",children:n}):null};let V=e=>{var t,i,n;let{instructionType:l,description:s,selected:o,isEditMode:a,selectAction:d,isActive:c,isBeingDragged:u,stepNumber:m,dropTargetDirection:x}=e,p=(0,L.useRef)(null),h=(null===(t=p.current)||void 0===t?void 0:t.scrollWidth)>(null===(i=p.current)||void 0===i?void 0:i.offsetWidth);return(0,r.jsx)(G.Z,{appearance:"right",variant:"dark",className:"max-w-[240px] px-5 py-3",indicatorClassName:"ml-[2px]",content:"section"!==l&&h?(0,r.jsx)("p",{className:"my-0 h-full w-full break-words text-sm font-semibold text-slate-100",children:A(s)}):null,children:(0,r.jsxs)("div",{className:(0,Z.cn)(["mb-1.5 mt-1.5 flex h-8 items-center gap-3 border-t border-transparent bg-transparent pl-4 pr-6 align-middle transition-colors duration-200",c&&"bg-indigo-50",u&&"bg-indigo-100 opacity-30","top"===x&&"!border-indigo-500","section"===l&&"h-auto !min-h-fit"]),children:[a&&(0,r.jsx)(R.Z,{checked:o,onChange:d,onClick:e=>{(0,F.L9)(o?"unchecked_scribe_steps":"checked_scribe_steps",{location:"editor"}),e.stopPropagation(),e.currentTarget.blur()}}),(0,r.jsx)(U,{index:m,instructionType:l}),(0,r.jsx)("span",{ref:p,className:(0,Z.cn)(["text-[13px] leading-5 text-slate-600",{"line-clamp-3 font-semibold":"section"===l,"truncate text-ellipsis":"section"!==l}]),children:null!==(n=A(s))&&void 0!==n?n:(0,r.jsx)("span",{className:"text-slate-300",children:"Untitled"})})]})})};var W=e=>{let{index:t,instructionType:i,description:n,actionId:l,selected:s,isEditMode:o,isActive:a,isBeingDragged:d,stepNumber:c,dropTargetDirection:u}=e,m=(0,T.I0)(),{setBulkEditorContext:x}=(0,P.ZP)(),{visibleActions:p}=(0,T.v9)(E.JR),h=e=>{let t=null==p?void 0:p.find(e=>e.selected),i=p.findIndex(e=>e.id===(null==t?void 0:t.id)),n=[];if(t){let t=Math.min(i,e),l=Math.max(i,e)+1;n=p.slice(t,l).map(e=>e.id)}else n=[p[e].id];n.forEach(e=>{m((0,E.$S)(e,!0))})};return(0,r.jsx)(V,{index:t,instructionType:i,description:n,actionId:l,selected:s,isEditMode:o,selectAction:e=>{if(x("toc_step_actions"),e.nativeEvent.shiftKey)return h(t);m((0,E.$S)(l,!s))},isActive:a,isBeingDragged:d,stepNumber:c,dropTargetDirection:u})},H=e=>{let{index:t,description:i,instructionType:n}=e;return(0,r.jsxs)("div",{className:"flex gap-3 border-t border-transparent bg-blueGray-50/80 py-2 pl-4 pr-6 transition-colors duration-200",children:[(0,r.jsx)(U,{index:t,instructionType:n}),(0,r.jsx)("span",{className:(0,Z.cn)(["text-[13px] leading-5 text-slate-600",{"font-semibold":"section"===n,"truncate text-ellipsis":"section"!==n}]),children:A(i)})]})};let q={droppable:{strategy:N.uN.Always}},K={sideEffects:(0,N.Ai)({className:{active:"bg-indigo-100",dragOverlay:"hidden"}}),duration:500,easing:"cubic-bezier(0.18, 0.67, 0.6, 1.22)"};var Q=e=>{var t;let{scribeId:i,isEditMode:n,visibleActions:l,activeActionIndex:s,isOpen:o}=e,[a,d]=(0,L.useState)(null),[c,u]=(0,L.useState)(null),[m,x]=(0,L.useState)(!1),[p,h]=(0,L.useState)(null),{actions:v,getActionById:g,getActionIndexById:f,dropActions:b,refetch:_}=(0,S.ol)(i),w=(0,N.Dy)((0,N.VT)(N.we,{activationConstraint:{distance:5}}),(0,N.VT)(N.Lg,{coordinateGetter:C.is})),{selectedActions:j}=(0,T.v9)(E.Bf),{scrollToAction:y}=(0,I.Z)({scribeFileId:i,visibleActions:l}),M=()=>j.some(e=>e.id===(null==a?void 0:a.id)),P=e=>M()?j.some(t=>t.id===(null==e?void 0:e.id)):(null==a?void 0:a.id)===(null==e?void 0:e.id),A=(0,L.useCallback)(e=>{let{active:t}=e;d(g(t.id)),u(f(t.id))},[g,f]),R=(0,L.useCallback)(async e=>{let{active:t,over:n}=e;if(h(null),d(null),u(null),!(null==n?void 0:n.id)||t.id===n.id)return;(0,F.L9)("edited_file_reorder_actions",{file_id:i,location:"leftToC-editor"});let l="ghost"===n.id?v.length:f(n.id),s=f(t.id),o=g(t.id);M()?await b(j,s,l):await b([o],s,l)},[v,M,b,g,f,i,j]),G=(0,L.useCallback)(()=>{d(null),u(null),h(null)},[]),O=e=>{(0,F.L9)("toc_clicked_step",{location:n?"editor":"viewer",text:e.description,kind:e.instruction_type||e.kind||"unknown"}),y(e.id)};(0,L.useEffect)(()=>{(null==l?void 0:l.length)!==(null==v?void 0:v.length)&&_()},[null==v?void 0:v.length,_,l]),(0,L.useEffect)(()=>{o?x(!1):setTimeout(()=>{x(!0)},100)},[o]);let U=null==v?void 0:v.filter(e=>"section"!==e.kind&&null===e.instruction_type);return(0,r.jsxs)(N.LB,{sensors:w,collisionDetection:N.pE,onDragEnd:R,onDragStart:A,modifiers:[k.DL,k.oJ],measuring:q,onDragOver:e=>{let{over:t,active:i}=e,n=(null==t?void 0:t.id)==="ghost"?v.length:f(null==t?void 0:t.id),l=(null==t?void 0:t.id)==="ghost"?"ghost":v[f(null==t?void 0:t.id)],s=f(null==i?void 0:i.id),o=(null==t?void 0:t.id)==="ghost"?v.length:f(t.id),a=n>s?o-1:o;if((null==t?void 0:t.id)&&(null==i?void 0:i.id)){if(a===s||i.id===t.id){h(null);return}l&&h({index:n,direction:"top"})}},onDragCancel:G,children:[(0,r.jsx)("div",{className:(0,Z.cn)(["transition-all ease-in-out",m?"w-0":"w-[280px]"])}),(0,r.jsx)("div",{className:"opacity-1 fixed left-0 top-16 z-20 h-[calc(100vh_-_64px)] w-[280px] transform-gpu overflow-x-visible border-r border-slate-200 bg-white transition-all duration-300 ease-in-out ".concat(m?"pointer-events-none -translate-x-[280px] overflow-hidden overflow-y-clip opacity-0":"translate-x-0"),children:(0,r.jsx)("div",{className:"flex h-full flex-col gap-4 overflow-auto ".concat(m?"hidden":""),"data-testid":"ToC-Action-list",children:(0,r.jsx)(D,{droppableId:"actionList",disabled:!n,children:(0,r.jsxs)("ul",{className:"list-none p-0 pb-20",children:[(0,r.jsxs)(C.Fo,{items:v||[],strategy:C.qw,children:[null==v?void 0:null===(t=v.map)||void 0===t?void 0:t.call(v,(e,t)=>(0,r.jsx)("li",{onClick:()=>O(e),onKeyDown:()=>O(e),className:(0,Z.cn)("cursor-pointer"),id:e.id,children:(0,r.jsx)(B,{draggableId:e.id,disabled:!n,children:(0,r.jsx)(W,{index:t,stepNumber:U.findIndex(t=>t.id===e.id)+1,description:e.description,instructionType:(null==e?void 0:e.instruction_type)||(null==e?void 0:e.kind),actionId:e.id,selected:j.some(t=>t.id===e.id),isBeingDragged:P(e),isEditMode:n,isActive:s===t,dropTargetDirection:(null==p?void 0:p.index)===t?"top":null})},e.id)},e.id)),(0,r.jsx)("li",{children:(0,r.jsx)(B,{draggableId:"ghost",disabled:!0,children:(0,r.jsx)("div",{className:(0,Z.cn)(["h-12 w-full",(null==p?void 0:p.index)===(null==v?void 0:v.length)?"border-t border-indigo-500":""])})},"ghost")})]}),(0,r.jsx)(N.y9,{modifiers:[k.hg],dropAnimation:K,className:"cursor-grabbing transition-colors",children:(0,r.jsxs)("li",{id:"".concat(null==a?void 0:a.id,"-ghost"),children:[M()&&j.length>1&&(0,r.jsx)(z,{count:j.length}),a&&!M()&&(0,r.jsx)(H,{description:null==a?void 0:a.description,index:c+1,instructionType:a.instruction_type})]})})]})})})})]})},J=i(70115),Y=i(28509),X=i(46519),$=i(54062),ee=i(51907),et=i(73174),ei=i(9201),en=i(91809),el=i(22716),es=i(6332),eo=i(49353),ea=i(43425),er=i(48365),ed=()=>(0,L.useMemo)(()=>{try{return window.self!==window.top}catch(e){return!1}},[]),ec=i(68043),eu=i(4238),em=i(69029),ex=i(14164),ep=i(55318),eh=i(64425),ev=i(19783),eg=i.n(ev),ef=i(23892),eb=i.n(ef),e_=i(88038),ew=i.n(e_),ej=i(86677),ey=i(43218),eN=i.n(ey),ek=i(51565),eC=i(19954),eS=i(56552),eI=i(25971),eL=i(41127),eT=i(73606),eE=i(561),eZ=i(38873),eF=i.n(eZ),eB=i(18378),eD=i(2654),eM=i(48407),ez=i(43044),eP=i(53826),eA=i(23067),eR=i(4289),eG=i(55113),eO=i(10975),eU=i(85878);let eV=e=>{let t=new Date("2023-10-01T00:00:00Z");return!!e&&new Date(e)>=t};var eW=i(28481),eH=i(67391),eq=i(42364);let{useGetChangesByDocIdQuery:eK,useGetUnviewedChangesByDocIdQuery:eQ}=i(96719).u.injectEndpoints({endpoints:e=>({getChangesByDocId:e.query({query:e=>"document_change_logs/".concat(e,"/"),providesTags:["DocumentChangeLogs"]}),getUnviewedChangesByDocId:e.query({query:e=>"document_change_logs/".concat(e,"/unviewed_changes/"),providesTags:["UnviewedChanges"]})})});var eJ=i(38579),eY=i.n(eJ),eX=i(83644);let e$={"document metadata":"the document","scribe document":"the document","knowledge page":"the document",action:"a step"},e0=e=>{if(!e||0===e.length)return e;let t=e.replaceAll("_"," ");return t[0].toUpperCase()+t.slice(1)},e1=e=>{let{changeLog:t}=e,{user:i,content_type:n,event_type:l,changed_fields:s,datetime:o}=t,a=(0,L.useMemo)(()=>new Date(o),[o]);return(0,r.jsx)("div",{className:"flex justify-between border-b-[1px] border-slate-700 px-4 py-4 last:border-b-0",children:(0,r.jsxs)("div",{className:"w-full gap-3 text-sm text-white",children:[(0,r.jsxs)("div",{className:"mb-1 flex gap-1",children:[(0,r.jsx)(eX.qE,{size:"xs",uuid:i.id,children:i.profile_picture_url?(0,r.jsx)(eY(),{src:i.profile_picture_url,width:20,height:20,alt:null==i?void 0:i.first_name}):null==i?void 0:i.first_name}),(0,r.jsx)("span",{className:"font-bold",children:"".concat(i.first_name," ").concat(t.user.last_name)}),(0,r.jsxs)("span",{className:"text-slate-400",children:[a.toLocaleDateString()," at ",a.toLocaleTimeString()]})]}),(0,r.jsxs)("span",{children:[i.first_name," ",l," ",e$[n],"."]}),s&&Object.keys(s).map(e=>(0,r.jsxs)("span",{children:[(0,r.jsxs)("span",{className:"font-bold",children:[" ",e0(e)]})," was changed from ",(0,r.jsx)("span",{className:"font-bold",children:s[e][0]})," ","to ",(0,r.jsx)("span",{className:"font-bold",children:s[e][1]}),"."]}))]})})};var e2=e=>{let{changeLogs:t,onClose:i}=e;return(0,r.jsxs)("div",{className:"sticky top-0 flex h-screen w-full max-w-[420px] flex-col overflow-y-scroll bg-slate-800 shadow-2xl",children:[(0,r.jsxs)("div",{className:"z-10 flex w-full justify-between border-b-[1px] border-slate-700 bg-slate-800 px-2 py-2",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-white",children:"Document History"}),(0,r.jsx)("button",{className:"flex cursor-pointer gap-2 bg-transparent text-sm font-semibold text-slate-100",onClick:i,children:"Close"})]}),t.map(e=>(0,r.jsx)(e1,{changeLog:e}))]})},e4=e=>{let{documentId:t,onClose:i}=e,{data:n,error:l,isLoading:s}=eK(t);return(0,r.jsx)(e2,{changeLogs:n||[],onClose:i})},e5=i(36053),e3=i(78440),e9=e=>{let{totalSteps:t,currentStep:i,onClose:n,onPrevious:l,onNext:s}=e;return(0,r.jsxs)("div",{className:"fixed bottom-10 left-0 right-0 m-auto flex w-60 items-center justify-between rounded-full bg-slate-800 shadow-xl shadow-indigo-800/40",children:[(0,r.jsx)("button",{onClick:n,className:"cursor-pointer border-r-[1px] border-slate-700 bg-transparent p-3",children:(0,r.jsx)(M.G,{className:"h-5 w-5 text-slate-400",icon:c.g82})}),(0,r.jsx)("button",{onClick:l,className:"cursor-pointer bg-transparent p-3",children:(0,r.jsx)(M.G,{className:"h-5 w-5 text-slate-400",icon:c.acZ})}),(0,r.jsxs)("div",{className:"my-2 flex flex-col text-white",children:[(0,r.jsx)("span",{className:"text-sm",children:"Updated Steps"}),(0,r.jsxs)("span",{className:"text-sm font-bold",children:[i," of ",t]})]}),(0,r.jsx)("button",{onClick:s,className:"cursor-pointer bg-transparent p-3",children:(0,r.jsx)(M.G,{className:"h-5 w-5 text-slate-400",icon:c.eFW})})]})},e6=e=>{let{documentId:t,onClose:n}=e,[l,s]=(0,L.useState)(0),{data:o,error:a,isLoading:d}=eQ(t),c=(null==o?void 0:o.updated_action_ids)||[];(0,L.useEffect)(()=>{c.length>0&&!d&&u(0)},[c,d]);let u=e=>{l+e>=c.length||l+e<0||(i.g.window.location.hash=c[l+e].split("-")[0],s(l+e))};return d||a||0===c.length?null:(0,r.jsx)(e9,{currentStep:l+1,totalSteps:c.length,onNext:()=>u(1),onPrevious:()=>u(-1),onClose:n})},e8=i(61634),e7=e=>{let{icon:t,onClick:i,tooltipText:n,disabled:l}=e;return(0,r.jsx)(G.Z,{visible:!!n,appearance:"bottom",variant:"small-dark",wrapperClassName:"!rounded",animated:!1,content:(0,r.jsx)("p",{className:"m-0 px-2.5 py-1.5 leading-4",style:{textShadow:"0px 1px 1px rgba(0, 0, 0, 0.3)"},children:n}),children:(0,r.jsx)("button",{className:(0,Z.cn)(["flex h-[27px] w-[27px] items-center justify-center rounded-[4px] bg-gray-200 bg-opacity-5 align-middle transition-all hover:bg-opacity-10",{"cursor-pointer":!!i&&!l}]),onClick:()=>{i&&!l&&i()},"aria-label":n,"data-testid":"icon-button",children:(0,r.jsx)(M.G,{icon:t,"data-testid":"BulkStepManagementActionBar-IconButton",className:(0,Z.cn)(["h-[14px] w-[14px] text-slate-100 transition-all",{"text-gray-400":!i||l}])})})})};let te="snackbar_step_actions",tt=e=>{let{scribeId:t,selectedCount:i,hidden:n,moveUp:l,moveDown:s,delete:o,merge:a,copy:d,duplicate:c,deselectAll:u,shiftLeft:m,selectedActions:x,isConsequentiallySelected:p}=e,{setBulkEditorContext:h,bulkEditorContext:v}=(0,P.ZP)(),[g,f]=(0,L.useState)(!0),b=null==x?void 0:x.some(e=>"section"===e.kind);(0,L.useEffect)(()=>{n?(f(!1),setTimeout(()=>{f(!0)},200)):f(!1)},[n]);let _=(0,L.useCallback)(e=>{"Escape"===e.key&&i>0&&(e.preventDefault(),e.stopPropagation(),u())},[u,i]);(0,L.useEffect)(()=>(window.addEventListener("keydown",_,!0),()=>window.removeEventListener("keydown",_,!0)),[_]);let w=e=>{h(te),(0,F.L9)(e,{location:te,document_id:t,actionIds:null==x?void 0:x.map(e=>{let{id:t}=e;return t})})},j=[{icon:O.bqB,onClick:()=>{l(),w("send_steps_to_top")},tooltipText:"Send to Top"},{icon:O.E0H,onClick:()=>{s(),w("send_steps_to_bottom")},tooltipText:"Send to Bottom"},{icon:O.WM4,onClick:()=>{c(),w("duplicate_scribe_steps")},tooltipText:"Duplicate"},{icon:O.GB4,onClick:()=>{a(),w("clicked_combine_steps")},disabled:1===i||b||!p,tooltipText:b?"Cannot Combine Headers":"Combine"},{icon:O.JUV,onClick:()=>{d("snackbar_step_actions"),w("clicked_copy_steps_to")},tooltipText:"Copy To"},{icon:O.XAH,onClick:()=>{o(te),w("clicked_delete_steps")},tooltipText:"Delete"}].filter(e=>0!==Object.keys(e).length);return(0,r.jsx)("div",{className:(0,Z.cn)(["transition-padding pointer-events-none fixed left-0 top-20 z-50 flex w-full items-center justify-center text-white duration-500 ease-in-out sm:mr-[298px] xl:mr-[368px]",{"translate-y-[-4px] scale-95 opacity-0":n,"scale-1 translate-y-0 opacity-100":!n,"!hidden":g,"pr-[235px]":m}]),children:(0,r.jsxs)("div",{className:"pointer-events-auto relative flex h-[42px] flex-row items-center justify-between gap-4 rounded-lg bg-slate-800 pl-3 pr-4 shadow-xl",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,r.jsx)("div",{className:"flex h-6 w-6 items-center justify-center text-indigo-500",children:i>0&&(0,r.jsx)(M.G,{icon:O.Krp,className:"text-base"})}),(0,r.jsx)("span",{className:"text-sm font-bold tabular-nums",children:i>99?"99+":i}),(0,r.jsx)("span",{className:"text-sm",children:" Selected"})]}),(0,r.jsx)("div",{className:"h-full w-[2px] border-l-[1px] border-r-[1px] border-l-slate-900 border-r-slate-700"}),(0,r.jsx)("div",{className:"flex flex-row",children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between gap-1.5",children:[j.map(e=>{let{icon:t,tooltipText:i,...n}=e;return(0,r.jsx)(e7,{icon:t,tooltipText:i,...n},i)}),(0,r.jsx)("button",{className:"ml-2 cursor-pointer rounded bg-gray-200 bg-opacity-5 px-2 py-1.5 text-[13px] font-semibold leading-[15px] text-white transition-all hover:bg-opacity-10",onClick:()=>{u(),(0,F.L9)("deselect_scribe_steps",{location:v||te}),h(te)},children:"Deselect"})]})})]})})};var ti=i(36012),tn=i.n(ti),tl=i(4910),ts=i(24304);function to(e){var t;let i=(0,T.v9)(t=>(0,ts.Rf)(t,{document:e}));return null!==(t=null==i?void 0:i.can_see_sharing_modal)&&void 0!==t&&t}var ta=i(40129),tr=i(37869),td=i(39011),tc=i(56985),tu=i(43074),tm=i(18575),tx=i(31928),tp=i(17654),th=i(60940),tv=i(4698),tg=i(58955),tf=i(57392),tb=i(41395),t_=i(68382),tw=i(971),tj=i(71204);let ty=e=>RegExp("(".concat((0,tj.Z)(e),")"),"gi"),tN=e=>{let{text:t,shouldBeHighlighted:i}=e,n=t.split(ty(i));return(0,r.jsx)("span",{children:n.map((e,t)=>(0,r.jsx)("span",{className:(0,Z.cn)({"rounded-sm bg-indigo-200":e.toLowerCase()===i.toLowerCase()}),children:e},t))})};var tk=i(79894),tC=i.n(tk);i(52949);let tS=e=>{let{result:t,query:i,onAddDocumentToKnowledgePage:n}=e,{id:l,name:s,icon_color:o,icon:a}=t;return(0,r.jsx)("a",{onClick:e=>{n({query:i,pageId:l})},children:(0,r.jsxs)("div",{className:(0,Z.cn)("flex w-full cursor-pointer items-center overflow-hidden px-8 py-4 hover:bg-slate-50"),children:[(0,r.jsx)(tw.Z,{document:t,variant:"pale",size:15,classes:"h-8 w-8 flex-none mr-4",shapeSquare:!0}),(0,r.jsx)("div",{className:(0,Z.cn)("m-0 line-clamp-1 grow pr-4 text-left font-sans text-sm font-semibold text-slate-700"),children:tN({text:s,shouldBeHighlighted:i})}),(0,r.jsxs)(t_.Z,{variant:"link",className:"border border-slate-300 bg-transparent py-3 text-slate-900 hover:text-slate-900 hover:text-opacity-100","data-testid":"addToPage",size:"small",children:["Add",(0,r.jsx)(M.G,{className:"ml-2 text-slate-300",icon:O.r8p})]})]})})},tI=e=>{let{onSearch:t,results:i,isAdding:n,onNewKnowledgePage:l,onAddDocumentToKnowledgePage:s,onAddDocumentToAiKnowledgePage:o,onClose:a}=e,[d,c]=(0,L.useState)(""),u=(0,tf.N)(async()=>{await t(d),d.length>1&&(0,F.L9)("add_to_page_search",{query:d})},300);return(0,L.useEffect)(()=>{u()},[d]),(0,r.jsx)(ez.Vq,{onOpenChange:e=>!e&&a(),open:!0,children:(0,r.jsxs)(ez.cZ,{children:[(0,r.jsx)(ez.fK,{title:"Add your Scribe to a Page"}),(0,r.jsx)(ez.SL,{children:n?(0,r.jsx)("div",{className:"grid h-[348px] content-center border-t border-slate-200 text-slate-500",children:(0,r.jsxs)("div",{className:"text-center",children:["Adding your Scribe...",(0,r.jsxs)("div",{className:"clear mr-4 mt-2",children:[(0,r.jsx)(th.aN,{size:"sm"})," \xa0"]})]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"px-8",children:[(0,r.jsxs)(t_.Z,{variant:"link",className:"w-full border border-dashed border-slate-300 bg-slate-100 text-blueGray-900 hover:text-slate-900 hover:text-opacity-75",onClick:o,"data-testid":"addToPage",children:["Add to a Page with AI",(0,r.jsx)(M.G,{className:"ml-3",icon:O.r8p})]}),(0,r.jsxs)(t_.Z,{variant:"link",className:"mt-8 w-full border border-dashed border-slate-300 bg-slate-100 text-blueGray-900 hover:text-slate-900 hover:text-opacity-75",onClick:l,"data-testid":"addToPage",children:["Add to an empty Page",(0,r.jsx)(M.G,{className:"ml-3",icon:O.r8p})]})]}),(0,r.jsxs)("div",{className:"flex items-center py-5",children:[(0,r.jsx)("div",{className:"h-px flex-grow bg-slate-200"}),(0,r.jsx)("span",{className:"flex-shrink px-2 text-slate-400",children:"or"}),(0,r.jsx)("div",{className:"h-px flex-grow bg-slate-200"})]}),(0,r.jsx)(tb.Z,{className:"px-8 text-center",onChange:c,query:d,placeholder:"Search existing Pages",lightAlternative:!0}),(0,r.jsx)("div",{className:"mb-2 mt-4 h-[270px] overflow-y-auto text-center",children:i.length?(0,r.jsx)(r.Fragment,{children:i.map(e=>(0,r.jsx)(tS,{result:e,query:d,onAddDocumentToKnowledgePage:s},e.id))}):d.length>0&&(0,r.jsxs)("div",{className:"mt-4 text-sm text-slate-500",children:['No Results for "',d,'"']})})]})})]})})};var tL=e=>{let t=(0,T.I0)(),i=(0,ej.useRouter)(),[n,l]=(0,L.useState)([]),[s,o]=(0,L.useState)(!1),a=async e=>{try{let t=await tv.Z.knowledgePages(e);l(t.knowledge_pages)}catch(e){}};return(0,r.jsx)(tI,{onSearch:a,results:n,isAdding:s,onNewKnowledgePage:()=>{o(!0),t((0,tg.QW)({documentId:e.documentId,location:e.buttonLocation})).then(u.SI).then(e=>{(0,F.L9)("create_page",{location:"sidebar"}),i.push("".concat((0,tx.eU)(e.id,e.name),"?editmode=true"))})},onAddDocumentToKnowledgePage:n=>{let{query:l,pageId:s}=n;o(!0),(0,F.L9)("choose_add_document_to_page_result",{method:"keyboard",query:l,id:s}),t((0,tg.nv)({pageId:s,documentId:e.documentId})).then(u.SI).then(e=>{(0,F.L9)("add_document_to_page",{location:"sidebar"}),i.push("".concat((0,tx.eU)(e.id,e.name),"?editmode=true"))})},onAddDocumentToAiKnowledgePage:()=>{(0,F.L9)("add_scribe_to_page",{location:"editor_document_actions",variant:"ai"});let t="/new-page?ai_scribe_id=".concat(e.documentId,"&ai_scribe_name=").concat(encodeURIComponent(e.documentName));i.push(t)},...e})},tT=i(12068),tE=i(19135),tZ=i(65801),tF=i(94513),tB=e=>{let{onCancel:t,onContinue:i}=e;return(0,r.jsxs)(tF.Z,{visible:!0,onCancel:t,className:"rounded-xl pt-2",contentClassName:"flex flex-col bg-white select-none justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start justify-start",children:[(0,r.jsx)(M.G,{icon:d.eHv,className:"h-9 w-9 pr-5 pt-1 text-indigo-500"}),(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center space-y-2 text-left",children:[(0,r.jsx)("span",{className:"text-xl font-semibold text-slate-900",children:"Scribe Extension Required"}),(0,r.jsx)("span",{className:"pb-3 text-sm text-slate-900",children:"Download the Scribe extension to pin Scribes anywhere on the web."})]})]}),(0,r.jsx)("div",{className:"space-between flex flex-col items-center",children:(0,r.jsxs)("div",{className:"flex w-full items-end justify-end space-x-4",children:[(0,r.jsx)(tZ.Z,{className:"rounded-[4px]",size:"small",variant:"outlineLight",onClick:t,children:"Dismiss"}),(0,r.jsx)(tZ.Z,{className:"rounded-[4px]",size:"small",variant:"primary",onClick:i,children:"Download Scribe Extension"})]})})]})};let tD=e=>e.startsWith("complete"),tM=e=>tD(e)?"Duplication complete!":"Duplication in progress",tz={complete:"Your file has successfully been duplicated. Please click on link to view.",complete_auto_redirect:"Your file has successfully been duplicated.",in_progress:"A link will be provided here once the duplication is completed.",in_progress_auto_redirect:"You will be redirected to the copied file once duplication is completed."},tP={error:"in_progress",inprogress:"in_progress",complete:"complete"};var tA=e=>{var t,i;let{desktopOnly:n,setMultiSelectMode:l,onCombineSteps:s,onCloneAndMove:o,onMagicMerge:a,onDeleteSteps:c,onUndoMagicMerge:u,firstStepLink:m,stepActionsMenuState:x,dispatchStepActionsMenu:p,selectedStepIds:v}=e,{scribeFile:g}=(0,T.v9)(tc.Q),{refetch:f}=(0,tl.T)(null==g?void 0:g.id,null==g?void 0:g.type),b=(0,T.I0)(),_=(0,tp.TV)(null==g?void 0:null===(t=g.organization_owner)||void 0===t?void 0:t.super_organization),[w,j]=(0,L.useState)(!1),y=to(g),[N,k]=(0,L.useState)(!1),[C,S]=(0,L.useState)(!1),I=(0,T.v9)(e=>e.editorSidebar.sourceToDuplicate[null==g?void 0:g.id]),E=(0,L.useRef)({pollInterval:null});(0,L.useEffect)(()=>{if((null==g?void 0:g.id)&&(null==I?void 0:I.status)==="inprogress")return E.current.pollInterval=setInterval(()=>{b((0,h.oE)(I.id))},2e3),()=>{clearInterval(E.current.pollInterval)}},[null==g?void 0:g.id,null==I?void 0:I.status]),(0,L.useEffect)(()=>{let e=tP[null==I?void 0:I.status]||"in_progress_auto_redirect",t=tD(e);I&&(0,eP.Am)({title:tM(e),description:tz[e],icon:d.fV7,variant:t?"success":"info",...t&&{action:(0,r.jsx)(tu.uL,{children:(0,r.jsx)(eP.gD,{altText:"View Duplicate",onClick:()=>{window.open(null==I?void 0:I.url,"_blank")},children:"View Duplicate"})})}})},[I]);let[Z,B]=(0,L.useState)(!1),D=function(e){let{width:t}=(0,tr.Z)();return e?"Copied!":t<1280?"Copy":"Copy Link"}(Z),M=(0,tm.Z)(g),{isHardUsageLimitReached:z}=(0,ta.Z)(),P=null==g?void 0:null===(i=g.organization_owner)||void 0===i?void 0:i.super_organization;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tE.Z,{isFreeSuperOrgDocument:_,copyLinkTitle:D,onAddToPage:()=>{(0,F.L9)("add_scribe_to_page",{location:"editor_document_actions"}),k(!0)},onShare:()=>{j(!0),(0,F.L9)("click_open_share_modal",{location:"editor_sidebar_2022"})},canShare:y,onPin:()=>{(0,tT.LB)().then(e=>{e?(0,tT.MK)({messageType:"startPinning",documentId:g.id,startingUrl:m,location:"editor_sidebar"}):((0,F.L9)("pins__started_pinning_no_extension",{location:"editor_sidebar"}),S(!0))})},onCopyLink:()=>{if(z&&y){(0,F.L9)("copy_link_hard_limit_reached",{location:"editor_sidebar_2022"}),j(!0);return}let e=(0,tx.W0)(g.id,g.name,g.type,{altApi:n});(0,F.L9)("got_share_link",{location:"editor_sidebar_2022",link:e}),tn()(e),B(!0),setTimeout(()=>B(!1),800),b((0,tc.$C)({document:g,permissions:M,location:"editor_sidebar_2022"})).then(()=>f());try{td.Z.trackCopyLink(null==g?void 0:g.id,"editor_sidebar_2022")}catch(e){console.error(e)}},setMultiSelectMode:l,onCombineSteps:s,onCloneAndMove:o,onMagicMerge:a,onDeleteSteps:c,onUndoMagicMerge:u,withReviewMenu:(0,eO.By)(P)&&(null==P?void 0:P.show_process_tags),stepActionsMenuState:x,dispatchStepActionsMenu:p,selectedStepIds:v}),w&&(0,r.jsx)(eq.Z,{onClose:()=>j(!1),document:g,desktopOnly:n}),N&&(0,r.jsx)(tL,{onClose:()=>k(!1),documentId:g.id,documentName:g.name}),C&&(0,r.jsx)(tB,{onCancel:()=>S(!1),onContinue:()=>{(0,F.L9)("pins__clicked_visit_extension_store",{location:"editor_sidebar"}),S(!1),window.open((0,tT.Xk)(),"_blank")}})]})},tR=i(15254),tG=i(61519),tO=i(7118);let tU=(e,t,i)=>(0,tO.d)()?(0,r.jsx)("a",{href:"#",onClick:t=>{t.stopPropagation(),t.preventDefault(),(0,tO.k1)().openURLInBrowser(e)},children:t},i):(0,r.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:t},i),tV=(e,t,i)=>(0,r.jsx)("a",{className:"cursor-pointer break-all text-indigo-600 hover:text-indigo-700",href:e,target:"_blank",rel:"noreferrer",children:t},i);var tW=i(69876),tH=i(62136),tq=i(71203);let tK=e=>{let{visible:t,title:i,description:n}=e;return(0,r.jsx)(ez.Vq,{open:t,children:(0,r.jsxs)(ez.cZ,{children:[(0,r.jsx)(ez.fK,{title:i,description:n}),(0,r.jsx)(ez.SL,{children:(0,r.jsx)("div",{className:"m-auto mt-8 flex",children:(0,r.jsx)(eI.BounceLoader,{css:"override",size:50,color:"#6466f1",loading:!0})})})]})})};tK.defaultProps={title:"Alert"};var tQ=i(52929),tJ=i.n(tQ),tY=i(56069),tX=i(50565);let t$=(e,t)=>"".concat((0,tx.W0)(e.id,e.name,e.type,{openEditMode:!0,showSuccess:!0}),"#").concat(encodeURIComponent(t));var t0=e=>{var t;let[i,n]=(0,L.useState)(""),[l,s]=(0,L.useState)(!1),[o,a]=(0,L.useState)([]),[r,d]=(0,L.useState)(!1),{bulkEditorContext:c}=null!==(t=(0,P.ZP)())&&void 0!==t?t:{},{selectedIds:u}=(0,T.v9)(E.Bf),{data:m,refetch:x,fetchNextPage:p,...h}=(0,eS.useInfiniteQuery)({queryKey:["documents",e],queryFn:async e=>{let{pageParam:t=0}=e;return tX.Z.listWritableDocuments({searchQuery:i,skip:t,getFirst:20})},enabled:!!e});(0,L.useEffect)(()=>{x()},[i,x]),(0,L.useEffect)(()=>{var e;a(tJ()(null==m?void 0:null===(e=m.pages)||void 0===e?void 0:e.flatMap(e=>null==e?void 0:e.scribe_documents),(e,t)=>(null==e?void 0:e.id)===(null==t?void 0:t.id)))},[null==m?void 0:m.pages]);let v=eg()(()=>{p({pageParam:(null==o?void 0:o.length)||0})},400),g=async t=>{let i=await tY.Z.copyActionsToDocument({actionIds:u,scribeDocumentId:t});return(0,F.L9)("copy_scribe_steps_to",{originDocumentId:e,targetDocumentId:t,originalActionIds:u,destinationStepIds:i,location:c}),i};return{isCopying:l,exportSelectedActionsToScribe:async e=>{s(!0),d(!1);try{let t=(await g(e.id))[0].split("-")[0];return t$(e,t)}catch(t){throw d(!0),console.error("Failed to export actions to Scribe: ".concat(e.id),t),t}finally{s(!1)}},writableScribes:o,searchWritableScribes:n,getAdditionalScribes:v,isCopyingError:r,setIsCopyingError:d,...h}},t1=i(95861),t2=i(22333),t4=e=>{let{visible:t,onCancel:i,originFileId:n,onSuccess:l}=e,{exportSelectedActionsToScribe:s,isCopying:o,isCopyingError:a,setIsCopyingError:d}=t0(n),c=async e=>{o||l(await s(e))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t2.Z,{isOpen:a,onOpenChange:()=>d(!a),onPrimaryActionClick:()=>d(!1)}),(0,r.jsx)(t1.Z,{writableDocumentsOnly:!0,open:t,onClose:i,shouldNavigateToResult:!1,onEmbedResult:c,forcedResultsType:"all"})]})},t5=i(70086),t3=i(40439),t9=i(40668),t6=i(34422),t8=i(38289),t7=e=>{let{celebrating:t,onConfettiDone:i}=e,n=async()=>{let e=(0,t8.Z)({particleCount:250,spread:250,angle:60,origin:{x:0,y:.75},scalar:1.35,colors:["#3C2EDD","#F45397","#3AC3FF","#FFB525","#10B981"]}),t=(0,t8.Z)({particleCount:250,spread:250,angle:120,origin:{x:1,y:.75},scalar:1.35,colors:["#3C2EDD","#F45397","#3AC3FF","#FFB525","#10B981"]});await Promise.all([e,t]),i&&i()};return(0,L.useEffect)(()=>{"ongoing"===t&&setTimeout(()=>n(),1e3)},[t]),null},ie=i(43879),it=i(70360),ii=e=>{let{visible:t,onCancel:i=()=>{},onSuccess:n=()=>{},scribeFileData:l,visibleActions:s}=e,o=(0,T.I0)(),[a,d]=(0,L.useState)(!1),[c,m]=(0,L.useState)(!1),{bulkEditorContext:x}=(0,P.ZP)(),p=()=>{m(!1),d(!1)},h=()=>{n(),setTimeout(p,200)},v=s.filter(e=>e.selected);return(0,r.jsx)(it.Z,{actionText:a?"Deleting":c?"Retry":"Delete ".concat(v.length," Step").concat(v.length>1?"s":""),cardContent:c&&(0,r.jsx)(ie.Z,{title:"There was an error deleting the steps.",variant:"error"}),description:"This action is permanent. Are you sure you want to delete selected steps?",open:t,title:"Confirm Delete",loading:a,onCancel:i,onDelete:()=>{var e;d(!0),m(!1),(null==s?void 0:null===(e=s.includes)||void 0===e?void 0:e.call(s,e=>"newActionPlaceholderId"===e.id))&&(0,F.L9)("user_deleted_placeholder_step",{file_id:l.id,location:x||"editor_step_actions"}),o((0,E.oZ)({scribeDocumentId:l.id,actions:s})).then(u.SI).then(()=>{o((0,tc._k)(l)),o((0,tc.ii)(l.id)),(0,F.L9)("edited_file_deleted_multiple_actions",{file_id:l.id,location:x||"editor_step_actions"}),h()}).catch(()=>{m(!0),d(!1)})}})},il=i(77597),is=i(73943),io=i(78483);(l=o||(o={})).INVALID_FILE_TYPE="File type must be jpeg, png, gif or webp.",l.IMAGE_TOO_LARGE="Image resolution must be under 10000 x 10000 pixels.",l.FILE_TOO_LARGE="File size must be under 5mb.",l.FILE_READ_ERROR="Failed to read file.",l.IMAGE_LOAD_ERROR="Failed to load image.",l.UNKNOWN="The image could not be loaded.";let ia={loadImage:e=>new Promise((t,i)=>{let n=new FileReader;n.onload=n=>{var l;let s=new Image;s.onload=()=>{var i;t({base64:null===(i=n.target)||void 0===i?void 0:i.result,type:e.type.split("/")[1],dimensions:{width:s.width,height:s.height}})},s.onerror=()=>i(Error("Failed to load image.")),s.src=null===(l=n.target)||void 0===l?void 0:l.result},n.onerror=()=>i(Error("Failed to read file.")),n.readAsDataURL(e)})},ir=["image/jpeg","image/png","image/gif","image/webp"];var id=e=>{let{onImageSelected:t}=e,[i,n]=(0,L.useState)(""),l=(0,L.useRef)(null),s=(0,L.useCallback)(async e=>{if(e){if(!ir.includes(e.type)){n(o.INVALID_FILE_TYPE);return}if(e.size>512e4){n(o.FILE_TOO_LARGE);return}n("");try{let i=await ia.loadImage(e);if(Math.max(i.dimensions.width,i.dimensions.height)>1e4){n(o.IMAGE_TOO_LARGE);return}t(i)}catch(e){n(e instanceof Error?e.message:o.UNKNOWN)}}},[t]);return(0,L.useEffect)(()=>{let e=e=>{var t;let i=Array.from((null==e?void 0:null===(t=e.clipboardData)||void 0===t?void 0:t.items)||[]).find(e=>-1!==e.type.indexOf("image")),n=null==i?void 0:i.getAsFile();n&&s(n)};return document.addEventListener("paste",e),()=>{document.removeEventListener("paste",e)}},[s]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid h-full min-h-52 w-full place-items-center rounded-md border-2 border-dashed border-slate-300 bg-slate-50",onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault(),s(e.dataTransfer.files[0])},"data-testid":"image-picker",children:(0,r.jsxs)("div",{children:["Drag and drop or"," ",(0,r.jsx)("span",{role:"button",tabIndex:0,onClick:()=>{var e;return null==l?void 0:null===(e=l.current)||void 0===e?void 0:e.click()},className:"cursor-pointer bg-transparent text-indigo-600 underline","data-testid":"upload-image-button",onKeyDown:e=>{if("Enter"===e.key||" "===e.key){var t;null==l||null===(t=l.current)||void 0===t||t.click()}},children:"choose a file"}),(0,r.jsx)("input",{"data-testid":"upload-image-hidden-input",type:"file",name:"media-upload",id:"media-upload",onChange:e=>e.target.files&&s(e.target.files[0]),accept:"image/jpeg, image/png, image/gif, image/webp",className:"hidden",ref:l})]})}),i&&(0,r.jsx)(io.j,{"data-testid":"image-error-banner",icon:O.eHv,variant:"destructive",children:i})]})},ic=i(16863);let iu=e=>{var t;let{actionId:i,onClose:n,scribeFile:l}=e,{data:s,isLoading:o}=(0,S.ZP)(i),a=(null==s?void 0:null===(t=s.screenshot)||void 0===t?void 0:t.upload_status)===tH.Z0.Uploaded||!!(null==s?void 0:s.external_screenshot_url),[c,u]=(0,L.useState)(null),{mutateAsync:m,isLoading:x}=(0,ic.s1)(),p=(0,T.I0)(),h=(0,T.v9)(e=>(0,E.Ry)(e,i));if(i&&o)return null;let v=()=>p((0,E.Lw)({actionId:i,screenshotUrl:void 0})),g=()=>{v(),null==n||n()},f=async e=>{e.preventDefault(),e.stopPropagation(),c&&(v(),(0,F.L9)("clicked_save_repace_image"),m({id:i,screenshot:{data:{data:c.base64}}}).then(()=>{p((0,tc._k)(l)),g()}))};return(0,r.jsx)(ez.Vq,{onOpenChange:()=>{(0,F.L9)("clicked_replace_image_x_out"),g()},open:!0,children:(0,r.jsxs)(ez.cZ,{"data-testid":"action-add-replace-screenshot-dialog",children:[(0,r.jsx)(ez.fK,{title:a?"Replace image":"Add an image",description:"JPG, PNG, GIF, or WebP File (5 MB or less)"}),(0,r.jsxs)(ez.SL,{children:[(null==c?void 0:c.base64)?(0,r.jsx)("img",{"data-testid":"action-add-replace-screenshot-image",alt:"",src:c.base64,className:"h-full w-full object-contain"}):(0,r.jsx)(id,{onImageSelected:e=>u(e)}),h.length>0&&(0,r.jsx)(io.j,{"data-testid":"image-upload-error-banner",variant:"destructive",children:(0,il.L)(null==h?void 0:h[0])?"Error uploading image, please try again.":null==h?void 0:h[0]})]}),(0,r.jsx)(ez.cN,{primaryAction:{children:x?(0,r.jsx)(M.G,{icon:d.AX7,className:"animate-spin text-xl text-white"}):"".concat(a?"Replace":"Save"," Image"),onClick:f,disabled:!c},secondaryAction:c?{children:"Choose Again",onClick:e=>{e.preventDefault(),e.stopPropagation(),(0,F.L9)("clicked_choose_again"),u(null),v()}}:void 0})]})})},im=e=>{let{message:t}=e;return(0,r.jsxs)("div",{role:"alert",children:[(0,r.jsx)("p",{children:"Something went wrong:"}),(0,r.jsx)("pre",{children:t})]})};var ix=e=>(0,r.jsx)(is.Z,{fallback:im,children:(0,r.jsx)(iu,{...e})}),ip=i(45208),ih=i(95324),iv=i(57075),ig=i(95351);i(17827);let ib={threshold:[0,1]},i_=new WeakMap,iw=e=>e.forEach(e=>{let t=i_.get(e.target);t&&t.call(null,e)}),ij=()=>(n||(n=new IntersectionObserver(iw,ib)),n),iy=e=>{n||(ib={threshold:[.05,1],...e||{}})},iN=(e,t)=>{if(!(!e||i_.has(e)))return i_.set(e,t),ij().observe(e),()=>ik(e)},ik=e=>{e&&(n.unobserve(e),i_.delete(e))},iC=(e,t)=>{let i=(0,L.useRef)(),n=(0,L.useRef)({intersecting:!1,entire:!1});return t&&iy(t),(0,L.useEffect)(()=>(iN(i.current,t=>{let i=1===t.intersectionRatio;if(t.isIntersecting!==n.current.intersecting||i!==n.current.entire){n.current.intersecting=t.isIntersecting,n.current.entire=i;let l={x:t.intersectionRect.x,y:t.intersectionRect.y,width:t.intersectionRect.width,height:t.intersectionRect.height};e(t.isIntersecting,i,l)}}),()=>{ik(i.current)}),[i,e]),i};var iS=i(68609),iI=i(86505);let iL=e=>{let[t,i]=(0,L.useState)({value:e,ts:Date.now()}),n=(0,L.useCallback)(e=>{i(t=>"function"==typeof e?{value:e(t.value),ts:Date.now()}:"object"==typeof e&&"ts"in e&&"value"in e?e.ts>=t.ts?e:t:{value:e,ts:Date.now()})},[i]);return[t.value,n]},iT=(0,L.forwardRef)((e,t)=>{let{on:i,onToggle:n}=e;return(0,r.jsx)("button",{ref:t,className:(0,Z.cn)("flex h-8 w-8 cursor-pointer flex-col items-center justify-center rounded-full focus-visible:outline-none",i?"bg-slate-800":"border border-blueGray-200 bg-white"),onClick:n,"aria-label":"Toggle InterAction Menu",children:(0,r.jsx)(ek.p22,{className:(0,Z.cn)("relative transition duration-200 ease-in-out",i?"rotate-45 text-white":"text-blueGray-500"),size:24})})});var iE=e=>{let{className:t,children:i,icon:n,onClick:l,dataTestID:s}=e;return(0,r.jsxs)("button",{className:(0,Z.cn)("inter-action-button flex h-12 cursor-pointer flex-col items-center gap-0.5 bg-transparent",t),onClick:l,"data-testid":s,children:[(0,r.jsx)(M.G,{icon:n}),(0,r.jsx)("span",{className:"font-sans text-sm font-medium text-slate-200",children:i})]})};let iZ=(0,L.forwardRef)((e,t)=>{let{onStepClick:i,onTipClick:n,onAlertClick:l,onRecordClick:s,onHeaderClick:o,onGifClick:a,...d}=e;return(0,r.jsx)("div",{ref:t,className:"flex rounded-2xl bg-slate-800 px-6 pb-3 pt-4 shadow-xl",...d,children:(0,r.jsxs)("div",{className:"grid grid-cols-3 justify-between gap-4 lg:grid-cols-6 lg:gap-5",children:[(0,r.jsx)(iE,{icon:O.CPW,onClick:i,dataTestID:"add-text",children:"Step"}),(0,r.jsx)(iE,{icon:O.X8G,onClick:n,dataTestID:"add-tip",children:"Tip"}),(0,r.jsx)(iE,{icon:O.e7M,onClick:l,dataTestID:"add-alert",children:"Alert"}),(0,r.jsx)(iE,{icon:O.W3K,onClick:s,dataTestID:"add-more-steps",children:"Capture"}),(0,r.jsx)(iE,{icon:O.BOF,onClick:o,dataTestID:"add-section",children:"Header"}),(0,r.jsx)(iE,{icon:O.Z30,onClick:a,dataTestID:"add-GIF",children:"GIF"})]})})});var iF=e=>{let{insertIndex:t,noTranslate:i,recordMoreSteps:n,onAddGif:l,...s}=e,[o,a]=iL(!1),{context:d,x:c,y:m,strategy:x,refs:p}=(0,iI.YF)({open:o,onOpenChange:e=>{a(e)},middleware:[(0,iS.cv)(12),(0,iS.X5)({allowedPlacements:["bottom","top"]})]}),h=(0,iI.bQ)(d),{getReferenceProps:v,getFloatingProps:g}=(0,iI.NI)([h]),{visibleActions:f}=(0,T.v9)(E.JR),{scribeFile:b}=(0,T.v9)(tc.Q),_=(0,T.I0)(),{refetchScribeFile:w}=(0,eu.c)(null==b?void 0:b.id),j=e=>()=>{a(!1);let i=null;t>0&&(i=f[t-1].id);let n={kind:e};("tip"===e||"warning"===e)&&(n={kind:"instruction",instructionType:e});let l={value:!1,ts:Date.now()};_((0,E.LT)({...n,addAfterActionId:i,documentId:b.id})).then(u.SI).then(()=>{var e;w(),_((0,tc.Lg)({id:null==b?void 0:b.id,omitComments:!0})),_((0,E.Tf)({documentId:null==b?void 0:b.id,toActionId:null===(e=f[f.length-1])||void 0===e?void 0:e.id})),_((0,tc.ii)(null==b?void 0:b.id))}).finally(()=>{a(l)}),(0,F.L9)("edited_file_add_".concat(n.kind),{file_id:b.id})};return(0,r.jsxs)("div",{...s,className:(0,Z.cn)("absolute bottom-0 flex h-6 w-full flex-row items-center overflow-visible transition ease-in-out",{"translate-y-10":!i},s.className),"data-testid":"inter-action-menu",children:[(0,r.jsx)("div",{className:"flex h-px flex-1 border-t border-dashed border-blueGray-200"}),(0,r.jsx)(iT,{ref:p.setReference,on:o,onToggle:()=>{a(!o);let e=o?"close_add_step_menu":"open_add_step_menu";(0,F.L9)(e)},...v()}),o&&(0,r.jsx)(iI.ll,{children:(0,r.jsx)(iZ,{ref:p.setFloating,style:{position:x,top:null!=m?m:0,left:null!=c?c:0,zIndex:20},className:"flex rounded-2xl bg-slate-800 px-6 pb-3 pt-4 shadow-xl",onStepClick:j("instruction"),onTipClick:j("tip"),onAlertClick:j("warning"),onRecordClick:()=>{a(!1);let e=null,i=t+1;i>0&&(e=f[i-1]?f[i-1].id:null),null==n||n(e)},onHeaderClick:j("section"),onGifClick:()=>{(0,F.L9)("add_gif_button"),a(!1),l()},...g()})}),(0,r.jsx)("div",{className:"flex h-px flex-1 border-t border-dashed border-blueGray-200"})]})},iB=i(42135),iD=e=>{let{scribeFile:t,visible:i,onClose:n,...l}=e,s=(0,T.I0)(),o=(0,ej.useRouter)();return(0,r.jsx)(tF.Z,{visible:i,title:"Account Required",onCancel:n,children:(0,r.jsxs)("div",{className:"flex min-w-[480px] flex-col items-start px-6",children:[(0,r.jsx)("p",{className:"my-8 font-sans text-gray-600",children:"You must be signed in to comment on a Scribe."}),(0,r.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,r.jsx)(tZ.Z,{variant:"social",onClick:n,children:"Cancel"}),(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)(tZ.Z,{variant:"primary",className:"mr-4",onClick:()=>{(0,F.L9)("clicked_signup_from_comment",{scribeId:null==t?void 0:t.id}),window.open("/signup","_blank")},children:"Sign Up"}),(0,r.jsx)(tZ.Z,{variant:"primary",onClick:()=>{(0,F.L9)("clicked_signin_from_comment",{scribeId:null==t?void 0:t.id}),s(iv.Gb.actions.setAuthenticatedRedirectUrl({url:o.asPath})),o.push("/signin")},children:"Sign In"})]})]})]})})},iM=i(29582),iz=i(19973),iP=i(83828);let iA={},iR={};class iG extends L.Component{componentDidMount(){iA[this.props.draggableId]=this}componentWillUnmount(){delete iA[this.props.draggableId]}render(){return(0,r.jsx)(iP._l,{...this.props})}constructor(...e){super(...e),this.callHandler=(e,t)=>{this.props[e]&&this.props[e](t)},this.getPayload=()=>this.props.payload}}class iO extends L.Component{componentDidMount(){iR[this.props.droppableId]=this}componentWillUnmount(){delete iR[this.props.droppableId]}render(){return(0,r.jsx)(iP.bK,{...this.props})}constructor(...e){super(...e),this.callHandler=(e,t)=>{this.props[e]&&this.props[e](t)},this.getPayload=()=>this.props.payload}}class iU extends L.Component{render(){let e={...this.props,onBeforeDragStart:this.handleEvent("onBeforeDragStart"),onDragStart:this.handleEvent("onDragStart"),onDragUpdate:this.handleEvent("onDragUpdate"),onDragEnd:this.handleEvent("onDragEnd")};return(0,r.jsx)(iP.Z5,{...e})}constructor(...e){super(...e),this.callHandler=(e,t,i)=>{iR[e]&&iR[e].callHandler(t,i)},this.callHandlerOnDraggable=(e,t,i)=>{iA[e]&&iA[e].callHandler(t,i)},this.getPayload=e=>iR[e]&&iR[e].getPayload(),this.getDraggablePayload=e=>iA[e]&&iA[e].getPayload(),this.handleEvent=e=>t=>{let{source:i,destination:n,draggableId:l}=t;i&&(i.payload=this.getPayload(i.droppableId)),n&&(n.payload=this.getPayload(n.droppableId)),t.payload=this.getDraggablePayload(l),this.callHandlerOnDraggable(l,e,t),n&&this.callHandler(n.droppableId,e,t),n&&n.droppableId===i.droppableId||this.callHandler(i.droppableId,e,t),this.props[e]&&this.props[e](t)}}}var iV=i(54400);let iW=e=>{var t;let{id:i,addScreenshotVisible:n,setAddScreenshotVisible:l,scribeFileId:s,gifButton:o,beforeFirst:a,location:d}=e,{mutateAsync:c}=(0,ic.s1)(),m=!!(0,T.v9)(E.SL),x=(0,T.I0)(),{scribeFile:p}=(0,T.v9)(tc.Q),[h,v]=(0,L.useState)(!1),g="Add a Screenshot",f="Insert Screenshot",b=a?null:i;"Image Icon"===d?(g="Add an Image",f="Add Image"):"Gif Button"===d&&(g="Add a GIF",f="Add GIF");let _=async e=>{let{base64:t,dimensions:n}=e;if(((null==n?void 0:n.width)||0)*((null==n?void 0:n.height)||0)/1e3>1e5){v(!0);return}let a=i;o&&(a=(await x((0,E.LT)({kind:"instruction",addAfterActionId:b,documentId:s,externalScreenshotUrl:null})).then(u.SI)).newAction.id),c({id:a,screenshot:{data:{data:t}},position:{x:((null==n?void 0:n.width)||0)/2,y:((null==n?void 0:n.height)||0)/2},should_delete_screenshot:!1,device_pixel_ratio:1}).then(()=>{l(!1),x((0,tc._k)(p))}),(0,F.L9)("edited_file_add_screenshot_to_step",{file_id:p.id});let r="/shared/".concat(window.location.pathname.split("/")[2]),d=i.split("-")[0],m="".concat(window.location.origin+r,"#").concat(d);(0,F.L9)("manually_add_screenshot",{link:m})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(iV.Z,{isLoading:m,addScreenshotVisible:n,setAddScreenshotVisible:l,modalTitle:g,uploadButtonLabel:f,onUpload:_,addAfterActionId:b,documentId:s,gifButton:o,location:d,superOrg:null==p?void 0:null===(t=p.organization_owner)||void 0===t?void 0:t.super_organization}),h&&(0,r.jsx)(tq.Z,{variant:"danger",title:"Upload failed",description:"Please upload media with a resolution under\n                    10000 x 10000 pixels.",actionTitle:"OK",onAction:()=>{v(!1),l(!0)},showCancel:!0,onCancel:()=>{v(!1),l(!0)},visible:!0},"dimensionsTooBig")]})},iH=e=>{let{message:t}=e;return(0,r.jsxs)("div",{role:"alert",children:[(0,r.jsx)("p",{children:"Something went wrong:"}),(0,r.jsx)("pre",{children:t})]})};var iq=e=>(0,r.jsx)(is.Z,{fallback:iH,children:(0,r.jsx)(iW,{...e})}),iK=i(61320),iQ=i.n(iK);let iJ=e=>{var t,i,n,l,s,o;let{comment:a,inDeleteMode:d,actionId:c,canEdit:u}=e,m=(0,T.I0)(),x=(null==a?void 0:null===(t=a.comment_user)||void 0===t?void 0:t.first_name)||(null==a?void 0:null===(i=a.comment_user)||void 0===i?void 0:i.last_name);return(0,r.jsxs)("div",{className:(0,Z.cn)("relative mx-2 flex flex-row border-t border-blueGray-300 p-2 first:mt-0",{"first:border-t-transparent":d}),children:[u&&(0,r.jsx)("button",{className:"absolute right-2 top-2 flex cursor-pointer items-center justify-center bg-transparent",onClick:()=>{m((0,E.T)({commentedActionId:c,commentId:null==a?void 0:a.id,deletionToken:null==a?void 0:a.deletion_token}))},children:(0,r.jsx)(ek.uaR,{className:"text-base text-blueGray-400 hover:text-blueGray-600"})}),(0,r.jsx)(eX.qE,{size:"md",uuid:null==a?void 0:null===(n=a.comment_user)||void 0===n?void 0:n.id,children:(null==a?void 0:null===(l=a.comment_user)||void 0===l?void 0:l.profile_picture_url)?(0,r.jsx)(eY(),{src:null==a?void 0:null===(s=a.comment_user)||void 0===s?void 0:s.profile_picture_url,width:32,height:32,alt:x}):x}),(0,r.jsxs)("div",{className:"ml-2 flex flex-1 flex-col justify-center",children:[(0,r.jsxs)("span",{className:"text-sm font-bold text-slate-700",children:[(0,eO.O)(null==a?void 0:a.comment_user),(0,r.jsx)("span",{className:"ml-2 text-sm font-normal text-slate-400",children:null===(o=iQ()(null==a?void 0:a.created))||void 0===o?void 0:o.fromNow()})]}),(0,r.jsx)("span",{className:"font-sans text-sm font-normal text-slate-700",children:(0,r.jsx)(eC.Z,{componentDecorator:tV,children:null==a?void 0:a.content})})]})]})},iY=(e,t)=>(0,r.jsxs)("div",{className:"rounded-md bg-red-100 p-4",children:[(0,r.jsx)("h1",{className:"text-red-500",children:"Something went wrong"}),(0,r.jsx)("p",{className:"text-red-500",children:e.toString()}),(0,r.jsx)("p",{className:"text-red-500",children:t.componentStack})]});var iX=e=>(0,r.jsx)(is.Z,{fallback:iY,children:(0,r.jsx)(iJ,{...e})});let i$=e=>{var t,i;let{...n}=e,l=(0,T.I0)(),[s,o]=(0,L.useState)(""),[a,d]=(0,L.useState)(!1),[c,u]=(0,L.useState)(!1),[m,x]=(0,L.useState)(n.comments),{data:p}=(0,$.ZP)(),{isErrorActions:h}=(0,T.v9)(E.JR);(0,L.useEffect)(()=>{x(n.comments)},[n.comments]);let v=e=>{d(!1),e?(l((0,E.Ir)({commentedActionId:n.action.id,content:e,commentUserId:null==p?void 0:p.id})),o(""),(0,F.L9)("user_commented_on_scribe",{user_id:null==p?void 0:p.id,file_id:n.scribeFileId,content:e})):d(!0)},g=()=>p&&(null==p?void 0:p.id)===n.userOwnerId,f=()=>null==p?void 0:p.organizations.find(e=>e.id===n.organizationOwnerId);return(0,r.jsxs)("div",{className:(0,Z.cn)("rounded-lg bg-white pb-0 pt-2"),children:[(0,r.jsxs)("div",{className:(0,Z.cn)("flex w-full flex-row items-center justify-between px-4 py-2.5",{"pb-1.5":(null==m?void 0:m.length)===0}),children:[(0,r.jsxs)("span",{className:"font-sans text-xs font-bold uppercase tracking-wider text-blueGray-500",id:"comment-label",children:[(null===(t=n.comments)||void 0===t?void 0:t.length)>0&&(null===(i=n.comments)||void 0===i?void 0:i.length)," Comments"]}),(0,r.jsx)("button",{className:"flex cursor-pointer items-center justify-center bg-transparent text-blueGray-500 hover:text-blueGray-600",onClick:()=>{a&&d(!1),u(!c)},children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"font-sans text-sm",children:"Close"}),(0,r.jsx)(M.G,{className:"ml-1 text-base",icon:O.YIN})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"font-sans text-sm",children:"Add"}),(0,r.jsx)(M.G,{className:"ml-1 text-base",icon:O.XoX})]})})]}),(null==m?void 0:m.length)>0&&(null==m?void 0:m.map(e=>(0,r.jsx)(iX,{comment:e,inDeleteMode:n.inDeleteMode,actionId:n.action.id,canEdit:(e.deletion_token||n.editableComments)&&p&&(e.comment_user.id===(null==p?void 0:p.id)||g()||f())&&!n.inDeleteMode},e.id))),(0,r.jsx)("div",{className:(0,Z.cn)("flex h-12 flex-1 flex-shrink-0 flex-row items-center px-2 transition-all duration-500 ease-in-out",{"pointer-events-none max-h-0 opacity-0":!c,"mt-2 h-[44px] max-h-[44px] opacity-100":c}),children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.viewer?n.token?v(s):n.setShowAuthModal(!0):v(s)},className:"flex w-full",children:[(0,r.jsx)("input",{placeholder:"Write your comment...",value:s,name:"text",onChange:e=>o(e.target.value),className:"flex w-full rounded-lg border border-blueGray-300 px-2 text-sm text-blueGray-700 placeholder-blueGray-400 focus:border-indigo-500 focus:outline-none",title:"Write your comment","aria-labelledby":"comment-label"}),(0,r.jsx)(tZ.Z,{type:"submit",disabled:n.inDeleteMode,variant:"outlineLight",className:"ml-4 h-10 !border-blueGray-300 !text-sm",children:"Post"})]})}),a&&(0,r.jsx)("span",{className:"mb-1 ml-2.5 text-xs text-red-600",children:"Please write a comment."}),h&&(0,r.jsx)("span",{className:"mb-1 ml-2.5 text-xs text-red-600",children:"Something went wrong try again."})]})},i0=()=>(0,r.jsx)("div",{className:"rounded-md bg-red-100 p-4",children:(0,r.jsx)("h1",{className:"text-red-500",children:"Something went wrong"})});var i1=e=>(0,r.jsx)(is.Z,{fallback:i0,children:(0,r.jsx)(i$,{...e})});let i2=e=>{let{onCancel:t,onDelete:i,stepLabel:n,variant:l,...s}=e;return(0,r.jsxs)("div",{className:(0,Z.cn)("flex w-full items-center justify-between bg-red-500 p-4 text-white shadow","attached"===l?"rounded-t-2xl":"mb-2 rounded-2xl"),...s,children:["Are you sure you want to permanently delete this ",n,"?",(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(tZ.Z,{variant:"outlineDark",size:"small",onClick:t,children:"Cancel"}),(0,r.jsx)(tZ.Z,{variant:"outlineDark",size:"small",onClick:i,"data-testid":"action-delete",children:"Delete"})]})]})};i2.defaultProps={variant:"attached",stepLabel:"step"};let i4=()=>(0,r.jsx)("div",{className:"rounded-md bg-red-100 p-4",children:(0,r.jsx)("h1",{className:"text-red-500",children:"Something went wrong"})});var i5=e=>(0,r.jsx)(is.Z,{fallback:i4,children:(0,r.jsx)(i2,{...e})}),i3=i(69623),i9=i(46815),i6=i(1643),i8=i(30218),i7=i(14616),ne=e=>{let{id:t,description:i,transcribed_description:n,selected:l,mode:s,isConfirmingDelete:o,setIsConfirmingDelete:a,onCopyLinkToStep:d,onSelectedChange:u,handleShiftClick:m,selectDisabled:x,multiSelectModeOn:p,scribeFileId:h,onDuplicate:v}=e,g=n||i,[f,b]=(0,L.useState)(!1),[_,w]=(0,L.useState)(!1),[j,y]=(0,L.useState)(g),[N,k]=(0,L.useState)(!1),C=(0,T.I0)(),{scribeFile:I}=(0,T.v9)(tc.Q),{refetch:E}=(0,S.ol)(h),{mutateAsync:B}=(0,ic.s1)(),D=()=>{(0,F.L9)("edited_file_section",{type:"title",id:t});let e=""===j.trim()?g:j;y(e),B({id:t,description:e}).then(()=>{E(),C((0,tc.Lg)({id:null==I?void 0:I.id,omitComments:!0}))}),b(!1)},z=(0,i6.Z)(()=>{f&&D()}),P="editor"===s&&!o&&"newActionPlaceholderId"!==t;return(0,r.jsxs)("div",{className:"group relative mt-4 flex h-auto w-full flex-row items-center font-bold text-blueGray-600",onClick:e=>{m(e)},children:[(0,r.jsx)("div",{className:(0,Z.cn)(["absolute m-0 opacity-0 hover:!opacity-100",{"!opacity-100":l||p,hidden:"viewer"===s}]),children:(0,r.jsx)(R.Z,{checked:l,onValueChange:e=>{u(e)},className:"ml-1.5",disabled:x})}),!(0,iB.m)(s)&&(0,r.jsx)("button",{"aria-label":"Copy link to section",onClick:e=>{var t;null==d||d(),w(!0),setTimeout(()=>w(!1),800),null===(t=e.currentTarget)||void 0===t||t.blur()},className:"absolute bg-slate-50 opacity-0 transition-all group-hover:opacity-100 group-focus:opacity-100",children:(0,r.jsx)(G.Z,{visible:!0,appearance:"left",variant:"small-dark",animated:!1,content:(0,r.jsx)("div",{className:"px-2.5 py-1.5",children:(0,r.jsx)("p",{className:"m-0 leading-4",style:{textShadow:"0px 1px 1px rgba(0, 0, 0, 0.3)"},children:_?"Copied":"Copy Link to Section"})}),children:(0,r.jsx)(M.G,{className:"cursor-pointer text-slate-600",icon:_?c.LEp:O.nNP})})}),(0,r.jsxs)("div",{className:"flex w-full items-start",children:[(0,r.jsx)("div",{className:(0,Z.cn)("h-px flex-1 bg-slate-200")}),(0,r.jsx)("div",{"data-testid":"section-description",className:"flex break-words",onClick:()=>{f||"editor"!==s||b(!0)},children:"viewer"!==s&&f?(0,r.jsxs)("div",{className:"relative mx-6 flex items-center",ref:z,children:[(0,r.jsx)("input",{autoFocus:!0,onBlur:D,onFocus:e=>{let t=e.target.value;e.target.value="",e.target.value=t},className:(0,Z.cn)("w-80 flex-grow resize-y rounded-lg border border-blueGray-300 bg-opacity-0 bg-none px-3 py-2 font-sans text-base text-gray-700 focus:outline-none"),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),D())},value:j,onChange:e=>y(e.target.value),placeholder:"Header Title"}),(0,r.jsx)("div",{className:"absolute left-full flex self-center bg-blueGray-50 pr-2",children:(0,r.jsx)(M.G,{icon:c.LEp,className:"mx-2 cursor-pointer rounded-full bg-emerald-100 p-1 text-emerald-500",onClick:e=>{e.stopPropagation(),D()}})})]}):(0,r.jsx)("h2",{className:"m-0 mx-6 mt-[-12px] p-0 text-center text-lg md:text-xl",children:g})}),(0,r.jsx)("div",{className:(0,Z.cn)("h-px flex-1 bg-slate-200")})]}),P&&(0,r.jsx)(i8.Z,{onDelete:()=>a(!0),className:(0,Z.cn)("!right-3 !top-0",N?"opacity-100":"opacity-0"),children:(0,r.jsx)(i7.Z,{onStepActionMenuClick:k,onCopyLinkToStep:d,onDuplicate:v})})]})},nt=i(37892),ni=i(35094),nn=i(37155),nl=e=>{let{ordinal:t,description:i,selected:n,mode:l,handleShiftClick:s,isConfirmingDelete:o,setIsConfirmingDelete:a,commentSection:d,multiSelectModeOn:c,onSelectedChange:u,onCopyLinkToStep:m,hovered:x,scribeFile:p,actionType:h,onEditScreenshot:v,onAddScreenshot:g,onDownloadScreenshotUnavailable:f,isDownloadScreenshotUnavailable:b,onDuplicate:_,setAddScreenshotVisible:w,...j}=e,[y,N]=(0,L.useState)(!1),k=!c&&(0,iB.m)(l)&&!o&&"newActionPlaceholderId"!==j.id,C=k&&!(null==j?void 0:j.screenshot_url)&&!(null==j?void 0:j.external_screenshot_url),S=(0,nt.$7)(j);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:(0,Z.cn)("flex flex-col h-auto w-full p-4 rounded-2xl border box-border ".concat("tip"===h?"border-green-300 bg-green-50":"border-red-300 bg-red-50"),o&&"rounded-none rounded-b-2xl",d&&"rounded-b-none"),onClick:s,children:[(0,r.jsxs)("div",{className:"flex w-full flex-row",children:[(0,r.jsx)(ni.Z,{onSelectedChange:u,handleShiftClick:s,selected:n,id:j.id,kind:h,mode:l,hovered:x,description:i,multiSelectModeOn:c,onCopyLinkToStep:m}),k&&(0,r.jsx)(i8.Z,{onDelete:()=>a(!0),...C&&{onAddScreenshot:g},className:y?"opacity-100":"opacity-0",children:(0,r.jsx)(i7.Z,{onStepActionMenuClick:N,isStepWithScreenshot:!!S||!!(null==j?void 0:j.external_screenshot_url),onCopyLinkToStep:m,onDownloadScreenshot:()=>b?null==f?void 0:f("stack"===j.kind?"download_file":"download_screenshot"):(0,nt.GN)({action:j,scribeFile:p}),onDownloadFullScreenshot:()=>b?null==f?void 0:f("download_full_screenshot"):(0,nt.KI)({action:j,scribeFile:p}),isDownloadScreenshotUnavailable:b,onDuplicate:_,setAddScreenshotVisible:w})})]}),!!S&&(0,r.jsx)(nn.Z,{...j,ordinal:t,onEditScreenshot:v,description:i,mode:l,hovered:x,clickTargetColor:null==p?void 0:p.click_target_color})]}),d&&(0,r.jsx)("div",{className:"overflow-hidden rounded-b-2xl border border-t-0 border-blueGray-300 bg-white px-3 py-2 pb-4",children:d})]})};let ns=(e,t)=>(0,r.jsx)(e,{...t}),no=e=>{var t,i,n,l,s;let o,{mode:a,hovered:r,onDelete:d,isConfirmingDelete:c,setIsConfirmingDelete:u,onCopyLinkToStep:m,commentSection:x,setAddScreenshotVisible:p,external_screenshot_url:h,scribeFile:v,scribeFileId:g,actionType:f,handleShiftClick:b,onEditScreenshot:_,onAddScreenshot:w,onDownloadScreenshotUnavailable:j,onSelectedChange:y,multiSelectModeOn:N,id:k,ordinal:C,description:S,selected:I,timestamp:L,kind:T,instruction_type:E,onDuplicate:Z,showGuideMeStepNotFoundMsg:F=!1,guideMeStepNotFoundMsg:B,onRecaptureStep:D,navigateTabToActionUrlFromExtension:M,isGuiding:z,...P}=e,A=(null==v?void 0:null===(n=v.organization_owner)||void 0===n?void 0:null===(i=n.super_organization)||void 0===i?void 0:null===(t=i.plan)||void 0===t?void 0:t.name)==="free",R=iQ()(null==v?void 0:null===(s=v.organization_owner)||void 0===s?void 0:null===(l=s.super_organization)||void 0===l?void 0:l.created).isAfter("2023-08-09"),G=A&&R,O={...P,mode:a,ordinal:C,multiSelectModeOn:N,hovered:r,description:S,onDelete:d,handleShiftClick:b,onSelectedChange:y,id:k,selected:I,isConfirmingDelete:c,setIsConfirmingDelete:u,onCopyLinkToStep:m,onDuplicate:Z,external_screenshot_url:h};return"warning"===E||"tip"===E?o=ns(nl,{...O,commentSection:x,setAddScreenshotVisible:p,scribeFile:v,actionType:f,onEditScreenshot:_,onAddScreenshot:w,onDownloadScreenshotUnavailable:j,isDownloadScreenshotUnavailable:G,ordinal:C,onSelectedChange:y,kind:T,id:k,description:S}):"section"===T?o=ns(ne,{...O,scribeFileId:g}):i3.PR.includes(T)&&(o=ns(i9.Z,{...O,ordinal:C,scribeFile:v,timestamp:L,commentSection:x,setAddScreenshotVisible:p,onEditScreenshot:_,onAddScreenshot:w,onDownloadScreenshotUnavailable:j,isDownloadScreenshotUnavailable:G,onSelectedChange:y,kind:T,id:k,description:S,showGuideMeStepNotFoundMsg:F,guideMeStepNotFoundMsg:B,onRecaptureStep:D,navigateTabToActionUrlFromExtension:M,isGuiding:z})),o},na=()=>(0,r.jsx)("div",{className:"rounded-md bg-red-100 p-4",children:(0,r.jsx)("h1",{className:"text-red-500",children:"Something went wrong"})});var nr=e=>(0,r.jsx)(is.Z,{fallback:na,children:(0,r.jsx)(no,{...e})});i(1072);var nd=i(25794),nc=i(83226),nu=i(94722),nm=i(98784),nx=i.n(nm),np=i(62278),nh=i(81019),nv=i(52138);let ng=e=>!(e.length>3)&&0===e[0]&&0===e[1]&&0===e[2],nf=function(e,t){let i,n,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[.93,.54,.21,.7];if(l)i="".concat(l.mousePositionX/t.width*100,"%"),n="".concat(l.mousePositionY/t.height*100,"%");else{let l=e.x+e.width/2,s=e.y+e.height/2;i="".concat(l/t.width*100,"%"),n="".concat(s/t.height*100,"%")}let o={...nv.WE,x:i,y:n,rx:"".concat(nv.d/t.width*100,"%"),ry:"".concat(nv.d/t.height*100,"%")};return ng(s)||(o.backgroundColor=s,o.strokeColor=[s[0],s[1],s[2],1]),o},nb=e=>{var t,i;if(!(null==e?void 0:null===(t=e.crop)||void 0===t?void 0:t.width)||!(null==e?void 0:null===(i=e.crop)||void 0===i?void 0:i.height))return;let n=e.crop.width/e.crop.height;return .001>Math.abs(n-nv.Hb)?nv.Hb:.001>Math.abs(n-1)?1:void 0};nd.Pl.redactLabel="Redact Forever",(0,nd.vS)(nd.HD,nd.CG,nd.Tx);let n_={imageReader:(0,nd.UJ)(),imageScrambler:(0,nd.z9)(),imageWriter:(0,nd.PD)({mimeType:"image/jpeg",quality:97,preprocessImageState:async e=>{if(e.annotation){e.hasRemovedDot=!0;for(let t=0;t<e.annotation.length;t++)if(e.annotation[t].id===nv.f3){let i=e.annotation[t];e.mousePercentX=i.x,e.mousePercentY=i.y,e.annotation=[...e.annotation.slice(0,t),...e.annotation.slice(t+1)],e.hasRemovedDot=!1;break}}return e}}),...nd.Ju,markupEditorToolbar:(0,nd.fZ)(nd.Ju.markupEditorToolbar.map(e=>"preset"===e[0]?["preset","Click target",{}]:e)),markupEditorToolStyles:(0,nd.zv)({rectangle:(0,nd.Z$)("rectangle",{backgroundColor:nv.qV,strokeColor:nv.XU,cornerRadius:8,strokeWidth:nv.tA}),line:(0,nd.Z$)("line",{strokeColor:nv.XU,strokeWidth:nv.tA}),sharpie:(0,nd.Z$)("path",{strokeColor:nv.XU,strokeWidth:nv.tA}),arrow:(0,nd.Z$)("line",{strokeWidth:nv.tA,strokeColor:nv.XU,lineEnd:"arrow-solid"}),ellipse:(0,nd.Z$)("ellipse",{backgroundColor:nv.qV,strokeColor:nv.XU,strokeWidth:nv.tA})}),shapePreprocessor:(0,nd.wh)(),locale:{...nd.Px,...nd.PC,...nd.YK,...nd.ni,...nd.Pl}};var nw=(0,L.memo)(e=>{let{src:t,actionId:i,imageState:n,mousePositionX:l,mousePositionY:s,onClose:o,actionKind:a,showPositionIndicator:d=!0,clickTargetColor:c=[.93,.54,.21,.7],hasEditedScreenshot:u}=e,[m,x]=(0,L.useState)(void 0),[p,h]=(0,L.useState)(!1),v=(0,L.useRef)(null),g=(0,L.useRef)(null),f=(0,L.useRef)(!1),b=(0,L.useRef)(!1),_=(0,L.useRef)(!1),w=(0,L.useRef)(!1),[j,y]=(0,L.useState)(!1),{updateGrowthState:N}=(0,er.N)(),{mutate:k}=(0,ic.s1)(),{captureError:C}=(0,nu.Z)(),S=nb(n),{data:I}=(0,$.ZP)();function T(){f.current&&(0,F.L9)("annotate_screenshot"),b.current&&(0,F.L9)("redact_screenshot"),_.current&&(0,F.L9)("crop_resize_screenshot"),w.current&&(0,F.L9)("right_rotate_screenshot")}(0,L.useEffect)(()=>{(null==I?void 0:I.active_organization.super_organization.version_history_enabled)&&(n_.locale.redactLabel="Redact")},[I]),(0,L.useEffect)(()=>{if(m&&d){if(m.size.width*m.size.height/1e3>1e5){y(!0);return}if(v.current){var e,i,o;let r=nx().uniqBy([...(null==n?void 0:n.annotation)||[],...(null==v?void 0:null===(i=v.current)||void 0===i?void 0:null===(e=i.editor)||void 0===e?void 0:e.imageAnnotation)||[]],"id");if(l&&s&&(i3.n7.includes(a)||"stack"===a&&!(0,eA.sY)(t))){let e=nf(null==v?void 0:null===(o=v.current)||void 0===o?void 0:o.editor.imageCrop,m.size,{mousePositionX:l,mousePositionY:s},c);r.push(e)}v.current.editor.history.write({...n,annotation:r})}}},[n,m,l,s,p,c,a,d,t]);let E=(e,t)=>{C(t||"Error in Pintura editor",{tags:{location:"ActionScreenshotEditor",action:e}})},Z=(0,ea.Z)(Y.iS.name);return j?(0,r.jsx)(tq.Z,{variant:"danger",title:"Upload failed",description:"Please upload media with a resolution under\n            10000 x 10000 pixels.",actionTitle:"OK",onAction:()=>{y(!1),x(null),o()},showCancel:!0,onCancel:()=>{y(!1),x(null),o()},visible:!0},"dimensionsTooBig"):(0,r.jsx)(nc.Ck,{...n_,ref:v,enableDropImage:!Z,enablePasteImage:!0,cropSelectPresetOptions:[[void 0,"Custom"],[nv.Hb,"Scribe Default"],[1,"Square"],[1.5,"Landscape"],[.7,"Portrait"]],cropEnableButtonRotateLeft:!1,cropEnableButtonRotateRight:!0,cropEnableRotateMatchImageAspectRatio:"always",cropEnableButtonFlipHorizontal:!1,cropEnableRotationInput:!1,willRevert:()=>new Promise(e=>{e(!0),setTimeout(()=>h(!p),10)}),layoutHorizontalUtilsPreference:"bottom",layoutDirectionPreference:"vertical",utils:["crop","annotate","redact"],src:t?"".concat(t,"&cached=no"):void 0,imageCropAspectRatio:S,imageCropLimitToImage:!0,onClose:()=>{T(),(0,F.L9)("cancel_screenshot_edit"),o()},onLoad:e=>{x(e)},onLoaderror:e=>E("onLoaderror",e.error),onUpdate:e=>{var t,i,n,l,s,o,a,r,d,c,u,x,p,h,v,j,y,N,k;if(!g.current||!m){g.current=e;return}(null===(t=g.current)||void 0===t?void 0:t.redaction)&&(null===(i=g.current)||void 0===i?void 0:i.redaction.length)!==e.redaction.length&&(b.current=!0),(null===(n=g.current)||void 0===n?void 0:n.annotation)&&(null===(l=g.current)||void 0===l?void 0:l.annotation.length)!==e.annotation.length&&(f.current=!0),(null==g?void 0:null===(s=g.current)||void 0===s?void 0:s.crop)&&((null===(a=g.current)||void 0===a?void 0:null===(o=a.crop)||void 0===o?void 0:o.x)!==(null===(r=e.crop)||void 0===r?void 0:r.x)||(null===(c=g.current)||void 0===c?void 0:null===(d=c.crop)||void 0===d?void 0:d.y)!==(null===(u=e.crop)||void 0===u?void 0:u.y)||(null===(p=g.current)||void 0===p?void 0:null===(x=p.crop)||void 0===x?void 0:x.width)!==(null===(h=e.crop)||void 0===h?void 0:h.width)||(null===(j=g.current)||void 0===j?void 0:null===(v=j.crop)||void 0===v?void 0:v.height)!==(null===(y=e.crop)||void 0===y?void 0:y.height))&&(_.current=!0),(null==g?void 0:null===(N=g.current)||void 0===N?void 0:N.rotation)&&(null===(k=g.current)||void 0===k?void 0:k.rotation)!==e.rotation&&(w.current=!0),g.current=e},willRenderShapePresetToolbar:e=>{let t=(0,nd.dS)("div","focal-point-button-wrapper",{class:"my-2"},[(0,nd.dS)("Button","focal-point-button",{label:"Add a click target",onclick:()=>{var e,t,i,l;if(null==v?void 0:null===(e=v.current)||void 0===e?void 0:e.editor){let e=[...(null==v?void 0:null===(i=v.current)||void 0===i?void 0:null===(t=i.editor)||void 0===t?void 0:t.imageAnnotation)||[]],s=null==v?void 0:null===(l=v.current)||void 0===l?void 0:l.editor.imageCrop,o=e.findIndex(e=>e.id===nv.f3),a=o>=0,r={...n,crop:s};if(a){let t=e[o],i=Math.round(.01*(0,nh.ur)(t.x)*m.size.width),n=Math.round(.01*(0,nh.ur)(t.y)*m.size.height),l=i<s.x||n<s.y,a=i>s.x+s.width||n>s.y+s.height;if(l||a){let t=nf(s,m.size,null,c),i=[...e.slice(0,o),t,...e.slice(o+1)];v.current.editor.history.write({...r,annotation:i})}}else{let t=nf(s,m.size,null,c);e.push(t),v.current.editor.history.write({...r,annotation:e})}}}})]);return(0,nd.fC)(t,e),e},onProcess:e=>{let{src:t,dest:n,imageState:l}=e;(0,np.Z)(n).then(e=>{var s;let r={id:i};if(r.user_cropped_screenshot={screenshot_editor_state:l,x:l.crop.x,y:l.crop.y,width:l.crop.width,height:l.crop.height,data:{data:e}},l.hasRemovedDot&&d)r.position={x:null,y:null};else if(l.mousePercentX&&l.mousePercentY){let e=m.size;r.position={x:Math.round(.01*(0,nh.ur)(l.mousePercentX)*e.width),y:Math.round(.01*(0,nh.ur)(l.mousePercentY)*e.height)},"mouse_click_action"!==a&&(r.kind="mouse_click_action")}b.current&&(r.manual_redaction=!0);let c=(null==m?void 0:null===(s=m.dest)||void 0===s?void 0:s.name)!==(null==n?void 0:n.name);l.redaction&&l.redaction.length>0||c?(0,nd.Fq)(t,{imageReader:(0,nd.UJ)(),imageScrambler:(0,nd.z9)(),imageWriter:(0,nd.PD)({mimeType:"image/png",quality:97,preprocessImageState:async()=>{let e={...l};return delete e.crop,e.annotation=[],e}})}).then(e=>{let{dest:t}=e;return(0,np.Z)(t)}).then(e=>{delete r.user_cropped_screenshot.screenshot_editor_state.redaction,k({...r,screenshot:{data:{data:e}}})}).catch(()=>E("onProcess > processImage")):k(r),T(),(0,F.L9)("save_screenshot_edit"),u||N({hasEditedScreenshot:!0}),o()}).catch(()=>E("onProcess > toBase64"))},onProcesserror:e=>E("onProcesserror",e.error)})},(e,t)=>nx().isEqual(nx().omit(e,nx().functions(e)),nx().omit(t,nx().functions(t)))),nj=i(10379).Z,ny=e=>{var t,i,n,l,s,o,a,d,u,m,x;let{mode:p="viewer",recordMoreSteps:h,timestamp:v,ongoingDrag:g,draggingCount:f,multiSelectModeOn:b,id:_,description:w,primaryDrag:j,shiftSelect:y,onSelectedChange:N,selected:k,scribeFile:C,isActive:B,isSideKick:D,isGuiding:z,setLiveIndex:P,index:A=0,selectDisabled:R=!1,showGuideMeStepNotFoundMsg:G=!1,guideMeStepNotFoundMsg:O,onRecaptureStep:U,navigateTabToActionUrlFromExtension:V,...W}=e,[H,q]=(0,L.useState)(!1),[K,Q]=(0,L.useState)(!1),{isLoadingActions:J,visibleActions:X}=(0,T.v9)(E.JR),{data:ee}=(0,$.ZP)(),[et,ei]=(0,L.useState)(!1),en=(0,T.I0)(),el=iC(W.onVisibleChanged,{rootMargin:"-64px 0px 0px 0px"}),[es,eo]=(0,L.useState)(!1),[er]=(0,L.useState)(!1),{token:ed}=(0,T.v9)(iv.G8),ec=null,[eu,em]=(0,L.useState)(!1),[ex,ep]=(0,L.useState)(!1),[eh,ev]=(0,L.useState)(!1),[eg,ef]=(0,L.useState)(!1),eb=(0,iz.Z)(),e_=W.instruction_type,ew=(0,L.useMemo)(()=>null==_?void 0:_.split("-")[0],[_]),ej=(null==C?void 0:null===(n=C.organization_owner)||void 0===n?void 0:null===(i=n.super_organization)||void 0===i?void 0:null===(t=i.plan)||void 0===t?void 0:t.name)==="free",ey=H&&(null==W?void 0:W.url)&&(null==W?void 0:W.openLinksWithScribeViewer)&&!(0,iB.m)(p),eN=null==C?void 0:C.id,{duplicateSelectedActions:ek}=(0,S.ol)(eN),{scrollToAction:eC}=(0,I.Z)({visibleActions:X,scribeFileId:eN}),eS=(0,ea.Z)(Y.t$.name),eI=(0,T.v9)((0,E.LJ)(_)),eL=(0,L.useCallback)(e=>en((0,E.Bo)({actionId:_,open:e})),[en,_]),eT=async()=>{let e=null==X?void 0:X.findIndex(e=>e.id===_),t=await ek([_],e);(0,F.L9)("duplicate_scribe_steps",{location:"step_tridot",document_id:eN,actionIds:t}),setTimeout(()=>{eC(t[0])},200)},eE=(null==C?void 0:C.comments_enabled_for_editor)&&"editor"===p||(null==C?void 0:C.comments_enabled_for_viewer)&&"viewer"===p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i1,{inDeleteMode:!1,userOwnerId:null===(l=C.user_owner)||void 0===l?void 0:l.id,organizationOwnerId:null===(s=C.organization_owner)||void 0===s?void 0:s.id,scribeFileId:C.id,editableComments:(0,iB.m)(p),autoFocus:er,action:{...W,id:_,description:w,scribeFile:C},comments:W.comments,viewer:"viewer"===p,setShowAuthModal:eo,token:ed}),es&&(0,r.jsx)(iD,{visible:es,onClose:()=>eo(!1),scribeFile:C})]}):null;(0,L.useEffect)(()=>{"viewer"===p&&q(!1)},[p]);let eZ=(0,L.useCallback)(()=>{en((0,E.oS)(_)).then(()=>{en((0,tc.Lg)({id:null==C?void 0:C.id,omitComments:!0})),en((0,tc.ii)(null==C?void 0:C.id))}),(0,F.L9)("edited_file_deleted_multiple_actions",{file_id:_,location:"step_tridot"})},[en,_,null==C?void 0:C.id]),eF=(0,L.useCallback)(e=>{e.shiftKey&&b&&(document.getSelection().removeAllRanges(),null==y||y())},[b,y]);ec=(0,r.jsx)(nr,{mode:p,kind:W.kind||"action",sort_order:W.sort_order,screenshot_url:W.screenshot_url,external_screenshot_url:W.external_screenshot_url,openLinksWithScribeViewer:W.openLinksWithScribeViewer,selectDisabled:R,multiSelectModeOn:b,timestamp:v,instruction_type:W.instruction_type,stack_actions:W.stack_actions,url:W.url,onDelete:eZ,isConfirmingDelete:et,setIsConfirmingDelete:ei,selected:k,handleShiftClick:eF,onSelectedChange:N,commentSection:eE,scribeFile:C,hovered:H,onCopyLinkToStep:()=>{let e=window.location.pathname.replace("/embed/","/shared/"),t="".concat(window.location.origin+e,"#").concat(ew);tn()(t),(0,F.L9)("copy_step_link_viewer",{link:t})},setAddScreenshotVisible:eL,onDragStart:W.onDragStart,actionType:e_,onEditScreenshot:()=>{(0,F.L9)("clicked_edit_screenshot",{is_free:ej}),ej?(em(!0),ef(!1),(0,F.L9)("show_feature_gate_modal",{location:"Image Icon",feature:"Edit Screenshot"})):(em(!1),ef(!0))},onAddScreenshot:()=>{(0,F.L9)("clicked_add_screenshot",{is_free:ej}),ej?(ep(!0),eL(!1),(0,F.L9)("show_feature_gate_modal",{location:"image_icon",feature:"Add Screenshot"})):(ep(!1),eL(!0))},onDownloadScreenshotUnavailable:e=>{(0,F.L9)(e,{is_free:!0}),(0,F.L9)("show_feature_gate_modal",{location:"download_screenshot",feature:"Download Screenshot"}),ev(!0)},scribeFileId:null==C?void 0:C.id,ordinal:W.ordinal||W.sort_order,id:_,description:w,onDuplicate:eT,showGuideMeStepNotFoundMsg:G,guideMeStepNotFoundMsg:O,isGuiding:z,onRecaptureStep:U,navigateTabToActionUrlFromExtension:V,...W});let eB=(0,L.useMemo)(()=>(e,t)=>{let{draggableProps:i,innerRef:n,dragHandleProps:l}=e,{isDragging:s}=t;return(0,r.jsxs)("div",{role:"button",tabIndex:0,ref:(0,ih.Z)([el,n]),onMouseEnter:()=>q(!0),onMouseLeave:()=>q(!1),className:(0,Z.cn)("group relative transition-[margin-bottom] duration-200 ease-in-out",(0,iB.m)(p)?"mb-14":"mb-4 md:mb-6",{"rounded-2xl shadow-lg":D&&B,"rounded-2xl shadow-alert":D&&B&&"warning"===e_,"rounded-2xl shadow-tip":D&&B&&"tip"===e_,"mb-0 mt-0":D,"cursor-pointer":z}),...i,style:{...i.style},onClick:e=>{b&&eF(e),z&&P(A)},onKeyDown:e=>{"Enter"===e.key&&z&&P(A)},children:[(0,r.jsx)("div",{id:ew,className:"absolute -top-20"}),(0,iB.m)(p)&&!et&&(0,r.jsx)("div",{className:"relative h-0 overflow-visible md:w-full",children:(0,r.jsx)("div",{className:(0,Z.cn)("absolute left-0 top-4 z-10 h-8 w-8 -translate-x-5 text-blueGray-400 opacity-0 transition-opacity duration-200",{"opacity-100":s,"opacity-0":g,"group-hover:opacity-100":!g,"top-1.5":"section"===W.kind}),...l,onMouseEnter:e=>{e.stopPropagation()},onMouseLeave:e=>{e.stopPropagation()},children:(0,r.jsx)(M.G,{icon:c.Okg})})}),et&&(0,r.jsx)(i5,{variant:"section"===W.kind?"detached":"attached",stepLabel:"section"===W.kind?"section (the steps inside it will not be deleted)":"step",onCancel:()=>ei(!1),onDelete:eZ}),(0,r.jsxs)("div",{className:"relative",children:[ec,W.to_html&&(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:ip.Z.sanitize(W.to_html)}}),W.to_markdown&&(0,r.jsx)("pre",{style:{whiteSpace:"pre-line"},children:W.to_markdown}),ey&&(0,r.jsx)("div",{className:"absolute right-4 top-[20px] z-10",children:(0,r.jsx)(nj,{extensionInstalled:!!(null==W?void 0:W.isExtensionInstalled),withGuideMeLabel:!!(null==W?void 0:W.isFirstActionWithUrl),actionURL:null==W?void 0:W.url,onClick:()=>{W.openLinksWithScribeViewer?((0,F.L9)("scribe_viewer_opened_from_step"),(0,F.L9)("launch_guide_me_from_scribe"),(0,F.L9)("toggle_on_guide_me",{location:"scribe_action_".concat(_),documentType:"scribe",documentId:C.id}),(0,tT.MK)({messageType:"openScribeViewer",startingUrl:null==W?void 0:W.url,location:"Scribe Viewer",scribe:{id:null==C?void 0:C.id,name:null==C?void 0:C.name}})):window.open(null==W?void 0:W.url,"_blank")}})})]}),K&&(0,r.jsx)(iq,{id:_,addScreenshotVisible:K,setAddScreenshotVisible:Q,scribeFileId:W.scribeId,gifButton:!0,location:"Gif Button"}),j&&(0,r.jsxs)("div",{className:"absolute top-4 m-0 flex h-8 items-center justify-center gap-3 rounded-sm bg-slate-50/90 pl-2 pr-4 text-[13px] text-slate-600 shadow-lg",children:[(0,r.jsx)(M.G,{icon:c.Krp,className:"h-4 w-4 text-indigo-500"}),f," ",1===f?"Step":"Steps"]}),!g&&!s&&(0,iB.m)(p)&&(0,r.jsx)(iF,{insertIndex:A+1,recordMoreSteps:h,onAddGif:()=>{Q(!0)},...W})]})},[el,e_,f,K,eF,ew,_,A,ec,B,et,z,D,p,b,eZ,g,j,W,h,null==C?void 0:C.id,null==C?void 0:C.name,P,ey]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(iG,{draggableId:_,index:A,isDragDisabled:"viewer"===p||J||et,children:eB},_),eg&&(0,r.jsx)(nw,{clickTargetColor:(0,ig.Sv)(null==C?void 0:C.click_target_color),actionId:_,actionKind:W.kind,src:W.screenshot_url,imageState:null===(o=W.user_cropped_screenshot)||void 0===o?void 0:o.screenshot_editor_state,mousePositionX:null===(a=W.position)||void 0===a?void 0:a.x,mousePositionY:null===(d=W.position)||void 0===d?void 0:d.y,onClose:()=>ef(!1),showPositionIndicator:W.show_position_indicator,hasEditedScreenshot:null==ee?void 0:ee.has_edited_screenshot}),eu&&(0,r.jsx)(iM.ZP,{superOrganization:null==C?void 0:null===(u=C.organization_owner)||void 0===u?void 0:u.super_organization,onClose:()=>{(0,F.L9)("closed_feature_gate_modal",{location:"step_action_edit_screenshot"}),em(!1)},onUpgradeToPro:e=>{(0,F.L9)("clicked_feature_gate_modal_upgrade_to_pro",{location:"step_action_edit_screenshot",feature:e}),em(!1),eb({location:"step_action_edit_screenshot"})},selectedFeature:(0,iM.zf)("screenshot"),onSelectedFeature:e=>(0,iM.Wp)(e.title,"step_action_edit_screenshot")}),ex&&(0,r.jsx)(iM.ZP,{superOrganization:null==C?void 0:null===(m=C.organization_owner)||void 0===m?void 0:m.super_organization,onClose:()=>{(0,F.L9)("closed_feature_gate_modal",{location:"screenshot_action_add_screenshot"}),ep(!1)},onUpgradeToPro:e=>{(0,F.L9)("clicked_feature_gate_modal_upgrade_to_pro",{location:"screenshot_action_add_screenshot",feature:e}),ep(!1),eb({location:"screenshot_action_add_screenshot"})},selectedFeature:(0,iM.zf)("screenshot"),onSelectedFeature:e=>(0,iM.Wp)(e.title,"screenshot_action_add_screenshot")}),eh&&(0,r.jsx)(iM.ZP,{superOrganization:null==C?void 0:null===(x=C.organization_owner)||void 0===x?void 0:x.super_organization,onClose:()=>{(0,F.L9)("closed_feature_gate_modal",{location:"action_step_dropdown"}),ev(!1)},onUpgradeToPro:e=>{(0,F.L9)("clicked_feature_gate_modal_upgrade_to_pro",{location:"action_step_dropdown",feature:e}),ev(!1),eb({location:"action_step_dropdown"})},selectedFeature:(0,iM.zf)("screenshot"),onSelectedFeature:e=>(0,iM.Wp)(e.title,"action_step_dropdown")}),eS?eI&&(0,r.jsx)(ix,{actionId:_,scribeFile:C,onClose:()=>en((0,E.Bo)({actionId:_,open:!1}))}):!W.screenshot_url&&(0,r.jsx)(iq,{id:_,addScreenshotVisible:eI,setAddScreenshotVisible:eL,scribeFileId:W.scribeId,location:"Image Icon"})]})},nN=e=>{let{showNudge:t,isLastItem:i,onNext:n,nextDisabled:l,onPrev:s,prevDisabled:o,onRestart:a}=e,d=l&&!i;return(0,r.jsxs)("div",{className:(0,Z.cn)("inline-flex gap-1 rounded-lg bg-slate-100/80 p-1 ring-1 ring-inset ring-white/50 backdrop-blur-sm","shadow-[0px_2px_4px_0px_rgba(2,6,23,0.10),0px_5px_11px_0px_rgba(2,6,23,0.06),0px_0px_1px_0px_rgba(15,23,42,0.20)]"),children:[(0,r.jsx)(eM.z,{variant:"secondary",size:"small",icon:O.FPD,onClick:()=>s(),disabled:o,children:"Prev"}),(0,r.jsx)("div",{className:(0,Z.cn)({'relative inline-block overflow-hidden rounded-md p-[2px] before:absolute before:bottom-[-100%] before:left-[-100%] before:right-[-100%] before:top-[-100%] before:z-[1] before:animate-[spin_2s_linear_infinite,fade_3s_forwards] before:bg-[conic-gradient(transparent,transparent,#5B53E0)] before:opacity-0 before:delay-1000 before:content-[""]':t&&!d&&!i}),children:(0,r.jsx)(eM.z,{variant:"secondary",size:"small",icon:i?O.paY:O.r5q,onClick:()=>i?a():n(),disabled:d,className:(0,Z.cn)({"relative z-[2]":t&&!d&&!i}),children:i?"Restart":"Next"})})]})},nk=i(14076),nC=i(66726),nS=i.n(nC),nI=i(80833),nL=i(17498),nT=i(14222),nE=i(1010),nZ=i(50106),nF=i(63457),nB=i(25796);let nD={a:{label:"Step(s) couldn’t be detected (i.e. click target didn’t appear)",isChecked:!1},b:{label:"Click target was on the wrong element",isChecked:!1},c:{label:"Something else went wrong",isChecked:!1,other:""}},nM=e=>{let{setShowGuideMeRating:t}=e,[i,n]=(0,L.useState)(!1),[l,s]=(0,L.useState)(nD);return(0,L.useEffect)(()=>{(0,F.L9)("guide_me_rating_feedback_form_viewed")},[]),(0,r.jsxs)("div",{className:"p-0",children:[(0,r.jsxs)("div",{className:"p-4 pb-0",children:[(0,r.jsx)(nF.Z,{variant:"base",className:"m-0 mb-3",title:"What went wrong?"}),Object.keys(l).map(e=>{let{label:t,isChecked:o}=l[e];return(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)(nB.X,{role:"checkbox",className:"flex-none",size:"sm",label:t,checked:o,onCheckedChange:()=>{s({...l,[e]:{...l[e],isChecked:!o}}),"c"===e&&n(!i)}},e)})}),i&&(0,r.jsx)("textarea",{className:"mb-6 w-full rounded-md border border-slate-300 px-3 py-2 text-sm",value:l.c.other,onChange:e=>s({...l,c:{...l.c,other:e.target.value}}),placeholder:"Share some details"})]}),(0,r.jsxs)("div",{className:"flex gap-3 rounded-b-xl bg-slate-50 p-4",children:[(0,r.jsx)(eM.z,{onClick:e=>{e.preventDefault(),(0,F.L9)("guide_me_rating_submit_feedback",l),t(!1)},children:"Send"}),(0,r.jsx)(eM.z,{onClick:e=>{e.preventDefault(),(0,F.L9)("guide_me_rating_dismiss_feedback",l),t(!1)},variant:"secondary",children:"Dismiss"})]})]})},nz=e=>{let{liveIndex:t,isGuiding:i,documentId:n}=e,[l,s]=(0,L.useState)(!1),[o,a]=(0,L.useState)(!1),[d,c]=(0,eL.Z)("guide_me_rating_seen_list",[]);return(0,L.useEffect)(()=>{t>1&&!i&&n&&(d.includes(n)?s(!1):(s(!0),c([...d,n])))},[n,i,t]),(0,L.useEffect)(()=>{l&&(0,F.L9)("guide_me_rating_viewed")},[l]),l&&!i&&t>1&&(0,r.jsx)("div",{className:"sticky bottom-6 mb-6",children:(0,r.jsxs)("div",{className:(0,Z.cn)("group relative mt-10 rounded-md shadow-xl shadow-slate-400",{"bg-brand":!o,"bg-white":o}),children:[(0,r.jsxs)("button",{className:"invisible absolute right-3 top-3 m-0 cursor-pointer bg-transparent p-0 text-white group-hover:visible",onClick:()=>{(0,F.L9)("guide_me_rating_closed"),s(!1)},children:[(0,r.jsx)("span",{className:"sr-only",children:"close feedback widget"}),(0,r.jsx)(M.G,{icon:O.NBC,size:"1x"})]}),o?(0,r.jsx)(nM,{setShowGuideMeRating:s}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)(nF.Z,{variant:"base",className:"m-0 mb-4 text-center text-white",title:""}),(0,r.jsx)("h4",{className:"m-0 -mt-1 mb-4 text-center font-sans text-[15px] font-semibold text-white",children:"How was your Guide Me experience?"}),(0,r.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,r.jsx)(eM.z,{onClick:()=>{(0,F.L9)("guide_me_rating_answered",{"How was your first Guide Me Experience?":"Good","Last Step":t+1,documentId:n}),s(!1)},variant:"secondary",icon:O.u8Q,children:"Good"}),(0,r.jsx)(eM.z,{onClick:()=>{(0,F.L9)("guide_me_rating_answered",{"How was your first Guide Me Experience?":"Bad","Last Step":t+1,documentId:n}),a(!0)},variant:"secondary",icon:O.bam,children:"Bad"})]})]})]})})};var nP=e=>{let{compact:t=!1}=e;return(0,r.jsxs)("div",{className:"mb-8 box-border flex w-full animate-pulse flex-col gap-4 rounded-2xl bg-white p-4 shadow",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"mr-4 flex h-10 w-10 flex-shrink-0 flex-col items-center justify-center rounded-full bg-slate-200"}),(0,r.jsx)("div",{className:"h-4 w-1/2 rounded bg-slate-200"})]}),(0,r.jsx)("div",{className:"w-full rounded-lg bg-slate-200 opacity-40 sm:h-96 ".concat(t?"h-[200px]":"h-64")})]})},nA=e=>{let{onCancel:t}=e;return(0,r.jsxs)("div",{className:"relative -mb-8",children:[(0,r.jsx)(nP,{compact:!0}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 top-0 m-auto inline-flex h-fit w-fit flex-col items-center justify-center",children:[(0,r.jsxs)("span",{className:"mb-3 mt-8 text-base font-semibold text-black",children:["Capturing",(0,r.jsx)("span",{className:"animated-ellipsis absolute"})]}),(0,r.jsx)("div",{className:"mb-6 text-xs font-medium text-slate-800",children:"Click your screen to recapture the screenshot."}),(0,r.jsx)(eM.z,{variant:"secondary",onClick:t,children:"Cancel"})]})]})};let nR=["section"],nG=["tip","warning"];(s=a||(a={})).Previous="previous",s.Next="next",s.Restart="restart";var nO=e=>{let{mode:t,onVisibleChanged:i,multiSelectMode:n,onMultiActionComplete:l,recordMoreSteps:s,openLinksWithScribeViewer:o,isSideKick:a,actions:d,isGuiding:c,...m}=e,x=(0,T.I0)(),[p,h]=(0,L.useState)(null),[v,g]=(0,L.useState)(0),[f,b]=(0,L.useState)(!1),[_,w]=(0,L.useState)(null),{isLoadingActions:j}=(0,T.v9)(E.JR),{firstSelectedAction:y,lastSelectedAction:N,numSelectedActions:k}=(0,T.v9)(E.Bf),{scribeFile:C}=(0,T.v9)(tc.Q),{refetchScribeFile:I}=(0,eu.c)(null==C?void 0:C.id),[B,{width:D}]=(0,nI.Z)(),M=null==d?void 0:d.find(e=>e.url),{installed:z}=(0,nk.JJ)(),[P,A]=(0,L.useState)(0),[R,G]=(0,L.useState)(!1),[O,U]=(0,L.useState)(void 0),V=(0,L.useRef)([]),{currentWindowId:W,activeTabs:H}=(0,tR.Z)();V.current=d.map((e,t)=>{var i;return null!==(i=V.current[t])&&void 0!==i?i:(0,L.createRef)()});let{updateActionOrder:q}=(0,S.ol)(null==C?void 0:C.id),K=v>0,Q=(0,L.useCallback)(async e=>{await q(e),I()},[I,q]),J=(0,L.useMemo)(()=>{let e=1;return d.reduce((t,i)=>(t[i.id]=e,nR.includes(i.kind)||nG.includes(i.instruction_type)||(e+=1),t),{})},[d]),Y=(0,L.useMemo)(()=>{if(!(null==C?void 0:C.show_timestamps))return{};let e=0;return d.reduce((t,i)=>{if(i.recorded_time_ms){if("stack"===i.kind){let t=i.stack_actions.reduce((e,t)=>e+t.recorded_time_ms,0);e+=t}else e+=i.recorded_time_ms;t[i.id]=e}return t},{})},[d,null==C?void 0:C.show_timestamps]),X=(0,L.useCallback)(e=>{let t=()=>{(0,F.L9)("edited_file_reorder_actions",{file_id:null==C?void 0:C.id})},{destination:i,source:n}=e;if(h(null),document.body.style.cursor="default",g(0),!i||i.droppableId===n.droppableId&&i.index===n.index)return;let s=i.index;if(!d[s])return;if(v>1){let e=(0,nL.T)(d);Q((0,nL.a)(d,e,n,i)),l();return}let o=!!d[s].hidden,a="section"===d[s].kind&&d[s].collapsed;if(n.index<i.index&&(a||o)&&i.index+1<=d.length)for(let e=i.index+1;e<d.length;e++)if(d[e].hidden)s+=1;else break;if(i.droppableId===n.droppableId&&"actionListArea"===i.droppableId){if("section"===d[n.index].kind&&d[n.index].collapsed){let e=d.slice(0,n.index),i=d.findIndex((e,t)=>"section"===e.kind&&t>n.index),l=d.slice(n.index,...-1!==i?[i]:[]),o=[...e,...-1!==i?d.slice(i):[]],a=n.index>=s?s:s-l.length+1;Q([...o.slice(0,a),...l,...o.slice(a,o.length)]),t()}else Q((0,nZ.HP)(d,n.index,s)),t()}},[v,Q,l,d,null==C?void 0:C.id]),$=(0,L.useCallback)(e=>{var t;h(e.draggableId),document.body.style.cursor="grabbing",(null===(t=d[e.source.index])||void 0===t?void 0:t.selected)?g(d.filter(e=>e.selected).length):(x((0,E.o4)()),g(1))},[x,d]),ee=(0,L.useCallback)(e=>{let t=null==d?void 0:d.find(e=>e.selected),i=d.findIndex(e=>e.id===(null==t?void 0:t.id)),n=[];if(t){let t=Math.min(i,e),l=Math.max(i,e)+1;n=d.slice(t,l).map(e=>e.id)}else n=[d[e].id];n.forEach(e=>{x((0,E.$S)(e,!0))})},[x,d]),[et,ei]=(0,L.useState)(!1),en=()=>{(0,F.L9)("click_recapture_guide_me",{documentId:null==C?void 0:C.id,actionId:d[P].id}),ei(!0),(0,tT.MK)({messageType:"recaptureStep",scribeId:C.id,recordBeforeActionId:d[P].id,recordAfterActionId:d[P].id,isScribeEditMode:!0})},el=()=>{(0,nT.xW)(nE.L.DELETE_RECORDING,{track:{name:"cancel_recapture_action",data:{actionId:d[P].id}}}),ei(!1)},{scribeLivePhoenix2023q3:es}=(0,T.v9)(eB.F),eo=(0,L.useCallback)(e=>{(0,tT.MK)({messageType:"currentVisibleAction",action:{...d[e],clickTargetColor:null==C?void 0:C.click_target_color,timestamp:new Date().toISOString()}})},[null==C?void 0:C.click_target_color,d]),ea=(0,L.useCallback)(e=>{(0,tT.MK)({messageType:"navigateActiveTabToActionUrl",action:{...d[e],clickTargetColor:null==C?void 0:C.click_target_color,timestamp:new Date().toISOString()}})},[null==C?void 0:C.click_target_color,d]),er=e=>{if(V.current[e]){let i=V.current[e].current,n=document.body.getBoundingClientRect().top,l=i.getBoundingClientRect().top,s=80;if("next"===_){var t;let i=(null===(t=V.current[e-1])||void 0===t?void 0:t.current.offsetHeight)||0;s+=i-.9*i}let o=l-n-s;window.scrollTo({top:o,behavior:"smooth"})}},ed=(0,L.useCallback)(e=>{let t=d[e];if("section"===t.kind)return!1;if("instruction"===t.kind){let e=H.find(e=>e.windowId===W);return!(0,tW.n0)(null==e?void 0:e.url,t.url)}return!0},[H,W,d]),ec=(0,L.useCallback)(e=>{for(let t=e+1;t<d.length;t++)if(ed(t))return t;return e},[ed,d.length]),em=(0,L.useCallback)(e=>{for(let t=e-1;t>=0;t--)if(ed(t))return t;return e},[ed]),ex=(0,L.useCallback)(()=>ed(0)?0:ec(0),[ed,ec]),ep=(0,L.useCallback)(()=>{let e=em(P);w("previous"),A(e),eo(e),(0,F.L9)("click_prev_guide_me",{documentId:null==C?void 0:C.id,actionId:d[e].id})},[P,em,null==C?void 0:C.id,eo,d]),eh=(0,L.useCallback)(()=>{let e=ec(P);w("next"),A(e),eo(e),(0,F.L9)("click_next_guide_me",{documentId:null==C?void 0:C.id,actionId:d[e].id})},[P,ec,null==C?void 0:C.id,eo,d]),ev=(0,L.useCallback)(()=>{let e=ex();A(e),eo(e),w("restart"),(0,F.L9)("click_restart_guide_me",{documentId:null==C?void 0:C.id}),ea(e)},[ex,ea,null==C?void 0:C.id,eo]),eg=(0,L.useCallback)(()=>{if(P<d.length-1){let e=ec(P);"restart"!==_&&w("next"),A(e),eo(e)}},[_,P,ec,eo,d]);(0,L.useEffect)(()=>{c&&setTimeout(()=>er(P),20)},[P,c]),(0,L.useEffect)(()=>{if(c&&0===P){let e=ex();A(e),eo(e)}},[c]),(0,L.useEffect)(()=>{let e=null==C?void 0:C.actions_count;if(!e||!c)return;let t=P+1===Math.floor(e/2),i=P===e-1;t&&(0,F.L9)("halfway_in_scribe_guide_me",{documentId:null==C?void 0:C.id}),i&&(0,F.L9)("end_of_scribe_guide_me",{documentId:null==C?void 0:C.id})},[P,null==C?void 0:C.actions_count,null==C?void 0:C.id,c]);let ef=async()=>{let{id:e}=d[P];await x((0,E.oS)(e));let t=await x((0,E.Sv)({scribeDocumentId:C.id,skip:P})),i=(await (0,u.SI)(t)).retrievedActions.actions[0];(0,F.L9)("recaptured_screenshot_guide_me",{documentId:null==C?void 0:C.id,oldActionId:e,newActionId:null==i?void 0:i.id}),ec(P)===P?(0,tT.MK)({messageType:"currentVisibleAction",action:{...i,clickTargetColor:null==C?void 0:C.click_target_color,timestamp:new Date().toISOString()}}):eg(),ei(!1)};(0,L.useEffect)(()=>{let e=e=>{"completeStepRecapture"===e.data.messageType&&ef(),"cancelStepRecapture"===e.data.messageType&&et&&ei(!1),"showGuideMeStepNotFoundMsg"===e.data.messageType&&(G(e.data.data.showMessage),U(e.data.data.message)),"advanceLiveStep"===e.data&&eg()};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[P,d]);let[eb,e_]=(0,L.useState)(!1),[ew,ey]=(0,L.useState)(!1),eN=(0,ej.useRouter)();(0,L.useEffect)(()=>{let e=nS()(function(){let e=d.length===(null==C?void 0:C.actions_count),t=window.scrollY+window.innerHeight,i=document.documentElement.scrollHeight/2,n=document.documentElement.scrollHeight,l="scrollable"===eN.query.as;t>=i&&!eb&&e&&(e_(!0),a&&!c?(0,F.L9)("halfway_in_scribe_sidekick",{documentId:null==C?void 0:C.id}):(0,F.L9)("halfway_in_scribe_scribe_viewer",{documentId:null==C?void 0:C.id,isScrollableEmbed:l})),t>=n&&!ew&&e&&(ey(!0),a&&!c?(0,F.L9)("end_of_scribe_sidekick",{documentId:null==C?void 0:C.id}):(0,F.L9)("end_of_scribe_scribe_viewer",{documentId:null==C?void 0:C.id,isScrollableEmbed:l}))},100);return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[eb,ew,d.length,null==C?void 0:C.actions_count,null==C?void 0:C.id,a,c]);let ek=(0,L.useMemo)(()=>e=>{var l;let{innerRef:u,droppableProps:h,placeholder:g}=e;return(0,r.jsxs)("div",{ref:u,...h,className:"box-border flex w-full flex-col items-center",children:[(0,iB.m)(t)&&(0,r.jsxs)("div",{className:"relative mb-4 flex h-10 w-full flex-col justify-start",children:[f&&(0,r.jsx)(iq,{id:null===(l=d[0])||void 0===l?void 0:l.id,addScreenshotVisible:f,setAddScreenshotVisible:b,scribeFileId:C.id,gifButton:!0,beforeFirst:!0,location:"Gif Button"}),!K&&(0,iB.m)(t)&&(0,r.jsx)(iF,{insertIndex:0,noTranslate:!0,recordMoreSteps:s,onAddGif:()=>b(!0)})]}),(0,r.jsxs)("div",{ref:B,className:(0,Z.cn)("pointer flex h-full w-full flex-col",{"pb-[10dvh]":c}),children:[d.map((e,l)=>{let u=l>=y-1&&l<=N+1,h=l<=y||l>=N,g=e.selected?h:u,f=M&&(null==M?void 0:M.id)===e.id,b=V.current[l],_="manual"===e.created_type||O===eT.zD.NotFoundStep||O===eT.zD.NotFoundScreenshot;return(0,r.jsxs)("div",{className:"flex flex-col ".concat(a&&(0,iB.m)(t)?"mb-4 mt-8":"mt-4"),style:c?{height:(()=>{var e,t;let i=Math.ceil(null==b?void 0:null===(t=b.current)||void 0===t?void 0:null===(e=t.getBoundingClientRect())||void 0===e?void 0:e.height);return l!==P&&c?"".concat(null!=i?i:0,"px"):"fit-content"})()}:{},children:[(0,r.jsx)("div",{ref:b,className:(0,Z.cn)({"origin-top transition-all duration-200 ease-in-out":c,["scale-".concat(90," opacity-50")]:c&&l!==P}),children:et&&l===P?(0,r.jsx)(nA,{onCancel:el}):(0,r.jsx)(ny,{...m,...e,index:l,mode:t,scribeId:null==C?void 0:C.id,ordinal:J[e.id],timestamp:Y[e.id]&&iQ().utc(Y[e.id]).format("+HH:mm:ss.S"),onVisibleChanged:(t,n,s)=>i(e.id,e.sort_order,t,n,s,l),recordMoreSteps:s,multiSelectModeOn:!!n||k>0,onSelectedChange:t=>{x((0,E.$S)(e.id,t))},selected:e.selected,ongoingDrag:K,primaryDrag:p===e.id,draggingCount:v,containerWidth:D,selectDisabled:"stack"===n&&!g&&k>0,openLinksWithScribeViewer:o&&z,isFirstActionWithUrl:f,isExtensionInstalled:z,shiftSelect:()=>{ee(l)},scribeFile:C,isSideKick:a,isActive:l===P&&c,isGuiding:c,setLiveIndex:e=>{eo(e),e!==P&&A(e)},showGuideMeStepNotFoundMsg:R&&l===P&&c,guideMeStepNotFoundMsg:O,onRecaptureStep:en,navigateTabToActionUrlFromExtension:()=>ea(l)},e.id)},e.id),c&&l===P&&(0,r.jsx)("div",{className:"mb-0.5 mt-4 flex w-full justify-center",children:(0,r.jsx)(nN,{showNudge:_,isLastItem:l===d.length-1,onPrev:ep,prevDisabled:P===ex(),onNext:eh,nextDisabled:P===d.length-1,onRestart:ev})})]},e.id)}),es&&(0,r.jsx)(nz,{isGuiding:c,liveIndex:P,documentId:null==C?void 0:C.id}),j&&!(0,iB.m)(t)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nP,{}),(0,r.jsx)(nP,{}),(0,r.jsx)(nP,{}),(0,r.jsx)(nP,{}),(0,r.jsx)(nP,{})]}),g]})]})},[t,f,d,C,K,s,B,j,y,N,M,c,P,m,J,Y,n,k,p,v,D,o,z,a,R,O,ep,eh,ev,i,x,ee,eo,ea]);return(0,r.jsx)(iU,{children:(0,r.jsx)(iO,{droppableId:"actionListArea",type:"actionList",isDropDisabled:j||!(0,iB.m)(t),onDragStart:$,onDragEnd:X,children:ek},"actionListArea")})},nU=i(719),nV=i(96386),nW=e=>{let{isEnterpriseAccount:t}=e;return(0,r.jsxs)("div",{className:"mt-0 flex flex-col items-center justify-start rounded-xl border border-gray-200 p-8",children:[(0,r.jsx)(nF.Z,{title:"No steps here.",variant:"large",className:"mt-0 w-full text-center"}),(0,r.jsxs)("ul",{className:"flex flex-col self-center",children:[(0,r.jsx)("li",{className:"max-w-lg font-sans text-base text-blueGray-500",children:"Scribe captures steps when you click or type."}),!(0,tO.d)()&&(0,r.jsxs)("li",{className:"font-san max-w-lg text-base text-blueGray-500",children:["The extension captures in your browser only. To capture in other apps, use the desktop application, part of"," ",(0,r.jsx)(tC(),{legacyBehavior:!0,href:"/pricing",children:(0,r.jsx)("a",{className:"cursor-pointer font-semibold text-indigo-600 hover:text-indigo-700",children:"Scribe Pro"})}),"."]}),(0,r.jsx)("li",{className:"max-w-lg font-sans text-base text-blueGray-500",children:"You or a teammate may have deleted the steps in this Scribe."})]}),(0,r.jsx)(nF.Z,{title:"Want to try again?",variant:"small",className:"my-1 w-full text-center"}),(0,r.jsx)("ul",{children:(0,r.jsx)("li",{className:"max-w-lg font-sans text-base text-blueGray-500",children:(0,tO.d)()?'Start capture by clicking the back arrow in the top left and then "New Scribe."':'Start capture by clicking the extension and then "Start Capture."'})}),(0,r.jsxs)("div",{className:"flex w-full flex-col items-center justify-center text-center",children:[(0,r.jsx)(nF.Z,{title:"Something else? Please let us know.",variant:"medium",className:"my-2 w-full text-center"}),(0,r.jsxs)(tZ.Z,{variant:"primary",className:"mt-4",onClick:nV.v,children:["Contact Support",(0,r.jsx)(M.G,{icon:O.XKl,size:"lg",className:"ml-2 text-white"})]})]})]})},nH=i(16713);let nq=e=>{let{estimatedTime:t,visible:i,signedUp:n}=e,l=(0,ej.useRouter)(),[s,o]=(0,nH.Z)(null!=t?t:0).split(" ");return(0,r.jsxs)("div",{className:(0,Z.cn)("fixed z-50 flex flex-col items-center justify-center rounded-lg bg-slate-800 p-2 pb-0 md:right-[10px] md:top-[10px] mobile-lg:bottom-0 mobile-lg:h-[280px] mobile-lg:w-full mobile-lg:justify-between",!i&&"hidden",n&&"w-[320px] px-6",!n&&"w-[393px]"),children:[(0,r.jsxs)("div",{className:(0,Z.cn)("relative top-0 flex w-full flex-row items-center justify-between mobile-lg:my-1.5 mobile-lg:justify-center mobile-lg:px-0",n&&"py-3",!n&&"p-3 pl-4"),children:[(0,r.jsx)("span",{className:(0,Z.cn)("text-base font-bold text-white mobile-lg:w-[374px] mobile-lg:text-center",n&&"w-full",!n&&"w-[300px]"),children:n?(0,r.jsx)("span",{children:"You're signed up! Ready to create your own Scribe?"}):(0,r.jsxs)("span",{children:["This guide was created with Scribe in"," ",(0,r.jsx)("span",{className:"font-bold",children:(0,r.jsxs)("span",{className:"text-bold text-teal-300",children:[(0,r.jsx)("br",{}),s," ",o,"."]})})," ","Sign in and create your own!"]})}),!n&&(0,r.jsx)(M.G,{icon:d._BK,className:"h-9 w-9 text-teal-50 mobile-lg:hidden"})]}),n?(0,r.jsx)(eM.z,{variant:"primary",darkMode:!0,size:"large",onClick:()=>{(0,F.L9)("click_one_tap_cta"),l.push("/welcome")},className:"mb-6 mt-3 w-full",children:"Let's go"}):(0,r.jsx)("div",{id:"oneTapContainer"})]})},nK=e=>{var t;let{scribeFile:i,maxSortOrder:n,mode:l,hash:s}=e,o=(0,T.I0)(),{visibleActions:a}=(0,T.v9)(E.JR),d=(null==i?void 0:i.outline)||[],[c,u]=(0,L.useState)(null),[m,x]=(0,L.useState)(0),[p,h]=(0,L.useState)(!1),v=(0,L.useRef)(null),g=(0,L.useRef)(),f=d.filter(e=>"section"===e.kind).length,b=e=>{e&&(u(e),x(d.findIndex(t=>e.sort_order===t.sort_order)))},_=async function(e,t,n,l){let s=!(arguments.length>4)||void 0===arguments[4]||arguments[4],r=arguments.length>5?arguments[5]:void 0;if(h(!0),e.preventDefault(),s||(u(r),x(d.findIndex(e=>r.sort_order===e.sort_order))),l>=a.length)try{await o((0,E.Sv)({scribeDocumentId:i.id,skip:a.length,limit:l+5}))}catch(e){}else if(s)for(let e=l;e>=0;e--){var c;if((null===(c=a[e])||void 0===c?void 0:c.kind)==="section"&&a[e].collapsed){o((0,E.s0)(a[e].id));break}}setTimeout(()=>{(0,F.L9)("click_section_list",{sectionName:n,sectionId:t});let e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth",block:"start"})},300)};return((0,L.useEffect)(()=>{u(a.find(e=>"section"===e.kind&&e.sort_order<n))},[]),(0,L.useEffect)(()=>{if(p)return g.current=setTimeout(()=>{h(!1)},2e3),()=>{clearTimeout(g.current)};if(c)d[m+1]&&n>=d[m+1].sort_order&&(u(d[m+1]),x(m+1)),n<c.sort_order&&(d[m-1]?(u(d[m-1]),x(m-1)):(u(null),x(0)));else{let e=d.findIndex(e=>"section"===e.kind&&e.sort_order<n);u(d[e]),x(e)}},[n]),(0,L.useEffect)(()=>{s&&b(null==d?void 0:d.find(e=>e.id.includes(s)))},[s]),(0,L.useEffect)(()=>{!s||(null==d?void 0:d.find(e=>e.id.includes(s)))||b([...d].reverse().find(e=>e.sort_order<n))},[s,n]),(!d||(null==d?void 0:d.length))&&0!==f)?(0,r.jsx)("div",{className:(0,Z.cn)("opacity-1 absolute right-0 mx-5 hidden h-full transform transition-all duration-500 ease-in-out lg:block",{"pointer-events-none absolute right-full opacity-0":(0,iB.m)(l)}),children:(0,r.jsxs)("div",{className:"sticky top-32 flex w-48 flex-col items-start rounded-2xl bg-white py-2 shadow-md xl:w-60",children:[(0,r.jsxs)("div",{className:"align-items-center flex w-full flex-row justify-between border-b border-blueGray-100 pb-2",children:[(0,r.jsx)("div",{className:"cursor-pointer px-4 pt-1 ".concat(m<=0?"text-blueGray-200":"text-blueGray-600"),onClick:e=>{m>0&&(u(d[m-1]),_(e,d[m-1].id.split("-")[0],d[m-1].description,d[m-1].sort_order,!1,d[m-1]),x(m-1))},children:(0,r.jsx)(ek.gcy,{size:20})}),(0,r.jsxs)("div",{className:"flex items-center font-sans text-sm font-normal text-blueGray-400",children:[(0,r.jsx)("span",{className:"text-blueGray-500",children:m+1}),"\xa0of\xa0",d.length]}),(0,r.jsx)("div",{className:"cursor-pointer px-4 pt-1 ".concat(m>=d.length-1?"text-blueGray-200":"text-blueGray-600"),onClick:e=>{m<d.length-1&&(u(d[m+1]),_(e,d[m+1].id.split("-")[0],d[m+1].description,d[m+1].sort_order,!1,d[m+1]),x(m+1))},children:(0,r.jsx)(ek.ZXJ,{size:20})})]}),(0,r.jsx)("div",{ref:v,className:"outline-max-h flex w-full flex-col overflow-y-scroll pt-2",children:null==d?void 0:null===(t=d.map)||void 0===t?void 0:t.call(d,e=>{var t,i,n,l,s,o,a;let d=null==e?void 0:null===(n=e.id)||void 0===n?void 0:null===(i=n.split)||void 0===i?void 0:null===(t=i.call(n,"-"))||void 0===t?void 0:t[0],u=null==e?void 0:null===(a=e.description)||void 0===a?void 0:null===(o=a.split)||void 0===o?void 0:null===(s=o.call(a,/\s+/))||void 0===s?void 0:null===(l=s.some)||void 0===l?void 0:l.call(s,e=>e.length>30);if("section"===e.kind)return(0,r.jsx)("a",{className:(0,Z.cn)("flex w-full max-w-[240px] break-words px-3 py-2 font-sans text-base font-medium leading-6 text-blueGray-500",{"bg-indigo-50 font-semibold text-indigo-600":c&&c.id===e.id,"break-all":u}),onClick:t=>_(t,d,e.description,e.sort_order,!1,e),"aria-label":"".concat(e.description),href:"#".concat(d),children:e.description},e.id)})})]})}):null};nK.defaultProps={};var nQ=i(83006);let nJ={info:{bg:"bg-indigo-50 border-indigo-300 px-8",message:"font-sans grow-0 font-bold text-base text-left text-indigo-700 mx-4",icon:(0,r.jsx)(ek.CA9,{size:24,className:"text-indigo-500"})},warning:{bg:"bg-yellow-50 border-yellow-300",message:"flex-1 font-sans font-bold text-left text-yellow-700",icon:(0,r.jsx)(ek._l2,{size:24,className:"mr-3 text-yellow-500"})}};var nY=e=>{let{message:t,children:i,onClick:n,isShare:l,variant:s}=e;return(0,r.jsxs)("div",{onClick:n,className:(0,Z.cn)("m-h-[64px] flex w-full items-center p-4 ".concat(nJ[s].bg," mb-4 flex-col rounded-lg border sm:flex-row md:mb-10"),l?"justify-center":"justify-between",{"cursor-pointer":n}),children:[(0,r.jsx)("span",{className:"grow-1",children:nJ[s].icon}),(0,r.jsx)("span",{className:nJ[s].message,children:t}),i]})};let nX=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"322",height:"220",viewBox:"0 0 322 220",fill:"none",className:t,children:[(0,r.jsx)("g",{filter:"url(#filter0_f_3227_1418)",children:(0,r.jsx)("path",{d:"M214.057 251.771C181.897 297.55 74.1318 323.695 11.0992 279.414C-51.9334 235.132 -110.506 179.643 -74.235 112.859C-35.3329 41.2308 87.2877 2.80391 127.564 113.632C167.84 224.46 246.218 205.991 214.057 251.771Z",fill:"url(#paint0_linear_3227_1418)"})}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:"filter0_f_3227_1418",x:"-185.377",y:"-55.8889",width:"506.994",height:"458.115",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"50",result:"effect1_foregroundBlur_3227_1418"})]}),(0,r.jsxs)("linearGradient",{id:"paint0_linear_3227_1418",x1:"96.6464",y1:"132.005",x2:"30.2109",y2:"227.54",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#3C2EDD"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#3AC3FF"})]})]})]})},n$=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"539",height:"220",viewBox:"0 0 539 220",fill:"none",className:t,children:[(0,r.jsx)("g",{filter:"url(#filter0_f_3227_1394)",children:(0,r.jsx)("path",{d:"M409.873 -217C567.181 -217 801.516 -132.641 801.516 -43.8064C801.516 45.0287 768.523 137.085 556.244 147.131C328.569 157.905 41.9656 67.6702 231.853 -43.8064C421.741 -155.283 252.565 -217 409.873 -217Z",fill:"url(#paint0_linear_3227_1394)",style:{mixBlendMode:"overlay"}})}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:"filter0_f_3227_1394",x:"0.428329",y:"-386.505",width:"970.593",height:"704.016",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"84.7526",result:"effect1_foregroundBlur_3227_1394"})]}),(0,r.jsxs)("linearGradient",{id:"paint0_linear_3227_1394",x1:"239.255",y1:"-3.38379",x2:"664.53",y2:"-145.463",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#F45397"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#FFB525"})]})]})]})};var n0=e=>{let{onBookmark:t,isBookmarked:i}=e;return(0,r.jsxs)("div",{className:"relative mt-8 flex h-[220px] w-full max-w-[720px] flex-col items-center justify-center gap-4 overflow-hidden rounded-xl p-8 shadow",style:{background:"linear-gradient(180deg, #4233EF 0%, #3A2BF5 100%)"},children:[(0,r.jsx)("div",{className:"absolute -bottom-[145.745px] -left-[125px] h-[224px] w-[316px] rotate-[35.089deg]",style:{background:"linear-gradient(180deg, #3C2EDD 24.57%, #3AC3FF 76.02%))",filter:"blur(50px)"}}),(0,r.jsx)("div",{className:"z-20 w-full self-stretch text-center",children:(0,r.jsxs)("span",{style:{textShadow:"0px 1px 2px rgba(15, 23, 42, 0.1)"},className:"text-center text-lg font-semibold leading-7 text-white",children:["Was this Scribe helpful?",(0,r.jsx)("br",{}),"Save this document for future reference."]})}),(0,r.jsx)(nX,{className:"absolute bottom-0 left-0 z-10"}),(0,r.jsx)(n$,{className:"absolute right-0 top-0 z-10"}),(0,r.jsx)("img",{src:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/features/click_target.png",alt:"click-target-circles-background",className:"absolute right-0 top-0 z-10 h-[100%] w-[100%] object-cover lg:object-fill"}),(0,r.jsxs)(tZ.Z,{size:"small",variant:"social",onClick:t,className:"z-50 overflow-hidden rounded-[4px] md:flex md:flex-row",children:[(0,r.jsx)(M.G,{icon:i?c.xVw:O.xVw,className:(0,Z.cn)("group-hover:text-slate-900",{"text-slate-600":!i,"text-slate-700":i})}),(0,r.jsx)("span",{className:"ml-1.5 text-center text-[15px] font-semibold text-slate-800",children:"Save for Later"})]})]})},n1=i(18587),n2=i(29480),n4=e=>{let t,{showOneTapSignupCta:i=!1}=e,n=(0,ej.useRouter)(),[l,s]=(0,L.useState)(!1),o="viewer_page_bottom";return t=i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"px-4 text-center font-sans text-lg font-normal text-white",children:"Welcome! Ready to experience the magic of Scribe?"}),(0,r.jsxs)(tZ.Z,{variant:"secondary",onClick:()=>{(0,F.L9)("click_one_tap_cta"),n.push("/welcome")},children:["Finish Account Setup",(0,r.jsx)(ek.cql,{size:20,className:"ml-3 text-indigo-300"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"px-4 text-center font-sans text-lg font-normal text-white",children:"Did this Scribe help you? It could help other people on your team too!"}),(0,r.jsxs)(tZ.Z,{variant:"secondary",onClick:()=>{(0,F.L9)("click_invite_teammates",{location:o}),s(!0)},children:["Invite Teammates",(0,r.jsx)(ek.zOC,{size:20,className:"ml-3 text-indigo-300"})]})]}),(0,r.jsxs)(r.Fragment,{children:[t,l&&(0,r.jsx)(t5.Z,{modalType:"invite",visible:l,onClose:()=>s(!1),location:o})]})},n5=i(59401),n3=e=>{let t,{showProfilePic:i,profilePicUrl:n,estimatedTime:l,hasPublicProfile:s,profileSlug:o,firstName:a}=e,d=(0,ej.useRouter)();return a&&l&&l<6e5&&(t=(0,nH.Z)(l)),(0,r.jsxs)("div",{className:"relative flex flex-col items-center justify-center",children:[i&&n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute -bottom-8 flex flex-row items-center justify-center overflow-hidden sm:!-bottom-16 xs:-bottom-10 mobile:-bottom-8",children:(0,r.jsx)("div",{className:"flex h-[401px] w-[401px] flex-row items-center justify-center overflow-hidden rounded-full bg-white/[0.045]",children:(0,r.jsx)("div",{className:"flex h-[301px] w-[301px] flex-row items-center justify-center overflow-hidden rounded-full bg-white/[0.075]",children:(0,r.jsx)("div",{className:"flex h-[203px] w-[203px] flex-row items-center justify-center rounded-full border-[50px] border-white/[0.115] border-opacity-70 bg-transparent",children:(0,r.jsx)("div",{className:"flex h-[104px] w-[104px] flex-row items-center justify-center rounded-full border-[24px] border-white/[0.15] bg-transparent",children:(0,r.jsx)(eX.qE,{size:"2xl",children:n?(0,r.jsx)(eY(),{src:n,width:56,height:56,alt:a}):a})})})})})}),(0,r.jsx)("div",{className:"h-16"})]}):(0,r.jsx)(n5.Z,{variant:"duotone",icon:"stopwatch",size:48,primaryColor:"#5EEAD4",secondaryColor:"#5EEAD4"}),t?(0,r.jsxs)("span",{className:"mx-6 my-5 text-center font-sans text-base font-semibold text-white mobile:text-lg",children:[a," made this Scribe in ",t.includes("minute")?"less than ".concat(t):t,"."]}):(0,r.jsx)("span",{className:"mx-6 my-5 text-center font-sans text-base font-semibold text-white mobile:text-lg",children:"Want to make guides like this in seconds? Yes, it's really that fast."}),(0,r.jsxs)(tZ.Z,{variant:"secondary",size:"large",className:"z-50",style:{transform:"translate3d(0, 0, 200px)"},onClick:()=>{s&&o?((0,F.L9)("click_profile_from_doc",{location:"doc_footer"}),d.push("/by/".concat(o))):((0,F.L9)("click_get_scribe",{location:"viewer_page_bottom"}),d.push("/signup?direct=true"))},children:[s&&o?"Show Me More":"Show Me How",(0,r.jsx)("div",{className:"w-1"}),(0,r.jsx)(ek.cql,{size:20,className:"mr-3 text-black"})]})]})},n9=e=>{var t;let{scribeFile:i,firstName:n,loggedIn:l,showOneTapSignupCta:s}=e,o=null!==(t=null==i?void 0:i.user_owner)&&void 0!==t?t:{},{scribe_owned:a,profile_picture_url:d,has_public_profile:c,id:u,estimated_time:m}=o,x=u?(0,tx.km)(u,(0,eO.GK)(o)):"";return(0,r.jsx)("div",{className:(0,Z.cn)("flex w-full flex-col items-center justify-center rounded-xl bg-white bg-gradient-to-b shadow",a&&d&&"min-h-[220px] overflow-y-hidden from-[#3C2EDD] to-[#2F22C0] py-0",(!a||!d)&&"from-indigo-500 to-indigo-600 py-12"),children:l?(0,r.jsx)(n4,{showOneTapSignupCta:s}):(0,r.jsx)(n3,{showProfilePic:a,profilePicUrl:d,estimatedTime:m,firstName:n,hasPublicProfile:c,profileSlug:x})})},n6=i(17561),n8=e=>{var t,i,n;let{loggedIn:l,hasCompleted:s,showScribeMarketing:o,showOneTapSignupCta:a,scribeFile:d,showInsightsCompletionCTA:c=!1,totalActionCount:u,isBookmarked:m,onBookmark:x,isCommunityDoc:p,isSidepanelInstance:h=!1,onComplete:v,isGuiding:g=!1}=e,f=(0,ea.Z)("doc_insights_completion_cta"),{docInsightsCompletionCta:b}=(0,T.v9)(eB.F),_=!l&&f&&b&&u>0,w=(null!==(i=null==d?void 0:d.author)&&void 0!==i?i:"").split(" ")[0];(0,L.useEffect)(()=>{(0,F.zm)("doc_insights_completion_CTA",f)},[f]);let j=(null==d?void 0:d.show_completion_step)&&(0,r.jsx)(n1.Z,{ownerFirstName:w,hasCompleted:s,onComplete:()=>{(0,F.L9)("marked_document_complete",{file_id:null==d?void 0:d.id,location:"doc_footer",doc_type:"Scribe"}),g&&(0,F.L9)("guide_me_toggle_completion_step",{file_id:null==d?void 0:d.id}),null==v||v()},showAuthor:null!==(n=null==d?void 0:d.show_author)&&void 0!==n&&n}),y=null==d?void 0:null===(t=d.user_owner)||void 0===t?void 0:t.scribe_owned,{data:N,isLoading:k}=(0,n2.Z)({pathParams:{id:null==d?void 0:d.id},isAuthenticated:!0},{enabled:!!(null==d?void 0:d.id)&&y});return y&&!h?(0,r.jsx)(n6.x,{relatedDocuments:N,loading:k}):p?(0,r.jsx)(n0,{onBookmark:x,isBookmarked:m}):c&&f&&l||_?j:!o||(0,tO.d)()?null:(0,r.jsx)(n9,{scribeFile:d,firstName:w,loggedIn:l,showOneTapSignupCta:a})},n7=e=>{let{canUpdateDocument:t}=e,i=(0,T.I0)(),{scribeFile:n}=(0,T.v9)(tc.Q),l=(0,eO.em)(n),s=(0,eO.rF)(n),o=l||s,a="This Scribe is out of date!";return s&&(a="This Scribe will soon be out of date."),l&&(a="This Scribe is out of date!"),o?(0,r.jsx)(nY,{message:a,variant:"warning",children:t&&(0,r.jsx)(tZ.Z,{disabled:!o,size:"small",variant:"outlineLight",onClick:()=>{i((0,tc.iW)({documentId:n.id,bodyParams:{update_reminder:!0}})),(0,F.L9)("update_document_reminder",{file_id:n.id,update_reminder:!0})},children:"Mark up to date"})}):null},le=i(91073),lt=i(44590),li=i(50327),ln=i(68286),ll=i(51008),ls=i(44565);let lo=e=>{let{mode:t,onChangeMode:i}=e,n=(0,eU.N9)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eM.z,{variant:"secondary",icon:O.LEp,onClick:()=>i("viewer"),"data-testid":"done-editing",children:"Done Editing"}),!n&&(0,r.jsx)("button",{className:"ml-2 cursor-pointer bg-transparent",onClick:()=>((0,F.L9)("toggle_editor_right_sidebar",{open:"editor_sidebar_hidden"===t}),i((0,iB.G)(t))),"aria-label":"Toggle Sidebar",children:(0,r.jsx)(M.G,{icon:O.o_j,className:"text-slate-500 hover:text-slate-800"})})]})};var la=i(11215),lr=i(37984),ld=i(1581),lc=i(53924),lu=i(67840),lm=i(83449),lx=i(35286),lp=i(13135);let lh="scribe_editor_page_copy_scribe_share_button",lv=[{labelText:"Link",subtext:"Share fast and manage access",icon:O.OH3,value:"people"},{labelText:"Embed",subtext:"Publish to wiki, help center, website",icon:O.JyM,value:"smart-embed"},{labelText:"Export",subtext:"Share offline (PDF, HTML, more)",icon:O.q7m,value:"export"}],lg=e=>{let{document:t,onMenuItemClick:i,loading:n}=e,{data:l}=(0,$.ZP)(),{refetch:s}=(0,tl.Z)(null==t?void 0:t.id,null==t?void 0:t.type),o=(0,T.I0)(),a=(0,tm.Z)(t),{isHardUsageLimitReached:d}=(0,ta.Z)(),{variant:c}=(0,X.Z)(Y.Ro),{url:u,onClick:m}=(0,lp.sY)({document:t,sharedFirstScribe:null==l?void 0:l.shared_first_scribe,desktopOnly:null==l?void 0:l.isDesktopOnly,location:lh,adjustPermissions:()=>{d||o((0,tc.$C)({document:t,permissions:a,location:lh})).then(()=>s())}});return(0,r.jsxs)("div",{className:"flex items-center self-stretch",children:[c===Y.DM.COPY_LINK_BUTTON_AND_SHARE_MODAL_DROPDOWN?(0,r.jsxs)(lm.h_,{modal:!1,children:[(0,r.jsx)(lm.$F,{asChild:!0,children:(0,r.jsx)(eM.z,{loading:n,icon:O.zBy,"data-testid":"share-scribe",className:(0,lx.cn)("rounded-r-none focus:outline-transparent"),children:"Share"})}),(0,r.jsx)(lm.AW,{align:"end",alignOffset:-32,onFocusOutside:e=>e.preventDefault(),className:"w-64",children:lv.map((e,t)=>(0,r.jsxs)(L.Fragment,{children:[(0,r.jsx)(lm.Xi,{icon:e.icon,subtext:e.subtext,onClick:()=>{i(e.value),(0,F.L9)("click_share_button_dropdown_menu",{selected_option:e.value})},children:e.labelText}),t<lv.length-1&&(0,r.jsx)(lm.VD,{theme:"dark"})]},e.value))})]}):(0,r.jsx)(eM.z,{loading:n,icon:O.zBy,"data-testid":"share-scribe",className:(0,lx.cn)("rounded-r-none focus:outline-transparent"),onClick:()=>{i("people")},children:"Share"}),(0,r.jsx)(lc.u,{showButtonText:!1,className:"rounded-l-none focus:outline-transparent",url:u,onClick:()=>{m(),d&&i("people")}})]})};var lf=i(38190),lb=i(87846);let l_=e=>(0,r.jsx)(eM.z,{variant:"secondary",icon:O.IwR,"data-testId":"edit-scribe",...e,children:"Edit"}),lw=e=>(0,r.jsx)(eM.z,{icon:O.zBy,"data-testid":"share-scribe",...e,children:"Share"}),lj=e=>{let{isGuiding:t,onClick:i,...n}=e;return(0,r.jsx)(eM.z,{className:t?"px-3.5 py-2.5 shadow-[0px_0px_2px_0px_rgba(51,65,85,0.10),0px_2px_6px_0px_rgba(51,65,85,0.05)]":"",variant:"secondary",icon:O.$40,"data-testid":"guide-me-button",onClick:i,...n,children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-1.5",children:["Guide Me",!t&&(0,r.jsx)(lb.C,{variant:"brand",children:"BETA"}),t&&(0,r.jsx)(lb.C,{variant:"success",children:"ON"})]})})},ly=e=>{var t;let{documentData:i,feedbackShown:n,insightsShown:l,versionHistoryShown:s,onChangeMode:o,onShareClick:a,onFeedbackClick:d,onInsightsClick:u,onGuideMeClick:m,onVersionHistoryClick:x,canShowEditButton:p,canShowFeedbackButton:h,canShowInsightsButton:v,canShowVersionHistoryButton:g,canShare:f,account:b,startedScrolling:_,canShowGuideMeButton:w,isGuiding:j,isSidepanelInstance:y=!1}=e,N=(0,ea.Z)("viewer_display_should_toggle_insights"),{enabled:k,ready:C}=(0,X.Z)(Y.Ro),{isLoading:S,data:I,error:L}=(0,lr.L)(null==i?void 0:i.id),T=(0,ea.Z)("doc_insights"),E=(0,tm.Z)(i),F="ring-1 ring-slate-700 hover:ring-2 hover:ring-slate-100/50 hover:ring-offset-1 hover:ring-offset-slate-700 group-hover:text-slate-900",B=(0,en.te)(null==i?void 0:i.id);return(0,r.jsxs)(r.Fragment,{children:[!S&&!L&&(null==I?void 0:I.viewers)&&I.viewers.length>0&&(0,r.jsx)("div",{className:"hidden pr-0 md:flex md:items-center md:justify-center",children:(0,r.jsx)(lu.Z,{canEdit:null==E?void 0:E.can_edit,documentViews:I,onClick:v?u:void 0,insightsShown:l,variant:"lightBackground",docType:"Scribe"})}),(0,r.jsx)(la.Z,{isBookmarked:null===(t=B.data)||void 0===t?void 0:t.is_bookmarked,documentData:i,showButtonCopy:_}),!N&&T&&(null==E?void 0:E.can_edit)&&(0,r.jsx)(ld.pn,{children:(0,r.jsxs)(ld.u,{children:[(0,r.jsx)(ld.aJ,{children:(0,r.jsx)(eM.z,{variant:"secondary",className:(0,Z.cn)("hidden md:flex",{[F]:l}),onClick:u,"aria-label":l?"Hide Insights":"Show Insights",icon:l?c.mfE:O.mfE,iconProps:{className:(0,Z.cn)("hover:text-slate-900",{"text-slate-600 ":!n,"text-slate-700":n})}})}),(0,r.jsx)(ld._v,{side:"bottom",variant:"compact",children:l?"Hide Insights":"Show Insights"})]})}),h&&(0,r.jsx)(ld.pn,{children:(0,r.jsxs)(ld.u,{children:[(0,r.jsx)(ld.aJ,{children:(0,r.jsx)(eM.z,{variant:"secondary",className:(0,Z.cn)("hidden md:flex",{[F]:n}),onClick:d,"aria-label":n?"Hide Feedback":"Show Feedback",icon:n?c.tap:O.tap,iconProps:{className:(0,Z.cn)("hover:text-slate-900",{"text-slate-600 ":!n,"text-slate-700":n})}})}),(0,r.jsx)(ld._v,{side:"bottom",variant:"compact",children:n?"Hide Feedback":"Show Feedback"})]})}),g&&(0,r.jsx)(lf.Z,{onVersionHistoryClick:x,versionHistoryShown:s}),w&&(0,r.jsx)(lj,{isGuiding:j,onClick:m,size:"small"}),p&&(0,r.jsx)(l_,{onClick:()=>o("editor"),size:y?"small":"default"}),f?(0,r.jsx)(k?lg:lw,{loading:!C,onClick:()=>a("people"),onMenuItemClick:a,document:i,size:y?"small":"default"}):(0,r.jsx)(lc.Z,{sharedFirstScribe:null==b?void 0:b.shared_first_scribe,document:i,desktopOnly:null==b?void 0:b.isDesktopOnly})]})};var lN=e=>{var t,i,n,l,s;let{className:o,documentData:a,loggedIn:d,mode:u,showDocumentName:m,shiftLeft:x,feedbackShown:p,insightsShown:h,versionHistoryShown:v,shouldShowInsights:g,shouldGoBackToWorkspace:f,toggleSidebarToC:b,variant:_="default",onChangeMode:w,onFeedbackClick:j,onInsightsClick:y,onShareClick:N,onGuideMeClick:k,onVersionHistoryClick:C,startedScrolling:S,isSidepanelInstance:I,isGuiding:E}=e,B=(0,eO.hL)(a)&&!I,D=(0,eU.N9)(),z=(0,ea.Z)("viewer_left_toc"),P=(0,ej.useRouter)(),A=(0,ea.Z)("scribe_live_phoenix_2023q3"),{scribeLivePhoenix2023q3:R}=(0,T.v9)(eB.F),{data:G}=(0,$.ZP)(),O=null==G?void 0:null===(t=G.active_organization)||void 0===t?void 0:t.id,{breadcrumbs:U}=(0,T.v9)(li.pV),V=(0,T.I0)(),W=async()=>{var e;V((0,li.kt)(null==a?void 0:null===(e=a.folder)||void 0===e?void 0:e.id))};(0,L.useEffect)(()=>{var e,t;O&&(null==a?void 0:null===(e=a.folder)||void 0===e?void 0:e.id)?W():(null==a?void 0:null===(t=a.folder)||void 0===t?void 0:t.id)||V((0,li.kt)(null))},[O,null==a?void 0:null===(i=a.folder)||void 0===i?void 0:i.id]),(0,L.useEffect)(()=>{I&&eV(null==a?void 0:a.created)&&A&&(0,F.zm)("guide_me",!!R)},[A,R,I,null==a?void 0:a.created]);let H=(0,tm.Z)(a),q=(null==H?void 0:H.can_edit)&&"default"===_,K=to(a),Q=null==G?void 0:null===(n=G.organizations)||void 0===n?void 0:n.some(e=>{var t,i,n;return(null==e?void 0:null===(t=e.super_organization)||void 0===t?void 0:t.id)===(null==a?void 0:null===(n=a.organization_owner)||void 0===n?void 0:null===(i=n.super_organization)||void 0===i?void 0:i.id)}),J=Q&&(null==H?void 0:H.can_edit)&&(null==a?void 0:a.allow_feedback),Y=!(0,iB.m)(u)&&x,X=e=>{let{id:t,visibility:i}=e,n=t?(0,tx.km)(t,i):i;"community"!==i?P.push("/workspace#".concat(n)):P.push("/community"),V((0,li.kt)(t))},ee=(0,L.useMemo)(()=>{let e=!(null==a?void 0:a.organization_permission);return[function(){if((null==a?void 0:a.visible_in_gallery)&&(null==a?void 0:a.global_permission)==="link_read")return{label:"Community",onClick:()=>X({id:void 0,visibility:"community"})};let e=!(null==a?void 0:a.organization_permission);return{label:e?"Private":"Shared",onClick:()=>X({id:null,visibility:e?"private":"documents"})}}(),...U.map(t=>({label:t.label,onClick:()=>X({id:t.id,visibility:e?"private":"documents"})})),{label:null==a?void 0:a.name}]},[U,null==a?void 0:a.organization_permission,null==a?void 0:a.name]),et=(0,L.useMemo)(()=>(null==a?void 0:a.visible_in_gallery)?"community":"workspace",[null==a?void 0:a.visible_in_gallery]);return d?(0,r.jsxs)("div",{style:{paddingRight:Y?"".concat(320,"px"):"initial",transition:"padding-right 0.5s ease"},className:(0,Z.cn)("flex h-16 flex-1 items-center border-b border-b-[#0b1f40] border-opacity-[0.08] bg-white px-6 py-4",o,{"px-6":!I,"px-3":I}),"data-testid":"viewer-navigation-bar",children:[!D&&(0,iB.m)(u)&&z&&(0,r.jsx)("button",{className:"mr-2 cursor-pointer bg-transparent",onClick:b,children:(0,r.jsx)(M.G,{icon:c.Y5q,width:16,height:16,className:"text-slate-500 hover:text-slate-800"})}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-shrink-0 items-center",children:[(0,r.jsx)(ls.x,{shouldGoBackToWorkspace:f,overrideBackPath:(null===(l=P.query)||void 0===l?void 0:l.sidepanel)==="true"&&(null===(s=P.query)||void 0===s?void 0:s.startingUrl)?"/".concat(eT.VZ.Assistant,"?url=").concat(P.query.startingUrl,"&tabSource=").concat(et):void 0}),B&&(0,r.jsx)(ln.Z,{logoUrl:a.organization_owner.logo.download_url,altText:"".concat(a.organization_owner.name," Logo"),linkUrl:a.organization_owner.team_url}),(null==ee?void 0:ee.length)>0&&(0,r.jsx)("div",{className:"mx-4 hidden lg:block",children:(0,r.jsx)(lt.Z,{links:ee,showInitialForFirstCrumb:!1})}),m&&(0,r.jsx)("h2",{className:(0,Z.cn)("m-0 ml-6 block select-none truncate text-sm font-semibold text-slate-900 transition-opacity lg:hidden",{"pointer-events-none hidden":!m}),title:null==a?void 0:a.name,children:null==a?void 0:a.name})]}),(0,r.jsx)("div",{className:(0,Z.cn)("flex flex-shrink-0 items-center justify-end md:flex-1",{"gap-3 pr-4":!I,"gap-2 pr-3":I}),children:(0,iB.m)(u)?(0,r.jsx)(lo,{mode:u,onChangeMode:w}):!v&&(0,r.jsx)(ly,{documentData:a,onChangeMode:w,onInsightsClick:y,onShareClick:N,onGuideMeClick:k,onFeedbackClick:j,onVersionHistoryClick:C,canShowEditButton:q,canShowInsightsButton:Q&&g,canShowFeedbackButton:J,canShowGuideMeButton:I&&R&&eV(null==a?void 0:a.created),canShowVersionHistoryButton:q,feedbackShown:p,insightsShown:h,versionHistoryShown:v,canShare:K,account:G,startedScrolling:S,isGuiding:E,isSidepanelInstance:I})})]}):(0,r.jsx)(ll.Z,{documentData:a,isEditMode:!1,startedScrolling:S})},lk=i(18022),lC=i(963),lS=i(64467);let lI={a:{label:"The screenshots are not displayed the way I want them to be",isChecked:!1},b:{label:"I didn't realize Scribe was capturing what I was doing",isChecked:!1},c:{label:"Instructions generated aren't accurate or detailed enough",isChecked:!1},d:{label:"Something else went wrong",isChecked:!1,other:""}},lL=e=>{let{setAcknowledgedFirstCaptureRating:t}=e,[i,n]=(0,L.useState)(!1),[l,s]=(0,L.useState)(!1),[o,a]=(0,L.useState)(lI);return(0,L.useEffect)(()=>{(0,F.L9)("scribe_creation_rating_feedback_form_viewed")},[]),(0,r.jsxs)("div",{className:"p-0",children:[(0,r.jsxs)("div",{className:"p-4 pb-0",children:[(0,r.jsx)(nF.Z,{variant:"base",className:"m-0 mb-3",title:"What went wrong?"}),Object.keys(o).map(e=>{let{label:t,isChecked:i}=o[e];return(0,r.jsx)(nB.X,{className:"mb-3",role:"checkbox",size:"sm",label:t,checked:i,onCheckedChange:()=>{a({...o,[e]:{...o[e],isChecked:!i}}),"d"===e&&s(!l)}},e)}),l&&(0,r.jsx)(lC.o,{autoFocus:!0,className:"mb-4 ml-6",small:!0,value:o.d.other,onChange:e=>a({...o,d:{...o.d,other:e.target.value}}),placeholder:"Please specify"})]}),(0,r.jsxs)("div",{className:"flex gap-3 bg-slate-50 p-4",children:[(0,r.jsx)(eM.z,{disabled:i,onClick:e=>{e.preventDefault(),(0,F.L9)("scribe_creation_rating_submit_feedback",o),t(!0),n(!0)},className:"w-14",children:i?(0,r.jsx)(lS.$,{}):"Send"}),(0,r.jsx)(eM.z,{onClick:e=>{e.preventDefault(),(0,F.L9)("scribe_creation_rating_dismiss_feedback",o),t(!0)},variant:"secondary",children:"Dismiss"})]})]})},lT=e=>{let{firstTimeViewingFirstScribe:t,trackedCreatedFirstScribe:i,firstCreatedScribeId:n,scribeFileId:l}=e,[s,o]=(0,lk.Z)("acknowledged_first_capture_rating",!1),[a,d]=(0,L.useState)(!s&&!!t),[u,m]=(0,L.useState)(!1);return(0,L.useEffect)(()=>{d(!s&&!!t)},[s,!!t]),(0,L.useEffect)(()=>{a&&(0,F.L9)("show_scribe_creation_rating",{showScribeCreationRating:a,acknowledgedFirstCaptureRating:s,firstTimeViewingFirstScribe:t,trackedCreatedFirstScribe:i,firstCreatedScribeId:n,scribeFileId:l})},[a]),a&&(0,r.jsxs)("div",{className:"fixed bottom-4 left-4 z-10 rounded-md bg-white shadow shadow-slate-400","data-testid":"scribe-creation-rating",children:[(0,r.jsx)(M.G,{className:"absolute right-4 top-4 m-0 cursor-pointer p-0 text-slate-500",icon:c.NBC,onClick:()=>{(0,F.L9)("scribe_creation_rating_closed"),d(!1),o(!0)}}),u?(0,r.jsx)(lL,{setAcknowledgedFirstCaptureRating:o}):(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)(nF.Z,{variant:"base",className:"m-0 mb-0 text-slate-400",title:"How was your first"}),(0,r.jsx)(nF.Z,{variant:"base",className:"m-0 mb-3 text-slate-400",title:"Scribe capture experience?"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(eM.z,{onClick:()=>{(0,F.L9)("scribe_creation_rating_answered",{"How was your first Scribe Capture Experience?":"Good"}),d(!1),o(!0)},variant:"secondary",icon:c.u8Q,children:"Good"}),(0,r.jsx)(eM.z,{onClick:()=>{(0,F.L9)("scribe_creation_rating_answered",{"How was your first Scribe Capture Experience?":"Bad"}),m(!0)},variant:"secondary",icon:c.bam,children:"Bad"})]})]})]})},{publicRuntimeConfig:lE}=eb()(),lZ="".concat(lE.cursiveRootUrl,"og/"),lF=e=>"".concat(lZ).concat(e);var lB=e=>{var t,n,l,s,o,a,f,b,N,k,C,S,B;let{includeHeader:D,scribeFileData:M,actions:z,hideButtons:A,hideLogo:R,showMarketing:O,variant:U="default",isEmbedded:V=!1,isOnPages:W=!1,scrollingRef:H,hideToC:q=!1,isAuthenticated:K,isPreviewLink:ev}=e,ef=(0,T.I0)(),eb=(0,ej.useRouter)(),{pid:e_,altApi:ey,showFeedback:eZ}=eb.query,[eK,eQ]=(0,L.useState)(void 0),[eJ,eY]=(0,L.useState)(!1),eX=(0,L.useRef)(),{data:e$}=(0,$.ZP)(),e0=null==e$?void 0:e$.active_organization,{isFreeAccount:e1}=(0,ee.Z)(),{token:e2,refresh:e9}=(0,x.r_)(),[e7,te]=(0,L.useState)(0),[ti,tn]=(0,L.useState)(0),{visibleActions:tl,totalActionCount:ts,actionsWithoutSectionsCount:to,isLoadingActions:ta,visibleActionScribeId:tr,initialClientSideActionLoadComplete:td}=(0,T.v9)(E.JR),{isDeletingActions:tu}=(0,T.v9)(E.rI),{scribeFile:tm,isLoading:tp,isError:th}=(0,T.v9)(tc.Q),tv=(0,en.te)(null==M?void 0:M.id),{mutate:tg}=(0,en.ru)(),tf=(0,eS.useQueryClient)(),[tb,t_]=(0,L.useState)(!1),[tw,tj]=(0,L.useState)(!1),[ty,tN]=(0,L.useState)(!1),[tk,tC]=(0,L.useState)(!1),[tS,tI]=(0,L.useState)(!1),[tL,tE]=(0,L.useState)(0),tZ=(0,ea.Z)("doc_insights"),tB=(0,ea.Z)("l4_viewer_progress"),tD=(0,X.Z)(Y.$H),{updateGrowthState:tM}=(0,er.N)(),[tz,tP]=(0,L.useState)(!1),{isLoggedIn:tV,isFreeUser:tQ}=(0,p.TR)(),tJ=K||tV,{setSessionPercentage:tY,refetchDocumentViews:tX,isStale:t$,userCompletion:t0}=(0,el.Z)({documentId:null==tm?void 0:tm.id,authenticated:tV,userId:null==e$?void 0:e$.id});(0,ec.Z)(null==tm?void 0:tm.id,tV);let t1=(0,L.useRef)({}),t8=eg()(e=>{let{currentStep:t,totalCount:i}=e;tn(t),te((t+1)/i*100)},500,{trailing:!0});(0,L.useEffect)(()=>{tY(e7),e7>tL&&tE(e7),e7>0&&!tz&&tP(!0)},[e7,tL,tY,tz]);let ie=(0,T.v9)(E.Mf),it=(0,L.useCallback)(e=>ef((0,E.Kd)(e)),[ef]),[il,is]=(0,L.useState)(!1),[io,ia]=(0,L.useState)(null),[ir,id]=(0,L.useState)(!1),[ic,iu]=(0,L.useState)(!1),[im,ix]=(0,L.useState)(!1),[ip,ih]=(0,L.useState)(!1),[iv,ig]=(0,L.useState)(!1),[ib,i_]=(0,L.useState)(!1),[iw,ij]=(0,L.useState)(void 0),[iy,iN]=(0,L.useState)(null),[ik,iC]=(0,L.useState)(!1),[iS,iI]=(0,L.useState)("viewer"),[iL,iT]=(0,L.useState)({showModal:!1,activeTab:"people"}),iE=(0,L.useRef)(null),{isUnstackingActionsError:iZ,isUnstackingActions:iF}=(0,T.v9)(E.oX),[iD,iM]=(0,L.useState)(null),iz=(null==tm?void 0:tm.id)===(null==M?void 0:M.id)&&tm||M,{moveActionsToTop:iP,moveActionsToBottom:iA,duplicateSelectedActions:iR,isDuplicatingError:iG,setIsDuplicatingError:iO}=(0,ei.Z)(null==iz?void 0:iz.id),{scribeFile:iU,refetchScribeFile:iV}=(0,eu.c)(null==iz?void 0:iz.id),iW=td?tl:z,iH=(0,L.useRef)(null),[iq,iK]=(0,L.useState)(!1),[iQ,iJ]=(0,L.useState)(!1),iY=(0,ea.Z)("document_timeline"),iX=(0,ea.Z)("bulk_step_management_new"),i$=(0,ea.Z)("viewer_left_toc"),{scribeLivePhoenix2023q3:i0}=(0,T.v9)(eB.F),i1=(0,eU.N9)(),{permissions:i2}=(0,et.ZP)(null==iz?void 0:iz.id),i4=(null==i2?void 0:i2.can_edit)&&"default"===U,i5=!!(null==e$?void 0:e$.id)&&(null==iz?void 0:null===(t=iz.user_owner)||void 0===t?void 0:t.id)===(null==e$?void 0:e$.id),i3="true"===eb.query.inContextViewer,i9=ed(),i6=i3&&"true"===eb.query.sidepanel,i8=(null==iz?void 0:iz.no_index)===!0,i7=(()=>{let e=i9||i3;return i6?!eb.asPath.startsWith("/page/"):!A&&!e})();(0,L.useEffect)(()=>{i6&&(0,tT.MK)({messageType:"updateSidepanelContentUrl",url:eb.asPath})},[i6]);let ne=i$&&!i1&&!q&&!V&&(!i3||!i9),nt=iz&&!iW.length&&!ta,[ni,nn]=(0,L.useState)(null),nl="default"===U&&!i5&&"viewer"===iS&&(!i3||!i9)&&!V&&(null==iz?void 0:iz.allow_feedback),[ns,no]=(0,L.useState)(nl),[na,nr]=(0,L.useState)(!0==!!eZ&&(null==iz?void 0:iz.allow_feedback)),[nd,nc]=(0,L.useState)(!1),[nu,nm]=(0,L.useState)(!1),[nx,np]=(0,L.useState)(void 0),[nh,nv]=(0,L.useState)("unresolved"),[ng,nf]=(0,L.useReducer)(v.I6,v.E3),{viewerDisplayShouldToggleInsights:nb}=(0,T.v9)(eB.F),n_=(0,e8.k)(),[nw,nj]=(0,L.useState)(!1),[ny,nN]=(0,L.useState)(!1),[nk,nC]=(0,L.useState)(!0),[nS,nI]=(0,L.useState)(!1),[nL,nT]=(0,L.useState)(!1),[nE,nZ]=(0,L.useState)(!1),[nF,nB]=(0,L.useState)(!1),[nD,nM]=(0,L.useState)(!1),nz=!!(null==iz?void 0:iz.visible_in_gallery),{tabs:nP,currentWindowId:nA}=(0,tR.L)(),[nR,nG]=(0,L.useState)(!1),nV=(0,eh.Z)(),nH=(0,eE.Ij)()===eT.ft.MacOS,nJ=(0,eE.Ij)()===eT.ft.Windows,nX=(null==e0?void 0:null===(n=e0.super_organization)||void 0===n?void 0:n.allow_desktop)&&!e1,n$=iW.filter(e=>e.selected).map(e=>e.id),n0="scribe_viewer_team_insights",n1=iW.filter(e=>n$.includes(e.id)),n2=n$.every((e,t)=>iW.findIndex(t=>t.id===e)-iW.findIndex(e=>e.id===n$[0])===t),n4=e$&&!(null==e$?void 0:e$.tracked_created_first_scribe)&&(null==e$?void 0:e$.first_created_scribe_id)===iz.id,{scrollToAction:n5,scrollToTop:n3}=(0,I.Z)({visibleActions:iW,scribeFileId:null==tm?void 0:tm.id}),n9=(0,ep.Z)();(0,L.useEffect)(()=>{var e;np(null===(e=iW.find(e=>!!(null==e?void 0:e.url)))||void 0===e?void 0:e.url)},[iW]),(0,ex.Z)(i3,iW),(0,L.useEffect)(()=>{nt&&(0,ex.M)()},[nt]),(0,L.useEffect)(()=>{(null==M?void 0:M.id)&&(V||W)&&!i3&&tL>20&&!iq&&nV&&((0,eW.ZP)(null==M?void 0:M.id,V?"embed":"scribe-on-page",nV,V?"embedded":void 0,V?ev?eW.pJ.LinkScroll:eW.pJ.EmbedScroll:void 0),iK(!0))},[V,ev,W,i3,null==M?void 0:M.id,tL,iq,nV]);let n6=e=>{let t=(0,tx.km)(M.id,M.name);String(e_).trim()===t&&(0,F.L9)("created_scribe",{file_id:(0,tx.IT)(e_),recorder_type:e},"action","total_unique_scribe_created")},lt=(0,eO.By)(null==e$?void 0:e$.active_organization.super_organization),li=(0,es.v)({documentId:iz.id,enabled:!!(null==iz?void 0:null===(s=iz.organization_owner)||void 0===s?void 0:null===(l=s.super_organization)||void 0===l?void 0:l.version_history_enabled)&&!!i4}),ln=(0,eo.HJ)({documentId:iz.id}),ll=(0,eo.gZ)({documentId:iz.id}),[ls,lo]=(0,eL.Z)("seenReverseProTrialModal",!1),[,la]=(0,eL.Z)("reverseProTrialModalSeenCount","first"),lr=()=>{(0,F.GM)((0,tx.IT)(e_).substring(1)),tM({trackedCreatedFirstScribe:!0})};(0,L.useEffect)(()=>{iH.current=document.documentElement,ef((0,h.S1)())},[]);let ld=async e=>{nj(!1),(0,F.L9)("user_clicked_continue_with_google_one_tap"),(0,eR._I)(e.credential,ef,eb,()=>nC(!0),()=>{nI(!0),nj(!0)})},lc=e=>{e.isNotDisplayed()||e.isSkippedMoment()?(nj(!1),(0,F.L9)("closed_one_tap",{scribeId:null==iz?void 0:iz.id,progress:tL})):e.isDisplayed()&&nj(!0)};(0,L.useEffect)(()=>{if(ny){var e,t,n,l,s,o;null===(n=i.g)||void 0===n||null===(t=n.window)||void 0===t||null===(e=t.google)||void 0===e||e.accounts.id.initialize({client_id:lE.googleOauthClientId,callback:ld,prompt_parent_id:"oneTapContainer",context:"signup",cancel_on_tap_outside:!1}),null===(o=i.g)||void 0===o||null===(s=o.window)||void 0===s||null===(l=s.google)||void 0===l||l.accounts.id.prompt(lc)}},[ny]),(0,L.useEffect)(()=>{if("included"===U||!i2)return;let e=new URL(window.location.href);"true"===eb.query.extension&&(n6("extension"),setTimeout(()=>{iI("editor")},1e3),e.searchParams.delete("extension"),window.history.replaceState({},"",e.toString()),iI("editor")),"true"===eb.query.desktoprecorder&&(n6("desktop"),e.searchParams.delete("desktoprecorder"),window.history.replaceState({},"",e.toString()),iI("editor")),"true"===eb.query.editmode&&(e.searchParams.delete("editmode"),window.history.replaceState({},"",e.toString()),i4&&iI("editor")),"true"===eb.query.share_modal&&iT({showModal:!0,activeTab:"people"}),"true"===eb.query.cutoff&&(e.searchParams.delete("cutoff"),window.history.replaceState({},"",e.toString()),iJ(!0)),"true"===eb.query.showupdates&&(e.searchParams.delete("showupdates"),window.history.replaceState({},"",e.toString()),tC(!0)),"true"===eb.query.showSuccess&&(e.searchParams.delete("showSuccess"),window.history.replaceState({},"",e.toString()),(0,eP.Am)({title:"Success!",description:"The selected steps have been copied to this Scribe.",icon:d.fV7,variant:"success"})),"true"===eb.query.insights&&tZ&&(null==i2?void 0:i2.can_edit)&&!i6&&(e.searchParams.delete("insights"),window.history.replaceState({},"",e.toString()),nZ(!0),nT(!0))},[i2]),(0,L.useEffect)(()=>{n_.history&&!i6&&n_.history.length>=1&&nZ(!0)},[n_,i6]),(0,L.useEffect)(()=>{if(ti>0&&i3){let t=iW[Math.max(ti-2,0)];if(t){var e;top.postMessage({messageType:"scribeViewerProgress",stepHash:null===(e=t.id)||void 0===e?void 0:e.split("-")[0],progress:e7},"*")}}},[ti,i3]),(0,L.useEffect)(()=>{(null==tm?void 0:tm.id)&&tf.setQueryData([em.m0,null==tm?void 0:tm.id],tm)},[tm]),(0,L.useEffect)(()=>()=>{e$&&e_&&String(null==e$?void 0:e$.first_created_scribe_id)===String((0,tx.IT)(e_).substring(1))&&!(null==e$?void 0:e$.tracked_created_first_scribe)&&lr()},[]),(0,L.useEffect)(()=>{if(null==e$?void 0:e$.id){var e,t;ef((0,eD.bC)({docId:null==iz?void 0:iz.id,superOrganizationId:null==e$?void 0:null===(t=e$.active_organization)||void 0===t?void 0:null===(e=t.super_organization)||void 0===e?void 0:e.id})),ef((0,eD.uZ)({docId:null==iz?void 0:iz.id,authenticated:!0}))}else ef((0,eD.bC)({docId:null==iz?void 0:iz.id})),ef((0,eD.uZ)({docId:null==iz?void 0:iz.id,authenticated:!1}))},[ef,null==e$?void 0:e$.id,null==iz?void 0:iz.id,null==e$?void 0:null===(a=e$.active_organization)||void 0===a?void 0:null===(o=a.super_organization)||void 0===o?void 0:o.id]);let lu=()=>"true"!==eb.query.sidepanel?eW.pJ.LinkScroll:nR?eW.pJ.GuideMe:eW.pJ.LinkScrollSidekick;(0,L.useEffect)(()=>{let e=lu();if(i.g.window&&window.location.href.includes("/shared/")){var t,n,l,s;(0,F.L9)("view_scribe",{id:(0,tx.IT)(e_),viewing_device:(0,eU.ic)()?"mobile":"desktop",creator:null==iz?void 0:iz.user_owner.id,creator_type:(0,eH.jC)(iz),doc_super_org_plan:null==iz?void 0:null===(l=iz.organization_owner)||void 0===l?void 0:null===(n=l.super_organization)||void 0===n?void 0:null===(t=n.plan)||void 0===t?void 0:t.name,creator_email:null==iz?void 0:null===(s=iz.user_owner)||void 0===s?void 0:s.email,visible_in_gallery:null==iz?void 0:iz.visible_in_gallery,view_format:e})}},[]),(0,L.useEffect)(()=>{ef((0,tc.iv)({data:M}))},[M]),(0,L.useEffect)(()=>{nX&&(nH||nJ)&&!(0,tO.d)()&&nm(!0)},[nX,tJ]),(0,L.useEffect)(()=>{n4&&!eJ&&(ls&&(lo(!1),la("second")),eQ("ongoing"),eY(!0))},[n4]),(0,L.useEffect)(()=>{if(eK)return eX.current=setTimeout(()=>{eQ("stopping")},1500),()=>{clearTimeout(eX.current)}},[eK]);let lm=(0,L.useCallback)(()=>"true"===ey||(null==e$?void 0:e$.isDesktopOnly),[null==e$?void 0:e$.isDesktopOnly,ey]),lx=(0,L.useMemo)(()=>iz?(0,tx.Eo)(iz.id,iz.name,lm()):null,[lm,iz]);(0,L.useEffect)(()=>()=>{iE.current&&clearTimeout(iE.current)},[]);let lp=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];iN("in_progress");let t=0,i=()=>{ef((0,tc.kO)(iz.id)).then(u.SI).then(e=>["success","error"].includes(e.auto_stacking_status)?Promise.resolve("error"===e.auto_stacking_status):Promise.reject()).then(e=>{e?iN("error"):ef((0,E.Sv)({scribeDocumentId:iz.id,skip:0})).then(()=>{iN(null)})}).catch(()=>{if(t++>=25){iN("error");return}iE.current=setTimeout(i,1500)})};ef((0,E.gO)({scribeDocumentId:iz.id})).then(u.SI).then(i).catch(()=>{iN("error")}),e&&(0,F.L9)("edited_file_magic_merge",{location:"editor_step_actions",actionIds:n$})},lh=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];for(let e of iW)"section"===e.kind&&e.selected?(t.push(e.id),e.collapsed&&(t=t.concat((0,eA.As)(iW,e.id)))):e.selected&&t.push(e.id);if(n1.length<2)return iu(!0),Promise.reject();if(!n1.some(e=>e.screenshot))return ix(!0),Promise.reject();if(n1.find(e=>e.external_screenshot_url&&(0,eA.sY)(e.external_screenshot_url))&&!e){ig(!0);return}if(n1.find(e=>e.screenshot&&"uploaded"!==e.screenshot.upload_status)){ih(!0);return}return new Promise((e,i)=>{ef((0,E.dk)({scribeDocumentId:iz.id,actions:iW,actionIdsToStack:t})).then(u.SI).then(()=>{var e;iV(),ef((0,E.Tf)({documentId:null==iz?void 0:iz.id,fromActionId:t[0],toActionId:null===(e=iW[iW.length-1])||void 0===e?void 0:e.id}))}).catch(()=>{i()}),ia(null),e(null)})},lv=()=>{ef((0,E.FT)(iz.id)).then(u.SI).then(()=>{var e;ef((0,E.Sv)({scribeDocumentId:iz.id,skip:0})),ef((0,E.Tf)({documentId:null==iz?void 0:iz.id,toActionId:null===(e=iW[iW.length-1])||void 0===e?void 0:e.id}))})};(0,tG.M)(H||iH,()=>{(null==iz?void 0:iz.id)&&!ta&&iW.length<ts&&tr===iz.id&&ef((0,E.Sv)({scribeDocumentId:iz.id,skip:iW.length,useAlternativeApi:lm(),version_id:iz.document_version}))},{throttle:300,additionalCallback:()=>{t_((!i3||!i9)&&!nw&&iH.current.scrollTop>180)}});let lg=()=>Math.max(...Object.values(t1.current).map(e=>e.index)),lf=()=>Math.min(...Object.values(t1.current).map(e=>e.index)),lb=()=>Math.max(...Object.values(t1.current).map(e=>e.sortOrder));(0,L.useEffect)(()=>{let e=10*Math.floor(e7/10);e>tL&&tE(e)},[e7]),(0,L.useEffect)(()=>{if(0===iW.length||tu||ta||iW.length>=ts)return;let e=0;for(let t=iW.length-1;t>=0;t--)if(iW[t].hidden||(e+=1),e>=20)return;ef((0,E.Sv)({scribeDocumentId:iz.id,skip:iW.length,useAlternativeApi:lm()}))},[ta,iW,tu]),(0,L.useEffect)(()=>{if(!tS||!iz)return;let e=window.location.hash&&window.location.hash.slice(1);if(e){let t=document.getElementById(e);if(iM(e),t){i3?(t.scrollIntoView(),(0,ex.M)()):t.scrollIntoView({behavior:"smooth",block:"start"});let e=window.location.href.substring(0,window.location.href.indexOf(window.location.hash));window.history.replaceState({...window.history.state,as:e,url:e},"",e)}else ef((0,E.Sv)({scribeDocumentId:iz.id,skip:iW.length,fetchUntilElementWithHash:e,useAlternativeApi:lm()})).then(()=>{setTimeout(()=>{let t=document.getElementById(e);if(t){t.scrollIntoView({behavior:"smooth",block:"start"});let e=window.location.href.substring(0,window.location.href.indexOf(window.location.hash));window.history.replaceState({...window.history.state,as:e,url:e},"",e)}},1e3)})}},[tS,iz,null===(N=i.g)||void 0===N?void 0:null===(b=N.window)||void 0===b?void 0:null===(f=b.location)||void 0===f?void 0:f.hash]),(0,L.useEffect)(()=>{iz&&ef((0,E.Sv)({scribeDocumentId:iz.id,skip:0,useAlternativeApi:lm()})).then(()=>{setTimeout(()=>tI(!0),500)})},[null==iz?void 0:iz.id]),(0,L.useEffect)(()=>{no(nl)},[nl]),(0,L.useEffect)(()=>{ia(null)},[iS]),(0,L.useEffect)(()=>{((null==i2?void 0:i2.can_edit)||i5)&&void 0!==nb&&(0,F.zm)("viewer_display_should_toggle_insights",nb)},[null==i2?void 0:i2.can_edit,i5,nb]);let l_=()=>{let e=iw.split("?")[0].split("/"),t=e[e.length-1],i=eb.asPath.split("/");i[i.length-1]===t&&window.location.reload()},lw=e=>{var t;if(!(null==e0?void 0:null===(t=e0.super_organization)||void 0===t?void 0:t.allow_web)){(0,eP.Am)({title:"Capturing Disabled",description:"Capturing with extension is disabled. Contact admin for more information.",icon:c.xHz});return}(0,tT.LB)().then(t=>{!0===t?((0,tT.MK)({messageType:"editRecordingFor",scribeId:iz.id,recordBeforeActionId:null==ie?void 0:ie.recordBeforeActionId,recordAfterActionId:(0,eO.K2)(iW,null==ie?void 0:ie.recordBeforeActionId),targetTabId:e,targetWindowId:nA}),it(null)):window.open((0,tT.Xk)(),"_blank")})},ly=()=>{let e={scribeId:iz.id,recordBeforeActionId:ie.recordBeforeActionId},t=(0,eE.Ij)();(0,F.L9)("edited_file_add_recording",{platform:t,capture_type:"desktop",file_id:iz.id}),(0,tW.Cf)("continue-recording",e),it(null)};O=void 0!==O?O:null===(C=iz.organization_owner)||void 0===C?void 0:null===(k=C.super_organization)||void 0===k?void 0:k.show_scribe_marketing;let lk=!iz.organization_owner||O,lC=!V&&iz&&iU&&"private"===iU.global_permission&&i5&&!nt&&"default"===U&&tD.ready&&!tD.enabled;(0,L.useEffect)(()=>{tJ||!lk||i3&&i9||V||(nN(!0),(0,eU.tq)()&&no(!1))},[tJ,i3,V,i9,lk]);let lS=e=>{e&&nv(e),ni&&nn(null),nr(!na),nT(!1),nc(!1),(0,F.L9)("opened_feedback_viewer",{tab:e||"unresolved"})},[lI,lL]=(0,L.useState)(!0),lZ=!!iz.show_table_of_content||!!(0,iB.m)(iS),lB=!!tZ&&!i5&&iW.length===ts&&ts>0,lD=nL&&tZ&&!(0,iB.m)(iS)&&i4,lM=iz&&e$&&(null===(S=iz.organization_owner)||void 0===S?void 0:S.show_update_reminder);(0,L.useEffect)(()=>{let e=e=>{var t;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.messageType)==="sidepanelClosed"&&nG(!1)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,L.useEffect)(()=>{nF||ie.showRecorderSelectionModal||it(null)},[it,ie.showRecorderSelectionModal,nF]);let lz=()=>{(0,tT.MK)({messageType:"openPopup",scribeId:iz.id,recordBeforeActionId:ie.recordBeforeActionId,recordAfterActionId:(0,eO.K2)(iW,ie.recordBeforeActionId),isScribeEditMode:!0})},lP="By ".concat(iz.author),lA=lF(e_),lR="".concat(iz.name||"Viewer"," | Scribe"),lG=()=>{nR?(0,F.L9)("toggle_off_guide_me",{location:"sidekick_guide_me_button",documentType:"scribe",documentId:iz.id}):(0,F.L9)("toggle_on_guide_me",{location:"sidekick_guide_me_button",documentType:"scribe",documentId:iz.id}),nG(!nR),(0,tT.MK)({messageType:"setIsGuiding",isGuiding:!nR})};(0,L.useEffect)(()=>{let{startGuiding:e,...t}=eb.query;"true"===e&&i0&&eV(null==iz?void 0:iz.created)&&(null==M?void 0:M.id)&&(null==M?void 0:M.name)&&(lG(),eb.replace({pathname:eb.pathname,query:t},void 0,{shallow:!0}))},[z,M,eb.query,i0]),(0,L.useEffect)(()=>{let{openGuide:e,...t}=eb.query;if("true"===e){let e=z.find(e=>e.url);(null==M?void 0:M.id)&&(null==M?void 0:M.name)&&(null==e?void 0:e.url)&&((0,tT.MK)({messageType:"openScribeViewer",startingUrl:e.url,location:"Scribe Viewer",scribe:{id:M.id,name:M.name}}),eb.replace({pathname:eb.pathname,query:t},void 0,{shallow:!0}))}},[z,M,eb,eb.query]);let lO=async e=>{var t,i;if(null==iz?void 0:null===(i=iz.organization_owner)||void 0===i?void 0:null===(t=i.super_organization)||void 0===t?void 0:t.version_history_enabled){if(nc(!1),ln.isLoading||"editor"!==e||"viewer"!==iS)"viewer"===e&&tf.invalidateQueries((0,eo.on)(null==iz?void 0:iz.id));else{nM(!0);try{let e=await ln.mutateAsync(null==iz?void 0:iz.document_version);if(e.file)(0,F.L9)("version_created",{file_id:iz.id,file_kind:tH.rZ.Scribe}),ef((0,tc.iv)({data:e.file})),await ef((0,E.Sv)({scribeDocumentId:iz.id,clearActions:!0}));else throw Error("No file returned for the new version")}catch(e){(0,eP.Am)({title:"Couldn't create document version",variant:"error"}),m.Tb("Error creating document version: ".concat(e))}}}"viewer"===e&&ef((0,E.c2)()),nM(!1),iI(e),lL(!0)};return(0,r.jsxs)(r.Fragment,{children:[i7&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed right-4 top-4 transition-transform duration-300 ease-out ".concat(nR?"z-20 translate-x-0":"z-0 translate-x-full"),children:(0,r.jsx)(lj,{isGuiding:!0,onClick:lG})}),(0,r.jsx)(lN,{className:"fixed inset-x-0 top-0 transition-opacity duration-300 ease-out ".concat(nR?"z-0 opacity-0":"z-20 opacity-100"),documentData:iz,showDocumentName:tb,loggedIn:tJ,toggleSidebarToC:()=>{(0,F.L9)(lI?"toc_close_viewer":"toc_open_viewer",{location:(0,iB.m)(iS)?"editor":"viewer"}),lL(!lI)},mode:iS,shouldGoBackToWorkspace:nE,shiftLeft:na||nL&&tZ||nd,shouldShowInsights:tZ&&(null==i2?void 0:i2.can_edit),feedbackShown:na,insightsShown:nL,isSidepanelInstance:i6,onInsightsClick:()=>{!nL&&t$&&tX(),nr(!1),nT(!nL),lL(!nL),(0,F.L9)(nL?"closed_insights_viewer":"opened_insights_viewer",{location:"tooltip_experiment_L4",docType:"Scribe"})},onChangeMode:lO,onShareClick:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"people";iT({showModal:!0,activeTab:e}),(0,F.L9)("click_share",{location:"scribe_editor_page_share_scribe_button",variant:"sidebar_editor_2022_new_experience",document_type:"scribe",document_id:iz.id})},onGuideMeClick:lG,variant:U,onFeedbackClick:()=>lS("unresolved"),startedScrolling:tz,showOneTapContainer:nw,versionHistoryShown:nd,onVersionHistoryClick:()=>{var e,t,i;nr(!1),nT(!1),nd&&(ef((0,tc.iv)({data:li.data.results[0].file})),ef((0,E.Sv)({scribeDocumentId:M.id,clearActions:!0}))),nc(!nd),(0,F.L9)(nd?"closed_version_history":"opened_version_history",{file_kind:tH.rZ.Scribe,document_id:iz.id,document_team_plan:null===(i=iz.organization_owner)||void 0===i?void 0:null===(t=i.super_organization)||void 0===t?void 0:null===(e=t.plan)||void 0===e?void 0:e.name})}}),!(0,iB.m)(iS)&&tB&&(0,r.jsx)(g,{progress:(()=>{let e=lf(),t=lg();return 0===e?0:t===ts-1?Math.min(99,Math.floor(t/ts*100)):Math.floor(e/ts*100)})()})]}),(0,r.jsxs)("div",{id:"scribe-file-viewer",className:(0,Z.cn)("flex h-auto min-h-full flex-1 bg-blueGray-50",{"px-2":V}),children:[D&&(0,r.jsxs)(ew(),{children:[(0,r.jsx)("title",{children:lR}),(0,r.jsx)("meta",{property:"og:type",content:"website"}),(0,r.jsx)("meta",{name:"description",content:iz.description||lP}),(0,r.jsx)("meta",{property:"og:title",content:lR}),(0,r.jsx)("meta",{name:"slack-app-id",content:lE.slackAppId}),(0,r.jsx)("meta",{property:"og:image",content:lA}),(0,r.jsx)("meta",{property:"og:url",content:lx}),(0,r.jsx)("meta",{property:"og:description",content:iz.description||lP}),(0,r.jsx)("meta",{property:"twitter:url",content:lx}),(0,r.jsx)("meta",{property:"twitter:title",content:lR}),(0,r.jsx)("meta",{property:"twitter:image",content:lA}),i8&&(0,r.jsx)("meta",{name:"robots",content:"noindex"}),(0,r.jsx)("link",{rel:"canonical",href:(0,tx.Hb)(iz.id,iz.name,!1)}),J.Z.includes(iz.id)&&(0,r.jsx)(eN(),{type:"application/ld+json",dangerouslySetInnerHTML:(0,eG.Z)(lx,iz,iW)},"jsonld")]}),(0,r.jsx)(nq,{estimatedTime:null==iz?void 0:iz.estimated_time,visible:nw,signedUp:nS}),(()=>{if(tp)return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"flex w-full items-center justify-center bg-blueGray-50",children:(0,r.jsx)(eI.BounceLoader,{css:"override",size:80,color:"rgb(249, 161, 83)",loading:tp||ta})})});if(!th&&iz){var e,t,i,n,l,s,o,a;let d=(null==iz?void 0:iz.user_creator)?"".concat((null==iz?void 0:null===(e=iz.user_creator)||void 0===e?void 0:e.first_name)||""," ").concat((null==iz?void 0:null===(t=iz.user_creator)||void 0===t?void 0:t.last_name)||""):"-";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(lT,{firstTimeViewingFirstScribe:n4,trackedCreatedFirstScribe:null==e$?void 0:e$.tracked_created_first_scribe,firstCreatedScribeId:null==e$?void 0:e$.first_created_scribe_id,scribeFileId:iz.id}),(0,r.jsx)(P.R2,{children:(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[ne&&lZ&&(0,r.jsx)(Q,{isOpen:lI,isEditMode:(0,iB.m)(iS),scribeId:iz.id,visibleActions:iW,activeActionIndex:lf()}),nd&&!nD&&(0,r.jsx)("div",{className:"mt-28 flex w-full justify-center",children:(0,r.jsx)(w.G,{type:"Scribe"})}),tb&&!nD&&(tJ||!lk?null:(0,r.jsx)(t9.Z,{duration:null==iz?void 0:iz.estimated_time,onStartNow:()=>{(0,F.L9)("click_get_scribe",{location:"dark_document_header"}),window.open("/signup?direct=true","_blank")}})),nd&&ta&&(null==iz?void 0:null===(n=iz.organization_owner)||void 0===n?void 0:null===(i=n.super_organization)||void 0===i?void 0:i.version_history_enabled)&&(null==iW?void 0:iW.length)===0||nD?(0,r.jsx)(_,{className:nD?"mt-28":"mt-8"}):(0,r.jsxs)("div",{className:(0,Z.cn)("flex w-full flex-1 flex-col px-4",{"animate-fade-up-delay opacity-0":!nd},{"mt-12":i3},{"-mt-20":nd}),children:[(0,r.jsx)(tq.Z,{variant:"success",title:"Step Limit Reached",description:'You can always capture additional steps by clicking the plus icon in between any Scribe steps and selecting "Capture".',actionTitle:"Got it!",onAction:()=>{iJ(!1)},onCancel:()=>{iJ(!1)},showCloseIcon:!0,visible:iQ},"stepLimitReached"),(0,r.jsx)(nU.Z,{mode:iS,numActions:to,documentData:iz,loggedIn:tJ,onFeedbackClick:lS,isInContextViewerInstance:i3&&i9,showProfilePic:null==iz?void 0:null===(l=iz.user_owner)||void 0===l?void 0:l.has_public_profile,isEmbedded:V}),(0,r.jsxs)("div",{className:(0,Z.cn)("relative flex flex-row items-center justify-center",{"mx-4 sm:mx-4":(0,iB.m)(iS)}),children:["default"===U&&!i$&&(0,r.jsx)("div",{className:"relative hidden h-full transition-all duration-500 lg:flex lg:justify-end",children:iz.show_table_of_content&&(0,r.jsx)(nK,{scribeFile:iz,maxSortOrder:lb(),mode:(0,iB.m)(iS)||na||nL||nd?"editor":"viewer",hash:iD})}),(0,r.jsxs)("div",{className:"relative mx-0 mb-14 flex w-full max-w-[720px] flex-1 flex-grow flex-col items-center pt-0 sm:mx-4",children:[lM&&(0,r.jsx)(n7,{canUpdateDocument:i4&&(0,iB.m)(iS)}),lC&&(0,r.jsx)("div",{className:(0,Z.cn)("w-full",{"scale-90 opacity-50":nR}),children:(0,r.jsx)(nY,{onClick:()=>{(0,F.L9)("click_share",{location:"scribe_editor_page_share_banner",document_type:"scribe",document_id:iz.id}),iT({showModal:!0,activeTab:"people"})},variant:"info",isShare:!0,message:"This Scribe is only visible to you. Make any changes and then share it."})}),i5&&nt&&(0,r.jsx)("div",{className:"flex w-full justify-center",children:(0,r.jsx)(nW,{isEnterpriseAccount:lt})}),(0,r.jsx)(nO,{actions:iW,mode:iS,isSideKick:i3,isGuiding:nR,onVisibleChanged:(e,t,i,n,l,s)=>{i&&l.height>0?t1.current[e]={id:e,sortOrder:t,entire:n,index:s}:delete t1.current[e],0!==ts&&t8({currentStep:lg(),totalCount:ts})},recordMoreSteps:async e=>{if((0,tO.d)()&&null!==e){let t=await (0,tO.k1)().getRecorderDetails().appVersion;eF().lte(t,"0.4.0")?is(!0):it({recordBeforeActionId:e,showRecorderSelectionModal:!0})}else it({recordBeforeActionId:e,showRecorderSelectionModal:!0})},multiSelectMode:io,onMultiActionComplete:()=>!!io&&ia(null),openLinksWithScribeViewer:tJ&&!i3&&"viewer"===iS&&(null==iz?void 0:iz.show_step_links)}),V&&(!i3||!i9)&&(0,r.jsx)(e3.Z,{className:"mb-6",externalLink:lx,onExternalLinkClick:e=>{e5.xo(iz,lx,e)},removeLogo:!O||R,onLogoClick:()=>{(0,F.L9)("click_get_scribe",{location:"viewer_page_bottom"}),eb.push("/signup?direct=true")}}),!i5&&(0,r.jsx)(n8,{scribeFile:iz,loggedIn:tJ,showScribeMarketing:lk,hasCompleted:null==t0?void 0:t0.has_completed,showOneTapSignupCta:nk&&!(null==e$?void 0:e$.is_onboarded),showInsightsCompletionCTA:lB&&void 0!==t0,totalActionCount:ts,isBookmarked:null===(s=tv.data)||void 0===s?void 0:s.is_bookmarked,onBookmark:()=>{if(tJ){var e,t;(0,F.L9)((null===(e=tv.data)||void 0===e?void 0:e.is_bookmarked)?"unbookmarked_scribe":"bookmarked_scribe",{scribeId:iz.id,location:"document_footer",visible_in_gallery:null==iz?void 0:iz.visible_in_gallery}),tg({fileId:null==iz?void 0:iz.id,data:{isBookmarked:!(null===(t=tv.data)||void 0===t?void 0:t.is_bookmarked)}})}else(0,F.L9)("clicked_bookmark_logged_out",{location:"document_footer"}),window.open("/signup","_blank")},isCommunityDoc:nz,isSidepanelInstance:i6,onComplete:()=>{nG(!1),(0,tT.MK)({messageType:"setIsGuiding",isGuiding:!1})},isGuiding:nR})]})]})]}),iX&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t2.Z,{isOpen:iG,onOpenChange:()=>iO(!iG),onPrimaryActionClick:()=>iO(!1)}),(0,r.jsx)(tt,{scribeId:null==iz?void 0:iz.id,hidden:n1.length<1,moveUp:async()=>{await iP(n1),n3()},moveDown:async()=>{await iA(n1),setTimeout(()=>{n5(n1[n1.length-1].id)},200)},selectedCount:n1.length,delete:()=>id(!0),merge:()=>lh(),copy:()=>i_(!0),duplicate:async()=>{let e=n1.map(e=>e.id),t=n1.reduce((e,t)=>t.sort_order>e.sort_order?t:e),i=null==iW?void 0:iW.findIndex(e=>e.id===t.id),n=await iR(e,i);setTimeout(()=>{n5(n[0])},200)},deselectAll:()=>{ef((0,E.c2)())},shiftLeft:"editor"===iS&&!i1,selectedActions:n1,isConsequentiallySelected:n2})]}),"editor"===iS&&(0,r.jsx)(tA,{setMultiSelectMode:ia,onCombineSteps:()=>lh(),onCloneAndMove:()=>i_(!0),onMagicMerge:()=>lp(!0),onUndoMagicMerge:lv,onDeleteSteps:()=>id(!0),scribeFile:iz,firstStepLink:nx,stepActionsMenuState:ng,dispatchStepActionsMenu:nf,selectedStepIds:n1.map(e=>e.id)}),(0,r.jsx)(y.Z,{userId:null==e$?void 0:e$.id,documentId:null==iz?void 0:iz.id,onShareClick:()=>{iT({showModal:!0,activeTab:"people"})},lastUpdate:new Date(null==iz?void 0:iz.updated),updatedBy:null==iz?void 0:iz.updater_name,onClose:()=>{nT(!1),(0,F.L9)("closed_insights_viewer",{location:"header"})},createdOn:new Date(null==iz?void 0:iz.created),createdBy:d,hidden:!lD,isFreeUser:tQ,isLoggedIn:tJ,onInvite:()=>{tj(!0),(0,F.L9)("click_invite_teammates",{location:n0})}}),(0,r.jsx)(t6.ZP,{visible:!(0,iB.m)(iS)&&na,canEdit:i4,documentType:"scribe",onClose:()=>{(0,F.L9)("closed_feedback_viewer",{file_id:null==iz?void 0:iz.id}),nr(!1)},userOwned:i5,feedbackViewerTab:nh,documentId:null==iz?void 0:iz.id,onSelectTab:e=>nv(e)}),(0,r.jsx)(j.W,{visible:!(0,iB.m)(iS)&&!!nd&&!!i4,onClose:()=>{var e,t,i,n,l;(0,F.L9)("closed_version_history",{file_id:null==iz?void 0:iz.id,file_kind:tH.rZ.Scribe,document_team_plan:null==iz?void 0:null===(i=iz.organization_owner)||void 0===i?void 0:null===(t=i.super_organization)||void 0===t?void 0:null===(e=t.plan)||void 0===e?void 0:e.name}),nd&&li.data&&(ef((0,tc.iv)({data:null==li?void 0:null===(l=li.data)||void 0===l?void 0:null===(n=l.results[0])||void 0===n?void 0:n.file})),ef((0,E.Sv)({scribeDocumentId:iz.id,clearActions:!0}))),nc(!1)},document:iz,onRevertToVersion:e=>{ll.isLoading||((0,F.L9)("version_reverted",{id:e,scribe_file_id:iz.id,file_kind:tH.rZ.Scribe}),nM(!0),ll.mutate(e,{onSuccess:async e=>{await ef((0,E.Sv)({scribeDocumentId:iz.id,clearActions:!0})),nM(!1),nc(!1),iI("editor"),lL(!0)}}))},isReverting:(ll.isLoading||ta)&&nd}),!!ie.showRecorderSelectionModal&&((0,tO.d)()?(0,r.jsx)(nQ.Z,{onClose:()=>{it(null)},token:e2,refresh:e9,smartPrivacyScreenEnabled:null==e0?void 0:e0.smart_privacy_screen_enabled,allowWeb:null==e0?void 0:null===(o=e0.super_organization)||void 0===o?void 0:o.allow_web,allowDesktop:null==e0?void 0:null===(a=e0.super_organization)||void 0===a?void 0:a.allow_desktop,currentFolderId:iz.folder?iz.folder.id:null,continue:!0,scribeId:iz.id,recordBeforeActionId:ie.recordBeforeActionId,account:e$},"canAddRecordingRecordsModal"):(0,r.jsx)(tq.Z,{variant:"success",title:nu?"What do you want to capture?":"Capture More Steps",description:nu?'Select "Capture Browser" for new actions in the browser or "Capture Desktop" for new actions on your desktop. When you click "Stop," the steps will be added to this Scribe.':'Select "Start Capture" to capture new actions in the browser using the extension. When you click "Stop," the steps will be added to this Scribe.',actionTitle:nu?"Capture Desktop":"Start Capture",showCloseIcon:nu,showCancel:!nu,showSecondaryActionButton:nu,secondaryActionTitle:nu?"Capture Browser":null,onSecondaryAction:()=>{n9?lz():nB(!0)},onAction:nu?ly:()=>{n9?lz():nB(!0)},onCancel:()=>it({showRecorderSelectionModal:!1}),visible:!nF,secondaryActionButtonVariant:nu?"success":"default"},"canAddRecordingAlertModal")),(0,r.jsx)(tF.Z,{visible:il,title:"Feature not available",className:"",onCancel:()=>is(!1),children:(0,r.jsxs)("div",{className:"mt-4 text-left",children:["You need to upgrade the desktop app to the newest version in order to use this feature. To download the newest version, you can go to this link:",(0,r.jsx)("br",{}),(0,r.jsx)("p",{className:"mt-4 text-indigo-400",children:(0,r.jsx)(eC.Z,{componentDecorator:tU,children:"".concat(lE.cursiveRootUrl,"get-desktop")})})]})}),(0,r.jsx)(ii,{visible:ir,onSuccess:()=>{nf({type:"RESET"}),io&&ia(null),id(!1)},onCancel:()=>{id(!1)},scribeFileData:iz,visibleActions:iW}),(0,r.jsx)(tq.Z,{variant:"default",title:"Combine Steps",description:"To combine steps make sure that you have selected at least two steps. You can combine sections but they are not counted as steps.",actionTitle:"Okay",onAction:()=>{iu(!1)},onCancel:()=>{},visible:ic},"createStackErrorModal"),(0,r.jsx)(tq.Z,{variant:"default",title:"Combine Steps",description:"To combine steps make sure that you have selected at least two steps with at least one screenshot.",actionTitle:"Okay",onAction:()=>{ix(!1)},onCancel:()=>{},visible:im},"combineStepsErrorModal"),(0,r.jsx)(tq.Z,{variant:"default",title:"Combine Steps",description:"Some screenshots have not been uploaded yet. Please try combining these steps later.",actionTitle:"Okay",onAction:()=>{ih(!1)},onCancel:()=>{},visible:ip},"screenshotNotUploadedError"),(0,r.jsx)(ez.Vq,{open:iv,onOpenChange:()=>ig(!1),children:(0,r.jsxs)(ez.cZ,{children:[(0,r.jsx)(ez.fK,{title:"Warning",description:"Steps with GIFs should not be combined, as the GIFs will be lost. Please cancel to deselect the GIF steps and try again, or continue combining the steps."}),(0,r.jsx)(ez.cN,{primaryAction:{onClick:()=>{lh(!0),ig(!1)},children:"Combine"},secondaryAction:{onClick:()=>ig(!1),children:"Cancel"}})]})},"showCombineStepsGifWarning"),(0,r.jsx)(ez.Vq,{open:ik,onOpenChange:()=>iC(!1),children:(0,r.jsxs)(ez.cZ,{children:[(0,r.jsx)(ez.fK,{title:"Combine screenshots",description:"Cropped or resized images will be reverted to their original size when merged. All annotations other than the click target and redactions will be lost. Do you still want to combine these steps?"}),(0,r.jsx)(ez.cN,{primaryAction:{onClick:()=>{lh(),iC(!1)},children:"Continue"},secondaryAction:{onClick:()=>iC(!1),children:"Cancel"}})]})},"combiningCroppedScreenshotWarning"),ib&&(0,r.jsx)(t4,{visible:ib,originFileId:iz.id,onSuccess:e=>{window.open(e,"_blank"),i_(!1)},onCancel:()=>{i_(!1)}},"copyStepsModalVisible"),!!iw&&(0,r.jsx)(tq.Z,{visible:!!iw,variant:"success",title:"Successfully copied steps!",description:"The steps you have chosen have been successfully copied to the selected document.",onCancel:()=>{l_(),ij(void 0)},showCancel:!0,cancelTitle:"Close",actionTitle:"Open target document",onAction:()=>{let e=null;(e=(0,tO.d)()?window.open(iw,"_self","noopener,noreferrer"):window.open(iw,"_blank","noopener,noreferrer"))&&(e.opener=null),l_(),ij(void 0)}},"copyActionsRedirectURL"),(0,r.jsx)(tq.Z,{visible:"error"===iy,variant:"success",title:"Error while auto combining steps",description:"There has been an error trying to auto combine steps. Please try again later.",actionTitle:"Close",onCancel:()=>iN(null),onAction:()=>iN(null)},"autoCombiningInProgress"),(0,r.jsx)(tK,{title:"Combining similar steps...",visible:"in_progress"===iy},"autoCombiningError"),(0,r.jsx)(tK,{title:"Splitting...",visible:iF}),(0,r.jsx)(tq.Z,{visible:!!iZ,title:iZ,description:"There has been an error trying to split steps. Please try again later.",actionTitle:"Close",variant:"success",onCancel:()=>ef((0,E.CK)()),onAction:()=>ef((0,E.CK)())},"isUnstackingActionsError"),nF&&(0,r.jsx)(t3.Z,{tabs:nP,onTab:e=>()=>{lw(e.id),nB(!1)},onNewTab:()=>{lw(null),nB(!1)},onCancel:()=>nB(!1),visible:nF,isEdit:!0})]})}),(0,r.jsx)("div",{className:(0,Z.cn)("h-full w-0 transition-all duration-500",{"w-[320px]":!i1&&"editor_sidebar_hidden"!==iS&&((0,iB.m)(iS)||na||nL||nd)})}),tw&&(0,r.jsx)(t5.Z,{modalType:"invite",visible:tw,onClose:()=>tj(!1),location:n0})]})}return(0,r.jsx)("div",{})})(),iL.showModal&&(0,r.jsx)(eq.Z,{onClose:()=>iT({showModal:!1,activeTab:"people"}),activeTab:iL.activeTab,document:iz,desktopOnly:lm()}),ty&&(0,r.jsx)(e4,{documentId:iz.id,onClose:()=>tN(!1)}),!ty&&iY&&i4&&(0,r.jsx)("div",{className:"fixed bottom-4 right-8 hidden lg:block","data-testid":"document-timeline-button",children:(0,r.jsx)(G.Z,{appearance:"left",variant:"small-dark",content:(0,r.jsx)("span",{className:"mx-2 my-1.5 leading-3",children:"Document History"}),children:(0,r.jsx)(eM.z,{onClick:()=>tN(!0),variant:"secondary","aria-label":"Document History",children:(0,r.jsx)(ek.WNt,{size:20,className:"text-blueGray-500 opacity-50"})})})}),tk&&(0,r.jsx)(e6,{documentId:iz.id,onClose:()=>{tC(!1),iM(null)}})]}),(0,r.jsx)(t7,{celebrating:eK}),ns&&!nL&&(0,r.jsx)(le.Z,{loggedIn:tJ,documentId:iz.id,documentOwnerId:null==iz?void 0:null===(B=iz.user_owner)||void 0===B?void 0:B.id,documentType:"scribe"})]})}},3874:function(e,t,i){"use strict";var n=i(24246),l=i(83469),s=i(94033);t.Z=e=>{let{onClick:t,label:i,className:o,asRenderTrigger:a=!1}=e;return a?(0,n.jsxs)("span",{className:"group flex h-6 flex-none cursor-pointer items-center rounded bg-white pl-1 pr-2 text-xs text-slate-500 ring-1 ring-slate-400/20 transition-all hover:text-slate-900 hover:ring-2 hover:ring-slate-100/50 hover:ring-offset-1 hover:ring-offset-slate-300 ".concat(o),onClick:t,children:[(0,n.jsx)(s.G,{className:"mr-1 h-[14px] w-[14px] p-px text-slate-300 transition-colors group-hover:text-slate-400",icon:l.XSk}),(0,n.jsx)("span",{children:i})]}):(0,n.jsxs)("button",{onClick:t,className:"group flex h-6 flex-none cursor-pointer items-center rounded bg-white pl-1 pr-2 text-xs text-slate-500 ring-1 ring-slate-400/20 transition-all hover:text-slate-900 hover:ring-2 hover:ring-slate-100/50 hover:ring-offset-1 hover:ring-offset-slate-300 ".concat(o),children:[(0,n.jsx)(s.G,{className:"mr-1 h-[14px] w-[14px] p-px text-slate-300 transition-colors group-hover:text-slate-400",icon:l.XSk}),(0,n.jsx)("span",{children:i})]})}},87:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var n=i(24246),l=i(16125),s=i(81488),o=i(58955),a=i(56985),r=i(42171),d=i(27378),c=i(1643),u=i(22967),m=i(52949),x=i(37835),p=i(3874),h=e=>{let{tagList:t=[],isEditMode:i,onAddTag:l,onDeleteTag:s}=e,[o,a]=(0,d.useState)(!1),[r,h]=(0,d.useState)(!1),v=e=>{s(e),h(!1)},g=(0,c.Z)(()=>{a(!1),h(!1)});return(0,d.useEffect)(()=>{setTimeout(()=>{h(!0)},0)},[null==t?void 0:t.length]),(0,n.jsxs)("div",{ref:g,className:(0,u.cn)("grid w-full grid-cols-1 grid-rows-1 rounded-md ring-1 transition-all",{"p-1 hover:bg-slate-100":i,"ring-indigo-500":o,"ring-transparent":!o||!i}),children:[(0,n.jsx)("button",{className:(0,u.cn)("col-span-full row-span-full h-full w-full rounded-md bg-transparent active:outline-none",{"z-[-1]":o||!i,"z-[1]":!o,"cursor-pointer":i}),disabled:!i,onClick:()=>{a(!0),h(!0)},"aria-label":"manage app tags"}),(0,n.jsxs)("ul",{className:(0,u.cn)("col-span-full row-span-full m-0 flex w-full list-none flex-row flex-wrap items-center justify-start gap-2 rounded-md p-0"),children:[0===t.length&&i&&!r&&(0,n.jsx)("li",{className:"z-[2]",children:(0,n.jsx)(p.Z,{onClick:()=>{a(!o),h(!0)},label:"App Tag"})}),t.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)(m.Z,{tag:e,isEditable:i&&o,onDelete:()=>v(e),classes:"!mr-0"})},e.domain)),r&&o&&i&&(0,n.jsx)("li",{children:(0,n.jsx)(x.Z,{onSelectResult:e=>{let i=t.some(t=>t.name===e.name);h(!1),i?setTimeout(()=>{h(!0)},0):l(e)},closeSearch:()=>{h(!1),a(!1)},variant:"app-tag"})})]})]})},v=i(62136),g=e=>{let{documentData:t,isEditMode:i}=e,d=(0,l.I0)();return(0,n.jsx)(h,{tagList:null==t?void 0:t.app_tags,isEditMode:i,onAddTag:e=>{let i={documentId:null==t?void 0:t.id,bodyParams:{}};i.bodyParams=(null==e?void 0:e.is_url)?{app_tag_by_url:e.id}:{app_tag_id:e.id},d((0,v.Qe)(t)?(0,a.iW)(i):(0,o.gz)(i)),(0,r.L9)("app_tag_added",{domain:e.domain,docType:(0,v.fv)(t)})},onDeleteTag:e=>{let i={id:null==t?void 0:t.id,domain:null,appTagId:null,type:null==t?void 0:t.type};i.appTagId=e.id,d((0,s.WB)(i)),(0,r.L9)("app_tag_removed",{domain:e.domain,docType:(0,v.fv)(t)})}})}},719:function(e,t,i){"use strict";i.d(t,{Z:function(){return ej}});var n=i(24246),l=i(22107),s=i(28509),o=i(46519),a=i(54062),r=i(55766),d=i(4238),c=i(27378),u=i(78483),m=i(48407),x=i(42171),p=i(62136),h=(0,c.memo)(e=>{var t;let{onShareClick:i,scribeFileId:c}=e,{ready:h,enabled:v}=(0,o.Z)(s.$H),{scribeFile:g}=(0,d.c)(c),{data:f}=(0,a.ZP)(),{actions:b}=(0,r.ol)(c);return(null==g?void 0:g.global_permission)==="private"&&(null==f?void 0:f.id)===(null==g?void 0:null===(t=g.user_owner)||void 0===t?void 0:t.id)&&(null==b?void 0:b.length)>0&&h&&v?(0,n.jsx)("div",{className:"mx-auto mt-8 flex w-full max-w-[720px] md:mb-8 md:mt-0",children:(0,n.jsxs)(u.j,{onClick:()=>{i(),(0,x.L9)("click_share",{location:"unshared_spotlight_experiment_scribe_editor_page_share_banner",document_type:p.rZ.Scribe,document_id:c})},icon:l.Aq,variant:"light",className:"cursor-pointer justify-between rounded-2xl border border-indigo-500 bg-indigo-50 font-semibold text-indigo-600",childrenClassName:"items-center text-xs sm:text-sm md:text-base",iconClassName:"m-0 ml-2 text-indigo-500","data-testid":"unshared-scribe-banner",children:[(0,n.jsx)("span",{className:"mx-auto",children:"Only you can see this Scribe. Share to unlock your know-how for others."}),(0,n.jsx)(m.z,{className:"ml-auto",variant:"secondary",children:"Share"})]})}):null},(e,t)=>e.scribeFileId===t.scribeFileId),v=i(38579),g=i.n(v),f=i(79894),b=i.n(f),_=i(86677),w=i(16125),j=i(2654),y=i(56985),N=i(83644),k=i(84463),C=i(22967),S=i(10975),I=i(31928),L=i(87),T=i(21785),E=i(42364),Z=i(16713),F=i(42135),B=i(28381),D=i(34422),M=e=>{let{reactions:t,viewableReactions:i,reactionsHovered:l}=e;return(0,n.jsxs)(n.Fragment,{children:[t.length>0&&(()=>{let e=[...t],s=e.length>0?t.slice(-1)[0]:null,o=s?e.reverse().find(e=>e.identifier!==s.identifier):null,a=o?e.reverse().find(e=>e.identifier!==s.identifier&&e.identifier!==o.identifier):null,r=[s,o,a].filter(e=>!!e);return r.length>0?(0,n.jsx)("div",{className:(0,C.cn)("ml-1 mr-2 inline-flex flex-row items-center justify-center",{"cursor-pointer":i&&(null==t?void 0:t.length)>0}),children:r.map((e,t)=>(0,n.jsx)(B.Km,{size:"small",color:i&&l?D.QC[e.identifier]:"grey",icon:D._1[e.identifier],className:(0,C.cn)("-ml-1 shadow",!i&&"cursor-default"),noBorder:!0},t))}):null})(),(0,n.jsxs)("span",{className:(0,C.cn)(i&&(null==t?void 0:t.length)>0&&"cursor-pointer",l&&i&&"text-indigo-500"),children:[(0,S.yb)(null==t?void 0:t.length)," ",(null==t?void 0:t.length)===1?"Reaction":"Reactions"]})]})},z=i(86505),P=i(68609),A=i(57452),R=i(56552),G=i(58085),O=()=>{let e=(0,R.useQueryClient)();return(0,R.useMutation)({mutationFn:e=>{let{documentId:t,bodyParams:i}=e;return G.Z.updateKnowledgePageMetadata(t,i)},onSuccess:(t,i)=>e.invalidateQueries((0,A.fy)(i.documentId))})},U=i(20489),V=i(60243),W=i(41477),H=i(83469),q=i(94033),K=i(1581),Q=i(971),J=i(37835),Y=e=>{let{isHidden:t,document:i,onSetAppLogo:l,isDetectedApp:s}=e,[o,a]=(0,c.useState)(!1),r=(0,U.Lq)(i);return(0,n.jsxs)("div",{className:(0,C.cn)("mx-4 mb-4 select-none antialiased",{hidden:t}),children:[r?(0,n.jsxs)(n.Fragment,{children:[s&&(0,n.jsx)("div",{className:"mb-4 text-center font-sans text-xs font-medium text-slate-400",children:"Detected app for this Scribe:"}),(0,n.jsxs)("div",{className:"flex items-center font-sans",children:[(0,n.jsx)(Q.Z,{document:i,isFlat:!0,size:24,classes:"mr-2 h-8 w-8"}),(0,n.jsx)("div",{className:"mr-2 whitespace-nowrap text-sm font-semibold text-white",children:null==r?void 0:r.name}),(0,n.jsx)(K.pn,{children:(0,n.jsxs)(K.u,{children:[(0,n.jsx)(K.aJ,{children:(0,n.jsx)("div",{className:"ml-auto",children:(0,n.jsx)("button",{className:"mt-[2px] cursor-pointer bg-transparent p-0","aria-label":"replace icon",onClick:()=>a(!o),children:(0,n.jsx)(q.G,{icon:H.IwR,className:"h-4 w-4 text-slate-500 hover:text-slate-300"})})})}),(0,n.jsx)(K._v,{side:"bottom",children:(0,n.jsx)("p",{children:"Edit icon"})})]})})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mb-4 flex items-center justify-center font-sans text-xs font-medium text-slate-400",children:[(0,n.jsx)(q.G,{icon:H.ik8,className:"mr-1 h-4 w-4 text-amber-300"}),"No apps detected. Choose one below."]}),(0,n.jsxs)("button",{className:"flex cursor-pointer items-center bg-transparent p-0 font-sans text-sm text-slate-300",onClick:()=>a(!0),children:[(0,n.jsx)("div",{className:"mr-2 flex h-8 w-8 items-center justify-center rounded-full bg-slate-700",children:(0,n.jsx)(q.G,{icon:H.g4A,className:"h-4 w-4 text-slate-400"})}),"Search app library"]})]}),o&&(0,n.jsx)("div",{className:"absolute left-0 top-full mt-3",children:(0,n.jsx)(J.Z,{onSelectResult:e=>(a(!1),l({appTagId:e.id,isUrl:null==e?void 0:e.is_url})),closeSearch:()=>a(!1)})})]})};let X={gray:"slate-500",pink:"pink-500",purple:"purple-500",blue:"blue-500",cyan:"cyan-500",green:"green-500",yellow:"yellow-500"},$=Object.keys(X),ee=e=>"bg-".concat(X[e]);var et=i(59401);let ei=["wrench","window","shareFromSquare","laptop","user","users","handshake","receipt","watch","trash","smile","layers","message","glasses","plane","grid","newspaper","ruler","paperPlane","inbox","lock","sliders","link","folder","earth","calendar","branch","database","print","pencil","rocket","money","scale","phone","chart","gantt","fingerprint","camera","play","desktop","mobile","lightbulb","house","stopwatch","puzzlePiece","thumbtack","partyHorn","handHoldingDollar","userPlus"],en={gray:"text-slate-500",pink:"text-pink-500",purple:"text-purple-500",blue:"text-blue-500",cyan:"text-cyan-500",green:"text-green-500",yellow:"text-yellow-500"};var el=e=>{let{isHidden:t,icon:i,iconColor:l,onSetIcon:s,onSetColor:o,isLoading:a}=e;return(0,n.jsxs)("div",{className:(0,C.cn)("mx-6 my-3 select-none antialiased",{hidden:t}),children:[(0,n.jsx)("div",{className:"mb-5 flex justify-between",children:$.map(e=>(0,n.jsx)("button",{className:(0,C.cn)("rounded-full border-2 bg-transparent p-0",{"border-slate-600":l===e,"border-transparent":l!==e,"cursor-pointer":l!==e&&!a}),"aria-label":"Set icon color to ".concat(e),disabled:l===e||a,onClick:()=>o(e),children:(0,n.jsx)("div",{className:(0,C.cn)("h-6 w-6 rounded-full border-4 border-slate-800 shadow-[inset_0px_0px_0px_1px_rgba(255,255,255,0.15)]",ee(e))})},e))}),(0,n.jsx)("div",{className:"grid grid-flow-row grid-cols-7 grid-rows-7 gap-x-2 gap-y-1",children:ei.map((e,t)=>(0,n.jsx)("button",{className:(0,C.cn)("m-0 flex h-8 w-8 flex-col items-center justify-center rounded-full border-2 bg-transparent p-0",i===e?"text-white":"text-slate-500",{"border-slate-600":e===i,"border-transparent":e!==i,"cursor-pointer hover:text-slate-300":e!==i&&!a}),disabled:e===i||a,onClick:()=>s(e),"aria-label":"Set icon to ".concat(e),children:(0,n.jsx)(et.Z,{style:{transitionDelay:"".concat((t+t%7)*8,"ms")},className:(0,C.cn)("transition-colors duration-300",en[l]),icon:e,variant:"solid",size:16})},e))})]})},es=e=>{let{children:t,isActive:i,onClick:l,className:s}=e;return(0,n.jsx)("button",{className:(0,C.cn)("flex flex-1 items-center justify-center rounded py-2.5 font-sans text-xs font-semibold",{"cursor-pointer bg-transparent text-slate-400":!i,"bg-gradient-to-b from-slate-700 to-[rgba(40,_53,_72,_1)] text-white shadow-[0px_1px_2px_rgba(0,_0,_0,_0.5),_inset_0px_1px_0px_rgba(203,_213,_225,_0.1)]":i},s),onClick:()=>i?null:l(),children:t})},eo=e=>{let{activeTab:t,onSelectTab:i}=e;return(0,n.jsxs)("div",{className:"m-3 flex justify-center rounded-lg bg-slate-900 p-1",children:[(0,n.jsxs)(es,{isActive:"AppLogo"===t,onClick:()=>i("AppLogo"),children:[(0,n.jsx)(q.G,{icon:H.o$R,className:(0,C.cn)("mr-1 h-4 w-4",{"text-indigo-400":"AppLogo"===t,"text-slate-500":"AppLogo"!==t})}),(0,n.jsx)("span",{children:"App Logo"})]}),(0,n.jsxs)(es,{isActive:"CustomIcon"===t,onClick:()=>i("CustomIcon"),children:[(0,n.jsx)(q.G,{icon:H.Kak,className:(0,C.cn)("mr-1 h-4 w-4",{"text-indigo-400":"CustomIcon"===t,"text-slate-500":"CustomIcon"!==t})}),(0,n.jsx)("span",{children:"Custom Icon"})]})]})},ea=(0,c.memo)(e=>{var t;let{document:i,mode:l="viewer",...s}=e,[o,a]=(0,c.useState)("CustomIcon"),[r,d]=(0,c.useState)(!1),[u,m]=(0,c.useState)(i),[p,h]=(0,c.useState)(!1),v=(0,w.I0)(),{mutate:g}=O(),f=async e=>{switch(h(!0),null==i?void 0:i.type){case"scribe":await v((0,y.iW)({documentId:null==i?void 0:i.id,bodyParams:e}));break;case"knowledge_page":g({documentId:null==i?void 0:i.id,bodyParams:e})}h(!1)},b=e=>{m({...i,icon_color:e}),f({icon_color:e})},_=e=>{m({...i,icon:e}),f({icon:e})},j=e=>{let{appTagId:t,isUrl:i=!1}=e;return(0,x.L9)("selected_app_icon",{icon:t}),f(void 0!==i&&i?{logo_app_tag_by_url:t}:{logo_app_tag:t})},{x:N,y:k,strategy:S,refs:I,context:L}=(0,z.YF)({open:r,onOpenChange:e=>{d(e),e||"CustomIcon"!==o||j({appTagId:null})},middleware:[(0,P.cv)(12),(0,P.uY)()],whileElementsMounted:(e,t,i)=>(0,P.Me)(e,t,i,{elementResize:!1})}),T=(0,z.bQ)(L),{getReferenceProps:E,getFloatingProps:Z}=(0,z.NI)([T]),B={};(null==i?void 0:i.type)==="knowledge_page"&&(B.shadowed=!0,B.coloredShadow=!0,B.useSecondaryColor=!0,B.dropShadowIcon=!0),(0,c.useEffect)(()=>{(null==i?void 0:i.type)==="knowledge_page"&&a("CustomIcon")},[null==i?void 0:i.type]),(0,c.useEffect)(()=>{if(JSON.stringify(i)!==JSON.stringify(u)&&m(i),(null==i?void 0:i.type)==="scribe"&&!(0,F.m)(l)&&!(null==u?void 0:u.icon))return a("AppLogo")},[i]),(0,c.useEffect)(()=>{let e=(0,V.Z)({created:null==i?void 0:i.created,iconAndColorUpdated:null==i?void 0:i.icon_and_color_updated,appTags:null==i?void 0:i.app_tags,logoAppTag:null==i?void 0:i.logo_app_tag});if((null==i?void 0:i.type)==="scribe"&&"app-logo"===e)return a("AppLogo")},[]);let D=null==i?void 0:i.app_tags.map(e=>e.id),M=(null==D?void 0:D.includes(null==i?void 0:null===(t=i.logo_app_tag)||void 0===t?void 0:t.id))&&!(null==i?void 0:i.logo_app_tag);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{ref:I.setReference,...E(),onClick:()=>d(!r),disabled:!(0,F.m)(l),className:(0,C.cn)("transition- rounded-full bg-transparent p-0 transition-all duration-200",{"cursor-pointer":(0,F.m)(l),"w-[88px]":(null==i?void 0:i.type)!=="knowledge_page","ring-indigo-500 hover:ring-2":(0,F.m)(l)&&(null==i?void 0:i.type)!=="knowledge_page"}),"aria-label":(0,F.m)(l)?"Edit icon":"".concat((null==i?void 0:i.icon)||(null==i?void 0:i.logo_app_tag)," icon"),children:"AppLogo"===o?(0,n.jsx)("div",{"data-testid":"app-logo",children:(null==i?void 0:i.type)!=="knowledge_page"&&(0,n.jsx)(W.ZP,{...s,document:i,isPickerIcon:!0,isAppLogo:!!(0,U.Lq)(i)&&!!(null==i?void 0:i.logo_app_tag)})}):(0,n.jsx)("div",{"data-testid":"custom-icon",children:(0,n.jsx)(W.ZP,{...s,document:u,isPickerIcon:(null==i?void 0:i.type)!=="knowledge_page",isAppLogo:!1})})}),r&&(0,n.jsx)(z.ll,{children:(0,n.jsx)("div",{ref:I.setFloating,style:{position:S,top:null!=k?k:0,left:null!=N?N:0},...Z(),children:(0,n.jsx)("div",{className:"relative z-40 mb-4 ml-4 flex w-[304px] select-none flex-col rounded-2xl bg-slate-800 antialiased shadow-xl",children:(0,n.jsxs)("div",{children:[(null==i?void 0:i.type)==="scribe"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eo,{activeTab:o,onSelectTab:e=>{if(a(e),"AppLogo"===e&&!(null==i?void 0:i.logo_app_tag)){var t;j({appTagId:null===(t=(0,U.Lq)(i))||void 0===t?void 0:t.id})}}}),(0,n.jsx)("hr",{className:"my-0 h-px bg-slate-900"}),(0,n.jsx)("hr",{className:"mb-4 mt-0 h-px bg-slate-700"}),(0,n.jsx)(Y,{isHidden:"AppLogo"!==o,document:i,onSetAppLogo:j,isDetectedApp:M})]}),(0,n.jsx)(el,{isHidden:"CustomIcon"!==o,icon:null==u?void 0:u.icon,iconColor:null==u?void 0:u.icon_color,onSetIcon:e=>_(e),onSetColor:e=>b(e),isLoading:p})]})})})})]})}),er=i(60074),ed=i(19686),ec=i(44067),eu=i(93570),em=i(70758),ex=i(3874),ep=i(21947),eh=i(57002);let ev=e=>{let{options:t,renderTrigger:i,align:l="start",zIndex:s=0,asPortal:o=!0,defaultOpen:a=!1}=e;return(0,n.jsx)(eh.g,{renderTrigger:i,variant:"primary",align:l,zIndex:s,asPortal:o,defaultOpen:a,children:(0,n.jsx)("div",{className:"flex flex-col space-y-1 ",children:null==t?void 0:t.map(e=>{let{Icon:t,label:i,onClick:l}=e;return(0,n.jsxs)("button",{className:"flex h-6 w-40 cursor-pointer items-center space-x-2 rounded bg-transparent py-0 pl-2 hover:bg-indigo-50",onClick:l,children:[(0,n.jsx)(t,{}),(0,n.jsx)("span",{children:i})]},"".concat(i,"_icon-select-dropdown"))})})})};var eg=e=>{let{handleGenerateDescription:t,setIsEditing:i}=e,l=()=>{(0,x.L9)("write_description_yourself"),i(!0)};return(0,n.jsx)(ev,{options:[{Icon:()=>(0,n.jsx)(q.G,{icon:ep.JyM,className:"text-cyan-400"}),label:"AI Generated",onClick:()=>t()},{Icon:()=>(0,n.jsx)(q.G,{icon:H.IwR,className:"text-slate-400"}),label:"Write Yourself",onClick:()=>l()}],renderTrigger:()=>(0,n.jsx)(ex.Z,{label:"Add Description",onClick:()=>(0,x.L9)("add_description"),asRenderTrigger:!0}),asPortal:!1,zIndex:40})},ef=e=>{let{description:t,isEditMode:i,onEdit:l,simplifiedActions:s,title:o}=e,a=(0,ed.TR)().canUseOpenAI,[r,d]=(0,c.useState)(!1),[u,p]=(0,c.useState)(!1),[h,v]=(0,c.useState)(null!=t?t:""),[g,f]=(0,c.useState)(!1),[b,_]=(0,c.useState)(!1),w=(0,c.useRef)(),j=(0,c.useRef)(null),y=(0,ec.Z)(),N=(0,c.useRef)(null),k=e=>{let t=(e||h).trim();d(!1),v(t),l(t)},S=async()=>{(0,x.L9)("begin_generating_description_with_AI"),d(!0),_(!0);let{token:e}=(0,eu.r_)(),t="";null==s||s.forEach((e,i)=>{let n=e.description;n&&n.trim()&&"Click here."!==n&&"Double-click here."!==n&&(t+="".concat(i+1,". ").concat(n,"\n"))}),o&&o.trim()&&"Untitled"!==o&&(t="".concat(o,"\n").concat(t.trim())),w.current=new AbortController;let i=new em.Z(e,"description"),n=h;await i.generateCompletion(t,w.current,e=>{e&&v(n+=e)},e=>er.Tb(e),()=>{_(!1),N.current.focus(),k(n),(0,x.L9)("completed_generating_description_with_AI",{description:N.current.value})})};(0,c.useEffect)(()=>{(null==j?void 0:j.current)&&!u&&f(j.current.scrollHeight>j.current.offsetHeight)},[j,y,u]);let I=(0,c.useCallback)(e=>{let t=e||N.current;t&&(t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px"))},[]);return(0,c.useEffect)(()=>{I()},[h,I]),(0,n.jsxs)("div",{children:[!r&&(null==t?void 0:t.length)>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.z,{variant:"ghost",onClick:()=>{i&&d(!0)},disabled:!i,className:(0,C.cn)("w-full justify-start !bg-transparent text-left hover:!bg-slate-100 disabled:text-slate-500 disabled:opacity-100 sm:mb-2.5",{"px-0":!i,"px-[3px]":i}),"data-testid":"documentDescription","aria-label":"Edit Description",children:(0,n.jsx)("span",{ref:j,className:(0,C.cn)("select-text whitespace-pre-line break-words text-sm font-normal leading-[22px] text-slate-500 sm:line-clamp-none sm:text-base",{"line-clamp-3":!u&&!i}),children:h})}),g&&!i&&(0,n.jsx)("button",{onClick:()=>p(!u),className:"mb-3.5 mt-2 bg-transparent p-0 text-sm font-bold text-indigo-500 sm:hidden",children:u?"less":"more"})]}),i&&!r&&((null==h?void 0:h.length)===0||null===h)&&!a&&(0,n.jsx)("div",{className:"p-1",children:(0,n.jsx)(ex.Z,{onClick:()=>d(!0),label:"Add Description",className:"mb-4"})}),i&&!r&&((null==h?void 0:h.length)===0||null===h)&&a&&(0,n.jsx)("div",{className:"p-1",children:(0,n.jsx)(eg,{handleGenerateDescription:S,setIsEditing:d})}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("textarea",{id:"description-input",ref:N,autoFocus:!0,className:"m-0 -mx-0.5 block w-full resize-y break-words rounded-md bg-white px-1 py-[5px] font-sans text-base text-slate-800 outline-none ring-1 ring-indigo-400 ring-offset-4 ring-offset-white placeholder:text-slate-500/50",placeholder:"Type your description here",onFocus:e=>{let t=e.target.value;e.target.value="",e.target.value=t,I(e.target)},value:h,onChange:e=>v(e.target.value),onBlur:()=>k(),disabled:b,maxLength:500}),(0,n.jsx)("div",{className:"mt-[5px] flex items-center justify-end",children:(0,n.jsxs)("span",{className:"mr-4 rounded-b bg-slate-100 px-2 py-1 text-xs font-normal leading-4",children:[h?h.length:"0"," / 500"]})})]})]})},eb=e=>{let{metadata:t,isEditMode:i}=e;return(0,n.jsx)("ul",{className:(0,C.cn)("mb-3.5 mt-0 flex list-none flex-row flex-wrap gap-y-4 p-0 font-sans text-sm text-slate-500",{"mx-1 sm:mb-3 sm:mt-3":i,"sm:mb-4 sm:mt-0":!i}),children:t.map((e,i)=>i<t.length-1?(0,n.jsxs)("li",{className:"flex flex-none flex-row",children:[e,(0,n.jsx)("span",{className:"px-2 text-slate-200",children:" | "})]},i):(0,n.jsx)("li",{className:"flex-none",children:e},i))})},e_=e=>{let{title:t,isEditMode:i,onEdit:l}=e,[s,o]=(0,c.useState)(!1),[a,r]=(0,c.useState)(t),d=()=>{if(s){o(!1);let e=""===a.trim()?"Untitled":a;r(e),l(e)}};(0,c.useEffect)(()=>{r(t)},[t]);let u=e=>{let t=e.target;t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px")};return(0,n.jsxs)("div",{children:[!i&&(0,n.jsx)("h1",{className:"select-text break-words text-xl font-bold leading-[30px] text-slate-900 sm:text-2xl","data-testid":"document-title",children:a}),!s&&i&&(0,n.jsx)(m.z,{variant:"ghost",onClick:()=>{i&&o(!0)},disabled:!i,className:(0,C.cn)("relative -top-px mb-1 w-full !justify-start rounded-[6px] !bg-transparent text-left hover:!bg-slate-100 disabled:text-slate-900 disabled:opacity-100",{"px-[3px]":i,"px-0":!i}),"data-testid":"documentTitleEditor","aria-label":"Edit Title",children:(0,n.jsx)("span",{className:"select-text break-words text-xl font-bold leading-[30px] text-slate-900 sm:text-2xl",children:a})}),s&&i&&(0,n.jsx)("textarea",{id:"title-input",autoFocus:!0,rows:1,onFocus:e=>{e.target.value="",e.target.value=a,u(e)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),d())},className:(0,C.cn)("-ml-0.5 mb-1 mt-0 w-full rounded-md bg-white p-1 font-sans text-2xl font-bold text-slate-900 ring-1 ring-indigo-400 ring-offset-4 ring-offset-white focus:outline-none",{"border-slate-200":""===a.trim()}),value:a,onChange:e=>(u(e),r(e.target.value)),onBlur:d,inputMode:"text"})]})};let ew=e=>{var t,i;let{numActions:l,documentData:s,loggedIn:o,mode:a,onFeedbackClick:r,isInContextViewerInstance:d,account:u,reactions:m,simplifiedActions:p,showProfilePic:v,className:f,isEmbedded:j}=e,B=(0,w.I0)(),[D,z]=(0,c.useState)(!1),[P,A]=(0,c.useState)(null==s?void 0:s.name),[R,G]=(0,c.useState)(null==s?void 0:s.description),[O,U]=(0,c.useState)(!1),V=(0,_.useRouter)(),W="/page-embed/[pid]"===V.route||"/page/[pid]"===V.route,H=(null===(t=V.query)||void 0===t?void 0:t.inContextViewer)==="true",q=["editor","editor_sidebar_hidden"].includes(a),K=(0,c.useMemo)(()=>{var e;return(0,Z.Z)(null!==(e=null==s?void 0:s.estimated_time)&&void 0!==e?e:0)},[null==s?void 0:s.estimated_time]),Q=(0,c.useMemo)(()=>{let e=m.filter(e=>null==e?void 0:e.user);return e.length>8?e.slice(8):e},[m]),J=o&&(null==Q?void 0:Q.length)>0&&(null==u?void 0:null===(i=u.organizations)||void 0===i?void 0:i.some(e=>{var t,i;return(null==e?void 0:null===(t=e.super_organization)||void 0===t?void 0:t.id)===(null==s?void 0:null===(i=s.organization_owner)||void 0===i?void 0:i.super_organization.id)}));(0,c.useEffect)(()=>{A(null==s?void 0:s.name),G(null==s?void 0:s.description)},[null==s?void 0:s.name,null==s?void 0:s.description]);let Y=(()=>{let e=[];if(s.author&&s.show_author){var t,i,o,c;v&&(null==s?void 0:null===(t=s.user_owner)||void 0===t?void 0:t.profile_picture_url)?e.push((0,n.jsxs)(b(),{href:"/by/".concat((0,I.km)(null==s?void 0:null===(i=s.user_owner)||void 0===i?void 0:i.id,(0,S.GK)(null==s?void 0:s.user_owner))),onClick:()=>{(0,x.L9)("click_profile_from_doc",{location:"author_line"})},className:"group flex cursor-pointer flex-row items-center bg-transparent px-0","data-testid":"viewer-profile-pic",children:[(0,n.jsx)("div",{className:"mr-2 cursor-pointer",children:(0,n.jsx)(N.qE,{size:"xs",children:(null==s?void 0:null===(o=s.user_owner)||void 0===o?void 0:o.profile_picture_url)?(0,n.jsx)(g(),{src:null==s?void 0:null===(c=s.user_owner)||void 0===c?void 0:c.profile_picture_url,width:20,height:20,alt:s.author}):s.author})}),(0,n.jsx)("span",{className:"text-slate-500 group-hover:text-slate-600",children:s.author})]})):e.push(s.author)}return s.show_step_count&&e.push((0,n.jsxs)(n.Fragment,{children:[l," step",l>1?"s":""]})),s.show_creation_time&&e.push((0,n.jsx)(n.Fragment,{children:K})),(null==s?void 0:s.allow_feedback)&&!d&&m.length>0&&e.push(J&&!(0,F.m)(a)?(0,n.jsx)(T.Z,{appearance:"bottom",variant:"dark",content:(0,n.jsxs)("div",{className:"flex w-full flex-col items-start",children:[(0,n.jsx)("span",{className:"mb-1.5 text-sm font-normal text-slate-400",children:"Reactions"}),null==Q?void 0:Q.map(e=>{if(null==e?void 0:e.user){var t,i,l,s;let o=(0,S.GK)(e.user);return(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center text-sm font-medium",children:[(0,n.jsx)("div",{className:"my-1.5 mr-2",children:(0,n.jsx)(N.qE,{uuid:null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.id,size:"sm",children:(null==e?void 0:null===(i=e.user)||void 0===i?void 0:i.profile_picture_url)?(0,n.jsx)(g(),{src:null==e?void 0:null===(l=e.user)||void 0===l?void 0:l.profile_picture_url,width:24,height:24,alt:o}):o},null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.id)}),o]},o)}}),(null==m?void 0:m.length)-(null==Q?void 0:Q.length)>0&&(0,n.jsxs)("span",{className:"mt-1.5 text-sm font-normal text-slate-400",children:["+",(0,S.yb)((null==m?void 0:m.length)-Q.length)," more"]})]}),className:"min-w-[214px] p-4",childrenClassName:"flex flex-row",children:(0,n.jsx)("div",{className:"flex flex-row",onClick:()=>{(0,x.L9)("opened_feedback_viewer_from_reactions",{file_id:null==s?void 0:s.id}),r("reactions")},onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),children:(0,n.jsx)(M,{reactions:m,viewableReactions:J,reactionsHovered:O})})}):(0,n.jsx)(M,{reactions:m})),e})();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,C.cn)("mx-4",{"mt-14 md:mt-[109px]":!W&&!H,"mt-10":W,"mt-2":H},f),children:[!j&&(0,n.jsx)(k.Z,{children:(0,n.jsx)(h,{scribeFileId:null==s?void 0:s.id,onShareClick:()=>z(!0)})}),(0,n.jsxs)("div",{className:"mx-auto mb-8 flex w-full max-w-[720px] flex-col items-start md:flex-row","data-testid":"document-header",children:[(0,n.jsx)("div",{className:"mb-3 mt-0.5 flex-none origin-bottom-left scale-[0.636] sm:mx-0 md:mb-0 md:scale-100",children:(0,n.jsx)(ea,{mode:a,document:s})}),(0,n.jsxs)("div",{className:(0,C.cn)("w-full sm:mr-0",{"md:ml-9":"viewer"===a,"sm:ml-8":q}),children:[(0,n.jsx)(e_,{title:P,isEditMode:(0,F.m)(a),onEdit:e=>{if(""===e.trim()){A("");return}A(e),(0,x.L9)("changed_file_name",{file_id:null==s?void 0:s.id,new_file_name:e});let t={documentId:null==s?void 0:s.id,bodyParams:{name:e}};B((0,y.iW)(t))}}),(0,n.jsx)(ef,{description:R,isEditMode:(0,F.m)(a),onEdit:e=>{G(e),(0,x.L9)("changed_file_description",{file_id:null==s?void 0:s.id,new_file_description:e});let t={documentId:null==s?void 0:s.id,bodyParams:{description:e}};B((0,y.iW)(t))},simplifiedActions:p,title:null==s?void 0:s.name}),(0,n.jsx)(eb,{metadata:Y,isEditMode:(0,F.m)(a)}),(0,n.jsx)(L.Z,{isEditMode:(0,F.m)(a),documentData:s})]})]})]}),D&&(0,n.jsx)(E.Z,{onClose:()=>z(!1),document:s,desktopOnly:!1})]})};var ej=e=>{let{numActions:t,documentData:i,loggedIn:l,mode:s,onFeedbackClick:o,isInContextViewerInstance:d,showProfilePic:c,className:u}=e,{data:m}=(0,a.ZP)(),{reactions:x}=(0,w.v9)(j.Gu),{actions:p}=(0,r.ol)(null==i?void 0:i.id);return(0,n.jsx)(ew,{numActions:t,documentData:i,loggedIn:l,mode:s,onFeedbackClick:o,isInContextViewerInstance:d,account:m,reactions:x,simplifiedActions:p,showProfilePic:c,className:u})}},37835:function(e,t,i){"use strict";i.d(t,{Z:function(){return b}});var n=i(24246),l=i(77253),s=i(85087),o=i(43425),a=i(58291),r=i(27378),d=i(37827),c=i(22967),u=i(87114),m=e=>{let{value:t,onChange:i,onKeyDown:l}=e,[s,o]=(0,r.useState)(16),a=(0,r.useRef)(null);return(0,r.useEffect)(()=>{var e;o(null==a?void 0:null===(e=a.current)||void 0===e?void 0:e.offsetWidth)},[t]),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{ref:a,"data-testid":"input-sizer","aria-hidden":!0,className:"invisible absolute px-2 text-center text-xs",children:t}),(0,n.jsx)("input",{type:"text","data-testid":"dynamic-input",autoFocus:!0,className:"flex h-6 items-center rounded border border-dashed border-slate-400/20 bg-transparent p-0 text-center font-sans text-xs text-slate-600 focus:border-slate-400/20",value:t,onChange:i,onKeyDown:l,style:{width:"".concat(s,"px")}})]})},x=i(83469),p=i(94033),h=e=>{let{value:t,onChange:i,onKeyDown:l}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:"doc-icon-search",className:"mr-4 flex-none text-slate-400",children:(0,n.jsx)(p.G,{icon:x.Y$T,"aria-label":"Search"})}),(0,n.jsx)("input",{id:"doc-icon-search",autoFocus:!0,className:"w-full flex-1 border-none px-0",type:"text",placeholder:"App name eg. Google",value:t,onChange:i,onKeyDown:l})]})},v=i(971),g=e=>{let{result:t,onSelectResult:i,variant:l,key:s}=e;return(0,n.jsx)("li",{children:(0,n.jsxs)("button",{className:"flex w-full cursor-pointer items-center justify-start bg-transparent px-4 py-2 font-sans hover:bg-indigo-50",onClick:()=>i(t),children:[(0,n.jsx)("div",{className:"mr-2 w-fit",children:(0,n.jsx)(v.Z,{document:{app_tags:[t]},isFlat:!0,isAppLogo:!0,size:24,classes:"h-8 w-8"})}),(0,n.jsx)("div",{className:"mr-2 truncate text-sm text-slate-900",children:t.name})]})},s)},f=e=>{let{resultList:t,isLoading:i,value:l,error:s,onSelectResult:o,variant:a="icon-app-tag",className:r}=e;return(0,n.jsxs)("ul",{className:(0,c.cn)("m-0 max-h-[220px] list-none overflow-y-auto p-0",r),children:[i&&(null==l?void 0:l.length)>0&&(0,n.jsx)("li",{className:"px-4 py-2 text-sm text-slate-400",children:"Loading..."}),!!s&&(0,n.jsx)("li",{className:"px-4 py-2 text-sm",children:"Error, please refresh the page and try again..."}),!s&&(null==l?void 0:l.length)>0&&!(null==t?void 0:t.length)&&(0,n.jsx)("li",{className:"py-2 pl-4 text-xs text-slate-600",children:"Type the full domain (e.g. google.com)"}),!i&&!s&&(null==t?void 0:t.map(e=>(0,n.jsx)(g,{variant:a,result:e,onSelectResult:()=>o(e)},(null==e?void 0:e.domain)||(null==e?void 0:e.id))))]})},b=e=>{let{onSelectResult:t,closeSearch:i,variant:x="icon-app-tag"}=e,[p,v]=(0,r.useState)([]),g=(0,o.Z)("search-bar-filter"),b=(0,u.N)(g),_=(0,a.U)(g),{data:w,isLoading:j,error:y}=g?b:_,[N,k]=(0,r.useState)(""),[C,S]=(0,r.useState)(N);(0,d.Z)(()=>{S(N)},l.nH,[N]);let{data:I}=(0,s.Z)(C);(0,r.useEffect)(()=>{if(C.length||(null==I?void 0:I.length)){var e;let t=C.toLowerCase(),i=null==w?void 0:null===(e=w.appTags)||void 0===e?void 0:e.filter(e=>{var i,n;return null===(n=e.name)||void 0===n?void 0:null===(i=n.toLowerCase())||void 0===i?void 0:i.includes(t)}),n=[];if(null==i||i.forEach(e=>{if(!n.find(t=>t.id&&t.id===e.id)){let t={...e,url:C,is_new_app_tag:!1};n.push(t)}}),null==I?void 0:I.length){let e={...I[0],id:C,is_url:!0};n.unshift(e)}v(n)}else p.length&&v([])},[C,j,I]);let L=e=>k(e.target.value),T=e=>{if("Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),i()),"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),!(null==p?void 0:p[0])))return};return(0,n.jsxs)(n.Fragment,{children:["icon-app-tag"===x&&(0,n.jsxs)("div",{className:"flex w-[304px] flex-col overflow-hidden rounded-lg bg-white shadow-[0px_0px_0px_1px_rgba(15,_23,_42,_0.1),_0px_10px_15px_-3px_rgba(15,_23,_42,_0.1),_0px_4px_6px_-4px_rgba(15,_23,_42,_0.1)]",children:[(0,n.jsx)("div",{className:(0,c.cn)("flex h-[48px] items-center px-6",{"border-b border-slate-100":p.length||C.length}),children:(0,n.jsx)(h,{value:N,onChange:L,onKeyDown:T})}),(0,n.jsx)("div",{className:(0,c.cn)("m-0 max-h-[220px] list-none overflow-y-auto p-0",{"mb-2":p.length,"pl-1":!p.length&&C.length}),children:(0,n.jsx)(f,{resultList:p,isLoading:j,value:C,error:y,onSelectResult:t,variant:x})})]}),"app-tag"===x&&(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(m,{value:N,onChange:L,onKeyDown:T}),(0,n.jsx)("div",{className:(0,c.cn)("absolute z-10 mt-3 rounded-lg bg-white p-0 shadow-[0px_0px_0px_1px_rgba(15,_23,_42,_0.1),_0px_10px_15px_-3px_rgba(15,_23,_42,_0.1),_0px_4px_6px_-4px_rgba(15,_23,_42,_0.1)]",{"mb-2 w-[244px]":p.length||C.length}),children:(0,n.jsx)(f,{resultList:p,isLoading:j,value:C,error:y,onSelectResult:t,variant:x})})]})]})}},51008:function(e,t,i){"use strict";i.d(t,{Z:function(){return _}});var n=i(24246),l=i(54062),s=i(83469),o=i(11215),a=i(36012),r=i.n(a),d=i(38579),c=i.n(d),u=i(27378),m=i(48407),x=i(22967),p=e=>{let{children:t,className:i}=e;return(0,n.jsx)("a",{className:i,href:"/",target:"_blank","data-testid":"scribeLogo",children:t})};let h=()=>(0,n.jsx)(p,{className:"h-6",children:(0,n.jsx)(c(),{height:24,width:70,src:"/logo-logged-out.svg",alt:"logged out logo"})}),v=e=>{let{recentlyCopied:t,...i}=e;return(0,n.jsx)(m.z,{variant:"secondary",icon:t?s.LEp:s.uWk,"data-testid":"saveScribe","aria-label":"Copy Link",...i})},g=e=>{let{documentData:t,className:i,logo:l,startedScrolling:s}=e,[a,d]=(0,u.useState)(!1);return(0,n.jsxs)("div",{className:(0,x.cn)("flex items-center border-b border-b-[#0b1f40] border-opacity-[0.08] bg-white px-6 py-4",{"justify-end":!l,"justify-between":l},i),"data-testid":"viewer-navigation-bar",children:[l,(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)(o.Z,{isBookmarked:!1,documentData:t,showButtonCopy:s,loggedOut:!0}),(0,n.jsx)(v,{onClick:()=>{var e,t;r()(null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.href),d(!0),setTimeout(()=>{d(!1)},800)},recentlyCopied:a})]})]})};var f=i(81019),b=i(68286),_=e=>{let{documentData:t,isEditMode:i,startedScrolling:s}=e,{shouldShowCustomLogo:o,shouldShowDefaultLogo:a,logo:r}=function(e,t){let i=(0,f.mT)(e),l=(0,f.K3)(e,t),s=null;return i?s=(0,n.jsx)(b.Z,{logoUrl:e.organization_owner.logo.download_url,altText:"".concat(e.organization_owner.name," Logo"),linkUrl:e.organization_owner.team_url}):l&&(s=(0,n.jsx)(h,{})),{shouldShowCustomLogo:i,shouldShowDefaultLogo:l,logo:s}}(t,i),{isLoading:d}=(0,l.ZP)();return(0,n.jsx)(g,{className:"fixed inset-x-0 top-0 z-20",logo:!d&&(o||a)?r:null,startedScrolling:s,documentData:t})}},17561:function(e,t,i){"use strict";i.d(t,{x:function(){return u},Z:function(){return m}});var n=i(24246),l=i(27378),s=i(48407),o=i(35015),a=i(35286);let r=l.forwardRef((e,t)=>{let{className:i,orientation:l="horizontal",decorative:s=!0,...r}=e;return(0,n.jsx)(o.f,{ref:t,decorative:s,orientation:l,className:(0,a.cn)("shrink-0 border border-slate-600","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",i),...r})});var d=i(11979),c=i(58539);let u=e=>{let{relatedDocuments:t=[],loading:i,title:o="Documents you might like"}=e,[a,u]=(0,l.useState)(!1);return(0,n.jsxs)("div",{className:"flex w-full flex-col",children:[(0,n.jsx)(r,{className:"my-10 w-full border-slate-200 text-slate-200"}),(0,n.jsxs)("div",{className:"mb-8 flex w-full justify-between",children:[(0,n.jsx)("span",{className:"text-left text-xl font-bold text-slate-900",children:o}),(0,n.jsx)(s.z,{variant:"link",onClick:()=>u(!a),children:a?"View less":"View all"})]}),(0,n.jsx)("div",{className:"grid w-full grid-cols-1 gap-4 md:grid-cols-2",children:i?[,,,,].fill(void 0).map((e,t)=>(0,n.jsx)("div",{className:"flex flex-1 flex-col",children:(0,n.jsx)(c.q,{})},"".concat(t.toString(),"-skeleton"))):(0,n.jsx)(n.Fragment,{children:t.slice(0,a?t.length:4).map(e=>(0,n.jsx)("div",{className:"flex flex-1 flex-col",children:(0,n.jsx)(d.k,{document:e,referrer:"documents_footer",variant:"community",showAuthor:!1,containerClassName:"rounded-lg shadow-md",openInNewTab:!0})},e.id))})})]})};var m=u},54400:function(e,t,i){"use strict";var n,l=i(24246),s=i(27378),o=i(51565),a=i(16125),r=i(25971),d=i(8022),c=i(22967),u=i(10975),m=i(42171),x=i(37381),p=i(29582),h=i(19973),v=i(65801),g=i(43879),f=i(94513);let b=null===(n=i.g.window)||void 0===n?void 0:n.navigator.language.replace("-","_"),_=e=>{let{isLoading:t,addScreenshotVisible:i,setAddScreenshotVisible:n,modalTitle:_,uploadButtonLabel:w,onUpload:j,addAfterActionId:y,documentId:N,gifButton:k,location:C,superOrg:S}=e,[I,L]=(0,s.useState)(null),[T,E]=(0,s.useState)(!1),[Z,F]=(0,s.useState)(!1),[B,D]=(0,s.useState)(null),M=(0,s.useRef)(null),z=(0,s.useRef)(null),[P,A]=(0,s.useState)(""),[R,G]=(0,s.useState)([]),O=(0,a.I0)(),U=(0,h.Z)(),V=!(0,u.TV)(S)||"page"===C,W=(0,s.useMemo)(()=>Z&&(0,l.jsx)(p.ZP,{superOrganization:S,selectedFeature:(0,p.zf)("screenshot"),onClose:()=>{(0,m.L9)("closed_feature_gate_modal",{location:C}),F(!1)},onUpgradeToPro:e=>{(0,m.L9)("clicked_feature_gate_modal_upgrade_to_pro",{location:"document_share_modal",feature:e}),U({location:C})},onSelectedFeature:e=>(0,p.Wp)(e.title,C)}),[C,Z,S,U]),H="file (5 MB or less)";"Image Icon"===C||"page"===C?H="Paste or upload JPG, PNG, GIF or WebP ".concat(H):"Gif Button"===C&&(H="GIF or WebP ".concat(H));let q=()=>{L(null)},K=()=>{q(),D(null)},Q=e=>{j(e),(0,m.L9)("insert_media",{location:C}),setTimeout(()=>{K()},300)},[J,Y]=(0,s.useState)(!0),X=e=>{Y(!0);let t=e.target.files[0],i=new FileReader;return(i.onload=()=>{let e=(0,u.q_)(i.result),n=new Image;n.src="data:image/png;base64, ".concat(e),n.onabort=()=>{L("Image file reading was aborted")},n.onerror=()=>{L("Image file reading has failed")},n.onload=()=>{var i;let l={width:100,height:100};l.width=n.width,l.height=n.height;let s={base64:e,type:t.type.split("/")[1],dimensions:l};q(),D(s),null==z||null===(i=z.current)||void 0===i||i.focus()}},t)?"image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type||"image/webp"===t.type?(L(null),t.size>512e4)?L("File size must be under 5mb"):void(L(null),i.readAsArrayBuffer(t)):L("File type must be jpeg, png or gif."):void 0};(0,s.useEffect)(()=>{fetch("https://g.tenor.com/v1/trending?media_filter=basic&key=HXBU9U0SSTE6&ar_range=standard&locale=".concat(b)).then(e=>e.json()).then(e=>G(e.results))},[]);let $=e=>{let t=e.clipboardData.items,i=[].slice.call(t).filter(e=>/^image\//.test(e.type));0!==i.length&&X({target:{files:[i[0].getAsFile()]}})};return(0,s.useEffect)(()=>(document&&i&&!T&&document.addEventListener("paste",$),()=>{document.removeEventListener("paste",$)}),[i,T]),(0,l.jsxs)(f.Z,{title:_,visible:i,onCancel:()=>{n(!1),setTimeout(()=>{K()},300)},loading:t,disableCloseOnClickOutside:t,contentClassName:"flex flex-col",showCancelButton:!0,hideLoader:!0,children:[W,"Gif Button"===C&&(0,l.jsx)(x.Z,{placeholder:"Search library...",value:P,autoFocus:!1,onChange:e=>{let t=e.target.value;t&&""!==t?E(!0):E(!1),A(t),fetch("https://g.tenor.com/v1/search?q=".concat(t,"&media_filter=basic&key=HXBU9U0SSTE6&ar_range=standard&locale=").concat(b)).then(e=>e.json()).then(e=>G(e.results))}}),T&&(0,l.jsx)("div",{className:"flex max-h-[400px] flex-wrap overflow-y-scroll",children:R.map(e=>{let{tinygif:t}=e.media[0],{gif:i}=e.media[0];return(0,l.jsx)("button",{className:"cursor-pointer",onClick:async t=>{t.preventDefault(),t.stopPropagation(),(0,m.L9)("insert_gif",{url:i.url,location:C}),k&&!0==k?O((0,d.LT)({kind:"instruction",addAfterActionId:y,documentId:N,externalScreenshotUrl:i.url})):(await O((0,d.LT)({kind:"instruction",addAfterActionId:y,documentId:N,externalScreenshotUrl:i.url})),O((0,d.oS)(y))),fetch("https://g.tenor.com/v1/registershare?locale=".concat(b,"&id=").concat(e.id,"&key=HXBU9U0SSTE6")),n(!1)},children:(0,l.jsx)("img",{src:t.url,width:128})})})}),!T&&(0,l.jsxs)("div",{className:(0,c.cn)("relative mt-2 flex min-h-[200px] w-full flex-col items-center justify-center overflow-hidden rounded-2xl border border-dashed border-slate-300 shadow-inner",t&&"pointer-events-none"),"data-testid":"upload-image-modal",onFocus:e=>{E(!1),V||((0,m.L9)("show_feature_gate_modal",{location:C,feature:"Upload Image"}),F(!0),e.target.blur())},children:[!!I&&(0,l.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center",children:[(0,l.jsx)(g.Z,{title:!!I&&"There was an error uploading that file",variant:"error"}),(0,l.jsx)(v.Z,{variant:"outlineLight",onClick:()=>q(),icon:(0,l.jsx)(o.udz,{}),className:"mt-6",children:"Choose Again"})]}),!I&&t&&(0,l.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center",children:[(0,l.jsx)(r.BounceLoader,{size:32,color:"#A5B4FC"}),(0,l.jsx)("span",{className:"mt-4 leading-5 text-blueGray-500",children:"Uploading..."})]}),!I&&!t&&!!B&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:(0,c.cn)("absolute right-2 top-2 flex flex-col")}),(0,l.jsx)("img",{alt:"new-screenshot-preview",className:"max-h-[calc(100vh_-_240px)] max-w-full overflow-hidden rounded-lg",src:"data:image/png;base64, ".concat(B.base64)})]}),!I&&!t&&!B&&(0,l.jsxs)("label",{htmlFor:"media-input",className:"relative flex h-full min-h-[200px] w-full flex-col items-center justify-center bg-blueGray-50 text-slate-500",children:[(0,l.jsx)("span",{className:"normal mt-1 font-sans text-xs font-normal leading-4 text-slate-500",children:H}),(0,l.jsx)(v.Z,{variant:"primary",size:"medium",className:(0,c.cn)("mt-4 cursor-pointer",{"z-10":J}),onClick:()=>{V&&M.current.click()},onDragEnter:()=>Y(!1),children:"Upload a File"}),(0,l.jsx)("input",{type:"file",name:"media-input",id:"media-input",ref:M,onChange:X,accept:"image/jpeg, image/png, image/gif, image/webp",className:"absolute left-0 top-0 h-full w-full rounded-2xl text-transparent file:border-0 file:bg-transparent file:text-transparent","data-testid":"upload-image-input"}),(0,l.jsx)("div",{className:(0,c.cn)(!!I&&"mt-4"),children:(0,l.jsx)(g.Z,{title:I,variant:"error"})})]})]}),!!B&&!I&&(0,l.jsxs)("div",{className:"mt-4 flex w-full flex-row justify-between",children:[(0,l.jsx)(v.Z,{variant:"outlineLight",onClick:t?void 0:()=>{q(),D(null)},children:"Choose Again"}),(0,l.jsx)(v.Z,{ref:z,variant:"primary","data-testid":"add-image-btn",onClick:t?void 0:()=>{q(),Q(B),K()},children:w})]})]})};_.defaultProps={},t.Z=_},91073:function(e,t,i){"use strict";i.d(t,{Z:function(){return C}});var n=i(24246),l=i(23599),s=i(27378),o=i(16125),a=i(2654),r=i(22967),d=i(42171),c=i(28381),u=i(83469),m=i(94033),x=i(21785),p=i(34422);let h=e=>{let{icon:t,hoverIcon:i,selected:l,onClick:o,selectedReaction:a,className:d,ariaLabel:u,showTooltip:h,tooltipContent:v}=e,[g,f]=(0,s.useState)(!1),b=g&&!l&&i,_=i&&l?i:t;return(0,n.jsx)("div",{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),className:(0,r.cn)("flex h-[42px] w-[42px] cursor-pointer items-center justify-center rounded-full bg-transparent transition-all duration-150 ease-out hover:bg-slate-50",{"!bg-slate-50 shadow-border-slate-200":l},d),onClick:o,"aria-label":u,children:a?(0,n.jsx)(c.Km,{color:p.QC[a],icon:p._1[a],label:a,buttonSize:"w-[42px] h-[42px]",iconSize:"w-[40px] h-[40px]"}):h?(0,n.jsx)(x.Z,{visible:!0,overrideFocused:h,variant:"small-dark-with-indicator",indicatorClassName:"-right-1",carotClassName:"rounded-[2px]",appearance:"left",content:v,offset:[0,48],children:(0,n.jsx)(m.G,{icon:b?i:_,className:(0,r.cn)("scale-100 text-lg text-slate-600 transition-all duration-150 ease-out",{"scale-105":g&&!l})})}):(0,n.jsx)(m.G,{icon:b?i:_,className:(0,r.cn)("scale-100 text-lg text-slate-600 transition-all duration-150 ease-out",{"scale-105":g&&!l})})})};var v=e=>{let{onSelectedItem:t,currentSelectedItem:i,disabled:l,currentSelectedReaction:s,className:o,showReactionsTooltip:a}=e;return(0,n.jsxs)("div",{className:(0,r.cn)("drop-shadow-border-slate-200 flex h-auto w-[54px] flex-col items-center justify-center space-y-2 rounded-full bg-white p-1.5 shadow-border-slate-200 transition-all duration-200 ease-out hover:shadow-drop-border-slate-200",{"shadow-drop-border-slate-200":!!i},{"pointer-events-none":!!l},o),"data-testid":"feedback-menu",children:[(0,n.jsx)(h,{icon:u.pkM,hoverIcon:u.MnJ,onClick:()=>{null==t||t("emojis")},selectedReaction:s,selected:"emojis"===i,ariaLabel:"Reactions",showTooltip:a,tooltipContent:(0,n.jsxs)("div",{className:"flex w-[244px] flex-col px-4 py-4",children:[(0,n.jsx)("span",{className:"mb-1 w-full text-base font-semibold text-slate-100",children:"Show your appreciation ✨"}),(0,n.jsx)("span",{className:"w-full text-sm font-medium text-slate-100",children:"Leave a reaction if you found this Scribe helpful!"})]})}),(0,n.jsx)(h,{icon:u.PZF,onClick:()=>{null==t||t("feedback")},selected:"feedback"===i,ariaLabel:"Feedback"})]})},g=i(98052),f=i.n(g),b=i(65801),_=i(63457),w=i(37381),j=i(10270),y=e=>{let{onClose:t,documentId:i,scribeOwnerId:l,documentType:o}=e,[a,r]=(0,s.useState)(""),c=(0,j.Wu)(),u=(0,s.useRef)(null);return(0,s.useEffect)(()=>{u.current.style.height="0px";let{scrollHeight:e}=u.current;e<240?u.current.style.height="".concat(e,"px"):u.current.style.height="240px"},[a]),(0,s.useEffect)(()=>{setTimeout(()=>{(null==u?void 0:u.current)&&u.current.focus()},100)},[u]),(0,n.jsxs)("div",{className:"h-auto w-[400px] rounded-2xl border-slate-200 bg-white p-6 shadow-drop-border-slate-200",children:[(0,n.jsx)(_.Z,{variant:"medium",className:"mt-0 text-xl font-bold text-slate-800",title:"Any feedback for the creator?"}),(0,n.jsx)(w.Z,{ref:u,containerClassName:"min-h-[112px] max-h-[280px] pb-2",label:"How can this ".concat(f()(o)," be improved?"),isTextArea:!0,placeholder:"page"===o?"e.g. this Page needs to be updated with the latest information":"e.g. Step 7 is missing a screenshot",value:a,onChange:e=>r(e.target.value),autoFocus:!0,className:"resize-none placeholder:text-opacity-60"}),(0,n.jsxs)("div",{className:"mt-6 flex w-full items-center justify-end",children:[(0,n.jsx)(b.Z,{onClick:()=>{(0,d.L9)("closed_feedback_modal",{file_id:i}),t()},variant:"secondary",size:"medium",className:"mr-4",disabled:c.isLoading,children:"Cancel"}),(0,n.jsx)(b.Z,{onClick:()=>{(0,d.L9)("submitted_feedback",{file_id:i,feedback_message:a,scribe_owner_id:l}),c.mutateAsync({documentId:i,content:a}).then(t)},variant:"primary",size:"medium",disabled:""===a||c.isLoading,children:c.isLoading?"Submitting...":"Submit"})]})]})},N=i(59401),k=e=>{let{onClick:t}=e;return(0,n.jsxs)("div",{className:"flex h-auto w-[300px] flex-col items-center justify-center rounded-2xl border-slate-200 bg-white px-6 py-7 shadow-border-slate-200",children:[(0,n.jsx)(N.Z,{variant:"duotone",icon:"messageExclamation",size:32,primaryColor:"#6366F1",secondaryColor:"#A5B4FC"}),(0,n.jsx)("span",{className:"mb-1 mt-4 text-base font-semibold text-slate-600",children:"Have something to say?"}),(0,n.jsx)("span",{className:"text-center text-sm text-slate-500",children:"Create an account to leave messages for the author to see!"}),(0,n.jsx)("button",{onClick:t,className:"my-2 mt-6 cursor-pointer bg-transparent text-sm font-semibold text-indigo-600 hover:text-indigo-500",children:"Create an account"})]})},C=e=>{let{loggedIn:t,documentId:i,documentOwnerId:u,documentType:m}=e,{userReactionForDoc:x}=(0,o.v9)(a.Gu),p=(0,s.useRef)(null),h=(0,o.I0)(),[g,f]=(0,s.useState)(!1),[b,_]=(0,s.useState)(null),[w,j]=(0,s.useState)(null),[N,C]=(0,s.useState)(null);return(0,s.useEffect)(()=>{_(x)},[x]),(0,s.useEffect)(()=>{g&&(f(!0),setTimeout(()=>{f(!1)},3500))},[g]),!function(e,t){let i=i=>{!e.current||e.current.contains(i.target)||t(i)};(0,s.useEffect)(()=>(document.addEventListener("mousedown",i),document.addEventListener("touchstart",i),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i)}),[e,t])}(p,()=>j(null)),(0,n.jsxs)(n.Fragment,{children:[N&&g&&(0,n.jsx)(c.S7,{visible:g,reaction:N.reaction,color:N.color,onComplete:()=>{f(!1),C(null)}}),(0,n.jsxs)("div",{ref:p,className:"fixed bottom-8 right-8 z-20",children:[(0,n.jsxs)("div",{className:(0,r.cn)("invisible fixed bottom-8 right-8 z-10 opacity-0 transition-all duration-300 ease-in-out",{"!visible right-[102px] opacity-100":"feedback"===w}),children:[!t&&(0,n.jsx)(k,{onClick:()=>{(0,d.L9)("clicked_signup_in_feedback_modal",{file_id:i}),window.open("/signup","_blank")}}),t&&"feedback"===w&&(0,n.jsx)(y,{documentType:m,onClose:()=>{j(null)},documentId:i,scribeOwnerId:u}),t&&"feedback"!==w&&(0,n.jsx)("div",{className:"h-[296px] w-[400px] rounded-2xl border-slate-200 bg-white/10 p-6 shadow-drop-border-slate-200"})]}),(0,n.jsx)("div",{className:(0,r.cn)("pointer-events-none invisible fixed right-8 -z-[1] opacity-0 transition-all duration-300 ease-in-out",{"pointer-events-auto !visible opacity-100":"emojis"===w},"emojis"===w?"bottom-36":"bottom-8"),children:(0,n.jsx)(c.n6,{onSelected:(e,t)=>{j(null),b?(C(null),(null==b?void 0:b.identifier)===e?h((0,a.Ob)({reactionId:b.id,docId:i})).then(l.SI).then(()=>{(0,d.L9)("delete_reaction_to_scribe",{file_id:i,reaction:e})}):(C({reaction:e,color:t}),f(!0),h((0,a.vY)({reactionId:b.id,docId:i,identifier:e})).then(l.SI).then(()=>{(0,d.L9)("update_reaction_to_scribe",{file_id:i,reaction:e})}))):(C({reaction:e,color:t}),f(!0),h((0,a.x7)({docId:i,identifier:e})).then(l.SI).then(()=>{(0,d.L9)("reacted_to_scribe",{file_id:i,reaction:e,scribe_owner_id:u})}))}})}),(0,n.jsx)(v,{className:"z-10",disabled:g,onSelectedItem:e=>{"feedback"===e?(0,d.L9)("opened_feedback_modal",{file_id:i}):"emojis"===e&&(0,d.L9)("opened_reactions",{file_id:i}),j(w===e?null:e)},currentSelectedItem:w,currentSelectedReaction:(null==b?void 0:b.identifier)||(null==N?void 0:N.reaction)})]})]})}},44565:function(e,t,i){"use strict";i.d(t,{x:function(){return r}});var n=i(24246),l=i(83469),s=i(94033),o=i(86677),a=i(7118);let r=e=>{let{shouldGoBackToWorkspace:t=!1,overrideBackPath:r}=e,d=(0,o.useRouter)();return(0,n.jsx)("button",{className:"flex h-6 w-6 cursor-pointer items-center justify-center bg-transparent",onClick:()=>{try{var e,n,l;if(r)return d.push(r);if(!t&&!(0,a.d)()&&(null===(l=i.g)||void 0===l?void 0:null===(n=l.window)||void 0===n?void 0:null===(e=n.history)||void 0===e?void 0:e.length)&&i.g.window.history.length>1)return d.back();return d.push("/workspace")}catch(e){return d.push("/workspace#documents")}},"data-testid":"backButton","aria-label":"Back to previous page",children:(0,n.jsx)(s.G,{className:"text-slate-500 hover:text-slate-800",icon:l.acZ})})}},38190:function(e,t,i){"use strict";var n=i(24246),l=i(83469),s=i(22107),o=i(48407),a=i(1581),r=i(22967);t.Z=e=>{let{onVersionHistoryClick:t,versionHistoryShown:i}=e;return(0,n.jsx)(a.pn,{children:(0,n.jsxs)(a.u,{children:[(0,n.jsx)(a.aJ,{children:(0,n.jsx)(o.z,{variant:"secondary",className:(0,r.cn)("hidden md:flex",{"ring-1 ring-slate-700 hover:ring-2 hover:ring-slate-100/50 hover:ring-offset-1 hover:ring-offset-slate-700 group-hover:text-slate-900":i},i&&"bg-slate-700"),onClick:t,"aria-label":i?"Hide Version History":"Show Version History",icon:i?s.qO$:l.qO$,iconProps:{className:(0,r.cn)(!i&&"hover:text-slate-900",{"text-slate-600 ":!i,"text-slate-100 ":i})}})}),(0,n.jsx)(a._v,{side:"bottom",variant:"compact",children:i?"Hide Version History":"Show Version History"})]})})}},22121:function(e,t,i){"use strict";i.d(t,{Z:function(){return n.Z}});var n=i(49817)},52949:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n=i(24246),l=i(22967),s=i(89377),o=e=>{let{tag:t,className:i,disabled:o,...a}=e,r=(0,n.jsx)("img",{alt:"","data-testid":"app-tag-icon",src:t.icon_url,className:"h-4 w-4 rounded-sm p-px",height:14,width:14});return o?(0,n.jsxs)("div",{className:(0,l.cn)("flex items-center justify-center gap-1 rounded border border-slate-400/20 bg-white px-2 py-1",i),children:[r,(0,n.jsx)("span",{className:"text-sm text-slate-500",children:t.name})]}):(0,n.jsx)(s.Z,{classes:i,title:t.name,icon:r,variant:"primary",...a})}},63457:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var n=i(24246);i(27378);var l=i(22967),s=e=>{let{title:t,variant:i="large",className:s,...o}=e;return(0,n.jsx)("h1",{className:(0,l.cn)("text-slate-900",function(e){switch(e){case"base":return"text-base font-semibold leading-6";case"small":return"text-xl font-semibold leading-7";case"medium":return"text-2xl font-bold leading-8";case"almostlarge":return"text-3xl leading-9 font-extrabold";case"semilarge":return"text-4xl";default:return"text-4xl font-black leading-10"}}(i),s),...o,children:t})}},22464:function(e,t,i){"use strict";var n=i(24246),l=i(63688),s=i(22967);let o=e=>{let{disabled:t,withoutDefaultPadding:i,className:o,onClick:a,...r}=e;return(0,n.jsx)(l.v2.Item,{disabled:t,children:e=>{let{active:l}=e;return(0,n.jsx)("a",{className:(0,s.cn)("text-sm",{"text-white":l,"text-indigo-100":!l,"cursor-pointer":void 0!==a||void 0!==r.href,"py-1":!i,"opacity-50":t},o),...r,onClick:e=>{e.stopPropagation(),null==a||a(e)}})}})};o.defaultProps={},t.Z=o},9707:function(e,t,i){"use strict";i.d(t,{C:function(){return u}});var n=i(24246),l=i(63688),s=i(27378),o=i(29721),a=i(22967),r=i(53553);let d=e=>{let{children:t,items:i,itemsClasses:d,appearance:c,open:u,onOpenChange:m,offset:x,isSlateBg:p,isOverflowHidden:h,...v}=e,[g,f]=function(e){let t=(0,s.useRef)(null),i=(0,s.useRef)(null),n=(0,s.useRef)(()=>{}),l=(0,s.useCallback)(()=>{t.current&&i.current&&(n.current&&n.current(),n.current=(0,r.fi)(t.current,i.current,e).destroy)},[t,i,n,e]);return(0,s.useMemo)(()=>[e=>{t.current=e,l()},e=>{i.current=e,l()}],[t,i,l])}({placement:c||"bottom-start",strategy:"fixed",modifiers:[{name:"offset",options:{offset:[0,x||10]}}]});return(0,s.useEffect)(()=>{null==m||m(u)},[u]),(0,s.useEffect)(()=>()=>null==m?void 0:m(!1),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.v2.Button,{ref:g,className:"bg-transparent px-0",children:(0,n.jsx)("div",{className:"flex max-w-max cursor-pointer flex-row items-center bg-transparent",children:t})}),(0,n.jsxs)(o.Z,{children:[u&&(0,n.jsx)("div",{className:"fixed inset-0 z-30",onScroll:e=>e.stopPropagation()}),(0,n.jsx)(l.v2.Items,{ref:f,className:(0,a.cn)("z-40 mt-2 min-w-max max-w-xs rounded-2xl shadow-xl focus:outline-none",p?"bg-slate-800":"bg-gradient-to-b from-indigo-900 to-indigo-800",h&&"overflow-hidden",d),children:i&&i.map((e,t)=>(0,n.jsx)(s.Fragment,{children:e},t))})]})]})};d.defaultProps={appearance:"top-start",isOverflowHidden:!0};let c=e=>{let{items:t,children:i,itemsClasses:s,appearance:o,onOpenChange:a,offset:r,isSlateBg:c,isOverflowHidden:u,...m}=e;return(0,n.jsx)("div",{onClick:e=>{e.stopPropagation()},...m,children:(0,n.jsx)(l.v2,{as:"div",className:"relative text-left",children:e=>{let{open:l}=e;return(0,n.jsx)(d,{items:t,children:i,itemsClasses:s,appearance:o,onOpenChange:a,offset:r,open:l,isSlateBg:c,isOverflowHidden:u})}})})};c.defaultProps={appearance:"bottom-start",isOverflowHidden:!0},i(51565);var u=c},3770:function(e,t,i){"use strict";i.d(t,{Z:function(){return V}});var n=i(24246),l=i(27378),s=i(51565),o=(i(31091),i(971),i(63457),i(89377),i(83469)),a=i(94033),r=i(22967),d=i(65801);let c=(0,l.forwardRef)((e,t)=>{let{onClick:i,className:l,variant:o="social",size:a="medium",...c}=e;return(0,n.jsxs)(d.Z,{...c,ref:t,onClick:i,variant:o,size:a,className:(0,r.cn)("border-indigo-400 bg-indigo-100 !text-indigo-600 hover:!bg-indigo-50",l),children:["Get Scribe Pro",(0,n.jsx)(s.B8b,{size:20,className:"ml-3 mr-1 flex-shrink-0 text-indigo-400"})]})});var u=i(54062),m=i(58109),x=i(23892),p=i.n(x),h=i(86677),v=i(16125),g=i(88108),f=i(1381),b=i(48407),_=i(10975),w=i(42171),j=i(89877),y=i(47883),N=i(50327),k=i(90755),C=i(7118),S=i(70752),I=i.n(S),L=()=>(0,n.jsx)("div",{className:"".concat(I().banner," ").concat(I().center),children:(0,n.jsxs)("p",{className:I().bannerText,children:["You're automatically on the \"Northern Trust General\" team, where you can get started with Scribe. Ask your manager to invite you to any team that is relevant to you. If you're a leader and plan to support a team deployment, please contact"," ",(0,n.jsx)("span",{className:"cursor-pointer underline",onClick:()=>{(0,C.d)()?(0,C.k1)().openURLInBrowser("mailto:justin@scribehow.com"):window.open("mailto:justin@scribehow.com")},children:"justin@scribehow.com"})," ","to get admin privileges."]})}),T=i(18378),E=i(38785),Z=i(73606),F=i(561),B=i(95861),D=e=>{let{registerHotkey:t,style:i}=e,[s,r]=(0,l.useState)(!1),d=(0,F.Ij)()===Z.ft.MacOS?"cmd+k":"ctrl+k";return t&&(0,E.y1)(d,e=>{e.preventDefault(),r(!0),(0,w.L9)("opened_search_modal")}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:i,className:"relative mx-10 flex max-w-lg flex-grow flex-row items-center rounded-3xl bg-transparent",children:(0,n.jsxs)("button",{onClick:()=>r(!0),className:"box-border h-[36px] w-full cursor-pointer rounded-md border border-blueGray-400 border-opacity-30 bg-indigo-700 bg-opacity-5 p-2 text-center text-sm font-medium leading-none text-blueGray-500 transition hover:border-opacity-50 hover:bg-opacity-10 hover:text-blueGray-700","data-testid":"searchButton",children:["Search",(0,n.jsx)(a.G,{className:"ml-2 text-base text-blueGray-400",icon:o.wn1}),(0,n.jsx)("span",{className:"absolute right-2 rounded bg-blueGray-500 bg-opacity-10 p-1 text-[10px] leading-none text-blueGray-600 text-opacity-50",children:d})]})}),(0,n.jsx)(B.Z,{open:s,onClose:r})]})},M=i(21785),z=i(41283),P=i(7443),A=i(55472);let{publicRuntimeConfig:R}=p()(),G=e=>{let{label:t,icon:i,onClick:l,active:s,dataTestID:o,labelClassNames:a}=e;return(0,n.jsx)(M.Z,{appearance:"bottom",variant:"dark",className:"xl:hidden",indicatorClassName:"xl:hidden",content:(0,n.jsx)("div",{className:"px-4 py-2",children:(0,n.jsx)("p",{className:"m-0 text-white",children:t})}),children:(0,n.jsxs)("div",{className:(0,r.cn)("group flex select-none items-center rounded-md p-2 transition-colors",{"cursor-pointer hover:bg-indigo-500 hover:bg-opacity-10":!s}),onClick:s?void 0:l,"data-testId":o,children:[(0,n.jsx)(i,{className:(0,r.cn)("transition-colors",s?"text-indigo-500":"text-slate-400 group-hover:text-indigo-500"),size:24}),(0,n.jsx)("span",{className:(0,r.cn)("ml-2 text-sm font-semibold transition-colors",s?"text-slate-900":"text-slate-700 group-hover:text-slate-900",a),children:t})]})})},O=()=>{let e=(0,v.I0)(),t="nav_bar";return(0,n.jsx)(b.z,{variant:"secondary",className:"hidden md:flex",onClick:()=>{(0,w.L9)("click_invite_teammates",{location:t}),e((0,k.jd)({visible:!0,location:t}))},"data-testid":"inviteButton",icon:o.FKd,children:"Invite"})};function U(e){let t=(0,m.Z)().slice(1).toLowerCase().trim(),i=(0,h.useRouter)(),n=(0,v.I0)();return[t===e,()=>{i.push({pathname:"/workspace",hash:e}),n((0,N.kt)(null))}]}var V=e=>{var t,i,l,d;let{showBackButton:m=!1,showInvite:x=!0,hideTeamDropdown:p=!1,hideSearchBar:N=!1,showNavigationItems:k,onClickBurger:C}=e,S=(0,h.useRouter)(),{data:I}=(0,u.ZP)(),E=null==I?void 0:I.active_organization,{teams:Z}=(0,v.v9)(f.Gx),F=null==E?void 0:null===(t=E.super_organization)||void 0===t?void 0:t.show_team_directory,B=(null==E?void 0:null===(i=E.super_organization)||void 0===i?void 0:i.show_process_tags)&&!!Z.find(e=>e.id===(null==E?void 0:E.id)&&"admin"===e.permission_level),{teammatesPage:M}=(0,v.v9)(T.F),{data:V,error:W,isLoading:H}=(0,g.mI)(void 0,{refetchOnFocus:!0}),[q,K]=(0,g.eb)(),[Q,J]=(0,g.tX)(),[Y,X]=(0,g.ut)(),[$,ee]=U("dashboard"),[et,ei]=U("teammates"),[en,el]=U("teams"),[es,eo]=U("review"),ea=!!R.stripePublishableKey&&(0,_.TV)(null==E?void 0:E.super_organization);return(0,n.jsxs)(n.Fragment,{children:[(null==E?void 0:E.name)==="Northern Trust General"&&(0,n.jsx)(L,{}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("div",{className:(0,r.cn)("z-50 flex h-[72px] min-w-full flex-row items-center bg-transparent px-4",{"justify-between":!k}),children:[(0,n.jsxs)("div",{className:"flex items-center",children:[C&&(0,n.jsx)(a.G,{onClick:C,className:"block cursor-pointer pr-2 text-slate-400 hover:text-slate-900 sm:hidden",icon:o.xiG,fixedWidth:!0}),m&&(0,n.jsx)(b.z,{variant:"secondary",onClick:()=>{S.pathname.includes("/teams")?S.push("/workspace"):S.back()},className:"mr-3",icon:o.acZ,screenReaderLabel:"Back"}),!p&&!!(null==E?void 0:null===(d=E.super_organization)||void 0===d?void 0:null===(l=d.plan)||void 0===l?void 0:l.name)&&(0,n.jsx)(P.Z,{responsiveLogo:!0,location:"dashboard_team_dropdown"})]}),k&&(0,n.jsxs)("div",{className:"mx-4 flex items-center space-x-2 sm:space-x-6",children:[(0,n.jsx)(G,{label:"Dashboard",icon:$?s.gyC:s.Ez2,onClick:ee,active:$,dataTestID:"dashboard",labelClassNames:"hidden xl:inline"}),M&&(0,n.jsx)("div",{className:"hidden sm:flex",children:(0,n.jsx)(G,{label:"Teammates",icon:et?s.Qeh:s.jU4,onClick:ei,active:et,dataTestID:"teammateDirectory",labelClassNames:"hidden xl:inline"})}),F&&(0,n.jsx)("div",{className:"hidden sm:flex",children:(0,n.jsx)(G,{label:"Teams",icon:en?s.AKH:s.fsd,onClick:el,active:en,dataTestID:"teamDirectory",labelClassNames:"hidden xl:inline"})}),B&&(0,n.jsx)("div",{className:"hidden sm:flex",children:(0,n.jsx)(G,{label:"Review",icon:es?s.O7$:s.mqe,onClick:eo,active:es,dataTestID:"reviewQueue",labelClassNames:"hidden xl:inline"})}),(0,n.jsx)("div",{className:"hidden sm:block",children:(0,n.jsx)(z.Z,{placement:k?"bottom":void 0,children:(0,n.jsx)(G,{label:"Help",icon:s.zXH,labelClassNames:"hidden xl:inline"})})}),ea&&(0,n.jsx)(c,{className:"mr-4 hidden !h-9 tablet-lg:flex",onClick:()=>{(0,w.L9)("get_scribe_pro",{location:"navigation_bar"}),S.push("/billing")}})]}),!k&&(0,n.jsx)("div",{className:"hidden w-full justify-center sm:flex",children:!N&&(0,n.jsx)(D,{registerHotkey:!0})}),(0,n.jsxs)("div",{className:(0,r.cn)("flex flex-row items-center gap-x-4 md:mr-4",{"ml-auto":k}),children:[k?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.Z,{unread:(null==V?void 0:V.unread)||0,notifications:(null==V?void 0:V.notifications)||[],onClearAll:q,onClearId:e=>Y(e),onClose:Q,trackEvent:w.L9,className:""}),x&&(0,n.jsx)(O,{}),(0,n.jsx)(j.R,{})]}):(0,n.jsx)(z.Z,{children:(0,n.jsx)("span",{className:"flex cursor-pointer",children:(0,n.jsx)(s.zXH,{size:24,className:"ml-2 text-blueGray-600"})})}),(0,n.jsx)(A.Z,{})]})]})})]})}},40668:function(e,t,i){"use strict";i.d(t,{Z:function(){return x}});var n=i(24246),l=i(22107),s=i(38579),o=i.n(s),a=i(48407),r=i(22967),d=i(44067),c=i(16713);let u=e=>{let{duration:t,windowWidth:i}=e;if(i>=744){let[e,l]=(0,c.Z)(null!=t?t:0).split(" ");return(0,n.jsxs)("p",{className:(0,r.cn)("block truncate text-white",i>=1148?"mx-10 text-lg":"mx-6 text-center text-sm"),children:["This how-to guide was created free with Scribe in"," ",(0,n.jsxs)("span",{className:"font-bold",children:[(0,n.jsx)("span",{className:"text-teal-300",children:e})," ",l,"."]}),i>=1148?" ":(0,n.jsx)("br",{}),"Create your own guides today!"]})}return i>=607?(0,n.jsxs)("p",{className:"mx-6 block truncate text-center text-sm text-white",children:["This how-to guide was created free with Scribe.",(0,n.jsx)("br",{}),"Create your own guides today!"]}):(0,n.jsxs)("p",{className:"mx-4 block truncate text-center text-sm text-white",children:["Made on Scribe.",(0,n.jsx)("br",{}),"Create your own!"]})},m=e=>{let{windowWidth:t}=e,i="Create  a beautiful Page just like this with Scribe.";return t>=744?(0,n.jsx)("p",{className:(0,r.cn)("block truncate text-white",t>=1148?"mx-10 text-lg":"mx- 6 text-center text-sm"),children:i}):t>=607?(0,n.jsx)("p",{className:"mx-6 block truncate text-center text-sm text-white",children:i}):(0,n.jsx)("p",{className:"mx-4 block truncate text-center text-sm text-white",children:i})};var x=e=>{let{duration:t,onStartNow:i,variant:s="default"}=e,c=(0,d.Z)();return(0,n.jsx)("div",{className:"fixed left-0 top-0 z-50 w-full backdrop-blur-lg backdrop-saturate-200",children:(0,n.jsxs)("div",{className:(0,r.cn)("relative flex items-center justify-between",{"h-[75px]":c<400}),children:[(0,n.jsx)("div",{className:"absolute inset-0 -z-[1] bg-blueGray-900 opacity-80"}),(0,n.jsx)(o(),{height:29,width:95,className:(0,r.cn)("block flex-shrink-0",c<400?"ml-4 h-[15px] w-[48px]":"mb-[26px] ml-6 mt-5"),src:"/logo-white.svg",alt:"Scribe logo"}),"default"===s?(0,n.jsx)(u,{duration:t,windowWidth:c}):(0,n.jsx)(m,{windowWidth:c}),(0,n.jsx)(a.z,{className:(0,r.cn)("flex-shrink-0",c<744?"mr-6":"mr-10"),size:"large",icon:l.eFW,iconPosition:"right",onClick:i,children:c<400?"Start":"Start Now"})]})})}},78440:function(e,t,i){"use strict";i.d(t,{Z:function(){return f}});var n=i(24246),l=i(83469),s=i(94033),o=i(10379),a=i(14076),r=i(38579),d=i.n(r),c=i(86677),u=i(1581),m=i(22967),x=i(12068),p=i(42171),h=i(62136);let v=e=>{let{onLogoClick:t}=e;return(0,n.jsxs)("button",{className:"m-0 flex cursor-pointer items-center bg-transparent p-0",onClick:t,children:[(0,n.jsx)("span",{className:"mt-1.5 block text-xs leading-3 text-blueGray-500",children:"Made with"}),(0,n.jsx)("div",{className:"ml-1.5",children:(0,n.jsx)(d(),{src:"/images/logo-slate.svg",alt:"Scribe",width:61,height:20})})]})},g=e=>{let{className:t,externalLink:i,onExternalLinkClick:r,removeLogo:d,onLogoClick:g,openLinksWithScribeViewer:f,actionURL:b,scribe:_,hideFooterButtons:w}=e,{as:j}=(0,c.useRouter)().query,y="scrollable"===j,N=j===h.Ct.Movie,{installed:k}=(0,a.JJ)(),C=b&&f&&!y,S=()=>y?h.Ct.Scroll:N?h.Ct.Movie:h.Ct.Slides;return(0,n.jsx)(u.pn,{children:(0,n.jsxs)("div",{className:(0,m.cn)(t,"z-40 flex w-full select-none justify-between bg-white px-6 py-3 shadow-[0_0_16px_0_rgba(0,0,0,0.05)]",{"justify-end":d}),children:[!d&&(0,n.jsx)(v,{onLogoClick:()=>g({eid:"ewf",vid:"mws"})}),w?(0,n.jsx)("div",{className:"h-6"}):(0,n.jsxs)("div",{className:"flex gap-2",children:[C&&(0,n.jsx)(o.Z,{onClick:()=>{f?((0,p.L9)("scribe_viewer_opened_from_step",{embedType:S()}),(0,p.L9)("launch_guide_me_from_embed",{embedType:S()}),(0,p.L9)("toggle_on_guide_me",{location:"sidekick_guide_me_button",documentType:"scribe",documentId:_.id}),(0,x.MK)({messageType:"openScribeViewer",startingUrl:b,location:"Scribe Viewer",scribe:{id:null==_?void 0:_.id,name:null==_?void 0:_.name}})):window.open(b,"_blank")},actionURL:b,isEmbedFooter:!0,extensionInstalled:k}),(0,n.jsxs)(u.u,{children:[(0,n.jsx)(u.aJ,{children:(0,n.jsx)("a",{className:"m-0 flex h-6 w-6 cursor-pointer items-center justify-center bg-transparent p-0 text-slate-500 hover:text-slate-900",href:i,target:"_blank",onClick:()=>{r(S())},"aria-label":"open scrolling step version in new tab for improved accessibility",rel:"noreferrer",children:(0,n.jsx)(s.G,{className:"h-4 w-4",icon:l.TL5})})}),(0,n.jsx)(u._v,{align:"end",alignOffset:-16,children:"View Full Scribe"})]})]})]})})};g.displayName="EmbeddedViewerFooter";var f=g},36053:function(e,t,i){"use strict";i.d(t,{Ji:function(){return d},bR:function(){return l},r_:function(){return u},xo:function(){return r},z0:function(){return c}});var n,l,s=i(85878),o=i(42171);(n=l||(l={})).EMBED_CLICK_EXTERNAL_LINK="embed_click_external_link",n.EMBED_CLICK_NEXT_STEP="embed_click_next_step",n.EMBED_CLICK_PREVIOUS_STEP="embed_click_previous_step",n.EMBED_CLICK_RESTART="embed_click_restart",n.VIEW_EMBEDDED_SCRIBE="view_embedded_scribe",n.VIEW_EMBEDDED_KNOWLEDGE_PAGE="view_embedded_knowledge_page",n.EMBED_HALF_WAY="halfway_in_scribe_embed",n.EMBED_COMPLETED="end_of_scribe_embed";let a=()=>{var e,t;return(null===(e=window)||void 0===e?void 0:e.location.search.includes("preview=true"))||(null===(t=window)||void 0===t?void 0:t.location.search.includes("modalPreview=true"))};function r(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"slideshow";(0,o.L9)("embed_click_external_link",{scribeId:e.id,link:t,isPreview:a(),embedType:i})}function d(e){(0,o.L9)("embed_click_restart",{scribeId:e.id,isPreview:a()})}function c(e,t){(0,o.L9)("view_embedded_scribe",{scribeId:e.id,viewing_device:(0,s.ic)()?"mobile":"desktop",isPreview:a(),viewing_mode:t})}function u(e){(0,o.L9)("view_embedded_knowledge_page",{id:e.id,viewing_device:(0,s.ic)()?"mobile":"desktop",isPreview:a()})}},28381:function(e,t,i){"use strict";i.d(t,{S7:function(){return j},Km:function(){return m},n6:function(){return v}});var n=i(24246),l=i(27378),s=i(22967),o=i(21947),a=i(94033),r=i(1581);let d={small:"w-5 h-5",large:"w-[48px] h-[48px]"},c={small:"w-[19.2px] h-[19.2px]",large:"w-[46px] h-[46px]"},u={small:"text-[11px]",large:"text-[28px]"};var m=e=>{let{icon:t,label:i,hoverIcon:o,onClick:m,color:v,textSize:g,buttonSize:f,iconSize:b,size:_="large",iconClassName:w,className:j,disabled:y}=e,[N,k]=(0,l.useState)(!1),C=N&&o,S=(0,n.jsx)("div",{onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),className:(0,s.cn)("flex items-center justify-center overflow-hidden rounded-full bg-white shadow-emoji-button",!y&&"cursor-pointer",x[v],f||d[_],j),onClick:()=>{!y&&m&&m()},"aria-label":i||"Reaction",children:(0,n.jsx)("div",{className:(0,s.cn)("flex items-center justify-center rounded-full",p[v],b||c[_],w),children:(0,n.jsx)(a.G,{icon:C?o:o||t,className:(0,s.cn)("scale-100 transition-all duration-150 ease-out",{"scale-105":N&&!y},h[v],g||u[_])})})});return i?(0,n.jsx)("div",{className:"flex flex-row items-center",children:(0,n.jsx)(r.pn,{children:(0,n.jsxs)(r.u,{children:[(0,n.jsx)(r.aJ,{children:S}),(0,n.jsx)(r._v,{side:"left",variant:"compact",className:"capitalize leading-3",children:i})]})})}):S};let x={pink:"emoji-button-pink",indigo:"emoji-button-indigo",sky:"emoji-button-sky",orange:"emoji-button-orange",emerald:"emoji-button-emerald",yellow:"emoji-button-yellow",grey:"emoji-button-grey"},p={pink:"emoji-button-icon-pink",indigo:"emoji-button-icon-indigo",sky:"emoji-button-icon-sky",orange:"emoji-button-icon-orange",emerald:"emoji-button-icon-emerald",yellow:"emoji-button-icon-yellow",grey:"emoji-button-icon-grey"},h={pink:"text-pink-500",indigo:"text-indigo-500",sky:"text-sky-500",orange:"text-orange-500",emerald:"text-emerald-500",yellow:"text-yellow-500",grey:"text-slate-500"};var v=e=>{let{onSelected:t,className:i}=e,l=(e,i)=>{null==t||t(e,i)};return(0,n.jsxs)("div",{className:(0,s.cn)("flex h-auto w-[54px] flex-col items-center justify-center space-y-[14px] rounded-full p-1.5",i),children:[(0,n.jsx)(m,{color:"pink",icon:o.m6i,onClick:()=>l("love","pink"),label:"love"}),(0,n.jsx)(m,{color:"indigo",icon:o.dwV,onClick:()=>l("applaud","indigo"),label:"applaud"}),(0,n.jsx)(m,{color:"emerald",icon:o.u8Q,onClick:()=>l("like","emerald"),label:"like"}),(0,n.jsx)(m,{color:"sky",icon:o.f5W,onClick:()=>l("astonished","sky"),label:"astonished"}),(0,n.jsx)(m,{color:"orange",icon:o.fGT,onClick:()=>l("gem","orange"),label:"gem"})]})};let g={pink:"bg-pink-500/10",indigo:"bg-indigo-500/10",sky:"bg-sky-500/10",orange:"bg-orange-500/10",emerald:"bg-emerald-500/10",yellow:"bg-yellow-500/10",grey:"bg-slate-500/10"},f={gem:o.fGT,love:o.m6i,applaud:o.dwV,astonished:o.f5W,like:o.u8Q,joyous:o.pkM};var b=e=>{let{color:t,reaction:i,className:l,...o}=e;return(0,n.jsx)("div",{className:(0,s.cn)("flex h-[74px] w-[74px] items-center justify-center overflow-hidden rounded-full bg-white",g[t],l),...o,children:(0,n.jsx)(a.G,{icon:f[i],className:(0,s.cn)("scale-100 text-4xl",h[t])})})};let _=()=>Math.floor(100*Math.random())+1,w=(e,t)=>Math.floor(Math.random()*(t-e+1)+e);var j=(0,l.memo)(e=>{let{color:t,reaction:i,className:o}=e,a=()=>{let e=_(),t=_(),i=w(3500,4500),n=w(1,10),l=1===w(1,2)?"360deg":"-360deg",s=w(5,15),o=(.5*Math.random()+.5).toFixed(2);return{left:"".concat(e,"%"),top:"".concat(t,"%"),scale:o,"--animation-duration":"".concat(i,"ms"),"--sideways-duration":"".concat(n,"s"),"--rotate-duration":"".concat(s,"s"),"--rotate-angle":"".concat(l)}};return(0,l.useLayoutEffect)(()=>(document.body.style.overflow="hidden",()=>document.body.style.overflow=null),[]),(0,n.jsx)("div",{className:(0,s.cn)("fixed bottom-0 left-0 right-0 top-0 z-[1] h-full w-full flex-1",o),children:[...Array(20)].map((e,l)=>(0,n.jsx)(b,{reaction:i,color:t,style:a(),className:(0,s.cn)("emoji-bubble emoji-bubble-animate")},l))})},()=>!0)},34422:function(e,t,i){"use strict";i.d(t,{ZP:function(){return M},QC:function(){return Z},_1:function(){return F}});var n=i(24246),l=i(21947),s=i(83469),o=i(94033),a=i(98052),r=i.n(a),d=i(27378),c=i(16125),u=i(2654),m=i(83644),x=i(22967),p=i(10975),h=i(42171),v=i(59401),g=i(10270),f=i(28381),b=i(73943),_=i(38579),w=i.n(_),j=i(37979),y=i(21785),N=i(9707),k=i(22464);let C=e=>{let{userName:t,userId:i,date:l,additionalInfo:a,isResolved:r,onResolved:c,onDelete:u,onUnresolved:p,canEdit:h,profilePictureUrl:v}=e,[g,f]=(0,d.useState)(!1);return(0,n.jsxs)("div",{className:(0,x.cn)("relative mt-4 flex max-w-[288px] flex-row items-start rounded-lg border-slate-200 bg-white p-3 transition-all duration-200 ease-out",!g&&"shadow-inactive-feedback",g&&"bg-slate-50 shadow-active-feedback"),onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[(0,n.jsx)("div",{className:"mr-4",children:(0,n.jsx)(m.qE,{size:"sm",uuid:null!=i?i:t,children:v?(0,n.jsx)(w(),{src:v,width:24,height:24,alt:t}):t})}),(0,n.jsxs)("div",{className:"flex max-w-[calc(100%_-_40px)] flex-col",children:[(0,n.jsxs)("div",{className:"mb-2 flex flex-row items-center",children:[(0,n.jsx)("span",{className:"mr-1.5 text-sm font-bold text-slate-600",children:t}),(0,n.jsx)("span",{className:"text-xs text-slate-400",children:(0,j.eI)(l).split(",")[0]})]}),(0,n.jsx)("span",{className:"mb-4 whitespace-pre-line break-words text-sm text-gray-700",children:a})]}),g&&h&&(r?(0,n.jsxs)("div",{className:"absolute right-3 top-3 flex cursor-pointer flex-row items-center",children:[(0,n.jsx)(y.Z,{appearance:"bottom",variant:"small-dark",content:(0,n.jsx)("span",{className:"px-2 py-1 text-sm text-slate-200",children:"Reopen Feedback"}),children:(0,n.jsx)("div",{className:"flex h-6 w-6 flex-row items-center justify-center rounded-l-lg border-b-[0.5px] border-l-[0.5px] border-t-[0.5px] border-slate-200 hover:bg-white",onClick:p,children:(0,n.jsx)(o.G,{icon:s.lUd,className:"h-3 w-3 text-slate-400"})})}),(0,n.jsx)(N.C,{appearance:"bottom-end",items:[(0,n.jsx)(k.Z,{onClick:u,children:(0,n.jsxs)("div",{className:"flex cursor-pointer flex-row items-center",children:[(0,n.jsx)(o.G,{icon:s.XAH,className:"mr-2 h-4 w-4 text-red-400"}),(0,n.jsx)("span",{className:"text-sm text-red-400",children:"Delete Feedback"})]})})],isSlateBg:!0,itemsClasses:"py-3 px-4",children:(0,n.jsx)("div",{className:"flex cursor-pointer flex-row items-center",children:(0,n.jsx)("div",{className:"flex h-6 w-6 flex-row items-center justify-center rounded-r-lg border-[0.5px] border-slate-200 hover:bg-white",children:(0,n.jsx)(o.G,{icon:s.S6C,className:"h-3 w-3 text-slate-400"})})})})]}):(0,n.jsxs)("div",{className:"absolute right-3 top-3 flex cursor-pointer flex-row items-center",children:[(0,n.jsx)(y.Z,{appearance:"bottom",variant:"small-dark",content:(0,n.jsx)("span",{className:"px-2 py-1 text-sm text-slate-200",children:"Resolve Feedback"}),children:(0,n.jsx)("div",{className:"flex h-6 w-6 flex-row items-center justify-center rounded-l-lg border-b-[0.5px] border-l-[0.5px] border-t-[0.5px] border-slate-200 hover:bg-white",onClick:c,children:(0,n.jsx)(o.G,{icon:s.fV7,className:"h-3 w-3 text-slate-400"})})}),(0,n.jsx)(N.C,{appearance:"bottom-end",items:[(0,n.jsx)(k.Z,{onClick:u,children:(0,n.jsxs)("div",{className:"flex cursor-pointer flex-row items-center",children:[(0,n.jsx)(o.G,{icon:s.XAH,className:"mr-2 h-4 w-4 text-red-400"}),(0,n.jsx)("span",{className:"text-sm text-red-400",children:"Delete Feedback"})]})})],isSlateBg:!0,itemsClasses:"py-3 px-4",children:(0,n.jsx)("div",{className:"flex h-6 w-6 flex-row items-center justify-center rounded-r-lg border-[0.5px] border-slate-200 hover:bg-white",children:(0,n.jsx)(o.G,{icon:s.S6C,className:"h-3 w-3 text-slate-400"})})})]}))]})},S=()=>(0,n.jsx)("div",{className:"mt-4 flex h-16 items-center justify-center rounded-lg border border-slate-200 text-sm text-slate-400",children:"Something went wrong"});var I=e=>(0,n.jsx)(b.Z,{fallback:S,children:(0,n.jsx)(C,{...e})});let L=e=>{let{icon:t,selected:i,onClick:l,tab:s,label:a}=e,r=(0,n.jsx)(o.G,{icon:t,className:(0,x.cn)("h-3.5 w-3.5")});return a&&(r=(0,n.jsx)(y.Z,{appearance:"bottom",variant:"small-dark",offset:[4,12],visible:!0,content:(0,n.jsx)("span",{className:"mx-2 my-1.5 leading-3",children:a}),containerClassName:"py-1 px-2",children:r})),(0,n.jsx)("div",{onClick:()=>l(s),className:(0,x.cn)("z-20 flex h-7 w-1/3 scale-100 cursor-pointer flex-row items-center justify-center rounded-md text-slate-400",i&&"text-slate-600 shadow-sm"),"aria-label":a,children:r})};var T=e=>{let{selectedTab:t,onTabChange:i}=e,l=(0,n.jsx)("div",{className:(0,x.cn)("absolute z-10 box-border flex h-7 w-[calc(33%-2px)] cursor-pointer flex-row items-center justify-center rounded-md bg-white transition-all duration-150 ease-out",{"translate-x-0":"unresolved"===t,"translate-x-full":"resolved"===t,"translate-x-[200%]":"reactions"===t})});return(0,n.jsxs)("div",{className:"relative flex w-full flex-row rounded-lg bg-slate-100 p-1 shadow-feedback-bar",children:[(0,n.jsx)(L,{label:"Feedback",icon:s.PZF,tab:"unresolved",selected:"unresolved"===t,onClick:i}),(0,n.jsx)(L,{label:"Resolved",icon:s.fV7,tab:"resolved",selected:"resolved"===t,onClick:i}),(0,n.jsx)(L,{label:"Reactions",icon:s.ctA,tab:"reactions",selected:"reactions"===t,onClick:i}),l]})};let E=["love","applaud","like","astonished","gem"],Z={love:"pink",applaud:"indigo",like:"emerald",astonished:"sky",gem:"orange",joyous:"yellow"},F={love:l.m6i,applaud:l.dwV,like:l.u8Q,astonished:l.f5W,gem:l.fGT,joyous:s.pkM},B={love:"bg-pink-50 border-pink-400",applaud:"bg-indigo-50 border-indigo-500",like:"bg-emerald-50 border-emerald-400",astonished:"bg-sky-50 border-sky-400",gem:"bg-orange-50 border-orange-400",joyous:"bg-yellow-50 border-yellow-400"},D={love:"text-pink-400",applaud:"text-indigo-500",like:"text-emerald-400",astonished:"text-sky-400",gem:"text-orange-400",joyous:"text-yellow-400"};var M=e=>{let{documentId:t,documentType:i,visible:l,onClose:a,canEdit:b,userOwned:_,feedbackViewerTab:w,onSelectTab:j}=e,{data:y}=(0,g.L6)({documentId:t}),{reactions:N}=(0,c.v9)(u.Gu),k=(0,g.Wo)(),C=(0,g.EJ)(),[S,L]=(0,d.useState)(null),[M,z]=(0,d.useState)(null),P=(0,d.useMemo)(()=>(N||[]).filter(e=>(null==e?void 0:e.user)&&(!S||e.identifier===S)),[N,S]),A=(0,d.useMemo)(()=>"reactions"===w?[]:(y||[]).filter(e=>e.is_resolved===("resolved"===w)),[w,y]),R="reactions"===w&&"Reactions".concat(((null==N?void 0:N.length)||0)>0?" (".concat(null==N?void 0:N.length,")"):"")||("unresolved"===w?"Feedback":"Resolved")+(A.length>0?" (".concat(A.length,")"):""),G=r()(i);return(0,n.jsxs)("div",{className:(0,x.cn)("fixed right-0 top-0 z-30 flex h-screen w-auto flex-1 flex-col overflow-y-auto bg-white transition-all duration-500 ease-in-out",{"w-80 max-w-[320px] outline outline-1 outline-slate-900/10":l,"w-0 max-w-0":!l}),children:[(0,n.jsxs)("button",{onClick:a,className:"flex h-16 w-80 cursor-pointer flex-row items-center justify-start border-b-[1px] border-slate-200 bg-white/50 p-6",children:[(0,n.jsx)(o.G,{icon:s._tD,className:"mx-[2px] h-[15px] w-[10px] cursor-pointer text-slate-500 hover:text-slate-800","aria-label":"Close Feedback"}),(0,n.jsx)("span",{className:"ml-6 text-sm font-semibold text-slate-600",children:R})]}),(0,n.jsxs)("div",{className:"flex h-full w-80 flex-col bg-white p-4",children:[(0,n.jsx)(T,{selectedTab:w,onTabChange:e=>{(0,h.L9)("selected_tab_in_feedback_viewer",{file_id:t}),j(e)}}),A.map(e=>{var i,l;let s={file_id:t,feedback:e.feedback_identifiers.toString(),feedback_message:e.other_feedback,feedback_author:e.user?e.user.email:"Anonymous"},o=t=>{k.mutate({feedbackId:e.id,data:{is_resolved:t}})};return(0,n.jsx)(I,{profilePictureUrl:null===(i=e.user)||void 0===i?void 0:i.profile_picture_url,userName:e.user?(0,p.GK)(e.user):"Anonymous",userId:null===(l=e.user)||void 0===l?void 0:l.id,date:e.created,additionalInfo:e.other_feedback,isResolved:e.is_resolved,onResolved:()=>{(0,h.L9)("resolved_feedback",s),o(!0)},onUnresolved:()=>{(0,h.L9)("reopened_feedback",s),o(!1)},onDelete:()=>{(0,h.L9)("deleted_feedback",s),C.mutate(e.id)},canEdit:b},e.id)}),"reactions"!==w&&0===A.length&&(0,n.jsxs)("div",{className:"mt-24 flex h-[30vh] max-w-[288px] flex-col items-center justify-start p-3",children:[(0,n.jsx)(v.Z,{variant:"duotone",icon:"messageCheck",size:32,primaryColor:"#6366F1",secondaryColor:"#A5B4FC"}),(0,n.jsxs)("span",{className:"mb-0.5 mt-[12px] whitespace-pre-line text-base font-semibold text-slate-500",children:["This ",G," is in tip-top shape!"]}),(0,n.jsxs)("span",{className:"text-center text-sm text-slate-500",children:["resolved"===w&&"No resolved feedback for this ".concat(G),"unresolved"===w&&(_?"No open feedback for this ".concat(G):"Leave feedback if there are any issues with this ".concat(G))]})]}),"reactions"===w&&((null==N?void 0:N.length)>0?(0,n.jsxs)("div",{className:"flex h-full flex-col",children:[(0,n.jsx)("div",{className:"mt-[14px] flex flex-row justify-between",children:E.map(e=>(0,n.jsxs)("div",{role:"presentation",className:(0,x.cn)("flex h-[66px] w-[50px] cursor-pointer flex-col items-center rounded-lg border-[1px] px-3 py-[10px]",M===e||S===e?B[e]:"border-slate-200 bg-slate-50 transition-all duration-500 ease-out"),onClick:()=>{S===e?L(null):L(e)},onMouseEnter:()=>z(e),onMouseLeave:()=>z(null),children:[(0,n.jsx)(f.Km,{size:"small",color:Z[e],icon:F[e],onClick:()=>L(e)}),(0,n.jsx)("span",{className:(0,x.cn)("mt-[6px] text-xs font-bold",M===e||S===e?D[e]:"text-slate-600 transition-all duration-500 ease-out"),children:N.filter(t=>t.identifier===e).length})]},e))}),(0,n.jsx)("div",{className:"mt-4 flex h-full flex-col overflow-y-scroll",children:null==P?void 0:P.map(e=>{var t;let i=(0,p.GK)(null==e?void 0:e.user);return(0,n.jsxs)("div",{className:"flex min-h-[48px] flex-row items-center justify-start border-b border-slate-200/60",children:[(0,n.jsxs)("div",{className:"relative flex",children:[(0,n.jsx)("div",{className:"mr-3",children:(0,n.jsx)(m.qE,{uuid:null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.id,size:"sm",children:i})}),(0,n.jsx)(f.Km,{icon:F[e.identifier],color:Z[e.identifier],className:"absolute -bottom-1 right-1 shadow-reaction",textSize:"text-[8px]",iconClassName:"!w-[13px] !h-[13px]",buttonSize:"w-[14px] h-[14px]",disabled:!0})]}),(0,n.jsx)("span",{className:"mx-2 text-sm text-slate-700",children:i})]},e.id)})})]}):(0,n.jsxs)("div",{className:"mt-24 flex h-[30vh] max-w-[288px] flex-col items-center justify-start p-3",children:[(0,n.jsx)(v.Z,{variant:"duotone",icon:"messageExclamation",size:32,primaryColor:"#6366F1",secondaryColor:"#A5B4FC"}),(0,n.jsx)("span",{className:"mb-0.5 mt-[12px] whitespace-pre-line text-base font-semibold text-slate-500",children:"There are 0 reactions!"}),(0,n.jsx)("span",{className:"text-center text-sm text-slate-500",children:_?"Share your ".concat(G):"Leave a reaction for the author"})]}))]})]})}},5827:function(e,t,i){"use strict";i.d(t,{Z:function(){return _}});var n=i(24246),l=i(23599),s=i(93570),o=i(54062),a=i(14164),r=i(38579),d=i.n(r),c=i(86677),u=i(27378),m=i(16125),x=i(22967),p=i(57075),h=i(56985),v=i(79011),g=i(42171),f=i(65801),b=i(3770),_=e=>{let{isEmbedded:t=!1,...i}=e,r=(0,m.I0)(),_=(0,c.useRouter)(),[w,j]=(0,u.useState)(!1),[y,N]=(0,u.useState)(!1),[k,C]=(0,u.useState)(!1),[S,I]=(0,u.useState)(null),{data:L}=(0,o.ZP)(),{token:T}=(0,m.v9)(p.G8),{token:E}=(0,s.r_)(),Z="true"===_.query.inContextViewer,F=!!T&&L,B=navigator.userAgent.includes("Teams/");t&&(F=F&&E),(0,u.useEffect)(()=>{F||r((0,h.ST)(i.pk)).then(l.SI).then(e=>{var t,i;I(null==e?void 0:e.external_id),N(null!==(t=null==e?void 0:e.sso_connection_activated)&&void 0!==t&&t),C(null!==(i=null==e?void 0:e.force_sso)&&void 0!==i&&i)}).catch(e=>{console.error("Error fetching super organization SSO info: ".concat(e)),N(!1),C(!1)})},[F,i.pk,i.type]),(0,u.useEffect)(()=>{F&&("page"==i.type?(0,g.L9)("user_viewed_unshared_page",{page_id:i.pk}):(0,g.L9)("user_viewed_unshared_scribe",{scribe_id:i.pk}))},[F,i.pk,i.type]),(0,u.useEffect)(()=>{Z&&(0,a.M)()},[Z]);let D=(0,u.useMemo)(()=>F?i.isRequestable?"Please request access to view this document or ensure the owner has given you the appropriate document permissions.":"":"Hi there! The owner of this document has required viewers to be signed in. In order to view it, please log in and ensure the owner has given you the appropriate access.",[F,i.isRequestable]);return(0,n.jsxs)("div",{id:"scribe-file-viewer",className:(0,x.cn)("h-full w-full overflow-hidden bg-white",{"pt-24":Z}),children:[!t&&(0,n.jsx)(b.Z,{showBackButton:!0,hideSearchBar:!0,hideTeamDropdown:!0}),(0,n.jsx)("div",{className:"flex h-4/5 w-full flex-row items-center justify-center",children:(0,n.jsxs)("div",{className:"m-0 flex w-1/2 flex-col items-start justify-center p-5 mobile-lg:w-4/5",children:[(0,n.jsx)(d(),{height:48,width:48,src:"/images/extensionLogo.svg",alt:"extension logo",className:"mb-6 h-full w-10"}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-black",children:F?"No access to this document.":"Welcome to Scribe"}),(0,n.jsx)("h3",{className:"text-lg font-normal text-black",children:D}),(0,n.jsx)("div",{className:"mt-5 flex w-full mobile-lg:flex-col mobile-lg:space-y-4",children:F?(0,n.jsxs)(n.Fragment,{children:[i.isRequestable&&(0,n.jsx)(n.Fragment,{children:w?(0,n.jsx)("span",{className:"mr-4 mt-2 flex bg-opacity-70 text-lg text-blueGray-400",children:"Requested Access"}):(0,n.jsx)(f.Z,{onClick:()=>{(0,g.L9)("requested_access_to_scribe",{scribe_id:i.pk}),j(!0),r((0,h.do)(i.pk))},variant:"primary",className:"mr-10 min-w-[200px] mobile-lg:mr-0",children:"Request Access"})}),(0,n.jsx)(f.Z,{className:"min-w-[200px]",onClick:()=>{t?window.open("/workspace"):_.push("/workspace")},variant:"secondary",children:"Back to Workspace"})]}):(0,n.jsx)("div",{className:"flex flex-col gap-4",children:(0,n.jsxs)("div",{className:"flex flex-col-reverse gap-4 xs:flex-row",children:[!k&&(0,n.jsx)(f.Z,{className:"min-w-[160px]",onClick:()=>{if(t&&!B)window.open("/signin?refreshCookie=true&fromEmbed=true");else if(B)window.location.href="/signin?app=desktop";else{let e=encodeURIComponent(_.asPath);_.push("/signin?documentSlug=".concat(e)).then(()=>r(p.Gb.actions.setAuthenticatedRedirectUrl({url:_.asPath})))}},variant:"primary",children:"Sign In"}),y&&(0,n.jsx)(f.Z,{className:"min-w-[160px]",onClick:()=>{let e=encodeURIComponent(_.asPath),i="".concat(v.G,"workos_sso/auth/?client_type=web&document_slug=").concat(e);i+=(S?"&super_organization=".concat(S):"")+(t?"&from_embed=true":""),window.open(i,"_blank");let n=setInterval(()=>{F||(clearInterval(n),window.location.reload())},1e3)},variant:"primary",disabled:!S,children:"Sign In with SSO"})]})})})]})})]})}},67840:function(e,t,i){"use strict";i.d(t,{Z:function(){return y}});var n=i(24246),l=i(43425),s=i(83424),o=i(61320),a=i.n(o),r=i(38579),d=i.n(r),c=i(83644),u=i(35693),m=i(22967),x=i(42171),p=i(21785),h=e=>{let{user:t}=e,i="".concat(t.first_name," ").concat(t.last_name);return(0,n.jsxs)("div",{className:"flex cursor-default items-center gap-2",children:[(0,n.jsx)(c.qE,{size:"xs",uuid:t.id,children:(null==t?void 0:t.deactivation_date)?(0,n.jsx)(c.aV,{faIcon:"faUser",size:"xs"}):t.profile_picture_url?(0,n.jsx)(d(),{src:t.profile_picture_url,width:20,height:20,alt:i}):i}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,n.jsxs)("span",{className:"max-w-[125px] truncate text-xs text-white",children:[t.first_name," ",t.last_name]}),(0,n.jsx)("span",{className:"shrink-0 text-right text-xs font-normal text-slate-400",children:a()(t.viewed_at).fromNow()})]})]})},v=function(){let{documentViews:e,onClick:t=()=>null,docType:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{documentViews:null,canEdit:!1,variant:"lightBackground",docType:"Scribe"};if(!e||0===e.viewer_count)return null;let{viewers:l,view_count:o}=e,r=(l?[...l].sort((e,t)=>a()(e.viewed_at)<a()(t.viewed_at)?1:-1):[]).slice(0,5),v=(0,m.cn)("flex h-full items-center justify-center py-0.5",{"cursor-pointer":t,"cursor-default":!t});return(0,n.jsx)("div",{className:"ml-2",children:(0,n.jsx)(p.Z,{offset:[0,28],animated:!1,appearance:"bottom",content:(0,n.jsxs)("div",{className:"flex cursor-default flex-col gap-2 sm:w-60",children:[(0,n.jsx)("span",{className:"font-normal text-slate-400",children:"Team Viewers"}),(null==l?void 0:l.length)>0&&(0,n.jsx)("div",{className:"flex flex-col gap-1",children:r.map(e=>(0,n.jsx)(h,{user:e},e.id))}),o&&(0,n.jsxs)("span",{className:"text-xs text-slate-400",children:[(0,s.Qv)(o)," total view",1===o?"":"s"]}),(null==l?void 0:l.length)===0&&(0,n.jsx)("span",{className:"text-sm text-white",children:"Viewers in your organization will be shown here."})]}),variant:"dark",className:"m-4",children:(0,n.jsx)("div",{className:v,onMouseEnter:()=>{(0,x.L9)("viewer_display_hover",{num_viewers:l.length,view_count:o,doc_type:i})},children:l.length>0&&(0,n.jsx)(u.H,{hasOverflow:!0,size:"sm",className:"",children:r.map(e=>(0,n.jsx)(c.qE,{uuid:e.id,size:"sm",children:e.profile_picture_url?(0,n.jsx)(d(),{src:e.profile_picture_url,width:24,height:24,alt:e.first_name}):e.first_name},e.id))})})})})},g=i(83469),f=i(22107),b=i(27378),_=i(48407),w=i(1581),j=function(){let{documentViews:e,onClick:t=()=>null,insightsShown:i,docType:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{documentViews:null,canEdit:!1,variant:"lightBackground",docType:"Scribe"},[o,r]=(0,b.useState)(void 0),[p,v]=(0,b.useState)(!0);if(!e||0===e.viewer_count)return null;let{viewers:j,view_count:y}=e,N=j?[...j].sort((e,t)=>a()(e.viewed_at)<a()(t.viewed_at)?1:-1):[],k=N.slice(0,5),C=(0,m.cn)("flex h-full items-center justify-center py-0.5",{"cursor-pointer":t,"cursor-default":!t}),S=e=>{v(!1),setTimeout(()=>{v(!0)},e)},I=()=>{r(!1),S(500),t()};return(0,n.jsx)(w.pn,{children:(0,n.jsxs)(w.u,{open:p&&o,onOpenChange:e=>{r(e)},children:[(0,n.jsx)(w.aJ,{children:(0,n.jsx)("div",{className:C,onMouseEnter:()=>{(0,x.L9)("viewer_display_hover",{num_viewers:j.length,view_count:y,doc_type:l})},children:(0,n.jsx)(_.z,{variant:"secondary",onClick:I,className:(0,m.cn)("py-0 pl-0",{"ring-1 ring-slate-700 hover:ring-2 hover:ring-slate-100/50 hover:ring-offset-1 hover:ring-offset-slate-700 group-hover:text-slate-900":i}),"aria-label":i?"Hide Version History":"Show Version History",icon:i?f.mfE:g.mfE,iconPosition:"right",iconProps:{className:(0,m.cn)("hover:text-slate-900",{"text-slate-600 ":!i,"text-slate-700 ":i})},children:(0,n.jsxs)("div",{className:"width-full flex h-[34px] items-center justify-center",children:[j.length>0&&(0,n.jsx)(u.H,{hasOverflow:!0,size:"sm",className:"",children:N.map(e=>(0,n.jsx)(c.qE,{size:"sm",uuid:e.id,children:e.deactivation_date?(0,n.jsx)(c.aV,{faIcon:"faUser",size:"sm"}):e.profile_picture_url?(0,n.jsx)(d(),{src:e.profile_picture_url,width:24,height:24,alt:e.first_name}):e.first_name},e.id))}),(0,n.jsx)("div",{className:"mr-1 h-[32px] w-[1px] bg-slate-200"})]})})})}),(0,n.jsx)(w._v,{className:"h-auto border-none",sideOffset:20,children:(0,n.jsxs)("div",{className:"flex flex-col py-4 sm:w-60",children:[(0,n.jsx)("div",{className:"text-sm font-medium leading-5",children:"Recent Team Views"}),(0,n.jsxs)("span",{className:"pb-3 pt-[2px] text-xs font-normal leading-4 text-slate-500",children:[(0,s.Qv)(y)," Total"]}),(0,n.jsx)("div",{className:"flex flex-col gap-2",children:k.map(e=>(0,n.jsx)(h,{user:e},e.id))}),(0,n.jsx)(_.z,{darkMode:!0,variant:"ghost",className:"mt-4",onMouseDown:I,children:i?"Hide Insights":"View Insights"})]})})]})})},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{documentViews:null,canEdit:!1,variant:"lightBackground",onClick:()=>null,forceA:!1,docType:"Scribe"},{canEdit:t,forceA:i}=e,s=(0,l.Z)("doc_insights"),o=(0,l.Z)("viewer_display_should_toggle_insights");return s&&t&&o&&!i?(0,n.jsx)(j,{...e}):(0,n.jsx)(v,{...e})}},16713:function(e,t,i){"use strict";function n(e){if(e<=0)return"0 seconds";if(e<=6e4){let t=Math.ceil(e/1e3);return"".concat(t," ").concat(1===t?"second":"seconds")}let t=Math.ceil(e/6e4);return"".concat(t," ").concat(1===t?"minute":"minutes")}i.d(t,{Z:function(){return n}})},23733:function(e){e.exports={ContentRowWrapper:"GetScribeButton_ContentRowWrapper___aZbO",between:"GetScribeButton_between__TOwUI",end:"GetScribeButton_end__lQj7s",centered:"GetScribeButton_centered__CD5Kp",flexed:"GetScribeButton_flexed__iybG_",fullWidth:"GetScribeButton_fullWidth__tz3m5",ContentColumnWrapper:"GetScribeButton_ContentColumnWrapper__un2ne",__next:"GetScribeButton___next__r0_6n","doorbell-button":"GetScribeButton_doorbell-button___941F",UserMessage:"GetScribeButton_UserMessage__kaNbz",Error:"GetScribeButton_Error__uO1iB",UserMessageWrapper:"GetScribeButton_UserMessageWrapper__pEM4n",noselect:"GetScribeButton_noselect__YhMTP",DownloadButton:"GetScribeButton_DownloadButton__6uNlL",smaller:"GetScribeButton_smaller__2fS3g"}},70752:function(e){e.exports={ContentRowWrapper:"NavigationBar_ContentRowWrapper__SID60",between:"NavigationBar_between__4uxU7",end:"NavigationBar_end___cjhF",centered:"NavigationBar_centered__V7ZJr",flexed:"NavigationBar_flexed__9aMj0",fullWidth:"NavigationBar_fullWidth__PDoD0",ContentColumnWrapper:"NavigationBar_ContentColumnWrapper__QFJR6",__next:"NavigationBar___next__DmDQH","doorbell-button":"NavigationBar_doorbell-button__vbz84",UserMessage:"NavigationBar_UserMessage__YQjbw",Error:"NavigationBar_Error__1WCEN",UserMessageWrapper:"NavigationBar_UserMessageWrapper__DrKkL",noselect:"NavigationBar_noselect__4NpsV",navBarBehind:"NavigationBar_navBarBehind__1TGqu",navBarOuter:"NavigationBar_navBarOuter__LhQWJ",banner:"NavigationBar_banner__LJTyS",center:"NavigationBar_center__BkXDV",promoBanner:"NavigationBar_promoBanner__RKvyd",bannerText:"NavigationBar_bannerText__hIC14",bannerX:"NavigationBar_bannerX__KYFOM",bannerLink:"NavigationBar_bannerLink__C7yK_",sticky:"NavigationBar_sticky__iMdcO",moveDown:"NavigationBar_moveDown__5WtPp",NavBarInner:"NavigationBar_NavBarInner__d8Hn5",transparentTop:"NavigationBar_transparentTop__62G6q",transparentWhiteBg:"NavigationBar_transparentWhiteBg__NwUu7",navBarInner:"NavigationBar_navBarInner__W_00t",logoContainer:"NavigationBar_logoContainer__16AGz",navBarLinks:"NavigationBar_navBarLinks__3DjKY",navBarLink:"NavigationBar_navBarLink__hDOpD",navBarButton:"NavigationBar_navBarButton___BosL",navigationBarGetScribeButton:"NavigationBar_navigationBarGetScribeButton__jGKKN",fadeIn:"NavigationBar_fadeIn__kUNro",fadeOut:"NavigationBar_fadeOut__rIoSr",mobileNavBar:"NavigationBar_mobileNavBar__mmO7Y",mobileNavBarCustomLogo:"NavigationBar_mobileNavBarCustomLogo__AqnOu",mobileNavBarLogo:"NavigationBar_mobileNavBarLogo__Fe8xk",navBarLogo:"NavigationBar_navBarLogo__VuIzV",mobileNavBarItem:"NavigationBar_mobileNavBarItem__dc_3O",mobileNavBarLinks:"NavigationBar_mobileNavBarLinks__D_A1w",slide:"NavigationBar_slide__Hkm5p",mobileMenuItemsChildrenWrapper:"NavigationBar_mobileMenuItemsChildrenWrapper__Zc_J5",customLogo:"NavigationBar_customLogo__b8Quo",logo:"NavigationBar_logo__zTQoP",icon:"NavigationBar_icon__gPDAB",menuToggle:"NavigationBar_menuToggle__Lse5l",menutoggle:"NavigationBar_menutoggle__Ca_fC",iconMenuToggle:"NavigationBar_iconMenuToggle__1fV3d",svgMenuToggle:"NavigationBar_svgMenuToggle__FJmjP",line:"NavigationBar_line__ylW2z","line-1":"NavigationBar_line-1__yLsX0","line-3":"NavigationBar_line-3__RVNWg","menu-toggle":"NavigationBar_menu-toggle__PjHAl",opened:"NavigationBar_opened__1Inj7","svg-menu-toggle":"NavigationBar_svg-menu-toggle__VIGuj","line-2":"NavigationBar_line-2__3NPgM",screenReaderText:"NavigationBar_screenReaderText__rnpMq"}},97146:function(e){e.exports={ContentRowWrapper:"NotFoundFileViewer_ContentRowWrapper__FU6X6",between:"NotFoundFileViewer_between__rqx8K",end:"NotFoundFileViewer_end__YL7vQ",centered:"NotFoundFileViewer_centered__Zui7i",flexed:"NotFoundFileViewer_flexed__Ofn8B",fullWidth:"NotFoundFileViewer_fullWidth__Br_ZI",ContentColumnWrapper:"NotFoundFileViewer_ContentColumnWrapper__aNfmD",__next:"NotFoundFileViewer___next__TllIb","doorbell-button":"NotFoundFileViewer_doorbell-button__AAgH4",UserMessage:"NotFoundFileViewer_UserMessage__O_W0q",Error:"NotFoundFileViewer_Error__c73pL",UserMessageWrapper:"NotFoundFileViewer_UserMessageWrapper__cPTo8",noselect:"NotFoundFileViewer_noselect__UywZ1",MainContainer:"NotFoundFileViewer_MainContainer__wM1Py",MetadataContainerRow:"NotFoundFileViewer_MetadataContainerRow__zYF6x",UniversalNavbarBackIcon:"NotFoundFileViewer_UniversalNavbarBackIcon__YzCjc",CTAContainer:"NotFoundFileViewer_CTAContainer__T6UFN",InvalidScribeURLWrapper:"NotFoundFileViewer_InvalidScribeURLWrapper__JTGR3",NotFoundSubtitle:"NotFoundFileViewer_NotFoundSubtitle__lajl5",NotFoundHeader:"NotFoundFileViewer_NotFoundHeader__1_pEN",navBarLogo:"NotFoundFileViewer_navBarLogo__QOMKx",leaveButtonLoggedOut:"NotFoundFileViewer_leaveButtonLoggedOut__YuJxb",leaveButtonLoggedIn:"NotFoundFileViewer_leaveButtonLoggedIn__g4DqM",buttonContainer:"NotFoundFileViewer_buttonContainer__Jg7k8",openInDesktopButton:"NotFoundFileViewer_openInDesktopButton__bkLXA",desktopIcon:"NotFoundFileViewer_desktopIcon__ZzNps"}},2786:function(e){e.exports={cursiveMarkContainer:"UniversalNavBar_cursiveMarkContainer__UAdW5",cursiveMark:"UniversalNavBar_cursiveMark__gvLYP",documentHeaderBar:"UniversalNavBar_documentHeaderBar__vfxsF",withBanner:"UniversalNavBar_withBanner__JsIhD",banner:"UniversalNavBar_banner__3xkeS"}}}]);